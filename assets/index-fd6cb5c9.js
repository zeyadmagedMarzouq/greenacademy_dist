function NC(n,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Yo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var u_={exports:{}},qd={},d_={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),SC=Symbol.for("react.fragment"),IC=Symbol.for("react.strict_mode"),CC=Symbol.for("react.profiler"),AC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),PC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),DC=Symbol.for("react.memo"),OC=Symbol.for("react.lazy"),Uv=Symbol.iterator;function LC(n){return n===null||typeof n!="object"?null:(n=Uv&&n[Uv]||n["@@iterator"],typeof n=="function"?n:null)}var h_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f_=Object.assign,m_={};function Xo(n,t,r){this.props=n,this.context=t,this.refs=m_,this.updater=r||h_}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Xo.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function p_(){}p_.prototype=Xo.prototype;function wg(n,t,r){this.props=n,this.context=t,this.refs=m_,this.updater=r||h_}var bg=wg.prototype=new p_;bg.constructor=wg;f_(bg,Xo.prototype);bg.isPureReactComponent=!0;var $v=Array.isArray,g_=Object.prototype.hasOwnProperty,_g={current:null},y_={key:!0,ref:!0,__self:!0,__source:!0};function v_(n,t,r){var s,i={},o=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)g_.call(t,s)&&!y_.hasOwnProperty(s)&&(i[s]=t[s]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(n&&n.defaultProps)for(s in c=n.defaultProps,c)i[s]===void 0&&(i[s]=c[s]);return{$$typeof:Xl,type:n,key:o,ref:l,props:i,_owner:_g.current}}function VC(n,t){return{$$typeof:Xl,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function Tg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xl}function MC(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return t[r]})}var Bv=/\/+/g;function xf(n,t){return typeof n=="object"&&n!==null&&n.key!=null?MC(""+n.key):t.toString(36)}function yu(n,t,r,s,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case Xl:case jC:l=!0}}if(l)return l=n,i=i(l),n=s===""?"."+xf(l,0):s,$v(i)?(r="",n!=null&&(r=n.replace(Bv,"$&/")+"/"),yu(i,t,r,"",function(d){return d})):i!=null&&(Tg(i)&&(i=VC(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Bv,"$&/")+"/")+n)),t.push(i)),1;if(l=0,s=s===""?".":s+":",$v(n))for(var c=0;c<n.length;c++){o=n[c];var u=s+xf(o,c);l+=yu(o,t,r,u,i)}else if(u=LC(n),typeof u=="function")for(n=u.call(n),c=0;!(o=n.next()).done;)o=o.value,u=s+xf(o,c++),l+=yu(o,t,r,u,i);else if(o==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Fc(n,t,r){if(n==null)return n;var s=[],i=0;return yu(n,s,"","",function(o){return t.call(r,o,i++)}),s}function FC(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var qt={current:null},vu={transition:null},UC={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:vu,ReactCurrentOwner:_g};function x_(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Fc,forEach:function(n,t,r){Fc(n,function(){t.apply(this,arguments)},r)},count:function(n){var t=0;return Fc(n,function(){t++}),t},toArray:function(n){return Fc(n,function(t){return t})||[]},only:function(n){if(!Tg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};fe.Component=Xo;fe.Fragment=SC;fe.Profiler=CC;fe.PureComponent=wg;fe.StrictMode=IC;fe.Suspense=RC;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;fe.act=x_;fe.cloneElement=function(n,t,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=f_({},n.props),i=n.key,o=n.ref,l=n._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=_g.current),t.key!==void 0&&(i=""+t.key),n.type&&n.type.defaultProps)var c=n.type.defaultProps;for(u in t)g_.call(t,u)&&!y_.hasOwnProperty(u)&&(s[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}return{$$typeof:Xl,type:n.type,key:i,ref:o,props:s,_owner:l}};fe.createContext=function(n){return n={$$typeof:kC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:AC,_context:n},n.Consumer=n};fe.createElement=v_;fe.createFactory=function(n){var t=v_.bind(null,n);return t.type=n,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(n){return{$$typeof:PC,render:n}};fe.isValidElement=Tg;fe.lazy=function(n){return{$$typeof:OC,_payload:{_status:-1,_result:n},_init:FC}};fe.memo=function(n,t){return{$$typeof:DC,type:n,compare:t===void 0?null:t}};fe.startTransition=function(n){var t=vu.transition;vu.transition={};try{n()}finally{vu.transition=t}};fe.unstable_act=x_;fe.useCallback=function(n,t){return qt.current.useCallback(n,t)};fe.useContext=function(n){return qt.current.useContext(n)};fe.useDebugValue=function(){};fe.useDeferredValue=function(n){return qt.current.useDeferredValue(n)};fe.useEffect=function(n,t){return qt.current.useEffect(n,t)};fe.useId=function(){return qt.current.useId()};fe.useImperativeHandle=function(n,t,r){return qt.current.useImperativeHandle(n,t,r)};fe.useInsertionEffect=function(n,t){return qt.current.useInsertionEffect(n,t)};fe.useLayoutEffect=function(n,t){return qt.current.useLayoutEffect(n,t)};fe.useMemo=function(n,t){return qt.current.useMemo(n,t)};fe.useReducer=function(n,t,r){return qt.current.useReducer(n,t,r)};fe.useRef=function(n){return qt.current.useRef(n)};fe.useState=function(n){return qt.current.useState(n)};fe.useSyncExternalStore=function(n,t,r){return qt.current.useSyncExternalStore(n,t,r)};fe.useTransition=function(){return qt.current.useTransition()};fe.version="18.3.1";d_.exports=fe;var I=d_.exports;const je=Yo(I),w_=NC({__proto__:null,default:je},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=I,BC=Symbol.for("react.element"),zC=Symbol.for("react.fragment"),qC=Object.prototype.hasOwnProperty,HC=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WC={key:!0,ref:!0,__self:!0,__source:!0};function b_(n,t,r){var s,i={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)qC.call(t,s)&&!WC.hasOwnProperty(s)&&(i[s]=t[s]);if(n&&n.defaultProps)for(s in t=n.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:BC,type:n,key:o,ref:l,props:i,_owner:HC.current}}qd.Fragment=zC;qd.jsx=b_;qd.jsxs=b_;u_.exports=qd;var a=u_.exports,jm={},__={exports:{}},pn={},T_={exports:{}},E_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(q,K){var ee=q.length;q.push(K);e:for(;0<ee;){var te=ee-1>>>1,ce=q[te];if(0<i(ce,K))q[te]=K,q[ee]=ce,ee=te;else break e}}function r(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var K=q[0],ee=q.pop();if(ee!==K){q[0]=ee;e:for(var te=0,ce=q.length,ne=ce>>>1;te<ne;){var Dt=2*(te+1)-1,vn=q[Dt],Ot=Dt+1,rn=q[Ot];if(0>i(vn,ee))Ot<ce&&0>i(rn,vn)?(q[te]=rn,q[Ot]=ee,te=Ot):(q[te]=vn,q[Dt]=ee,te=Dt);else if(Ot<ce&&0>i(rn,ee))q[te]=rn,q[Ot]=ee,te=Ot;else break e}}return K}function i(q,K){var ee=q.sortIndex-K.sortIndex;return ee!==0?ee:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var u=[],d=[],f=1,m=null,p=3,y=!1,w=!1,T=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var K=r(d);K!==null;){if(K.callback===null)s(d);else if(K.startTime<=q)s(d),K.sortIndex=K.expirationTime,t(u,K);else break;K=r(d)}}function N(q){if(T=!1,x(q),!w)if(r(u)!==null)w=!0,oe(P);else{var K=r(d);K!==null&&ve(N,K.startTime-q)}}function P(q,K){w=!1,T&&(T=!1,b(_),_=-1),y=!0;var ee=p;try{for(x(K),m=r(u);m!==null&&(!(m.expirationTime>K)||q&&!A());){var te=m.callback;if(typeof te=="function"){m.callback=null,p=m.priorityLevel;var ce=te(m.expirationTime<=K);K=n.unstable_now(),typeof ce=="function"?m.callback=ce:m===r(u)&&s(u),x(K)}else s(u);m=r(u)}if(m!==null)var ne=!0;else{var Dt=r(d);Dt!==null&&ve(N,Dt.startTime-K),ne=!1}return ne}finally{m=null,p=ee,y=!1}}var O=!1,S=null,_=-1,C=5,R=-1;function A(){return!(n.unstable_now()-R<C)}function L(){if(S!==null){var q=n.unstable_now();R=q;var K=!0;try{K=S(!0,q)}finally{K?D():(O=!1,S=null)}}else O=!1}var D;if(typeof v=="function")D=function(){v(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=L,D=function(){Z.postMessage(null)}}else D=function(){j(L,0)};function oe(q){S=q,O||(O=!0,D())}function ve(q,K){_=j(function(){q(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){w||y||(w=!0,oe(P))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(q){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ee=p;p=K;try{return q()}finally{p=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=p;p=q;try{return K()}finally{p=ee}},n.unstable_scheduleCallback=function(q,K,ee){var te=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,q={id:f++,callback:K,priorityLevel:q,startTime:ee,expirationTime:ce,sortIndex:-1},ee>te?(q.sortIndex=ee,t(d,q),r(u)===null&&q===r(d)&&(T?(b(_),_=-1):T=!0,ve(N,ee-te))):(q.sortIndex=ce,t(u,q),w||y||(w=!0,oe(P))),q},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(q){var K=p;return function(){var ee=p;p=K;try{return q.apply(this,arguments)}finally{p=ee}}}})(E_);T_.exports=E_;var GC=T_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC=I,fn=GC;function H(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N_=new Set,gl={};function Di(n,t){Ao(n,t),Ao(n+"Capture",t)}function Ao(n,t){for(gl[n]=t,n=0;n<t.length;n++)N_.add(t[n])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=Object.prototype.hasOwnProperty,QC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},qv={};function YC(n){return Sm.call(qv,n)?!0:Sm.call(zv,n)?!1:QC.test(n)?qv[n]=!0:(zv[n]=!0,!1)}function XC(n,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function JC(n,t,r,s){if(t===null||typeof t>"u"||XC(n,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ht(n,t,r,s,i,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=n,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){vt[n]=new Ht(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];vt[t]=new Ht(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){vt[n]=new Ht(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){vt[n]=new Ht(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){vt[n]=new Ht(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){vt[n]=new Ht(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){vt[n]=new Ht(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){vt[n]=new Ht(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){vt[n]=new Ht(n,5,!1,n.toLowerCase(),null,!1,!1)});var Eg=/[\-:]([a-z])/g;function Ng(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(Eg,Ng);vt[t]=new Ht(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(Eg,Ng);vt[t]=new Ht(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(Eg,Ng);vt[t]=new Ht(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){vt[n]=new Ht(n,1,!1,n.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){vt[n]=new Ht(n,1,!1,n.toLowerCase(),null,!0,!0)});function jg(n,t,r,s){var i=vt.hasOwnProperty(t)?vt[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JC(t,r,i,s)&&(r=null),s||i===null?YC(t)&&(r===null?n.removeAttribute(t):n.setAttribute(t,""+r)):i.mustUseProperty?n[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?n.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?n.setAttributeNS(s,t,r):n.setAttribute(t,r))))}var Gr=KC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uc=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Sg=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),j_=Symbol.for("react.provider"),S_=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),Cg=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),I_=Symbol.for("react.offscreen"),Hv=Symbol.iterator;function Na(n){return n===null||typeof n!="object"?null:(n=Hv&&n[Hv]||n["@@iterator"],typeof n=="function"?n:null)}var ze=Object.assign,wf;function Ua(n){if(wf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wf=t&&t[1]||""}return`
`+wf+n}var bf=!1;function _f(n,t){if(!n||bf)return"";bf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(n,[],t)}else{try{t.call()}catch(d){s=d}n.call(t.prototype)}else{try{throw Error()}catch(d){s=d}n()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=s.stack.split(`
`),l=i.length-1,c=o.length-1;1<=l&&0<=c&&i[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==o[c]){var u=`
`+i[l].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=l&&0<=c);break}}}finally{bf=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Ua(n):""}function ZC(n){switch(n.tag){case 5:return Ua(n.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return n=_f(n.type,!1),n;case 11:return n=_f(n.type.render,!1),n;case 1:return n=_f(n.type,!0),n;default:return""}}function km(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case to:return"Fragment";case eo:return"Portal";case Im:return"Profiler";case Sg:return"StrictMode";case Cm:return"Suspense";case Am:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case S_:return(n.displayName||"Context")+".Consumer";case j_:return(n._context.displayName||"Context")+".Provider";case Ig:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Cg:return t=n.displayName||null,t!==null?t:km(n.type)||"Memo";case is:t=n._payload,n=n._init;try{return km(n(t))}catch{}}return null}function eA(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return km(t);case 8:return t===Sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ps(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function C_(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tA(n){var t=C_(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),s=""+n[t];if(!n.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(n,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function $c(n){n._valueTracker||(n._valueTracker=tA(n))}function A_(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return n&&(s=C_(n)?n.checked?"true":"false":n.value),n=s,n!==r?(t.setValue(n),!0):!1}function $u(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Pm(n,t){var r=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function Wv(n,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ps(t.value!=null?t.value:r),n._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k_(n,t){t=t.checked,t!=null&&jg(n,"checked",t,!1)}function Rm(n,t){k_(n,t);var r=Ps(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Dm(n,t.type,r):t.hasOwnProperty("defaultValue")&&Dm(n,t.type,Ps(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function Gv(n,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,r||t===n.value||(n.value=t),n.defaultValue=t}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function Dm(n,t,r){(t!=="number"||$u(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var $a=Array.isArray;function vo(n,t,r,s){if(n=n.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<n.length;r++)i=t.hasOwnProperty("$"+n[r].value),n[r].selected!==i&&(n[r].selected=i),i&&s&&(n[r].defaultSelected=!0)}else{for(r=""+Ps(r),t=null,i=0;i<n.length;i++){if(n[i].value===r){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function Om(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Kv(n,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if($a(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}n._wrapperState={initialValue:Ps(r)}}function P_(n,t){var r=Ps(t.value),s=Ps(t.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),t.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),s!=null&&(n.defaultValue=""+s)}function Qv(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function R_(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lm(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?R_(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Bc,D_=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return n(t,r,s,i)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function yl(n,t){if(t){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=t;return}}n.textContent=t}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nA=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(n){nA.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Xa[t]=Xa[n]})});function O_(n,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Xa.hasOwnProperty(n)&&Xa[n]?(""+t).trim():t+"px"}function L_(n,t){n=n.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=O_(r,t[r],s);r==="float"&&(r="cssFloat"),s?n.setProperty(r,i):n[r]=i}}var rA=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vm(n,t){if(t){if(rA[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Mm(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fm=null;function Ag(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Um=null,xo=null,wo=null;function Yv(n){if(n=ec(n)){if(typeof Um!="function")throw Error(H(280));var t=n.stateNode;t&&(t=Qd(t),Um(n.stateNode,n.type,t))}}function V_(n){xo?wo?wo.push(n):wo=[n]:xo=n}function M_(){if(xo){var n=xo,t=wo;if(wo=xo=null,Yv(n),t)for(n=0;n<t.length;n++)Yv(t[n])}}function F_(n,t){return n(t)}function U_(){}var Tf=!1;function $_(n,t,r){if(Tf)return n(t,r);Tf=!0;try{return F_(n,t,r)}finally{Tf=!1,(xo!==null||wo!==null)&&(U_(),M_())}}function vl(n,t){var r=n.stateNode;if(r===null)return null;var s=Qd(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var $m=!1;if(Lr)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){$m=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{$m=!1}function sA(n,t,r,s,i,o,l,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(f){this.onError(f)}}var Ja=!1,Bu=null,zu=!1,Bm=null,iA={onError:function(n){Ja=!0,Bu=n}};function oA(n,t,r,s,i,o,l,c,u){Ja=!1,Bu=null,sA.apply(iA,arguments)}function aA(n,t,r,s,i,o,l,c,u){if(oA.apply(this,arguments),Ja){if(Ja){var d=Bu;Ja=!1,Bu=null}else throw Error(H(198));zu||(zu=!0,Bm=d)}}function Oi(n){var t=n,r=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(r=t.return),n=t.return;while(n)}return t.tag===3?r:null}function B_(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Xv(n){if(Oi(n)!==n)throw Error(H(188))}function lA(n){var t=n.alternate;if(!t){if(t=Oi(n),t===null)throw Error(H(188));return t!==n?null:n}for(var r=n,s=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Xv(i),n;if(o===s)return Xv(i),t;o=o.sibling}throw Error(H(188))}if(r.return!==s.return)r=i,s=o;else{for(var l=!1,c=i.child;c;){if(c===r){l=!0,r=i,s=o;break}if(c===s){l=!0,s=i,r=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===r){l=!0,r=o,s=i;break}if(c===s){l=!0,s=o,r=i;break}c=c.sibling}if(!l)throw Error(H(189))}}if(r.alternate!==s)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?n:t}function z_(n){return n=lA(n),n!==null?q_(n):null}function q_(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=q_(n);if(t!==null)return t;n=n.sibling}return null}var H_=fn.unstable_scheduleCallback,Jv=fn.unstable_cancelCallback,cA=fn.unstable_shouldYield,uA=fn.unstable_requestPaint,Ye=fn.unstable_now,dA=fn.unstable_getCurrentPriorityLevel,kg=fn.unstable_ImmediatePriority,W_=fn.unstable_UserBlockingPriority,qu=fn.unstable_NormalPriority,hA=fn.unstable_LowPriority,G_=fn.unstable_IdlePriority,Hd=null,nr=null;function fA(n){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(Hd,n,void 0,(n.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:gA,mA=Math.log,pA=Math.LN2;function gA(n){return n>>>=0,n===0?32:31-(mA(n)/pA|0)|0}var zc=64,qc=4194304;function Ba(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hu(n,t){var r=n.pendingLanes;if(r===0)return 0;var s=0,i=n.suspendedLanes,o=n.pingedLanes,l=r&268435455;if(l!==0){var c=l&~i;c!==0?s=Ba(c):(o&=l,o!==0&&(s=Ba(o)))}else l=r&~i,l!==0?s=Ba(l):o!==0&&(s=Ba(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=s;0<t;)r=31-qn(t),i=1<<r,s|=n[r],t&=~i;return s}function yA(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vA(n,t){for(var r=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-qn(o),c=1<<l,u=i[l];u===-1?(!(c&r)||c&s)&&(i[l]=yA(c,t)):u<=t&&(n.expiredLanes|=c),o&=~c}}function zm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function K_(){var n=zc;return zc<<=1,!(zc&4194240)&&(zc=64),n}function Ef(n){for(var t=[],r=0;31>r;r++)t.push(n);return t}function Jl(n,t,r){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-qn(t),n[t]=r}function xA(n,t){var r=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<r;){var i=31-qn(r),o=1<<i;t[i]=0,s[i]=-1,n[i]=-1,r&=~o}}function Pg(n,t){var r=n.entangledLanes|=t;for(n=n.entanglements;r;){var s=31-qn(r),i=1<<s;i&t|n[s]&t&&(n[s]|=t),r&=~i}}var Te=0;function Q_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Y_,Rg,X_,J_,Z_,qm=!1,Hc=[],vs=null,xs=null,ws=null,xl=new Map,wl=new Map,ls=[],wA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(n,t){switch(n){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function Sa(n,t,r,s,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ec(t),t!==null&&Rg(t)),n):(n.eventSystemFlags|=s,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function bA(n,t,r,s,i){switch(t){case"focusin":return vs=Sa(vs,n,t,r,s,i),!0;case"dragenter":return xs=Sa(xs,n,t,r,s,i),!0;case"mouseover":return ws=Sa(ws,n,t,r,s,i),!0;case"pointerover":var o=i.pointerId;return xl.set(o,Sa(xl.get(o)||null,n,t,r,s,i)),!0;case"gotpointercapture":return o=i.pointerId,wl.set(o,Sa(wl.get(o)||null,n,t,r,s,i)),!0}return!1}function eT(n){var t=ci(n.target);if(t!==null){var r=Oi(t);if(r!==null){if(t=r.tag,t===13){if(t=B_(r),t!==null){n.blockedOn=t,Z_(n.priority,function(){X_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xu(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var r=Hm(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var s=new r.constructor(r.type,r);Fm=s,r.target.dispatchEvent(s),Fm=null}else return t=ec(r),t!==null&&Rg(t),n.blockedOn=r,!1;t.shift()}return!0}function ex(n,t,r){xu(n)&&r.delete(t)}function _A(){qm=!1,vs!==null&&xu(vs)&&(vs=null),xs!==null&&xu(xs)&&(xs=null),ws!==null&&xu(ws)&&(ws=null),xl.forEach(ex),wl.forEach(ex)}function Ia(n,t){n.blockedOn===t&&(n.blockedOn=null,qm||(qm=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,_A)))}function bl(n){function t(i){return Ia(i,n)}if(0<Hc.length){Ia(Hc[0],n);for(var r=1;r<Hc.length;r++){var s=Hc[r];s.blockedOn===n&&(s.blockedOn=null)}}for(vs!==null&&Ia(vs,n),xs!==null&&Ia(xs,n),ws!==null&&Ia(ws,n),xl.forEach(t),wl.forEach(t),r=0;r<ls.length;r++)s=ls[r],s.blockedOn===n&&(s.blockedOn=null);for(;0<ls.length&&(r=ls[0],r.blockedOn===null);)eT(r),r.blockedOn===null&&ls.shift()}var bo=Gr.ReactCurrentBatchConfig,Wu=!0;function TA(n,t,r,s){var i=Te,o=bo.transition;bo.transition=null;try{Te=1,Dg(n,t,r,s)}finally{Te=i,bo.transition=o}}function EA(n,t,r,s){var i=Te,o=bo.transition;bo.transition=null;try{Te=4,Dg(n,t,r,s)}finally{Te=i,bo.transition=o}}function Dg(n,t,r,s){if(Wu){var i=Hm(n,t,r,s);if(i===null)Df(n,t,s,Gu,r),Zv(n,s);else if(bA(i,n,t,r,s))s.stopPropagation();else if(Zv(n,s),t&4&&-1<wA.indexOf(n)){for(;i!==null;){var o=ec(i);if(o!==null&&Y_(o),o=Hm(n,t,r,s),o===null&&Df(n,t,s,Gu,r),o===i)break;i=o}i!==null&&s.stopPropagation()}else Df(n,t,s,null,r)}}var Gu=null;function Hm(n,t,r,s){if(Gu=null,n=Ag(s),n=ci(n),n!==null)if(t=Oi(n),t===null)n=null;else if(r=t.tag,r===13){if(n=B_(t),n!==null)return n;n=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Gu=n,null}function tT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dA()){case kg:return 1;case W_:return 4;case qu:case hA:return 16;case G_:return 536870912;default:return 16}default:return 16}}var ms=null,Og=null,wu=null;function nT(){if(wu)return wu;var n,t=Og,r=t.length,s,i="value"in ms?ms.value:ms.textContent,o=i.length;for(n=0;n<r&&t[n]===i[n];n++);var l=r-n;for(s=1;s<=l&&t[r-s]===i[o-s];s++);return wu=i.slice(n,1<s?1-s:void 0)}function bu(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Wc(){return!0}function tx(){return!1}function gn(n){function t(r,s,i,o,l){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in n)n.hasOwnProperty(c)&&(r=n[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wc:tx,this.isPropagationStopped=tx,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),t}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=gn(Jo),Zl=ze({},Jo,{view:0,detail:0}),NA=gn(Zl),Nf,jf,Ca,Wd=ze({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ca&&(Ca&&n.type==="mousemove"?(Nf=n.screenX-Ca.screenX,jf=n.screenY-Ca.screenY):jf=Nf=0,Ca=n),Nf)},movementY:function(n){return"movementY"in n?n.movementY:jf}}),nx=gn(Wd),jA=ze({},Wd,{dataTransfer:0}),SA=gn(jA),IA=ze({},Zl,{relatedTarget:0}),Sf=gn(IA),CA=ze({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),AA=gn(CA),kA=ze({},Jo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),PA=gn(kA),RA=ze({},Jo,{data:0}),rx=gn(RA),DA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VA(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=LA[n])?!!t[n]:!1}function Vg(){return VA}var MA=ze({},Zl,{key:function(n){if(n.key){var t=DA[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=bu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?OA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vg,charCode:function(n){return n.type==="keypress"?bu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FA=gn(MA),UA=ze({},Wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sx=gn(UA),$A=ze({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vg}),BA=gn($A),zA=ze({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),qA=gn(zA),HA=ze({},Wd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),WA=gn(HA),GA=[9,13,27,32],Mg=Lr&&"CompositionEvent"in window,Za=null;Lr&&"documentMode"in document&&(Za=document.documentMode);var KA=Lr&&"TextEvent"in window&&!Za,rT=Lr&&(!Mg||Za&&8<Za&&11>=Za),ix=String.fromCharCode(32),ox=!1;function sT(n,t){switch(n){case"keyup":return GA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function QA(n,t){switch(n){case"compositionend":return iT(t);case"keypress":return t.which!==32?null:(ox=!0,ix);case"textInput":return n=t.data,n===ix&&ox?null:n;default:return null}}function YA(n,t){if(no)return n==="compositionend"||!Mg&&sT(n,t)?(n=nT(),wu=Og=ms=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rT&&t.locale!=="ko"?null:t.data;default:return null}}var XA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!XA[n.type]:t==="textarea"}function oT(n,t,r,s){V_(s),t=Ku(t,"onChange"),0<t.length&&(r=new Lg("onChange","change",null,r,s),n.push({event:r,listeners:t}))}var el=null,_l=null;function JA(n){yT(n,0)}function Gd(n){var t=io(n);if(A_(t))return n}function ZA(n,t){if(n==="change")return t}var aT=!1;if(Lr){var If;if(Lr){var Cf="oninput"in document;if(!Cf){var lx=document.createElement("div");lx.setAttribute("oninput","return;"),Cf=typeof lx.oninput=="function"}If=Cf}else If=!1;aT=If&&(!document.documentMode||9<document.documentMode)}function cx(){el&&(el.detachEvent("onpropertychange",lT),_l=el=null)}function lT(n){if(n.propertyName==="value"&&Gd(_l)){var t=[];oT(t,_l,n,Ag(n)),$_(JA,t)}}function ek(n,t,r){n==="focusin"?(cx(),el=t,_l=r,el.attachEvent("onpropertychange",lT)):n==="focusout"&&cx()}function tk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gd(_l)}function nk(n,t){if(n==="click")return Gd(t)}function rk(n,t){if(n==="input"||n==="change")return Gd(t)}function sk(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Wn=typeof Object.is=="function"?Object.is:sk;function Tl(n,t){if(Wn(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var r=Object.keys(n),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Sm.call(t,i)||!Wn(n[i],t[i]))return!1}return!0}function ux(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dx(n,t){var r=ux(n);n=0;for(var s;r;){if(r.nodeType===3){if(s=n+r.textContent.length,n<=t&&s>=t)return{node:r,offset:t-n};n=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ux(r)}}function cT(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?cT(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function uT(){for(var n=window,t=$u();t instanceof n.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)n=t.contentWindow;else break;t=$u(n.document)}return t}function Fg(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function ik(n){var t=uT(),r=n.focusedElem,s=n.selectionRange;if(t!==r&&r&&r.ownerDocument&&cT(r.ownerDocument.documentElement,r)){if(s!==null&&Fg(r)){if(t=s.start,n=s.end,n===void 0&&(n=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(n,r.value.length);else if(n=(t=r.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var i=r.textContent.length,o=Math.min(s.start,i);s=s.end===void 0?o:Math.min(s.end,i),!n.extend&&o>s&&(i=s,s=o,o=i),i=dx(r,o);var l=dx(r,s);i&&l&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),n.removeAllRanges(),o>s?(n.addRange(t),n.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),n.addRange(t)))}}for(t=[],n=r;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)n=t[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ok=Lr&&"documentMode"in document&&11>=document.documentMode,ro=null,Wm=null,tl=null,Gm=!1;function hx(n,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gm||ro==null||ro!==$u(s)||(s=ro,"selectionStart"in s&&Fg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tl&&Tl(tl,s)||(tl=s,s=Ku(Wm,"onSelect"),0<s.length&&(t=new Lg("onSelect","select",null,t,r),n.push({event:t,listeners:s}),t.target=ro)))}function Gc(n,t){var r={};return r[n.toLowerCase()]=t.toLowerCase(),r["Webkit"+n]="webkit"+t,r["Moz"+n]="moz"+t,r}var so={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},Af={},dT={};Lr&&(dT=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Kd(n){if(Af[n])return Af[n];if(!so[n])return n;var t=so[n],r;for(r in t)if(t.hasOwnProperty(r)&&r in dT)return Af[n]=t[r];return n}var hT=Kd("animationend"),fT=Kd("animationiteration"),mT=Kd("animationstart"),pT=Kd("transitionend"),gT=new Map,fx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(n,t){gT.set(n,t),Di(t,[n])}for(var kf=0;kf<fx.length;kf++){var Pf=fx[kf],ak=Pf.toLowerCase(),lk=Pf[0].toUpperCase()+Pf.slice(1);$s(ak,"on"+lk)}$s(hT,"onAnimationEnd");$s(fT,"onAnimationIteration");$s(mT,"onAnimationStart");$s("dblclick","onDoubleClick");$s("focusin","onFocus");$s("focusout","onBlur");$s(pT,"onTransitionEnd");Ao("onMouseEnter",["mouseout","mouseover"]);Ao("onMouseLeave",["mouseout","mouseover"]);Ao("onPointerEnter",["pointerout","pointerover"]);Ao("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function mx(n,t,r){var s=n.type||"unknown-event";n.currentTarget=r,aA(s,t,void 0,n),n.currentTarget=null}function yT(n,t){t=(t&4)!==0;for(var r=0;r<n.length;r++){var s=n[r],i=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var l=s.length-1;0<=l;l--){var c=s[l],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&i.isPropagationStopped())break e;mx(i,c,d),o=u}else for(l=0;l<s.length;l++){if(c=s[l],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&i.isPropagationStopped())break e;mx(i,c,d),o=u}}}if(zu)throw n=Bm,zu=!1,Bm=null,n}function Re(n,t){var r=t[Jm];r===void 0&&(r=t[Jm]=new Set);var s=n+"__bubble";r.has(s)||(vT(t,n,2,!1),r.add(s))}function Rf(n,t,r){var s=0;t&&(s|=4),vT(r,n,s,t)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function El(n){if(!n[Kc]){n[Kc]=!0,N_.forEach(function(r){r!=="selectionchange"&&(ck.has(r)||Rf(r,!1,n),Rf(r,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Kc]||(t[Kc]=!0,Rf("selectionchange",!1,t))}}function vT(n,t,r,s){switch(tT(t)){case 1:var i=TA;break;case 4:i=EA;break;default:i=Dg}r=i.bind(null,t,r,n),i=void 0,!$m||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(t,r,{capture:!0,passive:i}):n.addEventListener(t,r,!0):i!==void 0?n.addEventListener(t,r,{passive:i}):n.addEventListener(t,r,!1)}function Df(n,t,r,s,i){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=s.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;l=l.return}for(;c!==null;){if(l=ci(c),l===null)return;if(u=l.tag,u===5||u===6){s=o=l;continue e}c=c.parentNode}}s=s.return}$_(function(){var d=o,f=Ag(r),m=[];e:{var p=gT.get(n);if(p!==void 0){var y=Lg,w=n;switch(n){case"keypress":if(bu(r)===0)break e;case"keydown":case"keyup":y=FA;break;case"focusin":w="focus",y=Sf;break;case"focusout":w="blur",y=Sf;break;case"beforeblur":case"afterblur":y=Sf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=SA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=BA;break;case hT:case fT:case mT:y=AA;break;case pT:y=qA;break;case"scroll":y=NA;break;case"wheel":y=WA;break;case"copy":case"cut":case"paste":y=PA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=sx}var T=(t&4)!==0,j=!T&&n==="scroll",b=T?p!==null?p+"Capture":null:p;T=[];for(var v=d,x;v!==null;){x=v;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,b!==null&&(N=vl(v,b),N!=null&&T.push(Nl(v,N,x)))),j)break;v=v.return}0<T.length&&(p=new y(p,w,null,r,f),m.push({event:p,listeners:T}))}}if(!(t&7)){e:{if(p=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",p&&r!==Fm&&(w=r.relatedTarget||r.fromElement)&&(ci(w)||w[Vr]))break e;if((y||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=r.relatedTarget||r.toElement,y=d,w=w?ci(w):null,w!==null&&(j=Oi(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=d),y!==w)){if(T=nx,N="onMouseLeave",b="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(T=sx,N="onPointerLeave",b="onPointerEnter",v="pointer"),j=y==null?p:io(y),x=w==null?p:io(w),p=new T(N,v+"leave",y,r,f),p.target=j,p.relatedTarget=x,N=null,ci(f)===d&&(T=new T(b,v+"enter",w,r,f),T.target=x,T.relatedTarget=j,N=T),j=N,y&&w)t:{for(T=y,b=w,v=0,x=T;x;x=Qi(x))v++;for(x=0,N=b;N;N=Qi(N))x++;for(;0<v-x;)T=Qi(T),v--;for(;0<x-v;)b=Qi(b),x--;for(;v--;){if(T===b||b!==null&&T===b.alternate)break t;T=Qi(T),b=Qi(b)}T=null}else T=null;y!==null&&px(m,p,y,T,!1),w!==null&&j!==null&&px(m,j,w,T,!0)}}e:{if(p=d?io(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var P=ZA;else if(ax(p))if(aT)P=rk;else{P=tk;var O=ek}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=nk);if(P&&(P=P(n,d))){oT(m,P,r,f);break e}O&&O(n,p,d),n==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Dm(p,"number",p.value)}switch(O=d?io(d):window,n){case"focusin":(ax(O)||O.contentEditable==="true")&&(ro=O,Wm=d,tl=null);break;case"focusout":tl=Wm=ro=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,hx(m,r,f);break;case"selectionchange":if(ok)break;case"keydown":case"keyup":hx(m,r,f)}var S;if(Mg)e:{switch(n){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else no?sT(n,r)&&(_="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(rT&&r.locale!=="ko"&&(no||_!=="onCompositionStart"?_==="onCompositionEnd"&&no&&(S=nT()):(ms=f,Og="value"in ms?ms.value:ms.textContent,no=!0)),O=Ku(d,_),0<O.length&&(_=new rx(_,n,null,r,f),m.push({event:_,listeners:O}),S?_.data=S:(S=iT(r),S!==null&&(_.data=S)))),(S=KA?QA(n,r):YA(n,r))&&(d=Ku(d,"onBeforeInput"),0<d.length&&(f=new rx("onBeforeInput","beforeinput",null,r,f),m.push({event:f,listeners:d}),f.data=S))}yT(m,t)})}function Nl(n,t,r){return{instance:n,listener:t,currentTarget:r}}function Ku(n,t){for(var r=t+"Capture",s=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=vl(n,r),o!=null&&s.unshift(Nl(n,o,i)),o=vl(n,t),o!=null&&s.push(Nl(n,o,i))),n=n.return}return s}function Qi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function px(n,t,r,s,i){for(var o=t._reactName,l=[];r!==null&&r!==s;){var c=r,u=c.alternate,d=c.stateNode;if(u!==null&&u===s)break;c.tag===5&&d!==null&&(c=d,i?(u=vl(r,o),u!=null&&l.unshift(Nl(r,u,c))):i||(u=vl(r,o),u!=null&&l.push(Nl(r,u,c)))),r=r.return}l.length!==0&&n.push({event:t,listeners:l})}var uk=/\r\n?/g,dk=/\u0000|\uFFFD/g;function gx(n){return(typeof n=="string"?n:""+n).replace(uk,`
`).replace(dk,"")}function Qc(n,t,r){if(t=gx(t),gx(n)!==t&&r)throw Error(H(425))}function Qu(){}var Km=null,Qm=null;function Ym(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xm=typeof setTimeout=="function"?setTimeout:void 0,hk=typeof clearTimeout=="function"?clearTimeout:void 0,yx=typeof Promise=="function"?Promise:void 0,fk=typeof queueMicrotask=="function"?queueMicrotask:typeof yx<"u"?function(n){return yx.resolve(null).then(n).catch(mk)}:Xm;function mk(n){setTimeout(function(){throw n})}function Of(n,t){var r=t,s=0;do{var i=r.nextSibling;if(n.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){n.removeChild(i),bl(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);bl(t)}function bs(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function vx(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return n;t--}else r==="/$"&&t++}n=n.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),tr="__reactFiber$"+Zo,jl="__reactProps$"+Zo,Vr="__reactContainer$"+Zo,Jm="__reactEvents$"+Zo,pk="__reactListeners$"+Zo,gk="__reactHandles$"+Zo;function ci(n){var t=n[tr];if(t)return t;for(var r=n.parentNode;r;){if(t=r[Vr]||r[tr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(n=vx(n);n!==null;){if(r=n[tr])return r;n=vx(n)}return t}n=r,r=n.parentNode}return null}function ec(n){return n=n[tr]||n[Vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function io(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(H(33))}function Qd(n){return n[jl]||null}var Zm=[],oo=-1;function Bs(n){return{current:n}}function Oe(n){0>oo||(n.current=Zm[oo],Zm[oo]=null,oo--)}function Ce(n,t){oo++,Zm[oo]=n.current,n.current=t}var Rs={},kt=Bs(Rs),Yt=Bs(!1),bi=Rs;function ko(n,t){var r=n.type.contextTypes;if(!r)return Rs;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(n){return n=n.childContextTypes,n!=null}function Yu(){Oe(Yt),Oe(kt)}function xx(n,t,r){if(kt.current!==Rs)throw Error(H(168));Ce(kt,t),Ce(Yt,r)}function xT(n,t,r){var s=n.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(H(108,eA(n)||"Unknown",i));return ze({},r,s)}function Xu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rs,bi=kt.current,Ce(kt,n),Ce(Yt,Yt.current),!0}function wx(n,t,r){var s=n.stateNode;if(!s)throw Error(H(169));r?(n=xT(n,t,bi),s.__reactInternalMemoizedMergedChildContext=n,Oe(Yt),Oe(kt),Ce(kt,n)):Oe(Yt),Ce(Yt,r)}var br=null,Yd=!1,Lf=!1;function wT(n){br===null?br=[n]:br.push(n)}function yk(n){Yd=!0,wT(n)}function zs(){if(!Lf&&br!==null){Lf=!0;var n=0,t=Te;try{var r=br;for(Te=1;n<r.length;n++){var s=r[n];do s=s(!0);while(s!==null)}br=null,Yd=!1}catch(i){throw br!==null&&(br=br.slice(n+1)),H_(kg,zs),i}finally{Te=t,Lf=!1}}return null}var ao=[],lo=0,Ju=null,Zu=0,_n=[],Tn=0,_i=null,_r=1,Tr="";function ri(n,t){ao[lo++]=Zu,ao[lo++]=Ju,Ju=n,Zu=t}function bT(n,t,r){_n[Tn++]=_r,_n[Tn++]=Tr,_n[Tn++]=_i,_i=n;var s=_r;n=Tr;var i=32-qn(s)-1;s&=~(1<<i),r+=1;var o=32-qn(t)+i;if(30<o){var l=i-i%5;o=(s&(1<<l)-1).toString(32),s>>=l,i-=l,_r=1<<32-qn(t)+i|r<<i|s,Tr=o+n}else _r=1<<o|r<<i|s,Tr=n}function Ug(n){n.return!==null&&(ri(n,1),bT(n,1,0))}function $g(n){for(;n===Ju;)Ju=ao[--lo],ao[lo]=null,Zu=ao[--lo],ao[lo]=null;for(;n===_i;)_i=_n[--Tn],_n[Tn]=null,Tr=_n[--Tn],_n[Tn]=null,_r=_n[--Tn],_n[Tn]=null}var dn=null,ln=null,Me=!1,Fn=null;function _T(n,t){var r=En(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=n,t=n.deletions,t===null?(n.deletions=[r],n.flags|=16):t.push(r)}function bx(n,t){switch(n.tag){case 5:var r=n.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,dn=n,ln=bs(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,dn=n,ln=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=_i!==null?{id:_r,overflow:Tr}:null,n.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=En(18,null,null,0),r.stateNode=t,r.return=n,n.child=r,dn=n,ln=null,!0):!1;default:return!1}}function ep(n){return(n.mode&1)!==0&&(n.flags&128)===0}function tp(n){if(Me){var t=ln;if(t){var r=t;if(!bx(n,t)){if(ep(n))throw Error(H(418));t=bs(r.nextSibling);var s=dn;t&&bx(n,t)?_T(s,r):(n.flags=n.flags&-4097|2,Me=!1,dn=n)}}else{if(ep(n))throw Error(H(418));n.flags=n.flags&-4097|2,Me=!1,dn=n}}}function _x(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function Yc(n){if(n!==dn)return!1;if(!Me)return _x(n),Me=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Ym(n.type,n.memoizedProps)),t&&(t=ln)){if(ep(n))throw TT(),Error(H(418));for(;t;)_T(n,t),t=bs(t.nextSibling)}if(_x(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(H(317));e:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(t===0){ln=bs(n.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}n=n.nextSibling}ln=null}}else ln=dn?bs(n.stateNode.nextSibling):null;return!0}function TT(){for(var n=ln;n;)n=bs(n.nextSibling)}function Po(){ln=dn=null,Me=!1}function Bg(n){Fn===null?Fn=[n]:Fn.push(n)}var vk=Gr.ReactCurrentBatchConfig;function Aa(n,t,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var s=r.stateNode}if(!s)throw Error(H(147,n));var i=s,o=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var c=i.refs;l===null?delete c[o]:c[o]=l},t._stringRef=o,t)}if(typeof n!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,n))}return n}function Xc(n,t){throw n=Object.prototype.toString.call(t),Error(H(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function Tx(n){var t=n._init;return t(n._payload)}function ET(n){function t(b,v){if(n){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function r(b,v){if(!n)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function s(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Ns(b,v),b.index=0,b.sibling=null,b}function o(b,v,x){return b.index=x,n?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function l(b){return n&&b.alternate===null&&(b.flags|=2),b}function c(b,v,x,N){return v===null||v.tag!==6?(v=zf(x,b.mode,N),v.return=b,v):(v=i(v,x),v.return=b,v)}function u(b,v,x,N){var P=x.type;return P===to?f(b,v,x.props.children,N,x.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===is&&Tx(P)===v.type)?(N=i(v,x.props),N.ref=Aa(b,v,x),N.return=b,N):(N=Iu(x.type,x.key,x.props,null,b.mode,N),N.ref=Aa(b,v,x),N.return=b,N)}function d(b,v,x,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=qf(x,b.mode,N),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function f(b,v,x,N,P){return v===null||v.tag!==7?(v=vi(x,b.mode,N,P),v.return=b,v):(v=i(v,x),v.return=b,v)}function m(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zf(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uc:return x=Iu(v.type,v.key,v.props,null,b.mode,x),x.ref=Aa(b,null,v),x.return=b,x;case eo:return v=qf(v,b.mode,x),v.return=b,v;case is:var N=v._init;return m(b,N(v._payload),x)}if($a(v)||Na(v))return v=vi(v,b.mode,x,null),v.return=b,v;Xc(b,v)}return null}function p(b,v,x,N){var P=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return P!==null?null:c(b,v,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uc:return x.key===P?u(b,v,x,N):null;case eo:return x.key===P?d(b,v,x,N):null;case is:return P=x._init,p(b,v,P(x._payload),N)}if($a(x)||Na(x))return P!==null?null:f(b,v,x,N,null);Xc(b,x)}return null}function y(b,v,x,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(x)||null,c(v,b,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Uc:return b=b.get(N.key===null?x:N.key)||null,u(v,b,N,P);case eo:return b=b.get(N.key===null?x:N.key)||null,d(v,b,N,P);case is:var O=N._init;return y(b,v,x,O(N._payload),P)}if($a(N)||Na(N))return b=b.get(x)||null,f(v,b,N,P,null);Xc(v,N)}return null}function w(b,v,x,N){for(var P=null,O=null,S=v,_=v=0,C=null;S!==null&&_<x.length;_++){S.index>_?(C=S,S=null):C=S.sibling;var R=p(b,S,x[_],N);if(R===null){S===null&&(S=C);break}n&&S&&R.alternate===null&&t(b,S),v=o(R,v,_),O===null?P=R:O.sibling=R,O=R,S=C}if(_===x.length)return r(b,S),Me&&ri(b,_),P;if(S===null){for(;_<x.length;_++)S=m(b,x[_],N),S!==null&&(v=o(S,v,_),O===null?P=S:O.sibling=S,O=S);return Me&&ri(b,_),P}for(S=s(b,S);_<x.length;_++)C=y(S,b,_,x[_],N),C!==null&&(n&&C.alternate!==null&&S.delete(C.key===null?_:C.key),v=o(C,v,_),O===null?P=C:O.sibling=C,O=C);return n&&S.forEach(function(A){return t(b,A)}),Me&&ri(b,_),P}function T(b,v,x,N){var P=Na(x);if(typeof P!="function")throw Error(H(150));if(x=P.call(x),x==null)throw Error(H(151));for(var O=P=null,S=v,_=v=0,C=null,R=x.next();S!==null&&!R.done;_++,R=x.next()){S.index>_?(C=S,S=null):C=S.sibling;var A=p(b,S,R.value,N);if(A===null){S===null&&(S=C);break}n&&S&&A.alternate===null&&t(b,S),v=o(A,v,_),O===null?P=A:O.sibling=A,O=A,S=C}if(R.done)return r(b,S),Me&&ri(b,_),P;if(S===null){for(;!R.done;_++,R=x.next())R=m(b,R.value,N),R!==null&&(v=o(R,v,_),O===null?P=R:O.sibling=R,O=R);return Me&&ri(b,_),P}for(S=s(b,S);!R.done;_++,R=x.next())R=y(S,b,_,R.value,N),R!==null&&(n&&R.alternate!==null&&S.delete(R.key===null?_:R.key),v=o(R,v,_),O===null?P=R:O.sibling=R,O=R);return n&&S.forEach(function(L){return t(b,L)}),Me&&ri(b,_),P}function j(b,v,x,N){if(typeof x=="object"&&x!==null&&x.type===to&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Uc:e:{for(var P=x.key,O=v;O!==null;){if(O.key===P){if(P=x.type,P===to){if(O.tag===7){r(b,O.sibling),v=i(O,x.props.children),v.return=b,b=v;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===is&&Tx(P)===O.type){r(b,O.sibling),v=i(O,x.props),v.ref=Aa(b,O,x),v.return=b,b=v;break e}r(b,O);break}else t(b,O);O=O.sibling}x.type===to?(v=vi(x.props.children,b.mode,N,x.key),v.return=b,b=v):(N=Iu(x.type,x.key,x.props,null,b.mode,N),N.ref=Aa(b,v,x),N.return=b,b=N)}return l(b);case eo:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else t(b,v);v=v.sibling}v=qf(x,b.mode,N),v.return=b,b=v}return l(b);case is:return O=x._init,j(b,v,O(x._payload),N)}if($a(x))return w(b,v,x,N);if(Na(x))return T(b,v,x,N);Xc(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,x),v.return=b,b=v):(r(b,v),v=zf(x,b.mode,N),v.return=b,b=v),l(b)):r(b,v)}return j}var Ro=ET(!0),NT=ET(!1),ed=Bs(null),td=null,co=null,zg=null;function qg(){zg=co=td=null}function Hg(n){var t=ed.current;Oe(ed),n._currentValue=t}function np(n,t,r){for(;n!==null;){var s=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),n===r)break;n=n.return}}function _o(n,t){td=n,zg=co=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Qt=!0),n.firstContext=null)}function Cn(n){var t=n._currentValue;if(zg!==n)if(n={context:n,memoizedValue:t,next:null},co===null){if(td===null)throw Error(H(308));co=n,td.dependencies={lanes:0,firstContext:n}}else co=co.next=n;return t}var ui=null;function Wg(n){ui===null?ui=[n]:ui.push(n)}function jT(n,t,r,s){var i=t.interleaved;return i===null?(r.next=r,Wg(t)):(r.next=i.next,i.next=r),t.interleaved=r,Mr(n,s)}function Mr(n,t){n.lanes|=t;var r=n.alternate;for(r!==null&&(r.lanes|=t),r=n,n=n.return;n!==null;)n.childLanes|=t,r=n.alternate,r!==null&&(r.childLanes|=t),r=n,n=n.return;return r.tag===3?r.stateNode:null}var os=!1;function Gg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ST(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ir(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function _s(n,t,r){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,xe&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Mr(n,r)}return i=s.interleaved,i===null?(t.next=t,Wg(s)):(t.next=i.next,i.next=t),s.interleaved=t,Mr(n,r)}function _u(n,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=n.pendingLanes,r|=s,t.lanes=r,Pg(n,r)}}function Ex(n,t){var r=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:s.shared,effects:s.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=t:n.next=t,r.lastBaseUpdate=t}function nd(n,t,r,s){var i=n.updateQueue;os=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,l===null?o=d:l.next=d,l=u;var f=n.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==l&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(o!==null){var m=i.baseState;l=0,f=d=u=null,c=o;do{var p=c.lane,y=c.eventTime;if((s&p)===p){f!==null&&(f=f.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=n,T=c;switch(p=t,y=r,T.tag){case 1:if(w=T.payload,typeof w=="function"){m=w.call(y,m,p);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,p=typeof w=="function"?w.call(y,m,p):w,p==null)break e;m=ze({},m,p);break e;case 2:os=!0}}c.callback!==null&&c.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else y={eventTime:y,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=y,u=m):f=f.next=y,l|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ei|=l,n.lanes=l,n.memoizedState=m}}function Nx(n,t,r){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var s=n[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(H(191,i));i.call(s)}}}var tc={},rr=Bs(tc),Sl=Bs(tc),Il=Bs(tc);function di(n){if(n===tc)throw Error(H(174));return n}function Kg(n,t){switch(Ce(Il,t),Ce(Sl,n),Ce(rr,tc),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lm(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=Lm(t,n)}Oe(rr),Ce(rr,t)}function Do(){Oe(rr),Oe(Sl),Oe(Il)}function IT(n){di(Il.current);var t=di(rr.current),r=Lm(t,n.type);t!==r&&(Ce(Sl,n),Ce(rr,r))}function Qg(n){Sl.current===n&&(Oe(rr),Oe(Sl))}var Fe=Bs(0);function rd(n){for(var t=n;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vf=[];function Yg(){for(var n=0;n<Vf.length;n++)Vf[n]._workInProgressVersionPrimary=null;Vf.length=0}var Tu=Gr.ReactCurrentDispatcher,Mf=Gr.ReactCurrentBatchConfig,Ti=0,Be=null,it=null,ct=null,sd=!1,nl=!1,Cl=0,xk=0;function Et(){throw Error(H(321))}function Xg(n,t){if(t===null)return!1;for(var r=0;r<t.length&&r<n.length;r++)if(!Wn(n[r],t[r]))return!1;return!0}function Jg(n,t,r,s,i,o){if(Ti=o,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tu.current=n===null||n.memoizedState===null?Tk:Ek,n=r(s,i),nl){o=0;do{if(nl=!1,Cl=0,25<=o)throw Error(H(301));o+=1,ct=it=null,t.updateQueue=null,Tu.current=Nk,n=r(s,i)}while(nl)}if(Tu.current=id,t=it!==null&&it.next!==null,Ti=0,ct=it=Be=null,sd=!1,t)throw Error(H(300));return n}function Zg(){var n=Cl!==0;return Cl=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Be.memoizedState=ct=n:ct=ct.next=n,ct}function An(){if(it===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var t=ct===null?Be.memoizedState:ct.next;if(t!==null)ct=t,it=n;else{if(n===null)throw Error(H(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ct===null?Be.memoizedState=ct=n:ct=ct.next=n}return ct}function Al(n,t){return typeof t=="function"?t(n):t}function Ff(n){var t=An(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=n;var s=it,i=s.baseQueue,o=r.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}s.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,s=s.baseState;var c=l=null,u=null,d=o;do{var f=d.lane;if((Ti&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:n(s,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,l=s):u=u.next=m,Be.lanes|=f,Ei|=f}d=d.next}while(d!==null&&d!==o);u===null?l=s:u.next=c,Wn(s,t.memoizedState)||(Qt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=u,r.lastRenderedState=s}if(n=r.interleaved,n!==null){i=n;do o=i.lane,Be.lanes|=o,Ei|=o,i=i.next;while(i!==n)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Uf(n){var t=An(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=n;var s=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do o=n(o,l.action),l=l.next;while(l!==i);Wn(o,t.memoizedState)||(Qt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function CT(){}function AT(n,t){var r=Be,s=An(),i=t(),o=!Wn(s.memoizedState,i);if(o&&(s.memoizedState=i,Qt=!0),s=s.queue,ey(RT.bind(null,r,s,n),[n]),s.getSnapshot!==t||o||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,kl(9,PT.bind(null,r,s,i,t),void 0,null),ut===null)throw Error(H(349));Ti&30||kT(r,t,i)}return i}function kT(n,t,r){n.flags|=16384,n={getSnapshot:t,value:r},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[n]):(r=t.stores,r===null?t.stores=[n]:r.push(n))}function PT(n,t,r,s){t.value=r,t.getSnapshot=s,DT(t)&&OT(n)}function RT(n,t,r){return r(function(){DT(t)&&OT(n)})}function DT(n){var t=n.getSnapshot;n=n.value;try{var r=t();return!Wn(n,r)}catch{return!0}}function OT(n){var t=Mr(n,1);t!==null&&Hn(t,n,1,-1)}function jx(n){var t=Zn();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Al,lastRenderedState:n},t.queue=n,n=n.dispatch=_k.bind(null,Be,n),[t.memoizedState,n]}function kl(n,t,r,s){return n={tag:n,create:t,destroy:r,deps:s,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=n.next=n):(r=t.lastEffect,r===null?t.lastEffect=n.next=n:(s=r.next,r.next=n,n.next=s,t.lastEffect=n)),n}function LT(){return An().memoizedState}function Eu(n,t,r,s){var i=Zn();Be.flags|=n,i.memoizedState=kl(1|t,r,void 0,s===void 0?null:s)}function Xd(n,t,r,s){var i=An();s=s===void 0?null:s;var o=void 0;if(it!==null){var l=it.memoizedState;if(o=l.destroy,s!==null&&Xg(s,l.deps)){i.memoizedState=kl(t,r,o,s);return}}Be.flags|=n,i.memoizedState=kl(1|t,r,o,s)}function Sx(n,t){return Eu(8390656,8,n,t)}function ey(n,t){return Xd(2048,8,n,t)}function VT(n,t){return Xd(4,2,n,t)}function MT(n,t){return Xd(4,4,n,t)}function FT(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function UT(n,t,r){return r=r!=null?r.concat([n]):null,Xd(4,4,FT.bind(null,t,n),r)}function ty(){}function $T(n,t){var r=An();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Xg(t,s[1])?s[0]:(r.memoizedState=[n,t],n)}function BT(n,t){var r=An();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Xg(t,s[1])?s[0]:(n=n(),r.memoizedState=[n,t],n)}function zT(n,t,r){return Ti&21?(Wn(r,t)||(r=K_(),Be.lanes|=r,Ei|=r,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=r)}function wk(n,t){var r=Te;Te=r!==0&&4>r?r:4,n(!0);var s=Mf.transition;Mf.transition={};try{n(!1),t()}finally{Te=r,Mf.transition=s}}function qT(){return An().memoizedState}function bk(n,t,r){var s=Es(n);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},HT(n))WT(t,r);else if(r=jT(n,t,r,s),r!==null){var i=Bt();Hn(r,n,s,i),GT(r,t,s)}}function _k(n,t,r){var s=Es(n),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(HT(n))WT(t,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,c=o(l,r);if(i.hasEagerState=!0,i.eagerState=c,Wn(c,l)){var u=t.interleaved;u===null?(i.next=i,Wg(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}r=jT(n,t,i,s),r!==null&&(i=Bt(),Hn(r,n,s,i),GT(r,t,s))}}function HT(n){var t=n.alternate;return n===Be||t!==null&&t===Be}function WT(n,t){nl=sd=!0;var r=n.pending;r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t}function GT(n,t,r){if(r&4194240){var s=t.lanes;s&=n.pendingLanes,r|=s,t.lanes=r,Pg(n,r)}}var id={readContext:Cn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Tk={readContext:Cn,useCallback:function(n,t){return Zn().memoizedState=[n,t===void 0?null:t],n},useContext:Cn,useEffect:Sx,useImperativeHandle:function(n,t,r){return r=r!=null?r.concat([n]):null,Eu(4194308,4,FT.bind(null,t,n),r)},useLayoutEffect:function(n,t){return Eu(4194308,4,n,t)},useInsertionEffect:function(n,t){return Eu(4,2,n,t)},useMemo:function(n,t){var r=Zn();return t=t===void 0?null:t,n=n(),r.memoizedState=[n,t],n},useReducer:function(n,t,r){var s=Zn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},s.queue=n,n=n.dispatch=bk.bind(null,Be,n),[s.memoizedState,n]},useRef:function(n){var t=Zn();return n={current:n},t.memoizedState=n},useState:jx,useDebugValue:ty,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=jx(!1),t=n[0];return n=wk.bind(null,n[1]),Zn().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,r){var s=Be,i=Zn();if(Me){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),ut===null)throw Error(H(349));Ti&30||kT(s,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Sx(RT.bind(null,s,o,n),[n]),s.flags|=2048,kl(9,PT.bind(null,s,o,r,t),void 0,null),r},useId:function(){var n=Zn(),t=ut.identifierPrefix;if(Me){var r=Tr,s=_r;r=(s&~(1<<32-qn(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=xk++,t=":"+t+"r"+r.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},Ek={readContext:Cn,useCallback:$T,useContext:Cn,useEffect:ey,useImperativeHandle:UT,useInsertionEffect:VT,useLayoutEffect:MT,useMemo:BT,useReducer:Ff,useRef:LT,useState:function(){return Ff(Al)},useDebugValue:ty,useDeferredValue:function(n){var t=An();return zT(t,it.memoizedState,n)},useTransition:function(){var n=Ff(Al)[0],t=An().memoizedState;return[n,t]},useMutableSource:CT,useSyncExternalStore:AT,useId:qT,unstable_isNewReconciler:!1},Nk={readContext:Cn,useCallback:$T,useContext:Cn,useEffect:ey,useImperativeHandle:UT,useInsertionEffect:VT,useLayoutEffect:MT,useMemo:BT,useReducer:Uf,useRef:LT,useState:function(){return Uf(Al)},useDebugValue:ty,useDeferredValue:function(n){var t=An();return it===null?t.memoizedState=n:zT(t,it.memoizedState,n)},useTransition:function(){var n=Uf(Al)[0],t=An().memoizedState;return[n,t]},useMutableSource:CT,useSyncExternalStore:AT,useId:qT,unstable_isNewReconciler:!1};function Vn(n,t){if(n&&n.defaultProps){t=ze({},t),n=n.defaultProps;for(var r in n)t[r]===void 0&&(t[r]=n[r]);return t}return t}function rp(n,t,r,s){t=n.memoizedState,r=r(s,t),r=r==null?t:ze({},t,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Jd={isMounted:function(n){return(n=n._reactInternals)?Oi(n)===n:!1},enqueueSetState:function(n,t,r){n=n._reactInternals;var s=Bt(),i=Es(n),o=Ir(s,i);o.payload=t,r!=null&&(o.callback=r),t=_s(n,o,i),t!==null&&(Hn(t,n,i,s),_u(t,n,i))},enqueueReplaceState:function(n,t,r){n=n._reactInternals;var s=Bt(),i=Es(n),o=Ir(s,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=_s(n,o,i),t!==null&&(Hn(t,n,i,s),_u(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var r=Bt(),s=Es(n),i=Ir(r,s);i.tag=2,t!=null&&(i.callback=t),t=_s(n,i,s),t!==null&&(Hn(t,n,s,r),_u(t,n,s))}};function Ix(n,t,r,s,i,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,o,l):t.prototype&&t.prototype.isPureReactComponent?!Tl(r,s)||!Tl(i,o):!0}function KT(n,t,r){var s=!1,i=Rs,o=t.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(i=Xt(t)?bi:kt.current,s=t.contextTypes,o=(s=s!=null)?ko(n,i):Rs),t=new t(r,o),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jd,n.stateNode=t,t._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),t}function Cx(n,t,r,s){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==n&&Jd.enqueueReplaceState(t,t.state,null)}function sp(n,t,r,s){var i=n.stateNode;i.props=r,i.state=n.memoizedState,i.refs={},Gg(n);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Cn(o):(o=Xt(t)?bi:kt.current,i.context=ko(n,o)),i.state=n.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(rp(n,t,o,r),i.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Jd.enqueueReplaceState(i,i.state,null),nd(n,r,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Oo(n,t){try{var r="",s=t;do r+=ZC(s),s=s.return;while(s);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:t,stack:i,digest:null}}function $f(n,t,r){return{value:n,source:null,stack:r??null,digest:t??null}}function ip(n,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var jk=typeof WeakMap=="function"?WeakMap:Map;function QT(n,t,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ad||(ad=!0,pp=s),ip(n,t)},r}function YT(n,t,r){r=Ir(-1,r),r.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){ip(n,t)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){ip(n,t),typeof s!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Ax(n,t,r){var s=n.pingCache;if(s===null){s=n.pingCache=new jk;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),n=Uk.bind(null,n,t,r),t.then(n,n))}function kx(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function Px(n,t,r,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===t?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ir(-1,1),t.tag=2,_s(r,t,1))),r.lanes|=1),n)}var Sk=Gr.ReactCurrentOwner,Qt=!1;function Ut(n,t,r,s){t.child=n===null?NT(t,null,r,s):Ro(t,n.child,r,s)}function Rx(n,t,r,s,i){r=r.render;var o=t.ref;return _o(t,i),s=Jg(n,t,r,s,o,i),r=Zg(),n!==null&&!Qt?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,Fr(n,t,i)):(Me&&r&&Ug(t),t.flags|=1,Ut(n,t,s,i),t.child)}function Dx(n,t,r,s,i){if(n===null){var o=r.type;return typeof o=="function"&&!cy(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,XT(n,t,o,s,i)):(n=Iu(r.type,null,s,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(o=n.child,!(n.lanes&i)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Tl,r(l,s)&&n.ref===t.ref)return Fr(n,t,i)}return t.flags|=1,n=Ns(o,s),n.ref=t.ref,n.return=t,t.child=n}function XT(n,t,r,s,i){if(n!==null){var o=n.memoizedProps;if(Tl(o,s)&&n.ref===t.ref)if(Qt=!1,t.pendingProps=s=o,(n.lanes&i)!==0)n.flags&131072&&(Qt=!0);else return t.lanes=n.lanes,Fr(n,t,i)}return op(n,t,r,s,i)}function JT(n,t,r){var s=t.pendingProps,i=s.children,o=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ho,on),on|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Ce(ho,on),on|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,Ce(ho,on),on|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,Ce(ho,on),on|=s;return Ut(n,t,i,r),t.child}function ZT(n,t){var r=t.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function op(n,t,r,s,i){var o=Xt(r)?bi:kt.current;return o=ko(t,o),_o(t,i),r=Jg(n,t,r,s,o,i),s=Zg(),n!==null&&!Qt?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,Fr(n,t,i)):(Me&&s&&Ug(t),t.flags|=1,Ut(n,t,r,i),t.child)}function Ox(n,t,r,s,i){if(Xt(r)){var o=!0;Xu(t)}else o=!1;if(_o(t,i),t.stateNode===null)Nu(n,t),KT(t,r,s),sp(t,r,s,i),s=!0;else if(n===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Cn(d):(d=Xt(r)?bi:kt.current,d=ko(t,d));var f=r.getDerivedStateFromProps,m=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||u!==d)&&Cx(t,l,s,d),os=!1;var p=t.memoizedState;l.state=p,nd(t,s,l,i),u=t.memoizedState,c!==s||p!==u||Yt.current||os?(typeof f=="function"&&(rp(t,r,f,s),u=t.memoizedState),(c=os||Ix(t,r,c,s,p,u,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=u),l.props=s,l.state=u,l.context=d,s=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,ST(n,t),c=t.memoizedProps,d=t.type===t.elementType?c:Vn(t.type,c),l.props=d,m=t.pendingProps,p=l.context,u=r.contextType,typeof u=="object"&&u!==null?u=Cn(u):(u=Xt(r)?bi:kt.current,u=ko(t,u));var y=r.getDerivedStateFromProps;(f=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==m||p!==u)&&Cx(t,l,s,u),os=!1,p=t.memoizedState,l.state=p,nd(t,s,l,i);var w=t.memoizedState;c!==m||p!==w||Yt.current||os?(typeof y=="function"&&(rp(t,r,y,s),w=t.memoizedState),(d=os||Ix(t,r,d,s,p,w,u)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,w,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,w,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===n.memoizedProps&&p===n.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&p===n.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=w),l.props=s,l.state=w,l.context=u,s=d):(typeof l.componentDidUpdate!="function"||c===n.memoizedProps&&p===n.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===n.memoizedProps&&p===n.memoizedState||(t.flags|=1024),s=!1)}return ap(n,t,r,s,o,i)}function ap(n,t,r,s,i,o){ZT(n,t);var l=(t.flags&128)!==0;if(!s&&!l)return i&&wx(t,r,!1),Fr(n,t,o);s=t.stateNode,Sk.current=t;var c=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,n!==null&&l?(t.child=Ro(t,n.child,null,o),t.child=Ro(t,null,c,o)):Ut(n,t,c,o),t.memoizedState=s.state,i&&wx(t,r,!0),t.child}function eE(n){var t=n.stateNode;t.pendingContext?xx(n,t.pendingContext,t.pendingContext!==t.context):t.context&&xx(n,t.context,!1),Kg(n,t.containerInfo)}function Lx(n,t,r,s,i){return Po(),Bg(i),t.flags|=256,Ut(n,t,r,s),t.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function cp(n){return{baseLanes:n,cachePool:null,transitions:null}}function tE(n,t,r){var s=t.pendingProps,i=Fe.current,o=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=n!==null&&n.memoizedState===null?!1:(i&2)!==0),c?(o=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ce(Fe,i&1),n===null)return tp(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,n=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=th(l,s,0,null),n=vi(n,s,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,t.child.memoizedState=cp(r),t.memoizedState=lp,n):ny(t,l));if(i=n.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return Ik(n,t,l,s,c,i,r);if(o){o=s.fallback,l=t.mode,i=n.child,c=i.sibling;var u={mode:"hidden",children:s.children};return!(l&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=u,t.deletions=null):(s=Ns(i,u),s.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Ns(c,o):(o=vi(o,l,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=n.child.memoizedState,l=l===null?cp(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~r,t.memoizedState=lp,s}return o=n.child,n=o.sibling,s=Ns(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,n!==null&&(r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)),t.child=s,t.memoizedState=null,s}function ny(n,t){return t=th({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function Jc(n,t,r,s){return s!==null&&Bg(s),Ro(t,n.child,null,r),n=ny(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Ik(n,t,r,s,i,o,l){if(r)return t.flags&256?(t.flags&=-257,s=$f(Error(H(422))),Jc(n,t,l,s)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(o=s.fallback,i=t.mode,s=th({mode:"visible",children:s.children},i,0,null),o=vi(o,i,l,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Ro(t,n.child,null,l),t.child.memoizedState=cp(l),t.memoizedState=lp,o);if(!(t.mode&1))return Jc(n,t,l,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var c=s.dgst;return s=c,o=Error(H(419)),s=$f(o,s,void 0),Jc(n,t,l,s)}if(c=(l&n.childLanes)!==0,Qt||c){if(s=ut,s!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|l)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mr(n,i),Hn(s,n,i,-1))}return ly(),s=$f(Error(H(421))),Jc(n,t,l,s)}return i.data==="$?"?(t.flags|=128,t.child=n.child,t=$k.bind(null,n),i._reactRetry=t,null):(n=o.treeContext,ln=bs(i.nextSibling),dn=t,Me=!0,Fn=null,n!==null&&(_n[Tn++]=_r,_n[Tn++]=Tr,_n[Tn++]=_i,_r=n.id,Tr=n.overflow,_i=t),t=ny(t,s.children),t.flags|=4096,t)}function Vx(n,t,r){n.lanes|=t;var s=n.alternate;s!==null&&(s.lanes|=t),np(n.return,t,r)}function Bf(n,t,r,s,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=i)}function nE(n,t,r){var s=t.pendingProps,i=s.revealOrder,o=s.tail;if(Ut(n,t,s.children,r),s=Fe.current,s&2)s=s&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vx(n,r,t);else if(n.tag===19)Vx(n,r,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Ce(Fe,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)n=r.alternate,n!==null&&rd(n)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Bf(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&rd(n)===null){t.child=i;break}n=i.sibling,i.sibling=r,r=i,i=n}Bf(t,!0,r,null,o);break;case"together":Bf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nu(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function Fr(n,t,r){if(n!==null&&(t.dependencies=n.dependencies),Ei|=t.lanes,!(r&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(H(153));if(t.child!==null){for(n=t.child,r=Ns(n,n.pendingProps),t.child=r,r.return=t;n.sibling!==null;)n=n.sibling,r=r.sibling=Ns(n,n.pendingProps),r.return=t;r.sibling=null}return t.child}function Ck(n,t,r){switch(t.tag){case 3:eE(t),Po();break;case 5:IT(t);break;case 1:Xt(t.type)&&Xu(t);break;case 4:Kg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Ce(ed,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ce(Fe,Fe.current&1),t.flags|=128,null):r&t.child.childLanes?tE(n,t,r):(Ce(Fe,Fe.current&1),n=Fr(n,t,r),n!==null?n.sibling:null);Ce(Fe,Fe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,n.flags&128){if(s)return nE(n,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Fe,Fe.current),s)break;return null;case 22:case 23:return t.lanes=0,JT(n,t,r)}return Fr(n,t,r)}var rE,up,sE,iE;rE=function(n,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};up=function(){};sE=function(n,t,r,s){var i=n.memoizedProps;if(i!==s){n=t.stateNode,di(rr.current);var o=null;switch(r){case"input":i=Pm(n,i),s=Pm(n,s),o=[];break;case"select":i=ze({},i,{value:void 0}),s=ze({},s,{value:void 0}),o=[];break;case"textarea":i=Om(n,i),s=Om(n,s),o=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Qu)}Vm(r,s);var l;r=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(gl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var u=s[d];if(c=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(r||(r={}),r[l]=u[l])}else r||(o||(o=[]),o.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(gl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",n),o||c===u||(o=[])):(o=o||[]).push(d,u))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};iE=function(n,t,r,s){r!==s&&(t.flags|=4)};function ka(n,t){if(!Me)switch(n.tailMode){case"hidden":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Nt(n){var t=n.alternate!==null&&n.alternate.child===n.child,r=0,s=0;if(t)for(var i=n.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=r,t}function Ak(n,t,r){var s=t.pendingProps;switch($g(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Xt(t.type)&&Yu(),Nt(t),null;case 3:return s=t.stateNode,Do(),Oe(Yt),Oe(kt),Yg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Yc(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fn!==null&&(vp(Fn),Fn=null))),up(n,t),Nt(t),null;case 5:Qg(t);var i=di(Il.current);if(r=t.type,n!==null&&t.stateNode!=null)sE(n,t,r,s,i),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(H(166));return Nt(t),null}if(n=di(rr.current),Yc(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[tr]=t,s[jl]=o,n=(t.mode&1)!==0,r){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(i=0;i<za.length;i++)Re(za[i],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":Wv(s,o),Re("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Re("invalid",s);break;case"textarea":Kv(s,o),Re("invalid",s)}Vm(r,o),i=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?s.textContent!==c&&(o.suppressHydrationWarning!==!0&&Qc(s.textContent,c,n),i=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Qc(s.textContent,c,n),i=["children",""+c]):gl.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Re("scroll",s)}switch(r){case"input":$c(s),Gv(s,o,!0);break;case"textarea":$c(s),Qv(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Qu)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=R_(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=l.createElement(r,{is:s.is}):(n=l.createElement(r),r==="select"&&(l=n,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):n=l.createElementNS(n,r),n[tr]=t,n[jl]=s,rE(n,t,!1,!1),t.stateNode=n;e:{switch(l=Mm(r,s),r){case"dialog":Re("cancel",n),Re("close",n),i=s;break;case"iframe":case"object":case"embed":Re("load",n),i=s;break;case"video":case"audio":for(i=0;i<za.length;i++)Re(za[i],n);i=s;break;case"source":Re("error",n),i=s;break;case"img":case"image":case"link":Re("error",n),Re("load",n),i=s;break;case"details":Re("toggle",n),i=s;break;case"input":Wv(n,s),i=Pm(n,s),Re("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=ze({},s,{value:void 0}),Re("invalid",n);break;case"textarea":Kv(n,s),i=Om(n,s),Re("invalid",n);break;default:i=s}Vm(r,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?L_(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&D_(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&yl(n,u):typeof u=="number"&&yl(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Re("scroll",n):u!=null&&jg(n,o,u,l))}switch(r){case"input":$c(n),Gv(n,s,!1);break;case"textarea":$c(n),Qv(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Ps(s.value));break;case"select":n.multiple=!!s.multiple,o=s.value,o!=null?vo(n,!!s.multiple,o,!1):s.defaultValue!=null&&vo(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Qu)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nt(t),null;case 6:if(n&&t.stateNode!=null)iE(n,t,n.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(H(166));if(r=di(Il.current),di(rr.current),Yc(t)){if(s=t.stateNode,r=t.memoizedProps,s[tr]=t,(o=s.nodeValue!==r)&&(n=dn,n!==null))switch(n.tag){case 3:Qc(s.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qc(s.nodeValue,r,(n.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[tr]=t,t.stateNode=s}return Nt(t),null;case 13:if(Oe(Fe),s=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Me&&ln!==null&&t.mode&1&&!(t.flags&128))TT(),Po(),t.flags|=98560,o=!1;else if(o=Yc(t),s!==null&&s.dehydrated!==null){if(n===null){if(!o)throw Error(H(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[tr]=t}else Po(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),o=!1}else Fn!==null&&(vp(Fn),Fn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(n===null||Fe.current&1?ot===0&&(ot=3):ly())),t.updateQueue!==null&&(t.flags|=4),Nt(t),null);case 4:return Do(),up(n,t),n===null&&El(t.stateNode.containerInfo),Nt(t),null;case 10:return Hg(t.type._context),Nt(t),null;case 17:return Xt(t.type)&&Yu(),Nt(t),null;case 19:if(Oe(Fe),o=t.memoizedState,o===null)return Nt(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)ka(o,!1);else{if(ot!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(l=rd(n),l!==null){for(t.flags|=128,ka(o,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,n=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Ce(Fe,Fe.current&1|2),t.child}n=n.sibling}o.tail!==null&&Ye()>Lo&&(t.flags|=128,s=!0,ka(o,!1),t.lanes=4194304)}else{if(!s)if(n=rd(l),n!==null){if(t.flags|=128,s=!0,r=n.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ka(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Me)return Nt(t),null}else 2*Ye()-o.renderingStartTime>Lo&&r!==1073741824&&(t.flags|=128,s=!0,ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,r=Fe.current,Ce(Fe,s?r&1|2:r&1),t):(Nt(t),null);case 22:case 23:return ay(),s=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?on&1073741824&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function kk(n,t){switch($g(t),t.tag){case 1:return Xt(t.type)&&Yu(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Do(),Oe(Yt),Oe(kt),Yg(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return Qg(t),null;case 13:if(Oe(Fe),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Po()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Oe(Fe),null;case 4:return Do(),null;case 10:return Hg(t.type._context),null;case 22:case 23:return ay(),null;case 24:return null;default:return null}}var Zc=!1,Ct=!1,Pk=typeof WeakSet=="function"?WeakSet:Set,Q=null;function uo(n,t){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ge(n,t,s)}else r.current=null}function dp(n,t,r){try{r()}catch(s){Ge(n,t,s)}}var Mx=!1;function Rk(n,t){if(Km=Wu,n=uT(),Fg(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,c=-1,u=-1,d=0,f=0,m=n,p=null;t:for(;;){for(var y;m!==r||i!==0&&m.nodeType!==3||(c=l+i),m!==o||s!==0&&m.nodeType!==3||(u=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===n)break t;if(p===r&&++d===i&&(c=l),p===o&&++f===s&&(u=l),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qm={focusedElem:n,selectionRange:r},Wu=!1,Q=t;Q!==null;)if(t=Q,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,Q=n;else for(;Q!==null;){t=Q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,j=w.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?T:Vn(t.type,T),j);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(N){Ge(t,t.return,N)}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}return w=Mx,Mx=!1,w}function rl(n,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&dp(t,r,o)}i=i.next}while(i!==s)}}function Zd(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&n)===n){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function hp(n){var t=n.ref;if(t!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof t=="function"?t(n):t.current=n}}function oE(n){var t=n.alternate;t!==null&&(n.alternate=null,oE(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[tr],delete t[jl],delete t[Jm],delete t[pk],delete t[gk])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function aE(n){return n.tag===5||n.tag===3||n.tag===4}function Fx(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||aE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fp(n,t,r){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(n,t):r.insertBefore(n,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(n,r)):(t=r,t.appendChild(n)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qu));else if(s!==4&&(n=n.child,n!==null))for(fp(n,t,r),n=n.sibling;n!==null;)fp(n,t,r),n=n.sibling}function mp(n,t,r){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?r.insertBefore(n,t):r.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(mp(n,t,r),n=n.sibling;n!==null;)mp(n,t,r),n=n.sibling}var ft=null,Mn=!1;function Zr(n,t,r){for(r=r.child;r!==null;)lE(n,t,r),r=r.sibling}function lE(n,t,r){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(Hd,r)}catch{}switch(r.tag){case 5:Ct||uo(r,t);case 6:var s=ft,i=Mn;ft=null,Zr(n,t,r),ft=s,Mn=i,ft!==null&&(Mn?(n=ft,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):ft.removeChild(r.stateNode));break;case 18:ft!==null&&(Mn?(n=ft,r=r.stateNode,n.nodeType===8?Of(n.parentNode,r):n.nodeType===1&&Of(n,r),bl(n)):Of(ft,r.stateNode));break;case 4:s=ft,i=Mn,ft=r.stateNode.containerInfo,Mn=!0,Zr(n,t,r),ft=s,Mn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var o=i,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&dp(r,t,l),i=i.next}while(i!==s)}Zr(n,t,r);break;case 1:if(!Ct&&(uo(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){Ge(r,t,c)}Zr(n,t,r);break;case 21:Zr(n,t,r);break;case 22:r.mode&1?(Ct=(s=Ct)||r.memoizedState!==null,Zr(n,t,r),Ct=s):Zr(n,t,r);break;default:Zr(n,t,r)}}function Ux(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new Pk),t.forEach(function(s){var i=Bk.bind(null,n,s);r.has(s)||(r.add(s),s.then(i,i))})}}function On(n,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var o=n,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:ft=c.stateNode,Mn=!1;break e;case 3:ft=c.stateNode.containerInfo,Mn=!0;break e;case 4:ft=c.stateNode.containerInfo,Mn=!0;break e}c=c.return}if(ft===null)throw Error(H(160));lE(o,l,i),ft=null,Mn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ge(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cE(t,n),t=t.sibling}function cE(n,t){var r=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(t,n),Jn(n),s&4){try{rl(3,n,n.return),Zd(3,n)}catch(T){Ge(n,n.return,T)}try{rl(5,n,n.return)}catch(T){Ge(n,n.return,T)}}break;case 1:On(t,n),Jn(n),s&512&&r!==null&&uo(r,r.return);break;case 5:if(On(t,n),Jn(n),s&512&&r!==null&&uo(r,r.return),n.flags&32){var i=n.stateNode;try{yl(i,"")}catch(T){Ge(n,n.return,T)}}if(s&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,l=r!==null?r.memoizedProps:o,c=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&k_(i,o),Mm(c,l);var d=Mm(c,o);for(l=0;l<u.length;l+=2){var f=u[l],m=u[l+1];f==="style"?L_(i,m):f==="dangerouslySetInnerHTML"?D_(i,m):f==="children"?yl(i,m):jg(i,f,m,d)}switch(c){case"input":Rm(i,o);break;case"textarea":P_(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?vo(i,!!o.multiple,y,!1):p!==!!o.multiple&&(o.defaultValue!=null?vo(i,!!o.multiple,o.defaultValue,!0):vo(i,!!o.multiple,o.multiple?[]:"",!1))}i[jl]=o}catch(T){Ge(n,n.return,T)}}break;case 6:if(On(t,n),Jn(n),s&4){if(n.stateNode===null)throw Error(H(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(T){Ge(n,n.return,T)}}break;case 3:if(On(t,n),Jn(n),s&4&&r!==null&&r.memoizedState.isDehydrated)try{bl(t.containerInfo)}catch(T){Ge(n,n.return,T)}break;case 4:On(t,n),Jn(n);break;case 13:On(t,n),Jn(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(iy=Ye())),s&4&&Ux(n);break;case 22:if(f=r!==null&&r.memoizedState!==null,n.mode&1?(Ct=(d=Ct)||f,On(t,n),Ct=d):On(t,n),Jn(n),s&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!f&&n.mode&1)for(Q=n,f=n.child;f!==null;){for(m=Q=f;Q!==null;){switch(p=Q,y=p.child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:uo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){s=p,r=p.return;try{t=s,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(T){Ge(s,r,T)}}break;case 5:uo(p,p.return);break;case 22:if(p.memoizedState!==null){Bx(m);continue}}y!==null?(y.return=p,Q=y):Bx(m)}f=f.sibling}e:for(f=null,m=n;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=m.stateNode,u=m.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=O_("display",l))}catch(T){Ge(n,n.return,T)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(T){Ge(n,n.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===n)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===n)break e;for(;m.sibling===null;){if(m.return===null||m.return===n)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:On(t,n),Jn(n),s&4&&Ux(n);break;case 21:break;default:On(t,n),Jn(n)}}function Jn(n){var t=n.flags;if(t&2){try{e:{for(var r=n.return;r!==null;){if(aE(r)){var s=r;break e}r=r.return}throw Error(H(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(yl(i,""),s.flags&=-33);var o=Fx(n);mp(n,o,i);break;case 3:case 4:var l=s.stateNode.containerInfo,c=Fx(n);fp(n,c,l);break;default:throw Error(H(161))}}catch(u){Ge(n,n.return,u)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function Dk(n,t,r){Q=n,uE(n)}function uE(n,t,r){for(var s=(n.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&s){var l=i.memoizedState!==null||Zc;if(!l){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Ct;c=Zc;var d=Ct;if(Zc=l,(Ct=u)&&!d)for(Q=i;Q!==null;)l=Q,u=l.child,l.tag===22&&l.memoizedState!==null?zx(i):u!==null?(u.return=l,Q=u):zx(i);for(;o!==null;)Q=o,uE(o),o=o.sibling;Q=i,Zc=c,Ct=d}$x(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):$x(n)}}function $x(n){for(;Q!==null;){var t=Q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||Zd(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ct)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Vn(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Nx(t,o,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Nx(t,l,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&bl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ct||t.flags&512&&hp(t)}catch(p){Ge(t,t.return,p)}}if(t===n){Q=null;break}if(r=t.sibling,r!==null){r.return=t.return,Q=r;break}Q=t.return}}function Bx(n){for(;Q!==null;){var t=Q;if(t===n){Q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Q=r;break}Q=t.return}}function zx(n){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Zd(4,t)}catch(u){Ge(t,r,u)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(u){Ge(t,i,u)}}var o=t.return;try{hp(t)}catch(u){Ge(t,o,u)}break;case 5:var l=t.return;try{hp(t)}catch(u){Ge(t,l,u)}}}catch(u){Ge(t,t.return,u)}if(t===n){Q=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Q=c;break}Q=t.return}}var Ok=Math.ceil,od=Gr.ReactCurrentDispatcher,ry=Gr.ReactCurrentOwner,Nn=Gr.ReactCurrentBatchConfig,xe=0,ut=null,tt=null,gt=0,on=0,ho=Bs(0),ot=0,Pl=null,Ei=0,eh=0,sy=0,sl=null,Gt=null,iy=0,Lo=1/0,wr=null,ad=!1,pp=null,Ts=null,eu=!1,ps=null,ld=0,il=0,gp=null,ju=-1,Su=0;function Bt(){return xe&6?Ye():ju!==-1?ju:ju=Ye()}function Es(n){return n.mode&1?xe&2&&gt!==0?gt&-gt:vk.transition!==null?(Su===0&&(Su=K_()),Su):(n=Te,n!==0||(n=window.event,n=n===void 0?16:tT(n.type)),n):1}function Hn(n,t,r,s){if(50<il)throw il=0,gp=null,Error(H(185));Jl(n,r,s),(!(xe&2)||n!==ut)&&(n===ut&&(!(xe&2)&&(eh|=r),ot===4&&cs(n,gt)),Jt(n,s),r===1&&xe===0&&!(t.mode&1)&&(Lo=Ye()+500,Yd&&zs()))}function Jt(n,t){var r=n.callbackNode;vA(n,t);var s=Hu(n,n===ut?gt:0);if(s===0)r!==null&&Jv(r),n.callbackNode=null,n.callbackPriority=0;else if(t=s&-s,n.callbackPriority!==t){if(r!=null&&Jv(r),t===1)n.tag===0?yk(qx.bind(null,n)):wT(qx.bind(null,n)),fk(function(){!(xe&6)&&zs()}),r=null;else{switch(Q_(s)){case 1:r=kg;break;case 4:r=W_;break;case 16:r=qu;break;case 536870912:r=G_;break;default:r=qu}r=vE(r,dE.bind(null,n))}n.callbackPriority=t,n.callbackNode=r}}function dE(n,t){if(ju=-1,Su=0,xe&6)throw Error(H(327));var r=n.callbackNode;if(To()&&n.callbackNode!==r)return null;var s=Hu(n,n===ut?gt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||t)t=cd(n,s);else{t=s;var i=xe;xe|=2;var o=fE();(ut!==n||gt!==t)&&(wr=null,Lo=Ye()+500,yi(n,t));do try{Mk();break}catch(c){hE(n,c)}while(1);qg(),od.current=o,xe=i,tt!==null?t=0:(ut=null,gt=0,t=ot)}if(t!==0){if(t===2&&(i=zm(n),i!==0&&(s=i,t=yp(n,i))),t===1)throw r=Pl,yi(n,0),cs(n,s),Jt(n,Ye()),r;if(t===6)cs(n,s);else{if(i=n.current.alternate,!(s&30)&&!Lk(i)&&(t=cd(n,s),t===2&&(o=zm(n),o!==0&&(s=o,t=yp(n,o))),t===1))throw r=Pl,yi(n,0),cs(n,s),Jt(n,Ye()),r;switch(n.finishedWork=i,n.finishedLanes=s,t){case 0:case 1:throw Error(H(345));case 2:si(n,Gt,wr);break;case 3:if(cs(n,s),(s&130023424)===s&&(t=iy+500-Ye(),10<t)){if(Hu(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Bt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Xm(si.bind(null,n,Gt,wr),t);break}si(n,Gt,wr);break;case 4:if(cs(n,s),(s&4194240)===s)break;for(t=n.eventTimes,i=-1;0<s;){var l=31-qn(s);o=1<<l,l=t[l],l>i&&(i=l),s&=~o}if(s=i,s=Ye()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ok(s/1960))-s,10<s){n.timeoutHandle=Xm(si.bind(null,n,Gt,wr),s);break}si(n,Gt,wr);break;case 5:si(n,Gt,wr);break;default:throw Error(H(329))}}}return Jt(n,Ye()),n.callbackNode===r?dE.bind(null,n):null}function yp(n,t){var r=sl;return n.current.memoizedState.isDehydrated&&(yi(n,t).flags|=256),n=cd(n,t),n!==2&&(t=Gt,Gt=r,t!==null&&vp(t)),n}function vp(n){Gt===null?Gt=n:Gt.push.apply(Gt,n)}function Lk(n){for(var t=n;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],o=i.getSnapshot;i=i.value;try{if(!Wn(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(n,t){for(t&=~sy,t&=~eh,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var r=31-qn(t),s=1<<r;n[r]=-1,t&=~s}}function qx(n){if(xe&6)throw Error(H(327));To();var t=Hu(n,0);if(!(t&1))return Jt(n,Ye()),null;var r=cd(n,t);if(n.tag!==0&&r===2){var s=zm(n);s!==0&&(t=s,r=yp(n,s))}if(r===1)throw r=Pl,yi(n,0),cs(n,t),Jt(n,Ye()),r;if(r===6)throw Error(H(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,si(n,Gt,wr),Jt(n,Ye()),null}function oy(n,t){var r=xe;xe|=1;try{return n(t)}finally{xe=r,xe===0&&(Lo=Ye()+500,Yd&&zs())}}function Ni(n){ps!==null&&ps.tag===0&&!(xe&6)&&To();var t=xe;xe|=1;var r=Nn.transition,s=Te;try{if(Nn.transition=null,Te=1,n)return n()}finally{Te=s,Nn.transition=r,xe=t,!(xe&6)&&zs()}}function ay(){on=ho.current,Oe(ho)}function yi(n,t){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,hk(r)),tt!==null)for(r=tt.return;r!==null;){var s=r;switch($g(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Yu();break;case 3:Do(),Oe(Yt),Oe(kt),Yg();break;case 5:Qg(s);break;case 4:Do();break;case 13:Oe(Fe);break;case 19:Oe(Fe);break;case 10:Hg(s.type._context);break;case 22:case 23:ay()}r=r.return}if(ut=n,tt=n=Ns(n.current,null),gt=on=t,ot=0,Pl=null,sy=eh=Ei=0,Gt=sl=null,ui!==null){for(t=0;t<ui.length;t++)if(r=ui[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,o=r.pending;if(o!==null){var l=o.next;o.next=i,s.next=l}r.pending=s}ui=null}return n}function hE(n,t){do{var r=tt;try{if(qg(),Tu.current=id,sd){for(var s=Be.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}sd=!1}if(Ti=0,ct=it=Be=null,nl=!1,Cl=0,ry.current=null,r===null||r.return===null){ot=1,Pl=t,tt=null;break}e:{var o=n,l=r.return,c=r,u=t;if(t=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=kx(l);if(y!==null){y.flags&=-257,Px(y,l,c,o,t),y.mode&1&&Ax(o,d,t),t=y,u=d;var w=t.updateQueue;if(w===null){var T=new Set;T.add(u),t.updateQueue=T}else w.add(u);break e}else{if(!(t&1)){Ax(o,d,t),ly();break e}u=Error(H(426))}}else if(Me&&c.mode&1){var j=kx(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Px(j,l,c,o,t),Bg(Oo(u,c));break e}}o=u=Oo(u,c),ot!==4&&(ot=2),sl===null?sl=[o]:sl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=QT(o,u,t);Ex(o,b);break e;case 1:c=u;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ts===null||!Ts.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=YT(o,c,t);Ex(o,N);break e}}o=o.return}while(o!==null)}pE(r)}catch(P){t=P,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(1)}function fE(){var n=od.current;return od.current=id,n===null?id:n}function ly(){(ot===0||ot===3||ot===2)&&(ot=4),ut===null||!(Ei&268435455)&&!(eh&268435455)||cs(ut,gt)}function cd(n,t){var r=xe;xe|=2;var s=fE();(ut!==n||gt!==t)&&(wr=null,yi(n,t));do try{Vk();break}catch(i){hE(n,i)}while(1);if(qg(),xe=r,od.current=s,tt!==null)throw Error(H(261));return ut=null,gt=0,ot}function Vk(){for(;tt!==null;)mE(tt)}function Mk(){for(;tt!==null&&!cA();)mE(tt)}function mE(n){var t=yE(n.alternate,n,on);n.memoizedProps=n.pendingProps,t===null?pE(n):tt=t,ry.current=null}function pE(n){var t=n;do{var r=t.alternate;if(n=t.return,t.flags&32768){if(r=kk(r,t),r!==null){r.flags&=32767,tt=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ot=6,tt=null;return}}else if(r=Ak(r,t,on),r!==null){tt=r;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=n}while(t!==null);ot===0&&(ot=5)}function si(n,t,r){var s=Te,i=Nn.transition;try{Nn.transition=null,Te=1,Fk(n,t,r,s)}finally{Nn.transition=i,Te=s}return null}function Fk(n,t,r,s){do To();while(ps!==null);if(xe&6)throw Error(H(327));r=n.finishedWork;var i=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(H(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(xA(n,o),n===ut&&(tt=ut=null,gt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||eu||(eu=!0,vE(qu,function(){return To(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Nn.transition,Nn.transition=null;var l=Te;Te=1;var c=xe;xe|=4,ry.current=null,Rk(n,r),cE(r,n),ik(Qm),Wu=!!Km,Qm=Km=null,n.current=r,Dk(r),uA(),xe=c,Te=l,Nn.transition=o}else n.current=r;if(eu&&(eu=!1,ps=n,ld=i),o=n.pendingLanes,o===0&&(Ts=null),fA(r.stateNode),Jt(n,Ye()),t!==null)for(s=n.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(ad)throw ad=!1,n=pp,pp=null,n;return ld&1&&n.tag!==0&&To(),o=n.pendingLanes,o&1?n===gp?il++:(il=0,gp=n):il=0,zs(),null}function To(){if(ps!==null){var n=Q_(ld),t=Nn.transition,r=Te;try{if(Nn.transition=null,Te=16>n?16:n,ps===null)var s=!1;else{if(n=ps,ps=null,ld=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,Q=n.current;Q!==null;){var o=Q,l=o.child;if(Q.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:rl(8,f,o)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var p=f.sibling,y=f.return;if(oE(f),f===d){Q=null;break}if(p!==null){p.return=y,Q=p;break}Q=y}}}var w=o.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var j=T.sibling;T.sibling=null,T=j}while(T!==null)}}Q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Q=l;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Q=b;break e}Q=o.return}}var v=n.current;for(Q=v;Q!==null;){l=Q;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,Q=x;else e:for(l=v;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Zd(9,c)}}catch(P){Ge(c,c.return,P)}if(c===l){Q=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,Q=N;break e}Q=c.return}}if(xe=i,zs(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(Hd,n)}catch{}s=!0}return s}finally{Te=r,Nn.transition=t}}return!1}function Hx(n,t,r){t=Oo(r,t),t=QT(n,t,1),n=_s(n,t,1),t=Bt(),n!==null&&(Jl(n,1,t),Jt(n,t))}function Ge(n,t,r){if(n.tag===3)Hx(n,n,r);else for(;t!==null;){if(t.tag===3){Hx(t,n,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ts===null||!Ts.has(s))){n=Oo(r,n),n=YT(t,n,1),t=_s(t,n,1),n=Bt(),t!==null&&(Jl(t,1,n),Jt(t,n));break}}t=t.return}}function Uk(n,t,r){var s=n.pingCache;s!==null&&s.delete(t),t=Bt(),n.pingedLanes|=n.suspendedLanes&r,ut===n&&(gt&r)===r&&(ot===4||ot===3&&(gt&130023424)===gt&&500>Ye()-iy?yi(n,0):sy|=r),Jt(n,t)}function gE(n,t){t===0&&(n.mode&1?(t=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):t=1);var r=Bt();n=Mr(n,t),n!==null&&(Jl(n,t,r),Jt(n,r))}function $k(n){var t=n.memoizedState,r=0;t!==null&&(r=t.retryLane),gE(n,r)}function Bk(n,t){var r=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(H(314))}s!==null&&s.delete(t),gE(n,r)}var yE;yE=function(n,t,r){if(n!==null)if(n.memoizedProps!==t.pendingProps||Yt.current)Qt=!0;else{if(!(n.lanes&r)&&!(t.flags&128))return Qt=!1,Ck(n,t,r);Qt=!!(n.flags&131072)}else Qt=!1,Me&&t.flags&1048576&&bT(t,Zu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Nu(n,t),n=t.pendingProps;var i=ko(t,kt.current);_o(t,r),i=Jg(null,t,s,n,i,r);var o=Zg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(s)?(o=!0,Xu(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gg(t),i.updater=Jd,t.stateNode=i,i._reactInternals=t,sp(t,s,n,r),t=ap(null,t,s,!0,o,r)):(t.tag=0,Me&&o&&Ug(t),Ut(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Nu(n,t),n=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=qk(s),n=Vn(s,n),i){case 0:t=op(null,t,s,n,r);break e;case 1:t=Ox(null,t,s,n,r);break e;case 11:t=Rx(null,t,s,n,r);break e;case 14:t=Dx(null,t,s,Vn(s.type,n),r);break e}throw Error(H(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vn(s,i),op(n,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vn(s,i),Ox(n,t,s,i,r);case 3:e:{if(eE(t),n===null)throw Error(H(387));s=t.pendingProps,o=t.memoizedState,i=o.element,ST(n,t),nd(t,s,null,r);var l=t.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Oo(Error(H(423)),t),t=Lx(n,t,s,r,i);break e}else if(s!==i){i=Oo(Error(H(424)),t),t=Lx(n,t,s,r,i);break e}else for(ln=bs(t.stateNode.containerInfo.firstChild),dn=t,Me=!0,Fn=null,r=NT(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Po(),s===i){t=Fr(n,t,r);break e}Ut(n,t,s,r)}t=t.child}return t;case 5:return IT(t),n===null&&tp(t),s=t.type,i=t.pendingProps,o=n!==null?n.memoizedProps:null,l=i.children,Ym(s,i)?l=null:o!==null&&Ym(s,o)&&(t.flags|=32),ZT(n,t),Ut(n,t,l,r),t.child;case 6:return n===null&&tp(t),null;case 13:return tE(n,t,r);case 4:return Kg(t,t.stateNode.containerInfo),s=t.pendingProps,n===null?t.child=Ro(t,null,s,r):Ut(n,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vn(s,i),Rx(n,t,s,i,r);case 7:return Ut(n,t,t.pendingProps,r),t.child;case 8:return Ut(n,t,t.pendingProps.children,r),t.child;case 12:return Ut(n,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,Ce(ed,s._currentValue),s._currentValue=l,o!==null)if(Wn(o.value,l)){if(o.children===i.children&&!Yt.current){t=Fr(n,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var u=c.firstContext;u!==null;){if(u.context===s){if(o.tag===1){u=Ir(-1,r&-r),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),np(o.return,r,t),c.lanes|=r;break}u=u.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(H(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),np(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ut(n,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,_o(t,r),i=Cn(i),s=s(i),t.flags|=1,Ut(n,t,s,r),t.child;case 14:return s=t.type,i=Vn(s,t.pendingProps),i=Vn(s.type,i),Dx(n,t,s,i,r);case 15:return XT(n,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Vn(s,i),Nu(n,t),t.tag=1,Xt(s)?(n=!0,Xu(t)):n=!1,_o(t,r),KT(t,s,i),sp(t,s,i,r),ap(null,t,s,!0,n,r);case 19:return nE(n,t,r);case 22:return JT(n,t,r)}throw Error(H(156,t.tag))};function vE(n,t){return H_(n,t)}function zk(n,t,r,s){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,t,r,s){return new zk(n,t,r,s)}function cy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qk(n){if(typeof n=="function")return cy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ig)return 11;if(n===Cg)return 14}return 2}function Ns(n,t){var r=n.alternate;return r===null?(r=En(n.tag,t,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=t,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,t=n.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Iu(n,t,r,s,i,o){var l=2;if(s=n,typeof n=="function")cy(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case to:return vi(r.children,i,o,t);case Sg:l=8,i|=8;break;case Im:return n=En(12,r,t,i|2),n.elementType=Im,n.lanes=o,n;case Cm:return n=En(13,r,t,i),n.elementType=Cm,n.lanes=o,n;case Am:return n=En(19,r,t,i),n.elementType=Am,n.lanes=o,n;case I_:return th(r,i,o,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case j_:l=10;break e;case S_:l=9;break e;case Ig:l=11;break e;case Cg:l=14;break e;case is:l=16,s=null;break e}throw Error(H(130,n==null?n:typeof n,""))}return t=En(l,r,t,i),t.elementType=n,t.type=s,t.lanes=o,t}function vi(n,t,r,s){return n=En(7,n,s,t),n.lanes=r,n}function th(n,t,r,s){return n=En(22,n,s,t),n.elementType=I_,n.lanes=r,n.stateNode={isHidden:!1},n}function zf(n,t,r){return n=En(6,n,null,t),n.lanes=r,n}function qf(n,t,r){return t=En(4,n.children!==null?n.children:[],n.key,t),t.lanes=r,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function Hk(n,t,r,s,i){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ef(0),this.expirationTimes=Ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ef(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uy(n,t,r,s,i,o,l,c,u){return n=new Hk(n,t,r,c,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=En(3,null,null,t),n.current=o,o.stateNode=n,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(o),n}function Wk(n,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:s==null?null:""+s,children:n,containerInfo:t,implementation:r}}function xE(n){if(!n)return Rs;n=n._reactInternals;e:{if(Oi(n)!==n||n.tag!==1)throw Error(H(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(n.tag===1){var r=n.type;if(Xt(r))return xT(n,r,t)}return t}function wE(n,t,r,s,i,o,l,c,u){return n=uy(r,s,!0,n,i,o,l,c,u),n.context=xE(null),r=n.current,s=Bt(),i=Es(r),o=Ir(s,i),o.callback=t??null,_s(r,o,i),n.current.lanes=i,Jl(n,i,s),Jt(n,s),n}function nh(n,t,r,s){var i=t.current,o=Bt(),l=Es(i);return r=xE(r),t.context===null?t.context=r:t.pendingContext=r,t=Ir(o,l),t.payload={element:n},s=s===void 0?null:s,s!==null&&(t.callback=s),n=_s(i,t,l),n!==null&&(Hn(n,i,l,o),_u(n,i,l)),l}function ud(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Wx(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<t?r:t}}function dy(n,t){Wx(n,t),(n=n.alternate)&&Wx(n,t)}function Gk(){return null}var bE=typeof reportError=="function"?reportError:function(n){console.error(n)};function hy(n){this._internalRoot=n}rh.prototype.render=hy.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(H(409));nh(n,t,null,null)};rh.prototype.unmount=hy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;Ni(function(){nh(null,n,null,null)}),t[Vr]=null}};function rh(n){this._internalRoot=n}rh.prototype.unstable_scheduleHydration=function(n){if(n){var t=J_();n={blockedOn:null,target:n,priority:t};for(var r=0;r<ls.length&&t!==0&&t<ls[r].priority;r++);ls.splice(r,0,n),r===0&&eT(n)}};function fy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Gx(){}function Kk(n,t,r,s,i){if(i){if(typeof s=="function"){var o=s;s=function(){var d=ud(l);o.call(d)}}var l=wE(t,s,n,0,null,!1,!1,"",Gx);return n._reactRootContainer=l,n[Vr]=l.current,El(n.nodeType===8?n.parentNode:n),Ni(),l}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var c=s;s=function(){var d=ud(u);c.call(d)}}var u=uy(n,0,!1,null,null,!1,!1,"",Gx);return n._reactRootContainer=u,n[Vr]=u.current,El(n.nodeType===8?n.parentNode:n),Ni(function(){nh(t,u,r,s)}),u}function ih(n,t,r,s,i){var o=r._reactRootContainer;if(o){var l=o;if(typeof i=="function"){var c=i;i=function(){var u=ud(l);c.call(u)}}nh(t,l,n,i)}else l=Kk(r,t,n,i,s);return ud(l)}Y_=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ba(t.pendingLanes);r!==0&&(Pg(t,r|1),Jt(t,Ye()),!(xe&6)&&(Lo=Ye()+500,zs()))}break;case 13:Ni(function(){var s=Mr(n,1);if(s!==null){var i=Bt();Hn(s,n,1,i)}}),dy(n,1)}};Rg=function(n){if(n.tag===13){var t=Mr(n,134217728);if(t!==null){var r=Bt();Hn(t,n,134217728,r)}dy(n,134217728)}};X_=function(n){if(n.tag===13){var t=Es(n),r=Mr(n,t);if(r!==null){var s=Bt();Hn(r,n,t,s)}dy(n,t)}};J_=function(){return Te};Z_=function(n,t){var r=Te;try{return Te=n,t()}finally{Te=r}};Um=function(n,t,r){switch(t){case"input":if(Rm(n,r),t=r.name,r.type==="radio"&&t!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==n&&s.form===n.form){var i=Qd(s);if(!i)throw Error(H(90));A_(s),Rm(s,i)}}}break;case"textarea":P_(n,r);break;case"select":t=r.value,t!=null&&vo(n,!!r.multiple,t,!1)}};F_=oy;U_=Ni;var Qk={usingClientEntryPoint:!1,Events:[ec,io,Qd,V_,M_,oy]},Pa={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yk={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=z_(n),n===null?null:n.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||Gk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{Hd=tu.inject(Yk),nr=tu}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qk;pn.createPortal=function(n,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fy(t))throw Error(H(200));return Wk(n,t,null,r)};pn.createRoot=function(n,t){if(!fy(n))throw Error(H(299));var r=!1,s="",i=bE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=uy(n,1,!1,null,null,r,!1,s,i),n[Vr]=t.current,El(n.nodeType===8?n.parentNode:n),new hy(t)};pn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(H(188)):(n=Object.keys(n).join(","),Error(H(268,n)));return n=z_(t),n=n===null?null:n.stateNode,n};pn.flushSync=function(n){return Ni(n)};pn.hydrate=function(n,t,r){if(!sh(t))throw Error(H(200));return ih(null,n,t,!0,r)};pn.hydrateRoot=function(n,t,r){if(!fy(n))throw Error(H(405));var s=r!=null&&r.hydratedSources||null,i=!1,o="",l=bE;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=wE(t,null,n,1,r??null,i,!1,o,l),n[Vr]=t.current,El(n),s)for(n=0;n<s.length;n++)r=s[n],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new rh(t)};pn.render=function(n,t,r){if(!sh(t))throw Error(H(200));return ih(null,n,t,!1,r)};pn.unmountComponentAtNode=function(n){if(!sh(n))throw Error(H(40));return n._reactRootContainer?(Ni(function(){ih(null,null,n,!1,function(){n._reactRootContainer=null,n[Vr]=null})}),!0):!1};pn.unstable_batchedUpdates=oy;pn.unstable_renderSubtreeIntoContainer=function(n,t,r,s){if(!sh(r))throw Error(H(200));if(n==null||n._reactInternals===void 0)throw Error(H(38));return ih(n,t,r,!1,s)};pn.version="18.3.1-next-f1338f8080-20240426";function _E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_E)}catch(n){console.error(n)}}_E(),__.exports=pn;var oh=__.exports;const Xk=Yo(oh);var Kx=oh;jm.createRoot=Kx.createRoot,jm.hydrateRoot=Kx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rl(){return Rl=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Rl.apply(this,arguments)}var gs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gs||(gs={}));const Qx="popstate";function Jk(n){n===void 0&&(n={});function t(s,i){let{pathname:o,search:l,hash:c}=s.location;return xp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:dd(i)}return eP(t,r,null,n)}function Je(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function TE(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zk(){return Math.random().toString(36).substr(2,8)}function Yx(n,t){return{usr:n.state,key:n.key,idx:t}}function xp(n,t,r,s){return r===void 0&&(r=null),Rl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof t=="string"?ea(t):t,{state:r,key:t&&t.key||s||Zk()})}function dd(n){let{pathname:t="/",search:r="",hash:s=""}=n;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ea(n){let t={};if(n){let r=n.indexOf("#");r>=0&&(t.hash=n.substr(r),n=n.substr(0,r));let s=n.indexOf("?");s>=0&&(t.search=n.substr(s),n=n.substr(0,s)),n&&(t.pathname=n)}return t}function eP(n,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:o=!1}=s,l=i.history,c=gs.Pop,u=null,d=f();d==null&&(d=0,l.replaceState(Rl({},l.state,{idx:d}),""));function f(){return(l.state||{idx:null}).idx}function m(){c=gs.Pop;let j=f(),b=j==null?null:j-d;d=j,u&&u({action:c,location:T.location,delta:b})}function p(j,b){c=gs.Push;let v=xp(T.location,j,b);r&&r(v,j),d=f()+1;let x=Yx(v,d),N=T.createHref(v);try{l.pushState(x,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(N)}o&&u&&u({action:c,location:T.location,delta:1})}function y(j,b){c=gs.Replace;let v=xp(T.location,j,b);r&&r(v,j),d=f();let x=Yx(v,d),N=T.createHref(v);l.replaceState(x,"",N),o&&u&&u({action:c,location:T.location,delta:0})}function w(j){let b=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof j=="string"?j:dd(j);return v=v.replace(/ $/,"%20"),Je(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let T={get action(){return c},get location(){return n(i,l)},listen(j){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Qx,m),u=j,()=>{i.removeEventListener(Qx,m),u=null}},createHref(j){return t(i,j)},createURL:w,encodeLocation(j){let b=w(j);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:y,go(j){return l.go(j)}};return T}var Xx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Xx||(Xx={}));function tP(n,t,r){return r===void 0&&(r="/"),nP(n,t,r,!1)}function nP(n,t,r,s){let i=typeof t=="string"?ea(t):t,o=my(i.pathname||"/",r);if(o==null)return null;let l=EE(n);rP(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let d=mP(o);c=hP(l[u],d,s)}return c}function EE(n,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=js([s,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Je(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),EE(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:uP(d,o.index),routesMeta:f})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of NE(o.path))i(o,l,u)}),t}function NE(n){let t=n.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let l=NE(s.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...l),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function rP(n){n.sort((t,r)=>t.score!==r.score?r.score-t.score:dP(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const sP=/^:[\w-]+$/,iP=3,oP=2,aP=1,lP=10,cP=-2,Jx=n=>n==="*";function uP(n,t){let r=n.split("/"),s=r.length;return r.some(Jx)&&(s+=cP),t&&(s+=oP),r.filter(i=>!Jx(i)).reduce((i,o)=>i+(sP.test(o)?iP:o===""?aP:lP),s)}function dP(n,t){return n.length===t.length&&n.slice(0,-1).every((s,i)=>s===t[i])?n[n.length-1]-t[t.length-1]:0}function hP(n,t,r){r===void 0&&(r=!1);let{routesMeta:s}=n,i={},o="/",l=[];for(let c=0;c<s.length;++c){let u=s[c],d=c===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",m=Zx({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!m&&d&&r&&!s[s.length-1].route.index&&(m=Zx({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:js([o,m.pathname]),pathnameBase:vP(js([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=js([o,m.pathnameBase]))}return l}function Zx(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,s]=fP(n.path,n.caseSensitive,n.end),i=t.match(r);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((d,f,m)=>{let{paramName:p,isOptional:y}=f;if(p==="*"){let T=c[m]||"";l=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const w=c[m];return y&&!w?d[p]=void 0:d[p]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function fP(n,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),TE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function mP(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return TE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),n}}function my(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=n.charAt(r);return s&&s!=="/"?null:n.slice(r)||"/"}function pP(n,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof n=="string"?ea(n):n;return{pathname:r?r.startsWith("/")?r:gP(r,t):t,search:xP(s),hash:wP(i)}}function gP(n,t){let r=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Hf(n,t,r,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yP(n){return n.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function py(n,t){let r=yP(n);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function gy(n,t,r,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=ea(n):(i=Rl({},n),Je(!i.pathname||!i.pathname.includes("?"),Hf("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),Hf("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),Hf("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=r;else{let m=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}c=m>=0?t[m]:"/"}let u=pP(i,c),d=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const js=n=>n.join("/").replace(/\/\/+/g,"/"),vP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const jE=["post","put","patch","delete"];new Set(jE);const _P=["get",...jE];new Set(_P);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Dl.apply(this,arguments)}const yy=I.createContext(null),TP=I.createContext(null),qs=I.createContext(null),ah=I.createContext(null),Kr=I.createContext({outlet:null,matches:[],isDataRoute:!1}),SE=I.createContext(null);function EP(n,t){let{relative:r}=t===void 0?{}:t;ta()||Je(!1);let{basename:s,navigator:i}=I.useContext(qs),{hash:o,pathname:l,search:c}=CE(n,{relative:r}),u=l;return s!=="/"&&(u=l==="/"?s:js([s,l])),i.createHref({pathname:u,search:c,hash:o})}function ta(){return I.useContext(ah)!=null}function Pn(){return ta()||Je(!1),I.useContext(ah).location}function IE(n){I.useContext(qs).static||I.useLayoutEffect(n)}function Rt(){let{isDataRoute:n}=I.useContext(Kr);return n?MP():NP()}function NP(){ta()||Je(!1);let n=I.useContext(yy),{basename:t,future:r,navigator:s}=I.useContext(qs),{matches:i}=I.useContext(Kr),{pathname:o}=Pn(),l=JSON.stringify(py(i,r.v7_relativeSplatPath)),c=I.useRef(!1);return IE(()=>{c.current=!0}),I.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let m=gy(d,JSON.parse(l),o,f.relative==="path");n==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:js([t,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[t,s,l,o,n])}function jP(){let{matches:n}=I.useContext(Kr),t=n[n.length-1];return t?t.params:{}}function CE(n,t){let{relative:r}=t===void 0?{}:t,{future:s}=I.useContext(qs),{matches:i}=I.useContext(Kr),{pathname:o}=Pn(),l=JSON.stringify(py(i,s.v7_relativeSplatPath));return I.useMemo(()=>gy(n,JSON.parse(l),o,r==="path"),[n,l,o,r])}function SP(n,t){return IP(n,t)}function IP(n,t,r,s){ta()||Je(!1);let{navigator:i}=I.useContext(qs),{matches:o}=I.useContext(Kr),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Pn(),f;if(t){var m;let j=typeof t=="string"?ea(t):t;u==="/"||(m=j.pathname)!=null&&m.startsWith(u)||Je(!1),f=j}else f=d;let p=f.pathname||"/",y=p;if(u!=="/"){let j=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=tP(n,{pathname:y}),T=RP(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:js([u,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:js([u,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,r,s);return t&&T?I.createElement(ah.Provider,{value:{location:Dl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:gs.Pop}},T):T}function CP(){let n=VP(),t=bP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,o)}const AP=I.createElement(CP,null);class kP extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?I.createElement(Kr.Provider,{value:this.props.routeContext},I.createElement(SE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PP(n){let{routeContext:t,match:r,children:s}=n,i=I.useContext(yy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(Kr.Provider,{value:t},s)}function RP(n,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let l=n,c=(i=r)==null?void 0:i.errors;if(c!=null){let f=l.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Je(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let m=l[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:p,errors:y}=r,w=m.route.loader&&p[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((f,m,p)=>{let y,w=!1,T=null,j=null;r&&(y=c&&m.route.id?c[m.route.id]:void 0,T=m.route.errorElement||AP,u&&(d<0&&p===0?(FP("route-fallback",!1),w=!0,j=null):d===p&&(w=!0,j=m.route.hydrateFallbackElement||null)));let b=t.concat(l.slice(0,p+1)),v=()=>{let x;return y?x=T:w?x=j:m.route.Component?x=I.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=f,I.createElement(PP,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:r!=null},children:x})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?I.createElement(kP,{location:r.location,revalidation:r.revalidation,component:T,error:y,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var AE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(AE||{}),hd=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(hd||{});function DP(n){let t=I.useContext(yy);return t||Je(!1),t}function OP(n){let t=I.useContext(TP);return t||Je(!1),t}function LP(n){let t=I.useContext(Kr);return t||Je(!1),t}function kE(n){let t=LP(),r=t.matches[t.matches.length-1];return r.route.id||Je(!1),r.route.id}function VP(){var n;let t=I.useContext(SE),r=OP(hd.UseRouteError),s=kE(hd.UseRouteError);return t!==void 0?t:(n=r.errors)==null?void 0:n[s]}function MP(){let{router:n}=DP(AE.UseNavigateStable),t=kE(hd.UseNavigateStable),r=I.useRef(!1);return IE(()=>{r.current=!0}),I.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Dl({fromRouteId:t},o)))},[n,t])}const ew={};function FP(n,t,r){!t&&!ew[n]&&(ew[n]=!0)}function UP(n,t){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function tw(n){let{to:t,replace:r,state:s,relative:i}=n;ta()||Je(!1);let{future:o,static:l}=I.useContext(qs),{matches:c}=I.useContext(Kr),{pathname:u}=Pn(),d=Rt(),f=gy(t,py(c,o.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return I.useEffect(()=>d(JSON.parse(m),{replace:r,state:s,relative:i}),[d,m,i,r,s]),null}function st(n){Je(!1)}function $P(n){let{basename:t="/",children:r=null,location:s,navigationType:i=gs.Pop,navigator:o,static:l=!1,future:c}=n;ta()&&Je(!1);let u=t.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:o,static:l,future:Dl({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);typeof s=="string"&&(s=ea(s));let{pathname:f="/",search:m="",hash:p="",state:y=null,key:w="default"}=s,T=I.useMemo(()=>{let j=my(f,u);return j==null?null:{location:{pathname:j,search:m,hash:p,state:y,key:w},navigationType:i}},[u,f,m,p,y,w,i]);return T==null?null:I.createElement(qs.Provider,{value:d},I.createElement(ah.Provider,{children:r,value:T}))}function BP(n){let{children:t,location:r}=n;return SP(wp(t),r)}new Promise(()=>{});function wp(n,t){t===void 0&&(t=[]);let r=[];return I.Children.forEach(n,(s,i)=>{if(!I.isValidElement(s))return;let o=[...t,i];if(s.type===I.Fragment){r.push.apply(r,wp(s.props.children,o));return}s.type!==st&&Je(!1),!s.props.index||!s.props.children||Je(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=wp(s.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bp(){return bp=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},bp.apply(this,arguments)}function zP(n,t){if(n==null)return{};var r={},s=Object.keys(n),i,o;for(o=0;o<s.length;o++)i=s[o],!(t.indexOf(i)>=0)&&(r[i]=n[i]);return r}function qP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HP(n,t){return n.button===0&&(!t||t==="_self")&&!qP(n)}const WP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GP="6";try{window.__reactRouterVersion=GP}catch{}const KP="startTransition",nw=w_[KP];function QP(n){let{basename:t,children:r,future:s,window:i}=n,o=I.useRef();o.current==null&&(o.current=Jk({window:i,v5Compat:!0}));let l=o.current,[c,u]=I.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},f=I.useCallback(m=>{d&&nw?nw(()=>u(m)):u(m)},[u,d]);return I.useLayoutEffect(()=>l.listen(f),[l,f]),I.useEffect(()=>UP(s),[s]),I.createElement($P,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:s})}const YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=I.forwardRef(function(t,r){let{onClick:s,relative:i,reloadDocument:o,replace:l,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=t,p=zP(t,WP),{basename:y}=I.useContext(qs),w,T=!1;if(typeof d=="string"&&XP.test(d)&&(w=d,YP))try{let x=new URL(window.location.href),N=d.startsWith("//")?new URL(x.protocol+d):new URL(d),P=my(N.pathname,y);N.origin===x.origin&&P!=null?d=P+N.search+N.hash:T=!0}catch{}let j=EP(d,{relative:i}),b=JP(d,{replace:l,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:m});function v(x){s&&s(x),x.defaultPrevented||b(x)}return I.createElement("a",bp({},p,{href:w||j,onClick:T||o?s:v,ref:r,target:u}))});var rw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(rw||(rw={}));var sw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sw||(sw={}));function JP(n,t){let{target:r,replace:s,state:i,preventScrollReset:o,relative:l,viewTransition:c}=t===void 0?{}:t,u=Rt(),d=Pn(),f=CE(n,{relative:l});return I.useCallback(m=>{if(HP(m,r)){m.preventDefault();let p=s!==void 0?s:dd(d)===dd(f);u(n,{replace:p,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[d,u,f,s,i,r,n,o,l,c])}function PE(n){var t,r,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(r=PE(n[t]))&&(s&&(s+=" "),s+=r)}else for(r in n)n[r]&&(s&&(s+=" "),s+=r);return s}function RE(){for(var n,t,r=0,s="",i=arguments.length;r<i;r++)(n=arguments[r])&&(t=PE(n))&&(s&&(s+=" "),s+=t);return s}function ZP(){for(var n=0,t,r,s="";n<arguments.length;)(t=arguments[n++])&&(r=DE(t))&&(s&&(s+=" "),s+=r);return s}function DE(n){if(typeof n=="string")return n;for(var t,r="",s=0;s<n.length;s++)n[s]&&(t=DE(n[s]))&&(r&&(r+=" "),r+=t);return r}var vy="-";function eR(n){var t=nR(n),r=n.conflictingClassGroups,s=n.conflictingClassGroupModifiers,i=s===void 0?{}:s;function o(c){var u=c.split(vy);return u[0]===""&&u.length!==1&&u.shift(),OE(u,t)||tR(c)}function l(c,u){var d=r[c]||[];return u&&i[c]?[].concat(d,i[c]):d}return{getClassGroupId:o,getConflictingClassGroupIds:l}}function OE(n,t){var l;if(n.length===0)return t.classGroupId;var r=n[0],s=t.nextPart.get(r),i=s?OE(n.slice(1),s):void 0;if(i)return i;if(t.validators.length!==0){var o=n.join(vy);return(l=t.validators.find(function(c){var u=c.validator;return u(o)}))==null?void 0:l.classGroupId}}var iw=/^\[(.+)\]$/;function tR(n){if(iw.test(n)){var t=iw.exec(n)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function nR(n){var t=n.theme,r=n.prefix,s={nextPart:new Map,validators:[]},i=sR(Object.entries(n.classGroups),r);return i.forEach(function(o){var l=o[0],c=o[1];_p(c,s,l,t)}),s}function _p(n,t,r,s){n.forEach(function(i){if(typeof i=="string"){var o=i===""?t:ow(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(rR(i)){_p(i(s),t,r,s);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(function(l){var c=l[0],u=l[1];_p(u,ow(t,c),r,s)})})}function ow(n,t){var r=n;return t.split(vy).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function rR(n){return n.isThemeGetter}function sR(n,t){return t?n.map(function(r){var s=r[0],i=r[1],o=i.map(function(l){return typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(function(c){var u=c[0],d=c[1];return[t+u,d]})):l});return[s,o]}):n}function iR(n){if(n<1)return{get:function(){},set:function(){}};var t=0,r=new Map,s=new Map;function i(o,l){r.set(o,l),t++,t>n&&(t=0,s=r,r=new Map)}return{get:function(l){var c=r.get(l);if(c!==void 0)return c;if((c=s.get(l))!==void 0)return i(l,c),c},set:function(l,c){r.has(l)?r.set(l,c):i(l,c)}}}var LE="!";function oR(n){var t=n.separator||":",r=t.length===1,s=t[0],i=t.length;return function(l){for(var c=[],u=0,d=0,f,m=0;m<l.length;m++){var p=l[m];if(u===0){if(p===s&&(r||l.slice(m,m+i)===t)){c.push(l.slice(d,m)),d=m+i;continue}if(p==="/"){f=m;continue}}p==="["?u++:p==="]"&&u--}var y=c.length===0?l:l.substring(d),w=y.startsWith(LE),T=w?y.substring(1):y,j=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:w,baseClassName:T,maybePostfixModifierPosition:j}}}function aR(n){if(n.length<=1)return n;var t=[],r=[];return n.forEach(function(s){var i=s[0]==="[";i?(t.push.apply(t,r.sort().concat([s])),r=[]):r.push(s)}),t.push.apply(t,r.sort()),t}function lR(n){return{cache:iR(n.cacheSize),splitModifiers:oR(n),...eR(n)}}var cR=/\s+/;function uR(n,t){var r=t.splitModifiers,s=t.getClassGroupId,i=t.getConflictingClassGroupIds,o=new Set;return n.trim().split(cR).map(function(l){var c=r(l),u=c.modifiers,d=c.hasImportantModifier,f=c.baseClassName,m=c.maybePostfixModifierPosition,p=s(m?f.substring(0,m):f),y=!!m;if(!p){if(!m)return{isTailwindClass:!1,originalClassName:l};if(p=s(f),!p)return{isTailwindClass:!1,originalClassName:l};y=!1}var w=aR(u).join(":"),T=d?w+LE:w;return{isTailwindClass:!0,modifierId:T,classGroupId:p,originalClassName:l,hasPostfixModifier:y}}).reverse().filter(function(l){if(!l.isTailwindClass)return!0;var c=l.modifierId,u=l.classGroupId,d=l.hasPostfixModifier,f=c+u;return o.has(f)?!1:(o.add(f),i(u,d).forEach(function(m){return o.add(c+m)}),!0)}).reverse().map(function(l){return l.originalClassName}).join(" ")}function dR(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var s,i,o,l=c;function c(d){var f=t[0],m=t.slice(1),p=m.reduce(function(y,w){return w(y)},f());return s=lR(p),i=s.cache.get,o=s.cache.set,l=u,u(d)}function u(d){var f=i(d);if(f)return f;var m=uR(d,s);return o(d,m),m}return function(){return l(ZP.apply(null,arguments))}}function Pe(n){var t=function(s){return s[n]||[]};return t.isThemeGetter=!0,t}var VE=/^\[(?:([a-z-]+):)?(.+)\]$/i,hR=/^\d+\/\d+$/,fR=new Set(["px","full","screen"]),mR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gR=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ln(n){return hi(n)||fR.has(n)||hR.test(n)||Tp(n)}function Tp(n){return Li(n,"length",_R)}function yR(n){return Li(n,"size",ME)}function vR(n){return Li(n,"position",ME)}function xR(n){return Li(n,"url",TR)}function nu(n){return Li(n,"number",hi)}function hi(n){return!Number.isNaN(Number(n))}function wR(n){return n.endsWith("%")&&hi(n.slice(0,-1))}function Ra(n){return aw(n)||Li(n,"number",aw)}function me(n){return VE.test(n)}function Da(){return!0}function es(n){return mR.test(n)}function bR(n){return Li(n,"",ER)}function Li(n,t,r){var s=VE.exec(n);return s?s[1]?s[1]===t:r(s[2]):!1}function _R(n){return pR.test(n)}function ME(){return!1}function TR(n){return n.startsWith("url(")}function aw(n){return Number.isInteger(Number(n))}function ER(n){return gR.test(n)}function NR(){var n=Pe("colors"),t=Pe("spacing"),r=Pe("blur"),s=Pe("brightness"),i=Pe("borderColor"),o=Pe("borderRadius"),l=Pe("borderSpacing"),c=Pe("borderWidth"),u=Pe("contrast"),d=Pe("grayscale"),f=Pe("hueRotate"),m=Pe("invert"),p=Pe("gap"),y=Pe("gradientColorStops"),w=Pe("gradientColorStopPositions"),T=Pe("inset"),j=Pe("margin"),b=Pe("opacity"),v=Pe("padding"),x=Pe("saturate"),N=Pe("scale"),P=Pe("sepia"),O=Pe("skew"),S=Pe("space"),_=Pe("translate"),C=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},A=function(){return["auto",me,t]},L=function(){return[me,t]},D=function(){return["",Ln]},$=function(){return["auto",hi,me]},Z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},oe=function(){return["solid","dashed","dotted","double","none"]},ve=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},q=function(){return["start","end","center","between","around","evenly","stretch"]},K=function(){return["","0",me]},ee=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},te=function(){return[hi,nu]},ce=function(){return[hi,me]};return{cacheSize:500,theme:{colors:[Da],spacing:[Ln],blur:["none","",es,me],brightness:te(),borderColor:[n],borderRadius:["none","","full",es,me],borderSpacing:L(),borderWidth:D(),contrast:te(),grayscale:K(),hueRotate:ce(),invert:K(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[wR,Tp],inset:A(),margin:A(),opacity:te(),padding:L(),saturate:te(),scale:te(),sepia:K(),skew:ce(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[es]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Z(),[me])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[T]}],"inset-x":[{"inset-x":[T]}],"inset-y":[{"inset-y":[T]}],start:[{start:[T]}],end:[{end:[T]}],top:[{top:[T]}],right:[{right:[T]}],bottom:[{bottom:[T]}],left:[{left:[T]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ra]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Ra]}],"grid-cols":[{"grid-cols":[Da]}],"col-start-end":[{col:["auto",{span:["full",Ra]},me]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Da]}],"row-start-end":[{row:["auto",{span:[Ra]},me]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(q())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(q(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(q(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",me,t]}],"min-w":[{"min-w":["min","max","fit",me,Ln]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[es]},es,me]}],h:[{h:[me,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",me,Ln]}],"max-h":[{"max-h":[me,t,"min","max","fit"]}],"font-size":[{text:["base",es,Tp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nu]}],"font-family":[{font:[Da]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",hi,nu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",me,Ln]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(oe(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ln]}],"underline-offset":[{"underline-offset":["auto",me,Ln]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Z(),[vR])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xR]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[].concat(oe(),["hidden"])}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:oe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(oe())}],"outline-offset":[{"outline-offset":[me,Ln]}],"outline-w":[{outline:[Ln]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Ln]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",es,bR]}],"shadow-color":[{shadow:[Da]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":ve()}],"bg-blend":[{"bg-blend":ve()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",es,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[x]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Ra,me]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ln,nu]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var jR=dR(NR);function Hs(...n){return jR(RE(n))}function an(n,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(n==null||n(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function lw(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function FE(...n){return t=>{let r=!1;const s=n.map(i=>{const o=lw(i,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let i=0;i<s.length;i++){const o=s[i];typeof o=="function"?o():lw(n[i],null)}}}}function ji(...n){return I.useCallback(FE(...n),n)}function UE(n,t=[]){let r=[];function s(o,l){const c=I.createContext(l),u=r.length;r=[...r,l];const d=m=>{var b;const{scope:p,children:y,...w}=m,T=((b=p==null?void 0:p[n])==null?void 0:b[u])||c,j=I.useMemo(()=>w,Object.values(w));return a.jsx(T.Provider,{value:j,children:y})};d.displayName=o+"Provider";function f(m,p){var T;const y=((T=p==null?void 0:p[n])==null?void 0:T[u])||c,w=I.useContext(y);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,f]}const i=()=>{const o=r.map(l=>I.createContext(l));return function(c){const u=(c==null?void 0:c[n])||o;return I.useMemo(()=>({[`__scope${n}`]:{...c,[n]:u}}),[c,u])}};return i.scopeName=n,[s,SR(i,...t)]}function SR(...n){const t=n[0];if(n.length===1)return t;const r=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const l=s.reduce((c,{useScope:u,scopeName:d})=>{const m=u(o)[`__scope${d}`];return{...c,...m}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}function fd(n){const t=CR(n),r=I.forwardRef((s,i)=>{const{children:o,...l}=s,c=I.Children.toArray(o),u=c.find(kR);if(u){const d=u.props.children,f=c.map(m=>m===u?I.Children.count(d)>1?I.Children.only(null):I.isValidElement(d)?d.props.children:null:m);return a.jsx(t,{...l,ref:i,children:I.isValidElement(d)?I.cloneElement(d,void 0,f):null})}return a.jsx(t,{...l,ref:i,children:o})});return r.displayName=`${n}.Slot`,r}var IR=fd("Slot");function CR(n){const t=I.forwardRef((r,s)=>{const{children:i,...o}=r;if(I.isValidElement(i)){const l=RR(i),c=PR(o,i.props);return i.type!==I.Fragment&&(c.ref=s?FE(s,l):l),I.cloneElement(i,c)}return I.Children.count(i)>1?I.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var AR=Symbol("radix.slottable");function kR(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===AR}function PR(n,t){const r={...t};for(const s in t){const i=n[s],o=t[s];/^on[A-Z]/.test(s)?i&&o?r[s]=(...c)=>{const u=o(...c);return i(...c),u}:i&&(r[s]=i):s==="style"?r[s]={...i,...o}:s==="className"&&(r[s]=[i,o].filter(Boolean).join(" "))}return{...n,...r}}function RR(n){var s,i;let t=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}function DR(n){const t=n+"CollectionProvider",[r,s]=UE(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=T=>{const{scope:j,children:b}=T,v=je.useRef(null),x=je.useRef(new Map).current;return a.jsx(i,{scope:j,itemMap:x,collectionRef:v,children:b})};l.displayName=t;const c=n+"CollectionSlot",u=fd(c),d=je.forwardRef((T,j)=>{const{scope:b,children:v}=T,x=o(c,b),N=ji(j,x.collectionRef);return a.jsx(u,{ref:N,children:v})});d.displayName=c;const f=n+"CollectionItemSlot",m="data-radix-collection-item",p=fd(f),y=je.forwardRef((T,j)=>{const{scope:b,children:v,...x}=T,N=je.useRef(null),P=ji(j,N),O=o(f,b);return je.useEffect(()=>(O.itemMap.set(N,{ref:N,...x}),()=>void O.itemMap.delete(N))),a.jsx(p,{[m]:"",ref:P,children:v})});y.displayName=f;function w(T){const j=o(n+"CollectionConsumer",T);return je.useCallback(()=>{const v=j.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((O,S)=>x.indexOf(O.ref.current)-x.indexOf(S.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:l,Slot:d,ItemSlot:y},w,s]}var OR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fr=OR.reduce((n,t)=>{const r=fd(`Primitive.${t}`),s=I.forwardRef((i,o)=>{const{asChild:l,...c}=i,u=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:o})});return s.displayName=`Primitive.${t}`,{...n,[t]:s}},{});function $E(n,t){n&&oh.flushSync(()=>n.dispatchEvent(t))}function Si(n){const t=I.useRef(n);return I.useEffect(()=>{t.current=n}),I.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function LR(n,t=globalThis==null?void 0:globalThis.document){const r=Si(n);I.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var VR="DismissableLayer",Ep="dismissableLayer.update",MR="dismissableLayer.pointerDownOutside",FR="dismissableLayer.focusOutside",cw,BE=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zE=I.forwardRef((n,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=n,d=I.useContext(BE),[f,m]=I.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=I.useState({}),w=ji(t,S=>m(S)),T=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=T.indexOf(j),v=f?T.indexOf(f):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,N=v>=b,P=$R(S=>{const _=S.target,C=[...d.branches].some(R=>R.contains(_));!N||C||(i==null||i(S),l==null||l(S),S.defaultPrevented||c==null||c())},p),O=BR(S=>{const _=S.target;[...d.branches].some(R=>R.contains(_))||(o==null||o(S),l==null||l(S),S.defaultPrevented||c==null||c())},p);return LR(S=>{v===d.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&c&&(S.preventDefault(),c()))},p),I.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(cw=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),uw(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=cw)}},[f,p,r,d]),I.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),uw())},[f,d]),I.useEffect(()=>{const S=()=>y({});return document.addEventListener(Ep,S),()=>document.removeEventListener(Ep,S)},[]),a.jsx(fr.div,{...u,ref:w,style:{pointerEvents:x?N?"auto":"none":void 0,...n.style},onFocusCapture:an(n.onFocusCapture,O.onFocusCapture),onBlurCapture:an(n.onBlurCapture,O.onBlurCapture),onPointerDownCapture:an(n.onPointerDownCapture,P.onPointerDownCapture)})});zE.displayName=VR;var UR="DismissableLayerBranch",qE=I.forwardRef((n,t)=>{const r=I.useContext(BE),s=I.useRef(null),i=ji(t,s);return I.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx(fr.div,{...n,ref:i})});qE.displayName=UR;function $R(n,t=globalThis==null?void 0:globalThis.document){const r=Si(n),s=I.useRef(!1),i=I.useRef(()=>{});return I.useEffect(()=>{const o=c=>{if(c.target&&!s.current){let u=function(){HE(MR,r,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function BR(n,t=globalThis==null?void 0:globalThis.document){const r=Si(n),s=I.useRef(!1);return I.useEffect(()=>{const i=o=>{o.target&&!s.current&&HE(FR,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function uw(){const n=new CustomEvent(Ep);document.dispatchEvent(n)}function HE(n,t,r,{discrete:s}){const i=r.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(n,t,{once:!0}),s?$E(i,o):i.dispatchEvent(o)}var zR=zE,qR=qE,Ol=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{},HR="Portal",WE=I.forwardRef((n,t)=>{var c;const{container:r,...s}=n,[i,o]=I.useState(!1);Ol(()=>o(!0),[]);const l=r||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Xk.createPortal(a.jsx(fr.div,{...s,ref:t}),l):null});WE.displayName=HR;function WR(n,t){return I.useReducer((r,s)=>t[r][s]??r,n)}var GE=n=>{const{present:t,children:r}=n,s=GR(t),i=typeof r=="function"?r({present:s.isPresent}):I.Children.only(r),o=ji(s.ref,KR(i));return typeof r=="function"||s.isPresent?I.cloneElement(i,{ref:o}):null};GE.displayName="Presence";function GR(n){const[t,r]=I.useState(),s=I.useRef(null),i=I.useRef(n),o=I.useRef("none"),l=n?"mounted":"unmounted",[c,u]=WR(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const d=ru(s.current);o.current=c==="mounted"?d:"none"},[c]),Ol(()=>{const d=s.current,f=i.current;if(f!==n){const p=o.current,y=ru(d);n?u("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&p!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,u]),Ol(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,m=y=>{const T=ru(s.current).includes(y.animationName);if(y.target===t&&T&&(u("ANIMATION_END"),!i.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},p=y=>{y.target===t&&(o.current=ru(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function ru(n){return(n==null?void 0:n.animationName)||"none"}function KR(n){var s,i;let t=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var QR=w_[" useInsertionEffect ".trim().toString()]||Ol;function YR({prop:n,defaultProp:t,onChange:r=()=>{},caller:s}){const[i,o,l]=XR({defaultProp:t,onChange:r}),c=n!==void 0,u=c?n:i;{const f=I.useRef(n!==void 0);I.useEffect(()=>{const m=f.current;m!==c&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const d=I.useCallback(f=>{var m;if(c){const p=JR(f)?f(n):f;p!==n&&((m=l.current)==null||m.call(l,p))}else o(f)},[c,n,o,l]);return[u,d]}function XR({defaultProp:n,onChange:t}){const[r,s]=I.useState(n),i=I.useRef(r),o=I.useRef(t);return QR(()=>{o.current=t},[t]),I.useEffect(()=>{var l;i.current!==r&&((l=o.current)==null||l.call(o,r),i.current=r)},[r,i]),[r,s,o]}function JR(n){return typeof n=="function"}var ZR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),e4="VisuallyHidden",xy=I.forwardRef((n,t)=>a.jsx(fr.span,{...n,ref:t,style:{...ZR,...n.style}}));xy.displayName=e4;var wy="ToastProvider",[by,t4,n4]=DR("Toast"),[KE,WB]=UE("Toast",[n4]),[r4,lh]=KE(wy),QE=n=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:l}=n,[c,u]=I.useState(null),[d,f]=I.useState(0),m=I.useRef(!1),p=I.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${wy}\`. Expected non-empty \`string\`.`),a.jsx(by.Provider,{scope:t,children:a.jsx(r4,{scope:t,label:r,duration:s,swipeDirection:i,swipeThreshold:o,toastCount:d,viewport:c,onViewportChange:u,onToastAdd:I.useCallback(()=>f(y=>y+1),[]),onToastRemove:I.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:l})})};QE.displayName=wy;var YE="ToastViewport",s4=["F8"],Np="toast.viewportPause",jp="toast.viewportResume",XE=I.forwardRef((n,t)=>{const{__scopeToast:r,hotkey:s=s4,label:i="Notifications ({hotkey})",...o}=n,l=lh(YE,r),c=t4(r),u=I.useRef(null),d=I.useRef(null),f=I.useRef(null),m=I.useRef(null),p=ji(t,m,l.onViewportChange),y=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=l.toastCount>0;I.useEffect(()=>{const j=b=>{var x;s.length!==0&&s.every(N=>b[N]||b.code===N)&&((x=m.current)==null||x.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[s]),I.useEffect(()=>{const j=u.current,b=m.current;if(w&&j&&b){const v=()=>{if(!l.isClosePausedRef.current){const O=new CustomEvent(Np);b.dispatchEvent(O),l.isClosePausedRef.current=!0}},x=()=>{if(l.isClosePausedRef.current){const O=new CustomEvent(jp);b.dispatchEvent(O),l.isClosePausedRef.current=!1}},N=O=>{!j.contains(O.relatedTarget)&&x()},P=()=>{j.contains(document.activeElement)||x()};return j.addEventListener("focusin",v),j.addEventListener("focusout",N),j.addEventListener("pointermove",v),j.addEventListener("pointerleave",P),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{j.removeEventListener("focusin",v),j.removeEventListener("focusout",N),j.removeEventListener("pointermove",v),j.removeEventListener("pointerleave",P),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[w,l.isClosePausedRef]);const T=I.useCallback(({tabbingDirection:j})=>{const v=c().map(x=>{const N=x.ref.current,P=[N,...y4(N)];return j==="forwards"?P:P.reverse()});return(j==="forwards"?v.reverse():v).flat()},[c]);return I.useEffect(()=>{const j=m.current;if(j){const b=v=>{var P,O,S;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const _=document.activeElement,C=v.shiftKey;if(v.target===j&&C){(P=d.current)==null||P.focus();return}const L=T({tabbingDirection:C?"backwards":"forwards"}),D=L.findIndex($=>$===_);Wf(L.slice(D+1))?v.preventDefault():C?(O=d.current)==null||O.focus():(S=f.current)==null||S.focus()}};return j.addEventListener("keydown",b),()=>j.removeEventListener("keydown",b)}},[c,T]),a.jsxs(qR,{ref:u,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(Sp,{ref:d,onFocusFromOutsideViewport:()=>{const j=T({tabbingDirection:"forwards"});Wf(j)}}),a.jsx(by.Slot,{scope:r,children:a.jsx(fr.ol,{tabIndex:-1,...o,ref:p})}),w&&a.jsx(Sp,{ref:f,onFocusFromOutsideViewport:()=>{const j=T({tabbingDirection:"backwards"});Wf(j)}})]})});XE.displayName=YE;var JE="ToastFocusProxy",Sp=I.forwardRef((n,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...i}=n,o=lh(JE,r);return a.jsx(xy,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:l=>{var d;const c=l.relatedTarget;!((d=o.viewport)!=null&&d.contains(c))&&s()}})});Sp.displayName=JE;var nc="Toast",i4="toast.swipeStart",o4="toast.swipeMove",a4="toast.swipeCancel",l4="toast.swipeEnd",ZE=I.forwardRef((n,t)=>{const{forceMount:r,open:s,defaultOpen:i,onOpenChange:o,...l}=n,[c,u]=YR({prop:s,defaultProp:i??!0,onChange:o,caller:nc});return a.jsx(GE,{present:r||c,children:a.jsx(d4,{open:c,...l,ref:t,onClose:()=>u(!1),onPause:Si(n.onPause),onResume:Si(n.onResume),onSwipeStart:an(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:an(n.onSwipeMove,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:an(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:an(n.onSwipeEnd,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),u(!1)})})})});ZE.displayName=nc;var[c4,u4]=KE(nc,{onClose(){}}),d4=I.forwardRef((n,t)=>{const{__scopeToast:r,type:s="foreground",duration:i,open:o,onClose:l,onEscapeKeyDown:c,onPause:u,onResume:d,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:y,...w}=n,T=lh(nc,r),[j,b]=I.useState(null),v=ji(t,$=>b($)),x=I.useRef(null),N=I.useRef(null),P=i||T.duration,O=I.useRef(0),S=I.useRef(P),_=I.useRef(0),{onToastAdd:C,onToastRemove:R}=T,A=Si(()=>{var Z;(j==null?void 0:j.contains(document.activeElement))&&((Z=T.viewport)==null||Z.focus()),l()}),L=I.useCallback($=>{!$||$===1/0||(window.clearTimeout(_.current),O.current=new Date().getTime(),_.current=window.setTimeout(A,$))},[A]);I.useEffect(()=>{const $=T.viewport;if($){const Z=()=>{L(S.current),d==null||d()},oe=()=>{const ve=new Date().getTime()-O.current;S.current=S.current-ve,window.clearTimeout(_.current),u==null||u()};return $.addEventListener(Np,oe),$.addEventListener(jp,Z),()=>{$.removeEventListener(Np,oe),$.removeEventListener(jp,Z)}}},[T.viewport,P,u,d,L]),I.useEffect(()=>{o&&!T.isClosePausedRef.current&&L(P)},[o,P,T.isClosePausedRef,L]),I.useEffect(()=>(C(),()=>R()),[C,R]);const D=I.useMemo(()=>j?oN(j):null,[j]);return T.viewport?a.jsxs(a.Fragment,{children:[D&&a.jsx(h4,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),a.jsx(c4,{scope:r,onClose:A,children:oh.createPortal(a.jsx(by.ItemSlot,{scope:r,children:a.jsx(zR,{asChild:!0,onEscapeKeyDown:an(c,()=>{T.isFocusedToastEscapeKeyDownRef.current||A(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(fr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":T.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:an(n.onKeyDown,$=>{$.key==="Escape"&&(c==null||c($.nativeEvent),$.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:an(n.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:an(n.onPointerMove,$=>{if(!x.current)return;const Z=$.clientX-x.current.x,oe=$.clientY-x.current.y,ve=!!N.current,q=["left","right"].includes(T.swipeDirection),K=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,ee=q?K(0,Z):0,te=q?0:K(0,oe),ce=$.pointerType==="touch"?10:2,ne={x:ee,y:te},Dt={originalEvent:$,delta:ne};ve?(N.current=ne,su(o4,m,Dt,{discrete:!1})):dw(ne,T.swipeDirection,ce)?(N.current=ne,su(i4,f,Dt,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(Z)>ce||Math.abs(oe)>ce)&&(x.current=null)}),onPointerUp:an(n.onPointerUp,$=>{const Z=N.current,oe=$.target;if(oe.hasPointerCapture($.pointerId)&&oe.releasePointerCapture($.pointerId),N.current=null,x.current=null,Z){const ve=$.currentTarget,q={originalEvent:$,delta:Z};dw(Z,T.swipeDirection,T.swipeThreshold)?su(l4,y,q,{discrete:!0}):su(a4,p,q,{discrete:!0}),ve.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),h4=n=>{const{__scopeToast:t,children:r,...s}=n,i=lh(nc,t),[o,l]=I.useState(!1),[c,u]=I.useState(!1);return p4(()=>l(!0)),I.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),c?null:a.jsx(WE,{asChild:!0,children:a.jsx(xy,{...s,children:o&&a.jsxs(a.Fragment,{children:[i.label," ",r]})})})},f4="ToastTitle",eN=I.forwardRef((n,t)=>{const{__scopeToast:r,...s}=n;return a.jsx(fr.div,{...s,ref:t})});eN.displayName=f4;var m4="ToastDescription",tN=I.forwardRef((n,t)=>{const{__scopeToast:r,...s}=n;return a.jsx(fr.div,{...s,ref:t})});tN.displayName=m4;var nN="ToastAction",rN=I.forwardRef((n,t)=>{const{altText:r,...s}=n;return r.trim()?a.jsx(iN,{altText:r,asChild:!0,children:a.jsx(_y,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${nN}\`. Expected non-empty \`string\`.`),null)});rN.displayName=nN;var sN="ToastClose",_y=I.forwardRef((n,t)=>{const{__scopeToast:r,...s}=n,i=u4(sN,r);return a.jsx(iN,{asChild:!0,children:a.jsx(fr.button,{type:"button",...s,ref:t,onClick:an(n.onClick,i.onClose)})})});_y.displayName=sN;var iN=I.forwardRef((n,t)=>{const{__scopeToast:r,altText:s,...i}=n;return a.jsx(fr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function oN(n){const t=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),g4(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const l=s.dataset.radixToastAnnounceAlt;l&&t.push(l)}else t.push(...oN(s))}}),t}function su(n,t,r,{discrete:s}){const i=r.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(n,t,{once:!0}),s?$E(i,o):i.dispatchEvent(o)}var dw=(n,t,r=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),o=s>i;return t==="left"||t==="right"?o&&s>r:!o&&i>r};function p4(n=()=>{}){const t=Si(n);Ol(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function g4(n){return n.nodeType===n.ELEMENT_NODE}function y4(n){const t=[],r=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Wf(n){const t=document.activeElement;return n.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var v4=QE,aN=XE,lN=ZE,cN=eN,uN=tN,dN=rN,hN=_y;const hw=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,fw=RE,fN=(n,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return fw(n,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=t,l=Object.keys(i).map(d=>{const f=r==null?void 0:r[d],m=o==null?void 0:o[d];if(f===null)return null;const p=hw(f)||hw(m);return i[d][p]}),c=r&&Object.entries(r).reduce((d,f)=>{let[m,p]=f;return p===void 0||(d[m]=p),d},{}),u=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:m,className:p,...y}=f;return Object.entries(y).every(w=>{let[T,j]=w;return Array.isArray(j)?j.includes({...o,...c}[T]):{...o,...c}[T]===j})?[...d,m,p]:d},[]);return fw(n,l,u,r==null?void 0:r.class,r==null?void 0:r.className)};var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X=(n,t)=>{const r=I.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c,...u},d)=>I.createElement("svg",{ref:d,...x4,width:i,height:i,stroke:s,strokeWidth:l?Number(o)*24/Number(i):o,className:`lucide lucide-${w4(n)}`,...u},[...t.map(([f,m])=>I.createElement(f,m)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${n}`,r},b4=X("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),mN=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Vo=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),_4=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),T4=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ws=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ur=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),mw=X("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ds=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),E4=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),N4=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),jn=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),j4=X("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),S4=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Un=X("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),pN=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),I4=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),C4=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ip=X("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),A4=X("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]),k4=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),P4=X("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),pw=X("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),R4=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Cr=X("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),D4=X("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),ch=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Cp=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),O4=X("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),uh=X("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),Ar=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),gw=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),L4=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ll=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),V4=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ue=X("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),M4=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),cn=X("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),na=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),F4=X("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Gn=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ur=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),U4=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Os=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),rc=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ap=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),kr=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),md=X("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),ra=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),yw=X("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),Eo=X("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),gN=X("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Pr=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),$4=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),yN=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),B4=X("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Se=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Sn=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),z4=X("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),vN=X("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),er=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),yn=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xN=X("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),q4=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),H4=v4,wN=je.forwardRef(({className:n,...t},r)=>a.jsx(aN,{ref:r,className:Hs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...t}));wN.displayName=aN.displayName;const W4=fN("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bN=je.forwardRef(({className:n,variant:t,...r},s)=>a.jsx(lN,{ref:s,className:Hs(W4({variant:t}),n),...r}));bN.displayName=lN.displayName;const G4=je.forwardRef(({className:n,...t},r)=>a.jsx(dN,{ref:r,className:Hs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...t}));G4.displayName=dN.displayName;const _N=je.forwardRef(({className:n,...t},r)=>a.jsx(hN,{ref:r,className:Hs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...t,children:a.jsx(yn,{className:"h-4 w-4"})}));_N.displayName=hN.displayName;const TN=je.forwardRef(({className:n,...t},r)=>a.jsx(cN,{ref:r,className:Hs("text-sm font-semibold",n),...t}));TN.displayName=cN.displayName;const EN=je.forwardRef(({className:n,...t},r)=>a.jsx(uN,{ref:r,className:Hs("text-sm opacity-90",n),...t}));EN.displayName=uN.displayName;const K4=1;let Gf=0;function Q4(){return Gf=(Gf+1)%Number.MAX_VALUE,Gf.toString()}const Mt={state:{toasts:[]},listeners:[],getState:()=>Mt.state,setState:n=>{typeof n=="function"?Mt.state=n(Mt.state):Mt.state={...Mt.state,...n},Mt.listeners.forEach(t=>t(Mt.state))},subscribe:n=>(Mt.listeners.push(n),()=>{Mt.listeners=Mt.listeners.filter(t=>t!==n)})},U=({...n})=>{const t=Q4(),r=i=>Mt.setState(o=>({...o,toasts:o.toasts.map(l=>l.id===t?{...l,...i}:l)})),s=()=>Mt.setState(i=>({...i,toasts:i.toasts.filter(o=>o.id!==t)}));return Mt.setState(i=>({...i,toasts:[{...n,id:t,dismiss:s},...i.toasts].slice(0,K4)})),{id:t,dismiss:s,update:r}};function dh(){const[n,t]=I.useState(Mt.getState());return I.useEffect(()=>Mt.subscribe(s=>{t(s)}),[]),I.useEffect(()=>{const r=[];return n.toasts.forEach(s=>{if(s.duration===1/0)return;const i=setTimeout(()=>{s.dismiss()},s.duration||5e3);r.push(i)}),()=>{r.forEach(s=>clearTimeout(s))}},[n.toasts]),{toast:U,toasts:n.toasts}}function Y4(){const{toasts:n}=dh();return a.jsxs(H4,{children:[n.map(({id:t,title:r,description:s,action:i,...o})=>a.jsxs(bN,{...Object.fromEntries(Object.entries(o).filter(([l])=>l!=="dismiss")),children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(TN,{children:r}),s&&a.jsx(EN,{children:s})]}),i,a.jsx(_N,{})]},t)),a.jsx(wN,{})]})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=function(n){const t=[];let r=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},X4=function(n){const t=[];let r=0,s=0;for(;r<n.length;){const i=n[r++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[r++];t[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[r++],l=n[r++],c=n[r++],u=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;t[s++]=String.fromCharCode(55296+(u>>10)),t[s++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],l=n[r++];t[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},jN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=o>>2,m=(o&3)<<4|c>>4;let p=(c&15)<<2|d>>6,y=d&63;u||(y=64,l||(p=64)),s.push(r[f],r[m],r[p],r[y])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(NN(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):X4(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const o=r[n.charAt(i++)],c=i<n.length?r[n.charAt(i)]:0;++i;const d=i<n.length?r[n.charAt(i)]:64;++i;const m=i<n.length?r[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||m==null)throw new J4;const p=o<<2|c>>4;if(s.push(p),d!==64){const y=c<<4&240|d>>2;if(s.push(y),m!==64){const w=d<<6&192|m;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class J4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z4=function(n){const t=NN(n);return jN.encodeByteArray(t,!0)},pd=function(n){return Z4(n).replace(/\./g,"")},SN=function(n){try{return jN.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=()=>eD().__FIREBASE_DEFAULTS__,nD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&SN(n[1]);return t&&JSON.parse(t)},hh=()=>{try{return tD()||nD()||rD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IN=n=>{var t,r;return(r=(t=hh())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[n]},CN=n=>{const t=IN(n);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},AN=()=>{var n;return(n=hh())===null||n===void 0?void 0:n.config},kN=n=>{var t;return(t=hh())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n),c="";return[pd(JSON.stringify(r)),pd(JSON.stringify(l)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function oD(){var n;const t=(n=hh())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const n=Pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uD(){return!oD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DN(){try{return typeof indexedDB=="object"}catch{return!1}}function ON(){return new Promise((n,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){t(r)}})}function dD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="FirebaseError";class Rn extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=hD,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?fD(o,s):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Rn(i,c,s)}}function fD(n,t){return n.replace(mD,(r,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const mD=/\{\$([^}]+)}/g;function pD(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Vl(n,t){if(n===t)return!0;const r=Object.keys(n),s=Object.keys(t);for(const i of r){if(!s.includes(i))return!1;const o=n[i],l=t[i];if(vw(o)&&vw(l)){if(!Vl(o,l))return!1}else if(o!==l)return!1}for(const i of s)if(!r.includes(i))return!1;return!0}function vw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n){const t=[];for(const[r,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function qa(n){const t={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,o]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Ha(n){const t=n.indexOf("?");if(!t)return"";const r=n.indexOf("#",t);return n.substring(t,r>0?r:void 0)}function gD(n,t){const r=new yD(n,t);return r.subscribe.bind(r)}class yD{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,s){let i;if(t===void 0&&r===void 0&&s===void 0)throw new Error("Missing Observer.");vD(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:s},i.next===void 0&&(i.next=Kf),i.error===void 0&&(i.error=Kf),i.complete===void 0&&(i.complete=Kf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vD(n,t){if(typeof n!="object"||n===null)return!1;for(const r of t)if(r in n&&typeof n[r]=="function")return!0;return!1}function Kf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=1e3,wD=2,bD=4*60*60*1e3,_D=.5;function xw(n,t=xD,r=wD){const s=t*Math.pow(r,n),i=Math.round(_D*s*(Math.random()-.5)*2);return Math.min(bD,s+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n){return n&&n._delegate?n._delegate:n}class kn{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new sD;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ND(t))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(t=ii){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ii){return this.instances.has(t)}getOptions(t=ii){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);s===c&&l.resolve(i)}return i}onInit(t,r){var s;const i=this.normalizeInstanceIdentifier(r),o=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;o.add(t),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const i of s)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ED(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ii){return this.component?this.component.multipleInstances?t:ii:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ED(n){return n===ii?void 0:n}function ND(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new TD(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ge||(ge={}));const SD={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},ID=ge.INFO,CD={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},AD=(n,t,...r)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),i=CD[t];if(i)console[i](`[${s}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fh{constructor(t){this.name=t,this._logLevel=ID,this._logHandler=AD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ge))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?SD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...t),this._logHandler(this,ge.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...t),this._logHandler(this,ge.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...t),this._logHandler(this,ge.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...t),this._logHandler(this,ge.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...t),this._logHandler(this,ge.ERROR,...t)}}const kD=(n,t)=>t.some(r=>n instanceof r);let ww,bw;function PD(){return ww||(ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return bw||(bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LN=new WeakMap,kp=new WeakMap,VN=new WeakMap,Qf=new WeakMap,Ty=new WeakMap;function DD(n){const t=new Promise((r,s)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{r(Ss(n.result)),i()},l=()=>{s(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&LN.set(r,n)}).catch(()=>{}),Ty.set(t,n),t}function OD(n){if(kp.has(n))return;const t=new Promise((r,s)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{r(),i()},l=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});kp.set(n,t)}let Pp={get(n,t,r){if(n instanceof IDBTransaction){if(t==="done")return kp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||VN.get(n);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ss(n[t])},set(n,t,r){return n[t]=r,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function LD(n){Pp=n(Pp)}function VD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=n.call(Yf(this),t,...r);return VN.set(s,t.sort?t.sort():[t]),Ss(s)}:RD().includes(n)?function(...t){return n.apply(Yf(this),t),Ss(LN.get(this))}:function(...t){return Ss(n.apply(Yf(this),t))}}function MD(n){return typeof n=="function"?VD(n):(n instanceof IDBTransaction&&OD(n),kD(n,PD())?new Proxy(n,Pp):n)}function Ss(n){if(n instanceof IDBRequest)return DD(n);if(Qf.has(n))return Qf.get(n);const t=MD(n);return t!==n&&(Qf.set(n,t),Ty.set(t,n)),t}const Yf=n=>Ty.get(n);function MN(n,t,{blocked:r,upgrade:s,blocking:i,terminated:o}={}){const l=indexedDB.open(n,t),c=Ss(l);return s&&l.addEventListener("upgradeneeded",u=>{s(Ss(l.result),u.oldVersion,u.newVersion,Ss(l.transaction),u)}),r&&l.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const FD=["get","getKey","getAll","getAllKeys","count"],UD=["put","add","delete","clear"],Xf=new Map;function _w(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Xf.get(t))return Xf.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,i=UD.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(i||FD.includes(r)))return;const o=async function(l,...c){const u=this.transaction(l,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&u.done]))[0]};return Xf.set(t,o),o}LD(n=>({...n,get:(t,r,s)=>_w(t,r)||n.get(t,r,s),has:(t,r)=>!!_w(t,r)||n.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(BD(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function BD(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Rp="@firebase/app",Tw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new fh("@firebase/app"),zD="@firebase/app-compat",qD="@firebase/analytics-compat",HD="@firebase/analytics",WD="@firebase/app-check-compat",GD="@firebase/app-check",KD="@firebase/auth",QD="@firebase/auth-compat",YD="@firebase/database",XD="@firebase/data-connect",JD="@firebase/database-compat",ZD="@firebase/functions",eO="@firebase/functions-compat",tO="@firebase/installations",nO="@firebase/installations-compat",rO="@firebase/messaging",sO="@firebase/messaging-compat",iO="@firebase/performance",oO="@firebase/performance-compat",aO="@firebase/remote-config",lO="@firebase/remote-config-compat",cO="@firebase/storage",uO="@firebase/storage-compat",dO="@firebase/firestore",hO="@firebase/vertexai-preview",fO="@firebase/firestore-compat",mO="firebase",pO="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",gO={[Rp]:"fire-core",[zD]:"fire-core-compat",[HD]:"fire-analytics",[qD]:"fire-analytics-compat",[GD]:"fire-app-check",[WD]:"fire-app-check-compat",[KD]:"fire-auth",[QD]:"fire-auth-compat",[YD]:"fire-rtdb",[XD]:"fire-data-connect",[JD]:"fire-rtdb-compat",[ZD]:"fire-fn",[eO]:"fire-fn-compat",[tO]:"fire-iid",[nO]:"fire-iid-compat",[rO]:"fire-fcm",[sO]:"fire-fcm-compat",[iO]:"fire-perf",[oO]:"fire-perf-compat",[aO]:"fire-rc",[lO]:"fire-rc-compat",[cO]:"fire-gcs",[uO]:"fire-gcs-compat",[dO]:"fire-fst",[fO]:"fire-fst-compat",[hO]:"fire-vertex","fire-js":"fire-js",[mO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,yO=new Map,Op=new Map;function Ew(n,t){try{n.container.addComponent(t)}catch(r){$r.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,r)}}function Kn(n){const t=n.name;if(Op.has(t))return $r.debug(`There were multiple attempts to register component ${t}.`),!1;Op.set(t,n);for(const r of gd.values())Ew(r,n);for(const r of yO.values())Ew(r,n);return!0}function Gs(n,t){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(t)}function $n(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Vi("app","Firebase",vO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(t,r,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=pO;function FN(n,t={}){let r=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Dp,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw Is.create("bad-app-name",{appName:String(i)});if(r||(r=AN()),!r)throw Is.create("no-options");const o=gd.get(i);if(o){if(Vl(r,o.options)&&Vl(s,o.config))return o;throw Is.create("duplicate-app",{appName:i})}const l=new jD(i);for(const u of Op.values())l.addComponent(u);const c=new xO(r,s,l);return gd.set(i,c),c}function mh(n=Dp){const t=gd.get(n);if(!t&&n===Dp&&AN())return FN();if(!t)throw Is.create("no-app",{appName:n});return t}function Zt(n,t,r){var s;let i=(s=gO[n])!==null&&s!==void 0?s:n;r&&(i+=`-${r}`);const o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${t}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$r.warn(c.join(" "));return}Kn(new kn(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebase-heartbeat-database",bO=1,Ml="firebase-heartbeat-store";let Jf=null;function UN(){return Jf||(Jf=MN(wO,bO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ml)}catch(r){console.warn(r)}}}}).catch(n=>{throw Is.create("idb-open",{originalErrorMessage:n.message})})),Jf}async function _O(n){try{const r=(await UN()).transaction(Ml),s=await r.objectStore(Ml).get($N(n));return await r.done,s}catch(t){if(t instanceof Rn)$r.warn(t.message);else{const r=Is.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});$r.warn(r.message)}}}async function Nw(n,t){try{const s=(await UN()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(t,$N(n)),await s.done}catch(r){if(r instanceof Rn)$r.warn(r.message);else{const s=Is.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});$r.warn(s.message)}}}function $N(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=1024,EO=30*24*60*60*1e3;class NO{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new SO(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jw();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=EO}),this._storage.overwrite(this._heartbeatsCache))}catch(s){$r.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=jw(),{heartbeatsToSend:s,unsentEntries:i}=jO(this._heartbeatsCache.heartbeats),o=pd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return $r.warn(r),""}}}function jw(){return new Date().toISOString().substring(0,10)}function jO(n,t=TO){const r=[];let s=n.slice();for(const i of n){const o=r.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Sw(r)>t){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Sw(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class SO{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DN()?ON().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _O(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nw(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nw(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Sw(n){return pd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n){Kn(new kn("platform-logger",t=>new $D(t),"PRIVATE")),Kn(new kn("heartbeat",t=>new NO(t),"PRIVATE")),Zt(Rp,Tw,n),Zt(Rp,Tw,"esm2017"),Zt("fire-js","")}IO("");function Ey(n,t){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(r[s[i]]=n[s[i]]);return r}function BN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CO=BN,zN=new Vi("auth","Firebase",BN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new fh("@firebase/auth");function AO(n,...t){yd.logLevel<=ge.WARN&&yd.warn(`Auth (${Mi}): ${n}`,...t)}function Cu(n,...t){yd.logLevel<=ge.ERROR&&yd.error(`Auth (${Mi}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...t){throw Ny(n,...t)}function sr(n,...t){return Ny(n,...t)}function qN(n,t,r){const s=Object.assign(Object.assign({},CO()),{[t]:r});return new Vi("auth","Firebase",s).create(t,{appName:n.name})}function ir(n){return qN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ny(n,...t){if(typeof n!="string"){const r=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(r,...s)}return zN.create(n,...t)}function ie(n,t,...r){if(!n)throw Ny(t,...r)}function Er(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Cu(t),new Error(t)}function Br(n,t){n||Er(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kO(){return Iw()==="http:"||Iw()==="https:"}function Iw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kO()||RN()||"connection"in navigator)?navigator.onLine:!0}function RO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,r){this.shortDelay=t,this.longDelay=r,Br(r>t,"Short delay should be less than long delay!"),this.isMobile=iD()||lD()}get(){return PO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(n,t){Br(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{static initialize(t,r,s){this.fetchImpl=t,r&&(this.headersImpl=r),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new ic(3e4,6e4);function Ks(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Qr(n,t,r,s,i={}){return WN(n,i,async()=>{let o={},l={};s&&(t==="GET"?l=s:o={body:JSON.stringify(s)});const c=sc(Object.assign({key:n.config.apiKey},l)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:t,headers:u},o);return aD()||(d.referrerPolicy="no-referrer"),HN.fetch()(GN(n,n.config.apiHost,r,c),d)})}async function WN(n,t,r){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},DO),t);try{const i=new VO(n),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw iu(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw iu(n,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw iu(n,"email-already-in-use",l);if(u==="USER_DISABLED")throw iu(n,"user-disabled",l);const f=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qN(n,f,d);Qn(n,f)}}catch(i){if(i instanceof Rn)throw i;Qn(n,"network-request-failed",{message:String(i)})}}async function oc(n,t,r,s,i={}){const o=await Qr(n,t,r,s,i);return"mfaPendingCredential"in o&&Qn(n,"multi-factor-auth-required",{_serverResponse:o}),o}function GN(n,t,r,s){const i=`${t}${r}?${s}`;return n.config.emulator?jy(n.config,i):`${n.config.apiScheme}://${i}`}function LO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VO{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,s)=>{this.timer=setTimeout(()=>s(sr(this.auth,"network-request-failed")),OO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function iu(n,t,r){const s={appName:n.name};r.email&&(s.email=r.email),r.phoneNumber&&(s.phoneNumber=r.phoneNumber);const i=sr(n,t,s);return i.customData._tokenResponse=r,i}function Cw(n){return n!==void 0&&n.enterprise!==void 0}class MO{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return LO(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function FO(n,t){return Qr(n,"GET","/v2/recaptchaConfig",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,t){return Qr(n,"POST","/v1/accounts:delete",t)}async function KN(n,t){return Qr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $O(n,t=!1){const r=qe(n),s=await r.getIdToken(t),i=Sy(s);ie(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:s,authTime:ol(Zf(i.auth_time)),issuedAtTime:ol(Zf(i.iat)),expirationTime:ol(Zf(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Zf(n){return Number(n)*1e3}function Sy(n){const[t,r,s]=n.split(".");if(t===void 0||r===void 0||s===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const i=SN(r);return i?JSON.parse(i):(Cu("Failed to decode base64 JWT payload"),null)}catch(i){return Cu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Aw(n){const t=Sy(n);return ie(t,"internal-error"),ie(typeof t.exp<"u","internal-error"),ie(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n,t,r=!1){if(r)return t;try{return await t}catch(s){throw s instanceof Rn&&BO(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function BO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(n){var t;const r=n.auth,s=await n.getIdToken(),i=await Mo(n,KN(r,{idToken:s}));ie(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?QN(o.providerUserInfo):[],c=HO(n.providerData,l),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Vp(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function qO(n){const t=qe(n);await vd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function HO(n,t){return[...n.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function QN(n){return n.map(t=>{var{providerId:r}=t,s=Ey(t,["providerId"]);return{providerId:r,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,t){const r=await WN(n,{},async()=>{const s=sc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=GN(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",HN.fetch()(l,{method:"POST",headers:c,body:s})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function GO(n,t){return Qr(n,"POST","/v2/accounts:revokeToken",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ie(t.idToken,"internal-error"),ie(typeof t.idToken<"u","internal-error"),ie(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Aw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){ie(t.length!==0,"internal-error");const r=Aw(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:s,refreshToken:i,expiresIn:o}=await WO(t,r);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(t,r,s){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,r){const{refreshToken:s,accessToken:i,expirationTime:o}=r,l=new No;return s&&(ie(typeof s=="string","internal-error",{appName:t}),l.refreshToken=s),i&&(ie(typeof i=="string","internal-error",{appName:t}),l.accessToken=i),o&&(ie(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,t){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Nr{constructor(t){var{uid:r,auth:s,stsTokenManager:i}=t,o=Ey(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const r=await Mo(this,this.stsTokenManager.getToken(this.auth,t));return ie(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return $O(this,t)}reload(){return qO(this)}_assign(t){this!==t&&(ie(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Nr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),r&&await vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(ir(this.auth));const t=await this.getIdToken();return await Mo(this,UO(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var s,i,o,l,c,u,d,f;const m=(s=r.displayName)!==null&&s!==void 0?s:void 0,p=(i=r.email)!==null&&i!==void 0?i:void 0,y=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,w=(l=r.photoURL)!==null&&l!==void 0?l:void 0,T=(c=r.tenantId)!==null&&c!==void 0?c:void 0,j=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=r.createdAt)!==null&&d!==void 0?d:void 0,v=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:N,isAnonymous:P,providerData:O,stsTokenManager:S}=r;ie(x&&S,t,"internal-error");const _=No.fromJSON(this.name,S);ie(typeof x=="string",t,"internal-error"),ts(m,t.name),ts(p,t.name),ie(typeof N=="boolean",t,"internal-error"),ie(typeof P=="boolean",t,"internal-error"),ts(y,t.name),ts(w,t.name),ts(T,t.name),ts(j,t.name),ts(b,t.name),ts(v,t.name);const C=new Nr({uid:x,auth:t,email:p,emailVerified:N,displayName:m,isAnonymous:P,photoURL:w,phoneNumber:y,tenantId:T,stsTokenManager:_,createdAt:b,lastLoginAt:v});return O&&Array.isArray(O)&&(C.providerData=O.map(R=>Object.assign({},R))),j&&(C._redirectEventId=j),C}static async _fromIdTokenResponse(t,r,s=!1){const i=new No;i.updateFromServerResponse(r);const o=new Nr({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await vd(o),o}static async _fromGetAccountInfoResponse(t,r,s){const i=r.users[0];ie(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?QN(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new No;c.updateFromIdToken(s);const u=new Nr({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=new Map;function jr(n){Br(n instanceof Function,"Expected a class definition");let t=kw.get(n);return t?(Br(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,kw.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}YN.type="NONE";const Pw=YN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n,t,r){return`firebase:${n}:${t}:${r}`}class jo{constructor(t,r,s){this.persistence=t,this.auth=r,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,o),this.fullPersistenceKey=Au("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Nr._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,s="authUser"){if(!r.length)return new jo(jr(Pw),t,s);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||jr(Pw);const l=Au(s,t.config.apiKey,t.name);let c=null;for(const d of r)try{const f=await d._get(l);if(f){const m=Nr._fromJSON(t,f);d!==o&&(c=m),o=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new jo(o,t,s):(o=u[0],c&&await o._set(l,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new jo(o,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(e2(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(XN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(n2(t))return"Blackberry";if(r2(t))return"Webos";if(JN(t))return"Safari";if((t.includes("chrome/")||ZN(t))&&!t.includes("edge/"))return"Chrome";if(t2(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(r);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function XN(n=Pt()){return/firefox\//i.test(n)}function JN(n=Pt()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ZN(n=Pt()){return/crios\//i.test(n)}function e2(n=Pt()){return/iemobile/i.test(n)}function t2(n=Pt()){return/android/i.test(n)}function n2(n=Pt()){return/blackberry/i.test(n)}function r2(n=Pt()){return/webos/i.test(n)}function Iy(n=Pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KO(n=Pt()){var t;return Iy(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function QO(){return cD()&&document.documentMode===10}function s2(n=Pt()){return Iy(n)||t2(n)||r2(n)||n2(n)||/windows phone/i.test(n)||e2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n,t=[]){let r;switch(n){case"Browser":r=Rw(Pt());break;case"Worker":r=`${Rw(Pt())}-${n}`;break;default:r=n}const s=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Mi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const s=o=>new Promise((l,c)=>{try{const u=t(o);l(u)}catch(u){c(u)}});s.onAbort=r,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const s of this.queue)await s(t),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,t={}){return Qr(n,"GET","/v2/passwordPolicy",Ks(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=6;class ZO{constructor(t){var r,s,i,o;const l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=l.minPasswordLength)!==null&&r!==void 0?r:JO,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,s,i,o,l,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(t,r){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(r.meetsMinPasswordLength=t.length>=s),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,r,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(t,r,s,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dw(this),this.idTokenSubscription=new Dw(this),this.beforeStateQueue=new YO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=jr(r)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await jo.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await KN(this,{idToken:t}),s=await Nr._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(s)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if($n(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!l||l===c)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await vd(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=RO()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($n(this.app))return Promise.reject(ir(this));const r=t?qe(t):null;return r&&ie(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&ie(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $n(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XO(this),r=new ZO(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Vi("auth","Firebase",t())}onAuthStateChanged(t,r,s){return this.registerStateListener(this.authStateSubscription,t,r,s)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,s){return this.registerStateListener(this.idTokenSubscription,t,r,s)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(s.tenantId=this.tenantId),await GO(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const s=await this.getOrInitRedirectPersistenceManager(r);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&jr(t)||this._popupRedirectResolver;ie(r,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[jr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,s;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,s,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof r=="function"){const u=t.addObserver(r,s,i);return()=>{l=!0,u()}}else{const u=t.addObserver(r);return()=>{l=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=i2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(r["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&AO(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Qs(n){return qe(n)}class Dw{constructor(t){this.auth=t,this.observer=null,this.addObserver=gD(r=>this.observer=r)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tL(n){ph=n}function o2(n){return ph.loadJS(n)}function nL(){return ph.recaptchaEnterpriseScript}function rL(){return ph.gapiScript}function sL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const iL="recaptcha-enterprise",oL="NO_RECAPTCHA";class aL{constructor(t){this.type=iL,this.auth=Qs(t)}async verify(t="verify",r=!1){async function s(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{FO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new MO(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(u=>{c(u)})})}function i(o,l,c){const u=window.grecaptcha;Cw(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:t}).then(d=>{l(d)}).catch(()=>{l(oL)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{s(this.auth).then(c=>{if(!r&&Cw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=nL();u.length!==0&&(u+=c),o2(u).then(()=>{i(c,o,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function Ow(n,t,r,s=!1){const i=new aL(n);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l=Object.assign({},t);return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Mp(n,t,r,s){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ow(n,t,r,r==="getOobCode");return s(n,o)}else return s(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ow(n,t,r,r==="getOobCode");return s(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n,t){const r=Gs(n,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(Vl(o,t??{}))return i;Qn(i,"already-initialized")}return r.initialize({options:t})}function cL(n,t){const r=(t==null?void 0:t.persistence)||[],s=(Array.isArray(r)?r:[r]).map(jr);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function uL(n,t,r){const s=Qs(n);ie(s._canInitEmulator,s,"emulator-config-failed"),ie(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),o=a2(t),{host:l,port:c}=dL(t),u=c===null?"":`:${c}`;s.config.emulator={url:`${o}//${l}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||hL()}function a2(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function dL(n){const t=a2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!r)return{host:"",port:null};const s=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:Lw(s.substr(o.length+1))}}else{const[o,l]=s.split(":");return{host:o,port:Lw(l)}}}function Lw(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function hL(){function n(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Er("not implemented")}_getIdTokenResponse(t){return Er("not implemented")}_linkToIdToken(t,r){return Er("not implemented")}_getReauthenticationResolver(t){return Er("not implemented")}}async function fL(n,t){return Qr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(n,t){return oc(n,"POST","/v1/accounts:signInWithPassword",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(n,t){return oc(n,"POST","/v1/accounts:signInWithEmailLink",Ks(n,t))}async function gL(n,t){return oc(n,"POST","/v1/accounts:signInWithEmailLink",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends Cy{constructor(t,r,s,i=null){super("password",s),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new Fl(t,r,"password")}static _fromEmailAndCode(t,r,s=null){return new Fl(t,r,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mp(t,r,"signInWithPassword",mL);case"emailLink":return pL(t,{email:this._email,oobCode:this._password});default:Qn(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const s={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mp(t,s,"signUpPassword",fL);case"emailLink":return gL(t,{idToken:r,email:this._email,oobCode:this._password});default:Qn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(n,t){return oc(n,"POST","/v1/accounts:signInWithIdp",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="http://localhost";class Ii extends Cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ii(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Qn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=r,o=Ey(r,["providerId","signInMethod"]);if(!s||!i)return null;const l=new Ii(s,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(t){const r=this.buildRequest();return So(t,r)}_linkToIdToken(t,r){const s=this.buildRequest();return s.idToken=r,So(t,s)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,So(t,r)}buildRequest(){const t={requestUri:yL,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=sc(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xL(n){const t=qa(Ha(n)).link,r=t?qa(Ha(t)).deep_link_id:null,s=qa(Ha(n)).deep_link_id;return(s?qa(Ha(s)).link:null)||s||r||t||n}class Ay{constructor(t){var r,s,i,o,l,c;const u=qa(Ha(t)),d=(r=u.apiKey)!==null&&r!==void 0?r:null,f=(s=u.oobCode)!==null&&s!==void 0?s:null,m=vL((i=u.mode)!==null&&i!==void 0?i:null);ie(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=u.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=xL(t);try{return new Ay(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(t,r){return Fl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const s=Ay.parseLink(r);return ie(s,"argument-error"),Fl._fromEmailAndCode(t,s.code,s.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends l2{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends ac{constructor(){super("facebook.com")}static credential(t){return Ii._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return us.credentialFromTaggedObject(t)}static credentialFromError(t){return us.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return us.credential(t.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ii._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return ds.credentialFromTaggedObject(t)}static credentialFromError(t){return ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:s}=t;if(!r&&!s)return null;try{return ds.credential(r,s)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends ac{constructor(){super("github.com")}static credential(t){return Ii._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hs.credentialFromTaggedObject(t)}static credentialFromError(t){return hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hs.credential(t.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ac{constructor(){super("twitter.com")}static credential(t,r){return Ii._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return fs.credentialFromTaggedObject(t)}static credentialFromError(t){return fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:s}=t;if(!r||!s)return null;try{return fs.credential(r,s)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(n,t){return oc(n,"POST","/v1/accounts:signUp",Ks(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,s,i=!1){const o=await Nr._fromIdTokenResponse(t,s,i),l=Vw(s);return new zr({user:o,providerId:l,_tokenResponse:s,operationType:r})}static async _forOperation(t,r,s){await t._updateTokensIfNecessary(s,!0);const i=Vw(s);return new zr({user:t,providerId:i,_tokenResponse:s,operationType:r})}}function Vw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(n){var t;if($n(n.app))return Promise.reject(ir(n));const r=Qs(n);if(await r._initializationPromise,!((t=r.currentUser)===null||t===void 0)&&t.isAnonymous)return new zr({user:r.currentUser,providerId:null,operationType:"signIn"});const s=await c2(r,{returnSecureToken:!0}),i=await zr._fromIdTokenResponse(r,"signIn",s,!0);return await r._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Rn{constructor(t,r,s,i){var o;super(r.code,r.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,r,s,i){return new xd(t,r,s,i)}}function u2(n,t,r,s){return(t==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(n,o,t,s):o})}async function wL(n,t,r=!1){const s=await Mo(n,t._linkToIdToken(n.auth,await n.getIdToken()),r);return zr._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(n,t,r=!1){const{auth:s}=n;if($n(s.app))return Promise.reject(ir(s));const i="reauthenticate";try{const o=await Mo(n,u2(s,i,t,n),r);ie(o.idToken,s,"internal-error");const l=Sy(o.idToken);ie(l,s,"internal-error");const{sub:c}=l;return ie(n.uid===c,s,"user-mismatch"),zr._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qn(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(n,t,r=!1){if($n(n.app))return Promise.reject(ir(n));const s="signIn",i=await u2(n,s,t),o=await zr._fromIdTokenResponse(n,s,i);return r||await n._updateCurrentUser(o.user),o}async function _L(n,t){return d2(Qs(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(n){const t=Qs(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function TL(n,t,r){if($n(n.app))return Promise.reject(ir(n));const s=Qs(n),l=await Mp(s,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&h2(n),u}),c=await zr._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(c.user),c}function EL(n,t,r){return $n(n.app)?Promise.reject(ir(n)):_L(qe(n),sa.credential(t,r)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&h2(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(n,t){return Qr(n,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(n,{displayName:t,photoURL:r}){if(t===void 0&&r===void 0)return;const s=qe(n),o={idToken:await s.getIdToken(),displayName:t,photoUrl:r,returnSecureToken:!0},l=await Mo(s,NL(s.auth,o));s.displayName=l.displayName||null,s.photoURL=l.photoUrl||null;const c=s.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(l)}function jL(n,t,r,s){return qe(n).onIdTokenChanged(t,r,s)}function SL(n,t,r){return qe(n).beforeAuthStateChanged(t,r)}function lc(n,t,r,s){return qe(n).onAuthStateChanged(t,r,s)}function IL(n){return qe(n).signOut()}async function CL(n){return qe(n).delete()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1e3,kL=10;class m2 extends f2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s2(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const s=this.storage.getItem(r),i=this.localCache[r];s!==i&&t(r,i,s)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,c,u)=>{this.notifyListeners(l,u)});return}const s=t.key;r?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(s);!r&&this.localCache[s]===l||this.notifyListeners(s,l)},o=this.storage.getItem(s);QO()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kL):i()}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:s}),!0)})},AL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}m2.type="LOCAL";const PL=m2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends f2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}p2.type="SESSION";const g2=p2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const s=new gh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:s,eventType:i,data:o}=r.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(l).map(async d=>d(r.origin,o)),u=await RL(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n="",t=10){let r="";for(let s=0;s<t;s++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,u)=>{const d=ky("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},s);l={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(p.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:d,data:r},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function OL(n){or().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function LL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ML(){return y2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firebaseLocalStorageDb",FL=1,bd="firebaseLocalStorage",x2="fbase_key";class cc{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yh(n,t){return n.transaction([bd],t?"readwrite":"readonly").objectStore(bd)}function UL(){const n=indexedDB.deleteDatabase(v2);return new cc(n).toPromise()}function Fp(){const n=indexedDB.open(v2,FL);return new Promise((t,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(bd,{keyPath:x2})}catch(i){r(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(bd)?t(s):(s.close(),await UL(),t(await Fp()))})})}async function Fw(n,t,r){const s=yh(n,!0).put({[x2]:t,value:r});return new cc(s).toPromise()}async function $L(n,t){const r=yh(n,!1).get(t),s=await new cc(r).toPromise();return s===void 0?null:s.value}function Uw(n,t){const r=yh(n,!0).delete(t);return new cc(r).toPromise()}const BL=800,zL=3;class w2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fp(),this.db)}async _withRetries(t){let r=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(r++>zL)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(ML()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await LL(),!this.activeServiceWorker)return;this.sender=new DL(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((r=s[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||VL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fp();return await Fw(t,wd,"1"),await Uw(t,wd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fw(s,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(s=>$L(s,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Uw(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=yh(i,!1).getAll();return new cc(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}w2.type="LOCAL";const qL=w2;new ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n,t){return t?jr(t):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends Cy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return So(t,this._buildIdpRequest())}_linkToIdToken(t,r){return So(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return So(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function WL(n){return d2(n.auth,new Py(n),n.bypassAuthState)}function GL(n){const{auth:t,user:r}=n;return ie(r,t,"internal-error"),bL(r,new Py(n),n.bypassAuthState)}async function KL(n){const{auth:t,user:r}=n;return ie(r,t,"internal-error"),wL(r,new Py(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(t,r,s,i,o=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:s,postBody:i,tenantId:o,error:l,type:c}=t;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:r,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return WL;case"linkViaPopup":case"linkViaRedirect":return KL;case"reauthViaPopup":case"reauthViaRedirect":return GL;default:Qn(this.auth,"internal-error")}}resolve(t){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new ic(2e3,1e4);class fo extends b2{constructor(t,r,s,i,o){super(t,r,i,o),this.provider=s,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ie(t,this.auth,"internal-error"),t}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const t=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,s;if(!((s=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,QL.get())};t()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="pendingRedirect",ku=new Map;class XL extends b2{constructor(t,r,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,s),this.eventId=null}async execute(){let t=ku.get(this.auth._key());if(!t){try{const s=await JL(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(r){t=()=>Promise.reject(r)}ku.set(this.auth._key(),t)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JL(n,t){const r=tV(t),s=eV(n);if(!await s._isAvailable())return!1;const i=await s._get(r)==="true";return await s._remove(r),i}function ZL(n,t){ku.set(n._key(),t)}function eV(n){return jr(n._redirectPersistence)}function tV(n){return Au(YL,n.config.apiKey,n.name)}async function nV(n,t,r=!1){if($n(n.app))return Promise.reject(ir(n));const s=Qs(n),i=HL(s,t),l=await new XL(s,i,r).execute();return l&&!r&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=10*60*1e3;class sV{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(r=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!iV(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var s;if(t.error&&!_2(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";r.onError(sr(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const s=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=rV&&this.cachedEventUids.clear(),this.cachedEventUids.has($w(t))}saveEventToCache(t){this.cachedEventUids.add($w(t)),this.lastProcessedEventTime=Date.now()}}function $w(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function _2({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function iV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(n,t={}){return Qr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lV=/^https?/;async function cV(n){if(n.config.emulator)return;const{authorizedDomains:t}=await oV(n);for(const r of t)try{if(uV(r))return}catch{}Qn(n,"unauthorized-domain")}function uV(n){const t=Lp(),{protocol:r,hostname:s}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&l.hostname===s}if(!lV.test(r))return!1;if(aV.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new ic(3e4,6e4);function Bw(){const n=or().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function hV(n){return new Promise((t,r)=>{var s,i,o;function l(){Bw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bw(),r(sr(n,"network-request-failed"))},timeout:dV.get()})}if(!((i=(s=or().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=or().gapi)===null||o===void 0)&&o.load)l();else{const c=sL("iframefcb");return or()[c]=()=>{gapi.load?l():r(sr(n,"network-request-failed"))},o2(`${rL()}?onload=${c}`).catch(u=>r(u))}}).catch(t=>{throw Pu=null,t})}let Pu=null;function fV(n){return Pu=Pu||hV(n),Pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new ic(5e3,15e3),pV="__/auth/iframe",gV="emulator/auth/iframe",yV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xV(n){const t=n.config;ie(t.authDomain,n,"auth-domain-config-required");const r=t.emulator?jy(t,gV):`https://${n.config.authDomain}/${pV}`,s={apiKey:t.apiKey,appName:n.name,v:Mi},i=vV.get(n.config.apiHost);i&&(s.eid=i);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${r}?${sc(s).slice(1)}`}async function wV(n){const t=await fV(n),r=or().gapi;return ie(r,n,"internal-error"),t.open({where:document.body,url:xV(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yV,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const l=sr(n,"network-request-failed"),c=or().setTimeout(()=>{o(l)},mV.get());function u(){or().clearTimeout(c),i(s)}s.ping(u).then(u,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_V=500,TV=600,EV="_blank",NV="http://localhost";class zw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jV(n,t,r,s=_V,i=TV){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},bV),{width:s.toString(),height:i.toString(),top:o,left:l}),d=Pt().toLowerCase();r&&(c=ZN(d)?EV:r),XN(d)&&(t=t||NV,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(KO(d)&&c!=="_self")return SV(t||"",c),new zw(null);const m=window.open(t||"",c,f);ie(m,n,"popup-blocked");try{m.focus()}catch{}return new zw(m)}function SV(n,t){const r=document.createElement("a");r.href=n,r.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="__/auth/handler",CV="emulator/auth/handler",AV=encodeURIComponent("fac");async function qw(n,t,r,s,i,o){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:s,v:Mi,eventId:i};if(t instanceof l2){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",pD(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[f,m]of Object.entries(o||{}))l[f]=m}if(t instanceof ac){const f=t.getScopes().filter(m=>m!=="");f.length>0&&(l.scopes=f.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await n._getAppCheckToken(),d=u?`#${AV}=${encodeURIComponent(u)}`:"";return`${kV(n)}?${sc(c).slice(1)}${d}`}function kV({config:n}){return n.emulator?jy(n,CV):`https://${n.authDomain}/${IV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class PV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g2,this._completeRedirectFn=nV,this._overrideRedirectResult=ZL}async _openPopup(t,r,s,i){var o;Br((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await qw(t,r,s,Lp(),i);return jV(t,l,ky())}async _openRedirect(t,r,s,i){await this._originValidation(t);const o=await qw(t,r,s,Lp(),i);return OL(o),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(Br(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(t);return this.eventManagers[r]={promise:s},s.catch(()=>{delete this.eventManagers[r]}),s}async initAndGetManager(t){const r=await wV(t),s=new sV(t);return r.register("authEvent",i=>(ie(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=r,s}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(em,{type:em},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[em];l!==void 0&&r(!!l),Qn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=cV(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return s2()||JN()||Iy()}}const RV=PV;var Hw="@firebase/auth",Ww="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LV(n){Kn(new kn("auth",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=s.options;ie(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i2(n)},d=new eL(s,i,o,u);return cL(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,s)=>{t.getProvider("auth-internal").initialize()})),Kn(new kn("auth-internal",t=>{const r=Qs(t.getProvider("auth").getImmediate());return(s=>new DV(s))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(Hw,Ww,OV(n)),Zt(Hw,Ww,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=5*60,MV=kN("authIdTokenMaxAge")||VV;let Gw=null;const FV=n=>async t=>{const r=t&&await t.getIdTokenResult(),s=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(s&&s>MV)return;const i=r==null?void 0:r.token;Gw!==i&&(Gw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UV(n=mh()){const t=Gs(n,"auth");if(t.isInitialized())return t.getImmediate();const r=lL(n,{popupRedirectResolver:RV,persistence:[qL,PL,g2]}),s=kN("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const l=FV(o.toString());SL(r,l,()=>l(r.currentUser)),jL(r,c=>l(c))}}const i=IN("auth");return i&&uL(r,`http://${i}`),r}function $V(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}tL({loadJS(n){return new Promise((t,r)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=t,s.onerror=i=>{const o=sr("internal-error");o.customData=i,r(o)},s.type="text/javascript",s.charset="UTF-8",$V().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LV("Browser");var Kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,T2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,_){function C(){}C.prototype=_.prototype,S.D=_.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(R,A,L){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return _.prototype[A].apply(R,D)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,r),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,C){C||(C=0);var R=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)R[A]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(A=0;16>A;++A)R[A]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=S.g[0],C=S.g[1],A=S.g[2];var L=S.g[3],D=_+(L^C&(A^L))+R[0]+3614090360&4294967295;_=C+(D<<7&4294967295|D>>>25),D=L+(A^_&(C^A))+R[1]+3905402710&4294967295,L=_+(D<<12&4294967295|D>>>20),D=A+(C^L&(_^C))+R[2]+606105819&4294967295,A=L+(D<<17&4294967295|D>>>15),D=C+(_^A&(L^_))+R[3]+3250441966&4294967295,C=A+(D<<22&4294967295|D>>>10),D=_+(L^C&(A^L))+R[4]+4118548399&4294967295,_=C+(D<<7&4294967295|D>>>25),D=L+(A^_&(C^A))+R[5]+1200080426&4294967295,L=_+(D<<12&4294967295|D>>>20),D=A+(C^L&(_^C))+R[6]+2821735955&4294967295,A=L+(D<<17&4294967295|D>>>15),D=C+(_^A&(L^_))+R[7]+4249261313&4294967295,C=A+(D<<22&4294967295|D>>>10),D=_+(L^C&(A^L))+R[8]+1770035416&4294967295,_=C+(D<<7&4294967295|D>>>25),D=L+(A^_&(C^A))+R[9]+2336552879&4294967295,L=_+(D<<12&4294967295|D>>>20),D=A+(C^L&(_^C))+R[10]+4294925233&4294967295,A=L+(D<<17&4294967295|D>>>15),D=C+(_^A&(L^_))+R[11]+2304563134&4294967295,C=A+(D<<22&4294967295|D>>>10),D=_+(L^C&(A^L))+R[12]+1804603682&4294967295,_=C+(D<<7&4294967295|D>>>25),D=L+(A^_&(C^A))+R[13]+4254626195&4294967295,L=_+(D<<12&4294967295|D>>>20),D=A+(C^L&(_^C))+R[14]+2792965006&4294967295,A=L+(D<<17&4294967295|D>>>15),D=C+(_^A&(L^_))+R[15]+1236535329&4294967295,C=A+(D<<22&4294967295|D>>>10),D=_+(A^L&(C^A))+R[1]+4129170786&4294967295,_=C+(D<<5&4294967295|D>>>27),D=L+(C^A&(_^C))+R[6]+3225465664&4294967295,L=_+(D<<9&4294967295|D>>>23),D=A+(_^C&(L^_))+R[11]+643717713&4294967295,A=L+(D<<14&4294967295|D>>>18),D=C+(L^_&(A^L))+R[0]+3921069994&4294967295,C=A+(D<<20&4294967295|D>>>12),D=_+(A^L&(C^A))+R[5]+3593408605&4294967295,_=C+(D<<5&4294967295|D>>>27),D=L+(C^A&(_^C))+R[10]+38016083&4294967295,L=_+(D<<9&4294967295|D>>>23),D=A+(_^C&(L^_))+R[15]+3634488961&4294967295,A=L+(D<<14&4294967295|D>>>18),D=C+(L^_&(A^L))+R[4]+3889429448&4294967295,C=A+(D<<20&4294967295|D>>>12),D=_+(A^L&(C^A))+R[9]+568446438&4294967295,_=C+(D<<5&4294967295|D>>>27),D=L+(C^A&(_^C))+R[14]+3275163606&4294967295,L=_+(D<<9&4294967295|D>>>23),D=A+(_^C&(L^_))+R[3]+4107603335&4294967295,A=L+(D<<14&4294967295|D>>>18),D=C+(L^_&(A^L))+R[8]+1163531501&4294967295,C=A+(D<<20&4294967295|D>>>12),D=_+(A^L&(C^A))+R[13]+2850285829&4294967295,_=C+(D<<5&4294967295|D>>>27),D=L+(C^A&(_^C))+R[2]+4243563512&4294967295,L=_+(D<<9&4294967295|D>>>23),D=A+(_^C&(L^_))+R[7]+1735328473&4294967295,A=L+(D<<14&4294967295|D>>>18),D=C+(L^_&(A^L))+R[12]+2368359562&4294967295,C=A+(D<<20&4294967295|D>>>12),D=_+(C^A^L)+R[5]+4294588738&4294967295,_=C+(D<<4&4294967295|D>>>28),D=L+(_^C^A)+R[8]+2272392833&4294967295,L=_+(D<<11&4294967295|D>>>21),D=A+(L^_^C)+R[11]+1839030562&4294967295,A=L+(D<<16&4294967295|D>>>16),D=C+(A^L^_)+R[14]+4259657740&4294967295,C=A+(D<<23&4294967295|D>>>9),D=_+(C^A^L)+R[1]+2763975236&4294967295,_=C+(D<<4&4294967295|D>>>28),D=L+(_^C^A)+R[4]+1272893353&4294967295,L=_+(D<<11&4294967295|D>>>21),D=A+(L^_^C)+R[7]+4139469664&4294967295,A=L+(D<<16&4294967295|D>>>16),D=C+(A^L^_)+R[10]+3200236656&4294967295,C=A+(D<<23&4294967295|D>>>9),D=_+(C^A^L)+R[13]+681279174&4294967295,_=C+(D<<4&4294967295|D>>>28),D=L+(_^C^A)+R[0]+3936430074&4294967295,L=_+(D<<11&4294967295|D>>>21),D=A+(L^_^C)+R[3]+3572445317&4294967295,A=L+(D<<16&4294967295|D>>>16),D=C+(A^L^_)+R[6]+76029189&4294967295,C=A+(D<<23&4294967295|D>>>9),D=_+(C^A^L)+R[9]+3654602809&4294967295,_=C+(D<<4&4294967295|D>>>28),D=L+(_^C^A)+R[12]+3873151461&4294967295,L=_+(D<<11&4294967295|D>>>21),D=A+(L^_^C)+R[15]+530742520&4294967295,A=L+(D<<16&4294967295|D>>>16),D=C+(A^L^_)+R[2]+3299628645&4294967295,C=A+(D<<23&4294967295|D>>>9),D=_+(A^(C|~L))+R[0]+4096336452&4294967295,_=C+(D<<6&4294967295|D>>>26),D=L+(C^(_|~A))+R[7]+1126891415&4294967295,L=_+(D<<10&4294967295|D>>>22),D=A+(_^(L|~C))+R[14]+2878612391&4294967295,A=L+(D<<15&4294967295|D>>>17),D=C+(L^(A|~_))+R[5]+4237533241&4294967295,C=A+(D<<21&4294967295|D>>>11),D=_+(A^(C|~L))+R[12]+1700485571&4294967295,_=C+(D<<6&4294967295|D>>>26),D=L+(C^(_|~A))+R[3]+2399980690&4294967295,L=_+(D<<10&4294967295|D>>>22),D=A+(_^(L|~C))+R[10]+4293915773&4294967295,A=L+(D<<15&4294967295|D>>>17),D=C+(L^(A|~_))+R[1]+2240044497&4294967295,C=A+(D<<21&4294967295|D>>>11),D=_+(A^(C|~L))+R[8]+1873313359&4294967295,_=C+(D<<6&4294967295|D>>>26),D=L+(C^(_|~A))+R[15]+4264355552&4294967295,L=_+(D<<10&4294967295|D>>>22),D=A+(_^(L|~C))+R[6]+2734768916&4294967295,A=L+(D<<15&4294967295|D>>>17),D=C+(L^(A|~_))+R[13]+1309151649&4294967295,C=A+(D<<21&4294967295|D>>>11),D=_+(A^(C|~L))+R[4]+4149444226&4294967295,_=C+(D<<6&4294967295|D>>>26),D=L+(C^(_|~A))+R[11]+3174756917&4294967295,L=_+(D<<10&4294967295|D>>>22),D=A+(_^(L|~C))+R[2]+718787259&4294967295,A=L+(D<<15&4294967295|D>>>17),D=C+(L^(A|~_))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+L&4294967295}s.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var C=_-this.blockSize,R=this.B,A=this.h,L=0;L<_;){if(A==0)for(;L<=C;)i(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<_;)if(R[A++]=S.charCodeAt(L++),A==this.blockSize){i(this,R),A=0;break}}else for(;L<_;)if(R[A++]=S[L++],A==this.blockSize){i(this,R),A=0;break}}this.h=A,this.o+=_},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var C=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=C&255,C/=256;for(this.u(S),S=Array(16),_=C=0;4>_;++_)for(var R=0;32>R;R+=8)S[C++]=this.g[_]>>>R&255;return S};function o(S,_){var C=c;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=_(S)}function l(S,_){this.h=_;for(var C=[],R=!0,A=S.length-1;0<=A;A--){var L=S[A]|0;R&&L==_||(C[A]=L,R=!1)}this.g=C}var c={};function u(S){return-128<=S&&128>S?o(S,function(_){return new l([_|0],0>_?-1:0)}):new l([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return j(d(-S));for(var _=[],C=1,R=0;S>=C;R++)_[R]=S/C|0,C*=4294967296;return new l(_,0)}function f(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return j(f(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(_,8)),R=m,A=0;A<S.length;A+=8){var L=Math.min(8,S.length-A),D=parseInt(S.substring(A,A+L),_);8>L?(L=d(Math.pow(_,L)),R=R.j(L).add(d(D))):(R=R.j(C),R=R.add(d(D)))}return R}var m=u(0),p=u(1),y=u(16777216);n=l.prototype,n.m=function(){if(T(this))return-j(this).m();for(var S=0,_=1,C=0;C<this.g.length;C++){var R=this.i(C);S+=(0<=R?R:4294967296+R)*_,_*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(T(this))return"-"+j(this).toString(S);for(var _=d(Math.pow(S,6)),C=this,R="";;){var A=N(C,_).g;C=b(C,A.j(_));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=A,w(C))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function T(S){return S.h==-1}n.l=function(S){return S=b(this,S),T(S)?-1:w(S)?0:1};function j(S){for(var _=S.g.length,C=[],R=0;R<_;R++)C[R]=~S.g[R];return new l(C,~S.h).add(p)}n.abs=function(){return T(this)?j(this):this},n.add=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],R=0,A=0;A<=_;A++){var L=R+(this.i(A)&65535)+(S.i(A)&65535),D=(L>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);R=D>>>16,L&=65535,D&=65535,C[A]=D<<16|L}return new l(C,C[C.length-1]&-2147483648?-1:0)};function b(S,_){return S.add(j(_))}n.j=function(S){if(w(this)||w(S))return m;if(T(this))return T(S)?j(this).j(j(S)):j(j(this).j(S));if(T(S))return j(this.j(j(S)));if(0>this.l(y)&&0>S.l(y))return d(this.m()*S.m());for(var _=this.g.length+S.g.length,C=[],R=0;R<2*_;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<S.g.length;A++){var L=this.i(R)>>>16,D=this.i(R)&65535,$=S.i(A)>>>16,Z=S.i(A)&65535;C[2*R+2*A]+=D*Z,v(C,2*R+2*A),C[2*R+2*A+1]+=L*Z,v(C,2*R+2*A+1),C[2*R+2*A+1]+=D*$,v(C,2*R+2*A+1),C[2*R+2*A+2]+=L*$,v(C,2*R+2*A+2)}for(R=0;R<_;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=_;R<2*_;R++)C[R]=0;return new l(C,0)};function v(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function x(S,_){this.g=S,this.h=_}function N(S,_){if(w(_))throw Error("division by zero");if(w(S))return new x(m,m);if(T(S))return _=N(j(S),_),new x(j(_.g),j(_.h));if(T(_))return _=N(S,j(_)),new x(j(_.g),_.h);if(30<S.g.length){if(T(S)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var C=p,R=_;0>=R.l(S);)C=P(C),R=P(R);var A=O(C,1),L=O(R,1);for(R=O(R,2),C=O(C,2);!w(R);){var D=L.add(R);0>=D.l(S)&&(A=A.add(C),L=D),R=O(R,1),C=O(C,1)}return _=b(S,A.j(_)),new x(A,_)}for(A=m;0<=S.l(_);){for(C=Math.max(1,Math.floor(S.m()/_.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=d(C),D=L.j(_);T(D)||0<D.l(S);)C-=R,L=d(C),D=L.j(_);w(L)&&(L=p),A=A.add(L),S=b(S,D)}return new x(A,S)}n.A=function(S){return N(this,S).h},n.and=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],R=0;R<_;R++)C[R]=this.i(R)&S.i(R);return new l(C,this.h&S.h)},n.or=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],R=0;R<_;R++)C[R]=this.i(R)|S.i(R);return new l(C,this.h|S.h)},n.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],R=0;R<_;R++)C[R]=this.i(R)^S.i(R);return new l(C,this.h^S.h)};function P(S){for(var _=S.g.length+1,C=[],R=0;R<_;R++)C[R]=S.i(R)<<1|S.i(R-1)>>>31;return new l(C,S.h)}function O(S,_){var C=_>>5;_%=32;for(var R=S.g.length-C,A=[],L=0;L<R;L++)A[L]=0<_?S.i(L+C)>>>_|S.i(L+C+1)<<32-_:S.i(L+C);return new l(A,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,T2=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=f,xi=l}).apply(typeof Kw<"u"?Kw:typeof self<"u"?self:typeof window<"u"?window:{});var ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E2,Wa,N2,Ru,Up,j2,S2,I2;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,E){return h==Array.prototype||h==Object.prototype||(h[g]=E.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ou=="object"&&ou];for(var g=0;g<h.length;++g){var E=h[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=r(this);function i(h,g){if(g)e:{var E=s;h=h.split(".");for(var k=0;k<h.length-1;k++){var V=h[k];if(!(V in E))break e;E=E[V]}h=h[h.length-1],k=E[h],g=g(k),g!=k&&g!=null&&t(E,h,{configurable:!0,writable:!0,value:g})}}function o(h,g){h instanceof String&&(h+="");var E=0,k=!1,V={next:function(){if(!k&&E<h.length){var M=E++;return{value:g(M,h[M]),done:!1}}return k=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(h){return h||function(){return o(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function u(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function d(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function f(h,g,E){return h.call.apply(h.bind,arguments)}function m(h,g,E){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,k),h.apply(g,V)}}return function(){return h.apply(g,arguments)}}function p(h,g,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,p.apply(null,arguments)}function y(h,g){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function w(h,g){function E(){}E.prototype=g.prototype,h.aa=g.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(k,V,M){for(var W=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)W[Ne-2]=arguments[Ne];return g.prototype[V].apply(k,W)}}function T(h){const g=h.length;if(0<g){const E=Array(g);for(let k=0;k<g;k++)E[k]=h[k];return E}return[]}function j(h,g){for(let E=1;E<arguments.length;E++){const k=arguments[E];if(u(k)){const V=h.length||0,M=k.length||0;h.length=V+M;for(let W=0;W<M;W++)h[V+W]=k[W]}else h.push(k)}}class b{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(h){return/^[\s\xa0]*$/.test(h)}function x(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function N(h){return N[" "](h),h}N[" "]=function(){};var P=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(h,g,E){for(const k in h)g.call(E,h[k],k,h)}function S(h,g){for(const E in h)g.call(void 0,h[E],E,h)}function _(h){const g={};for(const E in h)g[E]=h[E];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(h,g){let E,k;for(let V=1;V<arguments.length;V++){k=arguments[V];for(E in k)h[E]=k[E];for(let M=0;M<C.length;M++)E=C[M],Object.prototype.hasOwnProperty.call(k,E)&&(h[E]=k[E])}}function A(h){var g=1;h=h.split(":");const E=[];for(;0<g&&h.length;)E.push(h.shift()),g--;return h.length&&E.push(h.join(":")),E}function L(h){c.setTimeout(()=>{throw h},0)}function D(){var h=K;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class ${constructor(){this.h=this.g=null}add(g,E){const k=Z.get();k.set(g,E),this.h?this.h.next=k:this.g=k,this.h=k}}var Z=new b(()=>new oe,h=>h.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,q=!1,K=new $,ee=()=>{const h=c.Promise.resolve(void 0);ve=()=>{h.then(te)}};var te=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(E){L(E)}var g=Z;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}q=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var Dt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,g),c.removeEventListener("test",E,g)}catch{}return h}();function vn(h,g){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(P){e:{try{N(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else E=="mouseover"?g=h.fromElement:E=="mouseout"&&(g=h.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ot[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&vn.aa.h.call(this)}}w(vn,ne);var Ot={2:"touch",3:"pen",4:"mouse"};vn.prototype.h=function(){vn.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),Kh=0;function da(h,g,E,k,V){this.listener=h,this.proxy=null,this.src=g,this.type=E,this.capture=!!k,this.ha=V,this.key=++Kh,this.da=this.fa=!1}function gr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function xn(h){this.src=h,this.g={},this.h=0}xn.prototype.add=function(h,g,E,k,V){var M=h.toString();h=this.g[M],h||(h=this.g[M]=[],this.h++);var W=Qh(h,g,k,V);return-1<W?(g=h[W],E||(g.fa=!1)):(g=new da(g,this.src,M,!!k,V),g.fa=E,h.push(g)),g};function _c(h,g){var E=g.type;if(E in h.g){var k=h.g[E],V=Array.prototype.indexOf.call(k,g,void 0),M;(M=0<=V)&&Array.prototype.splice.call(k,V,1),M&&(gr(g),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Qh(h,g,E,k){for(var V=0;V<h.length;++V){var M=h[V];if(!M.da&&M.listener==g&&M.capture==!!E&&M.ha==k)return V}return-1}var Yh="closure_lm_"+(1e6*Math.random()|0),Xh={};function U0(h,g,E,k,V){if(k&&k.once)return B0(h,g,E,k,V);if(Array.isArray(g)){for(var M=0;M<g.length;M++)U0(h,g[M],E,k,V);return null}return E=tf(E),h&&h[rn]?h.K(g,E,d(k)?!!k.capture:!!k,V):$0(h,g,E,!1,k,V)}function $0(h,g,E,k,V,M){if(!g)throw Error("Invalid event type");var W=d(V)?!!V.capture:!!V,Ne=Zh(h);if(Ne||(h[Yh]=Ne=new xn(h)),E=Ne.add(g,E,k,W,M),E.proxy)return E;if(k=XI(),E.proxy=k,k.src=h,k.listener=E,h.addEventListener)Dt||(V=W),V===void 0&&(V=!1),h.addEventListener(g.toString(),k,V);else if(h.attachEvent)h.attachEvent(q0(g.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function XI(){function h(E){return g.call(h.src,h.listener,E)}const g=JI;return h}function B0(h,g,E,k,V){if(Array.isArray(g)){for(var M=0;M<g.length;M++)B0(h,g[M],E,k,V);return null}return E=tf(E),h&&h[rn]?h.L(g,E,d(k)?!!k.capture:!!k,V):$0(h,g,E,!0,k,V)}function z0(h,g,E,k,V){if(Array.isArray(g))for(var M=0;M<g.length;M++)z0(h,g[M],E,k,V);else k=d(k)?!!k.capture:!!k,E=tf(E),h&&h[rn]?(h=h.i,g=String(g).toString(),g in h.g&&(M=h.g[g],E=Qh(M,E,k,V),-1<E&&(gr(M[E]),Array.prototype.splice.call(M,E,1),M.length==0&&(delete h.g[g],h.h--)))):h&&(h=Zh(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Qh(g,E,k,V)),(E=-1<h?g[h]:null)&&Jh(E))}function Jh(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[rn])_c(g.i,h);else{var E=h.type,k=h.proxy;g.removeEventListener?g.removeEventListener(E,k,h.capture):g.detachEvent?g.detachEvent(q0(E),k):g.addListener&&g.removeListener&&g.removeListener(k),(E=Zh(g))?(_c(E,h),E.h==0&&(E.src=null,g[Yh]=null)):gr(h)}}}function q0(h){return h in Xh?Xh[h]:Xh[h]="on"+h}function JI(h,g){if(h.da)h=!0;else{g=new vn(g,this);var E=h.listener,k=h.ha||h.src;h.fa&&Jh(h),h=E.call(k,g)}return h}function Zh(h){return h=h[Yh],h instanceof xn?h:null}var ef="__closure_events_fn_"+(1e9*Math.random()>>>0);function tf(h){return typeof h=="function"?h:(h[ef]||(h[ef]=function(g){return h.handleEvent(g)}),h[ef])}function bt(){ce.call(this),this.i=new xn(this),this.M=this,this.F=null}w(bt,ce),bt.prototype[rn]=!0,bt.prototype.removeEventListener=function(h,g,E,k){z0(this,h,g,E,k)};function Lt(h,g){var E,k=h.F;if(k)for(E=[];k;k=k.F)E.push(k);if(h=h.M,k=g.type||g,typeof g=="string")g=new ne(g,h);else if(g instanceof ne)g.target=g.target||h;else{var V=g;g=new ne(k,h),R(g,V)}if(V=!0,E)for(var M=E.length-1;0<=M;M--){var W=g.g=E[M];V=Tc(W,k,!0,g)&&V}if(W=g.g=h,V=Tc(W,k,!0,g)&&V,V=Tc(W,k,!1,g)&&V,E)for(M=0;M<E.length;M++)W=g.g=E[M],V=Tc(W,k,!1,g)&&V}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var E=h.g[g],k=0;k<E.length;k++)gr(E[k]);delete h.g[g],h.h--}}this.F=null},bt.prototype.K=function(h,g,E,k){return this.i.add(String(h),g,!1,E,k)},bt.prototype.L=function(h,g,E,k){return this.i.add(String(h),g,!0,E,k)};function Tc(h,g,E,k){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,M=0;M<g.length;++M){var W=g[M];if(W&&!W.da&&W.capture==E){var Ne=W.listener,ht=W.ha||W.src;W.fa&&_c(h.i,W),V=Ne.call(ht,k)!==!1&&V}}return V&&!k.defaultPrevented}function H0(h,g,E){if(typeof h=="function")E&&(h=p(h,E));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(h,g||0)}function W0(h){h.g=H0(()=>{h.g=null,h.i&&(h.i=!1,W0(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class ZI extends ce{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:W0(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(h){ce.call(this),this.h=h,this.g={}}w(ha,ce);var G0=[];function K0(h){O(h.g,function(g,E){this.g.hasOwnProperty(E)&&Jh(g)},h),h.g={}}ha.prototype.N=function(){ha.aa.N.call(this),K0(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nf=c.JSON.stringify,eC=c.JSON.parse,tC=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function rf(){}rf.prototype.h=null;function Q0(h){return h.h||(h.h=h.i())}function Y0(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sf(){ne.call(this,"d")}w(sf,ne);function of(){ne.call(this,"c")}w(of,ne);var Js={},X0=null;function Ec(){return X0=X0||new bt}Js.La="serverreachability";function J0(h){ne.call(this,Js.La,h)}w(J0,ne);function ma(h){const g=Ec();Lt(g,new J0(g))}Js.STAT_EVENT="statevent";function Z0(h,g){ne.call(this,Js.STAT_EVENT,h),this.stat=g}w(Z0,ne);function Vt(h){const g=Ec();Lt(g,new Z0(g,h))}Js.Ma="timingevent";function ev(h,g){ne.call(this,Js.Ma,h),this.size=g}w(ev,ne);function pa(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},g)}function ga(){this.g=!0}ga.prototype.xa=function(){this.g=!1};function nC(h,g,E,k,V,M){h.info(function(){if(h.g)if(M)for(var W="",Ne=M.split("&"),ht=0;ht<Ne.length;ht++){var we=Ne[ht].split("=");if(1<we.length){var _t=we[0];we=we[1];var Tt=_t.split("_");W=2<=Tt.length&&Tt[1]=="type"?W+(_t+"="+we+"&"):W+(_t+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+k+") [attempt "+V+"]: "+g+`
`+E+`
`+W})}function rC(h,g,E,k,V,M,W){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+V+"]: "+g+`
`+E+`
`+M+" "+W})}function Hi(h,g,E,k){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+iC(h,E)+(k?" "+k:"")})}function sC(h,g){h.info(function(){return"TIMEOUT: "+g})}ga.prototype.info=function(){};function iC(h,g){if(!h.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var k=E[h];if(!(2>k.length)){var V=k[1];if(Array.isArray(V)&&!(1>V.length)){var M=V[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return nf(E)}catch{return g}}var Nc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},af;function jc(){}w(jc,rf),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},af=new jc;function Yr(h,g,E,k){this.j=h,this.i=g,this.l=E,this.R=k||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nv}function nv(){this.i=null,this.g="",this.h=!1}var rv={},lf={};function cf(h,g,E){h.L=1,h.v=Ac(yr(g)),h.m=E,h.P=!0,sv(h,null)}function sv(h,g){h.F=Date.now(),Sc(h),h.A=yr(h.v);var E=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),vv(E.i,"t",k),h.C=0,E=h.j.J,h.h=new nv,h.g=Lv(h.j,E?g:null,!h.m),0<h.O&&(h.M=new ZI(p(h.Y,h,h.g),h.O)),g=h.U,E=h.g,k=h.ca;var V="readystatechange";Array.isArray(V)||(V&&(G0[0]=V.toString()),V=G0);for(var M=0;M<V.length;M++){var W=U0(E,V[M],k||g.handleEvent,!1,g.h||g);if(!W)break;g.g[W.key]=W}g=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),ma(),nC(h.i,h.u,h.A,h.l,h.R,h.m)}Yr.prototype.ca=function(h){h=h.target;const g=this.M;g&&vr(h)==3?g.j():this.Y(h)},Yr.prototype.Y=function(h){try{if(h==this.g)e:{const Tt=vr(this.g);var g=this.g.Ba();const Ki=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||Nv(this.g)))){this.J||Tt!=4||g==7||(g==8||0>=Ki?ma(3):ma(2)),uf(this);var E=this.g.Z();this.X=E;t:if(iv(this)){var k=Nv(this.g);h="";var V=k.length,M=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),ya(this);var W="";break t}this.h.i=new c.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,h+=this.h.i.decode(k[g],{stream:!(M&&g==V-1)});k.length=0,this.h.g+=h,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=E==200,rC(this.i,this.u,this.A,this.l,this.R,Tt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,ht=this.g;if((Ne=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ne)){var we=Ne;break t}}we=null}if(E=we)Hi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,df(this,E);else{this.o=!1,this.s=3,Vt(12),Zs(this),ya(this);break e}}if(this.P){E=!0;let Dn;for(;!this.J&&this.C<W.length;)if(Dn=oC(this,W),Dn==lf){Tt==4&&(this.s=4,Vt(14),E=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==rv){this.s=4,Vt(15),Hi(this.i,this.l,W,"[Invalid Chunk]"),E=!1;break}else Hi(this.i,this.l,Dn,null),df(this,Dn);if(iv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||W.length!=0||this.h.h||(this.s=1,Vt(16),E=!1),this.o=this.o&&E,!E)Hi(this.i,this.l,W,"[Invalid Chunked Response]"),Zs(this),ya(this);else if(0<W.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),yf(_t),_t.M=!0,Vt(11))}}else Hi(this.i,this.l,W,null),df(this,W);Tt==4&&Zs(this),this.o&&!this.J&&(Tt==4?Pv(this.j,this):(this.o=!1,Sc(this)))}else TC(this.g),E==400&&0<W.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),Zs(this),ya(this)}}}catch{}finally{}};function iv(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function oC(h,g){var E=h.C,k=g.indexOf(`
`,E);return k==-1?lf:(E=Number(g.substring(E,k)),isNaN(E)?rv:(k+=1,k+E>g.length?lf:(g=g.slice(k,k+E),h.C=k+E,g)))}Yr.prototype.cancel=function(){this.J=!0,Zs(this)};function Sc(h){h.S=Date.now()+h.I,ov(h,h.I)}function ov(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pa(p(h.ba,h),g)}function uf(h){h.B&&(c.clearTimeout(h.B),h.B=null)}Yr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(sC(this.i,this.A),this.L!=2&&(ma(),Vt(17)),Zs(this),this.s=2,ya(this)):ov(this,this.S-h)};function ya(h){h.j.G==0||h.J||Pv(h.j,h)}function Zs(h){uf(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,K0(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function df(h,g){try{var E=h.j;if(E.G!=0&&(E.g==h||hf(E.h,h))){if(!h.K&&hf(E.h,h)&&E.G==3){try{var k=E.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var V=k;if(V[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Lc(E),Dc(E);else break e;gf(E),Vt(18)}}else E.za=V[1],0<E.za-E.T&&37500>V[2]&&E.F&&E.v==0&&!E.C&&(E.C=pa(p(E.Za,E),6e3));if(1>=cv(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ti(E,11)}else if((h.K||E.g==h)&&Lc(E),!v(g))for(V=E.Da.g.parse(g),g=0;g<V.length;g++){let we=V[g];if(E.T=we[0],we=we[1],E.G==2)if(we[0]=="c"){E.K=we[1],E.ia=we[2];const _t=we[3];_t!=null&&(E.la=_t,E.j.info("VER="+E.la));const Tt=we[4];Tt!=null&&(E.Aa=Tt,E.j.info("SVER="+E.Aa));const Ki=we[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(k=1.5*Ki,E.L=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const Dn=h.g;if(Dn){const Mc=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mc){var M=k.h;M.g||Mc.indexOf("spdy")==-1&&Mc.indexOf("quic")==-1&&Mc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(ff(M,M.h),M.h=null))}if(k.D){const vf=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;vf&&(k.ya=vf,ke(k.I,k.D,vf))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),k=E;var W=h;if(k.qa=Ov(k,k.J?k.ia:null,k.W),W.K){uv(k.h,W);var Ne=W,ht=k.L;ht&&(Ne.I=ht),Ne.B&&(uf(Ne),Sc(Ne)),k.g=W}else Av(k);0<E.i.length&&Oc(E)}else we[0]!="stop"&&we[0]!="close"||ti(E,7);else E.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ti(E,7):pf(E):we[0]!="noop"&&E.l&&E.l.ta(we),E.v=0)}}ma(4)}catch{}}var aC=class{constructor(h,g){this.g=h,this.map=g}};function av(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lv(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function cv(h){return h.h?1:h.g?h.g.size:0}function hf(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function ff(h,g){h.g?h.g.add(g):h.h=g}function uv(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}av.prototype.cancel=function(){if(this.i=dv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function dv(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const E of h.g.values())g=g.concat(E.D);return g}return T(h.i)}function lC(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(u(h)){for(var g=[],E=h.length,k=0;k<E;k++)g.push(h[k]);return g}g=[],E=0;for(k in h)g[E++]=h[k];return g}function cC(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||typeof h=="string"){var g=[];h=h.length;for(var E=0;E<h;E++)g.push(E);return g}g=[],E=0;for(const k in h)g[E++]=k;return g}}}function hv(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(u(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var E=cC(h),k=lC(h),V=k.length,M=0;M<V;M++)g.call(void 0,k[M],E&&E[M],h)}var fv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uC(h,g){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var k=h[E].indexOf("="),V=null;if(0<=k){var M=h[E].substring(0,k);V=h[E].substring(k+1)}else M=h[E];g(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ei(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ei){this.h=h.h,Ic(this,h.j),this.o=h.o,this.g=h.g,Cc(this,h.s),this.l=h.l;var g=h.i,E=new wa;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),mv(this,E),this.m=h.m}else h&&(g=String(h).match(fv))?(this.h=!1,Ic(this,g[1]||"",!0),this.o=va(g[2]||""),this.g=va(g[3]||"",!0),Cc(this,g[4]),this.l=va(g[5]||"",!0),mv(this,g[6]||"",!0),this.m=va(g[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}ei.prototype.toString=function(){var h=[],g=this.j;g&&h.push(xa(g,pv,!0),":");var E=this.g;return(E||g=="file")&&(h.push("//"),(g=this.o)&&h.push(xa(g,pv,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(xa(E,E.charAt(0)=="/"?fC:hC,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",xa(E,pC)),h.join("")};function yr(h){return new ei(h)}function Ic(h,g,E){h.j=E?va(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Cc(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function mv(h,g,E){g instanceof wa?(h.i=g,gC(h.i,h.h)):(E||(g=xa(g,mC)),h.i=new wa(g,h.h))}function ke(h,g,E){h.i.set(g,E)}function Ac(h){return ke(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function va(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xa(h,g,E){return typeof h=="string"?(h=encodeURI(h).replace(g,dC),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dC(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var pv=/[#\/\?@]/g,hC=/[#\?:]/g,fC=/[#\?]/g,mC=/[#\?@]/g,pC=/#/g;function wa(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Xr(h){h.g||(h.g=new Map,h.h=0,h.i&&uC(h.i,function(g,E){h.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}n=wa.prototype,n.add=function(h,g){Xr(this),this.i=null,h=Wi(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(g),this.h+=1,this};function gv(h,g){Xr(h),g=Wi(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function yv(h,g){return Xr(h),g=Wi(h,g),h.g.has(g)}n.forEach=function(h,g){Xr(this),this.g.forEach(function(E,k){E.forEach(function(V){h.call(g,V,k,this)},this)},this)},n.na=function(){Xr(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let k=0;k<g.length;k++){const V=h[k];for(let M=0;M<V.length;M++)E.push(g[k])}return E},n.V=function(h){Xr(this);let g=[];if(typeof h=="string")yv(this,h)&&(g=g.concat(this.g.get(Wi(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)g=g.concat(h[E])}return g},n.set=function(h,g){return Xr(this),this.i=null,h=Wi(this,h),yv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},n.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function vv(h,g,E){gv(h,g),0<E.length&&(h.i=null,h.g.set(Wi(h,g),T(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var k=g[E];const M=encodeURIComponent(String(k)),W=this.V(k);for(k=0;k<W.length;k++){var V=M;W[k]!==""&&(V+="="+encodeURIComponent(String(W[k]))),h.push(V)}}return this.i=h.join("&")};function Wi(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function gC(h,g){g&&!h.j&&(Xr(h),h.i=null,h.g.forEach(function(E,k){var V=k.toLowerCase();k!=V&&(gv(this,k),vv(this,V,E))},h)),h.j=g}function yC(h,g){const E=new ga;if(c.Image){const k=new Image;k.onload=y(Jr,E,"TestLoadImage: loaded",!0,g,k),k.onerror=y(Jr,E,"TestLoadImage: error",!1,g,k),k.onabort=y(Jr,E,"TestLoadImage: abort",!1,g,k),k.ontimeout=y(Jr,E,"TestLoadImage: timeout",!1,g,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else g(!1)}function vC(h,g){const E=new ga,k=new AbortController,V=setTimeout(()=>{k.abort(),Jr(E,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:k.signal}).then(M=>{clearTimeout(V),M.ok?Jr(E,"TestPingServer: ok",!0,g):Jr(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Jr(E,"TestPingServer: error",!1,g)})}function Jr(h,g,E,k,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),k(E)}catch{}}function xC(){this.g=new tC}function wC(h,g,E){const k=E||"";try{hv(h,function(V,M){let W=V;d(V)&&(W=nf(V)),g.push(k+M+"="+encodeURIComponent(W))})}catch(V){throw g.push(k+"type="+encodeURIComponent("_badmap")),V}}function kc(h){this.l=h.Ub||null,this.j=h.eb||!1}w(kc,rf),kc.prototype.g=function(){return new Pc(this.l,this.j)},kc.prototype.i=function(h){return function(){return h}}({});function Pc(h,g){bt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Pc,bt),n=Pc.prototype,n.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,_a(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xv(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xv(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?ba(this):_a(this),this.readyState==3&&xv(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ba(this))},n.Qa=function(h){this.g&&(this.response=h,ba(this))},n.ga=function(){this.g&&ba(this)};function ba(h){h.readyState=4,h.l=null,h.j=null,h.v=null,_a(h)}n.setRequestHeader=function(h,g){this.u.append(h,g)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=g.next();return h.join(`\r
`)};function _a(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function wv(h){let g="";return O(h,function(E,k){g+=k,g+=":",g+=E,g+=`\r
`}),g}function mf(h,g,E){e:{for(k in E){var k=!1;break e}k=!0}k||(E=wv(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):ke(h,g,E))}function We(h){bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(We,bt);var bC=/^https?$/i,_C=["POST","PUT"];n=We.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,g,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():af.g(),this.v=this.o?Q0(this.o):Q0(af),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(M){bv(this,M);return}if(h=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var V in k)E.set(V,k[V]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const M of k.keys())E.set(M,k.get(M));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(M=>M.toLowerCase()=="content-type"),V=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_C,g,void 0))||k||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of E)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ev(this),this.u=!0,this.g.send(h),this.u=!1}catch(M){bv(this,M)}};function bv(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,_v(h),Rc(h)}function _v(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Lt(this,"complete"),Lt(this,"abort"),Rc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tv(this):this.bb())},n.bb=function(){Tv(this)};function Tv(h){if(h.h&&typeof l<"u"&&(!h.v[1]||vr(h)!=4||h.Z()!=2)){if(h.u&&vr(h)==4)H0(h.Ea,0,h);else if(Lt(h,"readystatechange"),vr(h)==4){h.h=!1;try{const W=h.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var k;if(k=W===0){var V=String(h.D).match(fv)[1]||null;!V&&c.self&&c.self.location&&(V=c.self.location.protocol.slice(0,-1)),k=!bC.test(V?V.toLowerCase():"")}E=k}if(E)Lt(h,"complete"),Lt(h,"success");else{h.m=6;try{var M=2<vr(h)?h.g.statusText:""}catch{M=""}h.l=M+" ["+h.Z()+"]",_v(h)}}finally{Rc(h)}}}}function Rc(h,g){if(h.g){Ev(h);const E=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||Lt(h,"ready");try{E.onreadystatechange=k}catch{}}}function Ev(h){h.I&&(c.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function vr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),eC(g)}};function Nv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function TC(h){const g={};h=(h.g&&2<=vr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(v(h[k]))continue;var E=A(h[k]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const M=g[V]||[];g[V]=M,M.push(E)}S(g,function(k){return k.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ta(h,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||g}function jv(h){this.Aa=0,this.i=[],this.j=new ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ta("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ta("baseRetryDelayMs",5e3,h),this.cb=Ta("retryDelaySeedMs",1e4,h),this.Wa=Ta("forwardChannelMaxRetries",2,h),this.wa=Ta("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new av(h&&h.concurrentRequestLimit),this.Da=new xC,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jv.prototype,n.la=8,n.G=1,n.connect=function(h,g,E,k){Vt(0),this.W=h,this.H=g||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.I=Ov(this,null,this.W),Oc(this)};function pf(h){if(Sv(h),h.G==3){var g=h.U++,E=yr(h.I);if(ke(E,"SID",h.K),ke(E,"RID",g),ke(E,"TYPE","terminate"),Ea(h,E),g=new Yr(h,h.j,g),g.L=2,g.v=Ac(yr(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=g.v,E=!0),E||(g.g=Lv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Sc(g)}Dv(h)}function Dc(h){h.g&&(yf(h),h.g.cancel(),h.g=null)}function Sv(h){Dc(h),h.u&&(c.clearTimeout(h.u),h.u=null),Lc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Oc(h){if(!lv(h.h)&&!h.s){h.s=!0;var g=h.Ga;ve||ee(),q||(ve(),q=!0),K.add(g,h),h.B=0}}function EC(h,g){return cv(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pa(p(h.Ga,h,g),Rv(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const V=new Yr(this,this.j,h);let M=this.o;if(this.S&&(M?(M=_(M),R(M,this.S)):M=this.S),this.m!==null||this.O||(V.H=M,M=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Cv(this,V,g),E=yr(this.I),ke(E,"RID",h),ke(E,"CVER",22),this.D&&ke(E,"X-HTTP-Session-Id",this.D),Ea(this,E),M&&(this.O?g="headers="+encodeURIComponent(String(wv(M)))+"&"+g:this.m&&mf(E,this.m,M)),ff(this.h,V),this.Ua&&ke(E,"TYPE","init"),this.P?(ke(E,"$req",g),ke(E,"SID","null"),V.T=!0,cf(V,E,null)):cf(V,E,g),this.G=2}}else this.G==3&&(h?Iv(this,h):this.i.length==0||lv(this.h)||Iv(this))};function Iv(h,g){var E;g?E=g.l:E=h.U++;const k=yr(h.I);ke(k,"SID",h.K),ke(k,"RID",E),ke(k,"AID",h.T),Ea(h,k),h.m&&h.o&&mf(k,h.m,h.o),E=new Yr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Cv(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ff(h.h,E),cf(E,k,g)}function Ea(h,g){h.H&&O(h.H,function(E,k){ke(g,k,E)}),h.l&&hv({},function(E,k){ke(g,k,E)})}function Cv(h,g,E){E=Math.min(h.i.length,E);var k=h.l?p(h.l.Na,h.l,h):null;e:{var V=h.i;let M=-1;for(;;){const W=["count="+E];M==-1?0<E?(M=V[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Ne=!0;for(let ht=0;ht<E;ht++){let we=V[ht].g;const _t=V[ht].map;if(we-=M,0>we)M=Math.max(0,V[ht].g-100),Ne=!1;else try{wC(_t,W,"req"+we+"_")}catch{k&&k(_t)}}if(Ne){k=W.join("&");break e}}}return h=h.i.splice(0,E),g.D=h,k}function Av(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;ve||ee(),q||(ve(),q=!0),K.add(g,h),h.v=0}}function gf(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pa(p(h.Fa,h),Rv(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,kv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pa(p(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),Dc(this),kv(this))};function yf(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function kv(h){h.g=new Yr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=yr(h.qa);ke(g,"RID","rpc"),ke(g,"SID",h.K),ke(g,"AID",h.T),ke(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&ke(g,"TO",h.ja),ke(g,"TYPE","xmlhttp"),Ea(h,g),h.m&&h.o&&mf(g,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Ac(yr(g)),E.m=null,E.P=!0,sv(E,h)}n.Za=function(){this.C!=null&&(this.C=null,Dc(this),gf(this),Vt(19))};function Lc(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Pv(h,g){var E=null;if(h.g==g){Lc(h),yf(h),h.g=null;var k=2}else if(hf(h.h,g))E=g.D,uv(h.h,g),k=1;else return;if(h.G!=0){if(g.o)if(k==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var V=h.B;k=Ec(),Lt(k,new ev(k,E)),Oc(h)}else Av(h);else if(V=g.s,V==3||V==0&&0<g.X||!(k==1&&EC(h,g)||k==2&&gf(h)))switch(E&&0<E.length&&(g=h.h,g.i=g.i.concat(E)),V){case 1:ti(h,5);break;case 4:ti(h,10);break;case 3:ti(h,6);break;default:ti(h,2)}}}function Rv(h,g){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*g}function ti(h,g){if(h.j.info("Error code "+g),g==2){var E=p(h.fb,h),k=h.Xa;const V=!k;k=new ei(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ic(k,"https"),Ac(k),V?yC(k.toString(),E):vC(k.toString(),E)}else Vt(2);h.G=0,h.l&&h.l.sa(g),Dv(h),Sv(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Dv(h){if(h.G=0,h.ka=[],h.l){const g=dv(h.h);(g.length!=0||h.i.length!=0)&&(j(h.ka,g),j(h.ka,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.ra()}}function Ov(h,g,E){var k=E instanceof ei?yr(E):new ei(E);if(k.g!="")g&&(k.g=g+"."+k.g),Cc(k,k.s);else{var V=c.location;k=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var M=new ei(null);k&&Ic(M,k),g&&(M.g=g),V&&Cc(M,V),E&&(M.l=E),k=M}return E=h.D,g=h.ya,E&&g&&ke(k,E,g),ke(k,"VER",h.la),Ea(h,k),k}function Lv(h,g,E){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new We(new kc({eb:E})):new We(h.pa),g.Ha(h.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vv(){}n=Vv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vc(){}Vc.prototype.g=function(h,g){return new sn(h,g)};function sn(h,g){bt.call(this),this.g=new jv(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!v(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new Gi(this)}w(sn,bt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){pf(this.g)},sn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=nf(h),h=E);g.i.push(new aC(g.Ya++,h)),g.G==3&&Oc(g)},sn.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,sn.aa.N.call(this)};function Mv(h){sf.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const E in g){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}w(Mv,sf);function Fv(){of.call(this),this.status=1}w(Fv,of);function Gi(h){this.g=h}w(Gi,Vv),Gi.prototype.ua=function(){Lt(this.g,"a")},Gi.prototype.ta=function(h){Lt(this.g,new Mv(h))},Gi.prototype.sa=function(h){Lt(this.g,new Fv)},Gi.prototype.ra=function(){Lt(this.g,"b")},Vc.prototype.createWebChannel=Vc.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,I2=function(){return new Vc},S2=function(){return Ec()},j2=Js,Up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nc.NO_ERROR=0,Nc.TIMEOUT=8,Nc.HTTP_ERROR=6,Ru=Nc,tv.COMPLETE="complete",N2=tv,Y0.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Wa=Y0,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,E2=We}).apply(typeof ou<"u"?ou:typeof self<"u"?self:typeof window<"u"?window:{});const Qw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new fh("@firebase/firestore");function Oa(){return Ci.logLevel}function J(n,...t){if(Ci.logLevel<=ge.DEBUG){const r=t.map(Ry);Ci.debug(`Firestore (${ia}): ${n}`,...r)}}function qr(n,...t){if(Ci.logLevel<=ge.ERROR){const r=t.map(Ry);Ci.error(`Firestore (${ia}): ${n}`,...r)}}function Uo(n,...t){if(Ci.logLevel<=ge.WARN){const r=t.map(Ry);Ci.warn(`Firestore (${ia}): ${n}`,...r)}}function Ry(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(n="Unexpected state"){const t=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: `+n;throw qr(t),new Error(t)}function Ee(n,t){n||ae()}function de(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Rn{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(It.UNAUTHENTICATED))}shutdown(){}}class zV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class qV{constructor(t){this.t=t,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Ee(this.o===void 0);let s=this.i;const i=u=>this.i!==s?(s=this.i,r(u)):Promise.resolve();let o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,t.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),l()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ee(typeof s.accessToken=="string"),new C2(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ee(t===null||typeof t=="string"),new It(t)}}class HV{constructor(t,r,s){this.l=t,this.h=r,this.P=s,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WV{constructor(t,r,s){this.l=t,this.h=r,this.P=s}getToken(){return Promise.resolve(new HV(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KV{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){Ee(this.o===void 0);const s=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?r(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>s(o))};const i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Ee(typeof r.token=="string"),this.R=r.token,new GV(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<n;s++)r[s]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=QV(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<r&&(s+=t.charAt(i[o]%t.length))}return s}}function _e(n,t){return n<t?-1:n>t?1:0}function $o(n,t,r){return n.length===t.length&&n.every((s,i)=>r(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return at.fromMillis(Date.now())}static fromDate(t){return at.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*r));return new at(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_e(this.nanoseconds,t.nanoseconds):_e(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ue(t)}static min(){return new ue(new at(0,0))}static max(){return new ue(new at(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,r,s){r===void 0?r=0:r>t.length&&ae(),s===void 0?s=t.length-r:s>t.length-r&&ae(),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return Ul.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Ul?t.forEach(s=>{r.push(s)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let i=0;i<s;i++){const o=t.get(i),l=r.get(i);if(o<l)return-1;if(o>l)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class De extends Ul{construct(t,r,s){return new De(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(i=>i.length>0))}return new De(r)}static emptyPath(){return new De([])}}const YV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Ul{construct(t,r,s){return new pt(t,r,s)}static isValidIdentifier(t){return YV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(t){const r=[];let s="",i=0;const o=()=>{if(s.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let l=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=u,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(s+=c,i++):(o(),i++)}if(o(),l)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new pt(r)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.path=t}static fromPath(t){return new re(De.fromString(t))}static fromName(t){return new re(De.fromString(t).popFirst(5))}static empty(){return new re(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&De.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return De.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new re(new De(t.slice()))}}function XV(n,t){const r=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(s===1e9?new at(r+1,0):new at(r,s));return new Ls(i,re.empty(),t)}function JV(n){return new Ls(n.readTime,n.key,-1)}class Ls{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new Ls(ue.min(),re.empty(),-1)}static max(){return new Ls(ue.max(),re.empty(),-1)}}function ZV(n,t){let r=n.readTime.compareTo(t.readTime);return r!==0?r:(r=re.comparator(n.documentKey,t.documentKey),r!==0?r:_e(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==eM)throw n;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new B((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(s,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof B?r:B.resolve(r)}catch(r){return B.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):B.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):B.reject(r)}static resolve(t){return new B((r,s)=>{r(t)})}static reject(t){return new B((r,s)=>{s(t)})}static waitFor(t){return new B((r,s)=>{let i=0,o=0,l=!1;t.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&r()},u=>s(u))}),l=!0,o===i&&r()})}static or(t){let r=B.resolve(!1);for(const s of t)r=r.next(i=>i?B.resolve(i):s());return r}static forEach(t,r){const s=[];return t.forEach((i,o)=>{s.push(r.call(this,i,o))}),this.waitFor(s)}static mapArray(t,r){return new B((s,i)=>{const o=t.length,l=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;r(t[d]).next(f=>{l[d]=f,++c,c===o&&s(l)},f=>i(f))}})}static doWhile(t,r){return new B((s,i)=>{const o=()=>{t()===!0?r().next(()=>{o()},i):s()};o()})}}function nM(n){const t=n.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function dc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Dy.oe=-1;function vh(n){return n==null}function _d(n){return n===0&&1/n==-1/0}function rM(n){return typeof n=="number"&&Number.isInteger(n)&&!_d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n){let t=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t++;return t}function Fi(n,t){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t(r,n[r])}function k2(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t,r){this.comparator=t,this.root=r||mt.EMPTY}insert(t,r){return new He(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(t){return new He(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mt.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return r+s.left.size;i<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,s)=>(t(r,s),!1))}toString(){const t=[];return this.inorderTraversal((r,s)=>(t.push(`${r}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new au(this.root,t,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new au(this.root,t,this.comparator,!0)}}class au{constructor(t,r,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=r?s(t.key,r):1,r&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mt{constructor(t,r,s,i,o){this.key=t,this.value=r,this.color=s??mt.RED,this.left=i??mt.EMPTY,this.right=o??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,i,o){return new mt(t??this.key,r??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let i=this;const o=s(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,r,s),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const t=this.left.check();if(t!==this.right.check())throw ae();return t+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,r,s,i,o){return this}insert(t,r,s){return new mt(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.comparator=t,this.data=new He(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,s)=>(t(r),!1))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Xw(this.data.getIterator())}getIteratorFrom(t){return new Xw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(s=>{r=r.add(s)}),r}isEqual(t){if(!(t instanceof yt)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new yt(this.comparator);return r.data=t,r}}class Xw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.fields=t,t.sort(pt.comparator)}static empty(){return new un([])}unionWith(t){let r=new yt(pt.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new un(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return $o(this.fields,t.fields,(r,s)=>r.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new P2("Invalid base64 string: "+o):o}}(t);return new xt(r)}static fromUint8Array(t){const r=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(t);return new xt(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _e(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const sM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(Ee(!!n),typeof n=="string"){let t=0;const r=sM.exec(n);if(Ee(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Qe(n.seconds),nanos:Qe(n.nanos)}}function Qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ai(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ly(n){const t=n.mapValue.fields.__previous_value__;return Oy(t)?Ly(t):t}function $l(n){const t=Vs(n.mapValue.fields.__local_write_time__.timestampValue);return new at(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(t,r,s,i,o,l,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Bl{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Bl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ki(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Oy(n)?4:aM(n)?9007199254740991:oM(n)?10:11:ae()}function dr(n,t){if(n===t)return!0;const r=ki(n);if(r!==ki(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return $l(n).isEqual($l(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Vs(i.timestampValue),c=Vs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,o){return Ai(i.bytesValue).isEqual(Ai(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,o){return Qe(i.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(n,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qe(i.integerValue)===Qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Qe(i.doubleValue),c=Qe(o.doubleValue);return l===c?_d(l)===_d(c):isNaN(l)&&isNaN(c)}return!1}(n,t);case 9:return $o(n.arrayValue.values||[],t.arrayValue.values||[],dr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Yw(l)!==Yw(c))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(c[u]===void 0||!dr(l[u],c[u])))return!1;return!0}(n,t);default:return ae()}}function zl(n,t){return(n.values||[]).find(r=>dr(r,t))!==void 0}function Bo(n,t){if(n===t)return 0;const r=ki(n),s=ki(t);if(r!==s)return _e(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,t.booleanValue);case 2:return function(o,l){const c=Qe(o.integerValue||o.doubleValue),u=Qe(l.integerValue||l.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,t);case 3:return Jw(n.timestampValue,t.timestampValue);case 4:return Jw($l(n),$l(t));case 5:return _e(n.stringValue,t.stringValue);case 6:return function(o,l){const c=Ai(o),u=Ai(l);return c.compareTo(u)}(n.bytesValue,t.bytesValue);case 7:return function(o,l){const c=o.split("/"),u=l.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=_e(c[d],u[d]);if(f!==0)return f}return _e(c.length,u.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,l){const c=_e(Qe(o.latitude),Qe(l.latitude));return c!==0?c:_e(Qe(o.longitude),Qe(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Zw(n.arrayValue,t.arrayValue);case 10:return function(o,l){var c,u,d,f;const m=o.fields||{},p=l.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=(u=p.value)===null||u===void 0?void 0:u.arrayValue,T=_e(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:Zw(y,w)}(n.mapValue,t.mapValue);case 11:return function(o,l){if(o===lu.mapValue&&l===lu.mapValue)return 0;if(o===lu.mapValue)return 1;if(l===lu.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=l.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const p=_e(u[m],f[m]);if(p!==0)return p;const y=Bo(c[u[m]],d[f[m]]);if(y!==0)return y}return _e(u.length,f.length)}(n.mapValue,t.mapValue);default:throw ae()}}function Jw(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return _e(n,t);const r=Vs(n),s=Vs(t),i=_e(r.seconds,s.seconds);return i!==0?i:_e(r.nanos,s.nanos)}function Zw(n,t){const r=n.values||[],s=t.values||[];for(let i=0;i<r.length&&i<s.length;++i){const o=Bo(r[i],s[i]);if(o)return o}return _e(r.length,s.length)}function zo(n){return $p(n)}function $p(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Vs(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return Ai(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return re.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=$p(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const l of s)o?o=!1:i+=",",i+=`${l}:${$p(r.fields[l])}`;return i+"}"}(n.mapValue):ae()}function eb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Bp(n){return!!n&&"integerValue"in n}function Vy(n){return!!n&&"arrayValue"in n}function tb(n){return!!n&&"nullValue"in n}function nb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Du(n){return!!n&&"mapValue"in n}function oM(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function al(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Fi(n.mapValue.fields,(r,s)=>t.mapValue.fields[r]=al(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=al(n.arrayValue.values[r]);return t}return Object.assign({},n)}function aM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.value=t}static empty(){return new Kt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!Du(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=al(r)}setAll(t){let r=pt.emptyPath(),s={},i=[];t.forEach((l,c)=>{if(!r.isImmediateParentOf(c)){const u=this.getFieldsMap(r);this.applyChanges(u,s,i),s={},i=[],r=c.popLast()}l?s[c.lastSegment()]=al(l):i.push(c.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,s,i)}delete(t){const r=this.field(t.popLast());Du(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return dr(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=r.mapValue.fields[t.get(s)];Du(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,s){Fi(r,(i,o)=>t[i]=o);for(const i of s)delete t[i]}clone(){return new Kt(al(this.value))}}function R2(n){const t=[];return Fi(n.fields,(r,s)=>{const i=new pt([r]);if(Du(s)){const o=R2(s.mapValue).fields;if(o.length===0)t.push(i);else for(const l of o)t.push(i.child(l))}else t.push(i)}),new un(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t,r,s,i,o,l,c){this.key=t,this.documentType=r,this.version=s,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(t){return new At(t,0,ue.min(),ue.min(),ue.min(),Kt.empty(),0)}static newFoundDocument(t,r,s,i){return new At(t,1,r,ue.min(),s,i,0)}static newNoDocument(t,r){return new At(t,2,r,ue.min(),ue.min(),Kt.empty(),0)}static newUnknownDocument(t,r){return new At(t,3,r,ue.min(),ue.min(),Kt.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof At&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,r){this.position=t,this.inclusive=r}}function rb(n,t,r){let s=0;for(let i=0;i<n.position.length;i++){const o=t[i],l=n.position[i];if(o.field.isKeyField()?s=re.comparator(re.fromName(l.referenceValue),r.key):s=Bo(l,r.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function sb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!dr(n.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,r="asc"){this.field=t,this.dir=r}}function lM(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{}class nt extends D2{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new uM(t,r,s):r==="array-contains"?new fM(t,s):r==="in"?new mM(t,s):r==="not-in"?new pM(t,s):r==="array-contains-any"?new gM(t,s):new nt(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new dM(t,s):new hM(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Bo(r,this.value)):r!==null&&ki(this.value)===ki(r)&&this.matchesComparison(Bo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends D2{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Yn(t,r)}matches(t){return O2(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function O2(n){return n.op==="and"}function L2(n){return cM(n)&&O2(n)}function cM(n){for(const t of n.filters)if(t instanceof Yn)return!1;return!0}function zp(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+zo(n.value);if(L2(n))return n.filters.map(t=>zp(t)).join(",");{const t=n.filters.map(r=>zp(r)).join(",");return`${n.op}(${t})`}}function V2(n,t){return n instanceof nt?function(s,i){return i instanceof nt&&s.op===i.op&&s.field.isEqual(i.field)&&dr(s.value,i.value)}(n,t):n instanceof Yn?function(s,i){return i instanceof Yn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((o,l,c)=>o&&V2(l,i.filters[c]),!0):!1}(n,t):void ae()}function M2(n){return n instanceof nt?function(r){return`${r.field.canonicalString()} ${r.op} ${zo(r.value)}`}(n):n instanceof Yn?function(r){return r.op.toString()+" {"+r.getFilters().map(M2).join(" ,")+"}"}(n):"Filter"}class uM extends nt{constructor(t,r,s){super(t,r,s),this.key=re.fromName(s.referenceValue)}matches(t){const r=re.comparator(t.key,this.key);return this.matchesComparison(r)}}class dM extends nt{constructor(t,r){super(t,"in",r),this.keys=F2("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class hM extends nt{constructor(t,r){super(t,"not-in",r),this.keys=F2("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function F2(n,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(s=>re.fromName(s.referenceValue))}class fM extends nt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Vy(r)&&zl(r.arrayValue,this.value)}}class mM extends nt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&zl(this.value.arrayValue,r)}}class pM extends nt{constructor(t,r){super(t,"not-in",r)}matches(t){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!zl(this.value.arrayValue,r)}}class gM extends nt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Vy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>zl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(t,r=null,s=[],i=[],o=null,l=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function ib(n,t=null,r=[],s=[],i=null,o=null,l=null){return new yM(n,t,r,s,i,o,l)}function My(n){const t=de(n);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(s=>zp(s)).join(","),r+="|ob:",r+=t.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),vh(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>zo(s)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>zo(s)).join(",")),t.ue=r}return t.ue}function Fy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!lM(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!V2(n.filters[r],t.filters[r]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!sb(n.startAt,t.startAt)&&sb(n.endAt,t.endAt)}function qp(n){return re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,r=null,s=[],i=[],o=null,l="F",c=null,u=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vM(n,t,r,s,i,o,l,c){return new hc(n,t,r,s,i,o,l,c)}function Uy(n){return new hc(n)}function ob(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U2(n){return n.collectionGroup!==null}function ll(n){const t=de(n);if(t.ce===null){t.ce=[];const r=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),r.add(o.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new yt(pt.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(t).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||t.ce.push(new Ed(o,s))}),r.has(pt.keyField().canonicalString())||t.ce.push(new Ed(pt.keyField(),s))}return t.ce}function ar(n){const t=de(n);return t.le||(t.le=xM(t,ll(n))),t.le}function xM(n,t){if(n.limitType==="F")return ib(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ed(i.field,o)});const r=n.endAt?new Td(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Td(n.startAt.position,n.startAt.inclusive):null;return ib(n.path,n.collectionGroup,t,n.filters,n.limit,r,s)}}function Hp(n,t){const r=n.filters.concat([t]);return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),r,n.limit,n.limitType,n.startAt,n.endAt)}function Wp(n,t,r){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,r,n.startAt,n.endAt)}function xh(n,t){return Fy(ar(n),ar(t))&&n.limitType===t.limitType}function $2(n){return`${My(ar(n))}|lt:${n.limitType}`}function Xi(n){return`Query(target=${function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(i=>M2(i)).join(", ")}]`),vh(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(i=>zo(i)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(i=>zo(i)).join(",")),`Target(${s})`}(ar(n))}; limitType=${n.limitType})`}function wh(n,t){return t.isFoundDocument()&&function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):re.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(n,t)&&function(s,i){for(const o of ll(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,t)&&function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0}(n,t)&&function(s,i){return!(s.startAt&&!function(l,c,u){const d=rb(l,c,u);return l.inclusive?d<=0:d<0}(s.startAt,ll(s),i)||s.endAt&&!function(l,c,u){const d=rb(l,c,u);return l.inclusive?d>=0:d>0}(s.endAt,ll(s),i))}(n,t)}function wM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function B2(n){return(t,r)=>{let s=!1;for(const i of ll(n)){const o=bM(i,t,r);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function bM(n,t,r){const s=n.field.isKeyField()?re.comparator(t.key,r.key):function(o,l,c){const u=l.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Bo(u,d):ae()}(n.field,t,r);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[r]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fi(this.inner,(r,s)=>{for(const[i,o]of s)t(i,o)})}isEmpty(){return k2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new He(re.comparator);function Hr(){return _M}const z2=new He(re.comparator);function Ga(...n){let t=z2;for(const r of n)t=t.insert(r.key,r);return t}function q2(n){let t=z2;return n.forEach((r,s)=>t=t.insert(r,s.overlayedDocument)),t}function fi(){return cl()}function H2(){return cl()}function cl(){return new oa(n=>n.toString(),(n,t)=>n.isEqual(t))}const TM=new He(re.comparator),EM=new yt(re.comparator);function pe(...n){let t=EM;for(const r of n)t=t.add(r);return t}const NM=new yt(_e);function jM(){return NM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(t)?"-0":t}}function W2(n){return{integerValue:""+n}}function SM(n,t){return rM(t)?W2(t):$y(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function IM(n,t,r){return n instanceof ql?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Oy(o)&&(o=Ly(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(r,t):n instanceof Hl?K2(n,t):n instanceof Wl?Q2(n,t):function(i,o){const l=G2(i,o),c=ab(l)+ab(i.Pe);return Bp(l)&&Bp(i.Pe)?W2(c):$y(i.serializer,c)}(n,t)}function CM(n,t,r){return n instanceof Hl?K2(n,t):n instanceof Wl?Q2(n,t):r}function G2(n,t){return n instanceof Nd?function(s){return Bp(s)||function(o){return!!o&&"doubleValue"in o}(s)}(t)?t:{integerValue:0}:null}class ql extends bh{}class Hl extends bh{constructor(t){super(),this.elements=t}}function K2(n,t){const r=Y2(t);for(const s of n.elements)r.some(i=>dr(i,s))||r.push(s);return{arrayValue:{values:r}}}class Wl extends bh{constructor(t){super(),this.elements=t}}function Q2(n,t){let r=Y2(t);for(const s of n.elements)r=r.filter(i=>!dr(i,s));return{arrayValue:{values:r}}}class Nd extends bh{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function ab(n){return Qe(n.integerValue||n.doubleValue)}function Y2(n){return Vy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(t,r){this.field=t,this.transform=r}}function kM(n,t){return n.field.isEqual(t.field)&&function(s,i){return s instanceof Hl&&i instanceof Hl||s instanceof Wl&&i instanceof Wl?$o(s.elements,i.elements,dr):s instanceof Nd&&i instanceof Nd?dr(s.Pe,i.Pe):s instanceof ql&&i instanceof ql}(n.transform,t.transform)}class PM{constructor(t,r){this.version=t,this.transformResults=r}}class In{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new In}static exists(t){return new In(void 0,t)}static updateTime(t){return new In(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ou(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class _h{}function X2(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new By(n.key,In.none()):new fc(n.key,n.data,In.none());{const r=n.data,s=Kt.empty();let i=new yt(pt.comparator);for(let o of t.fields)if(!i.has(o)){let l=r.field(o);l===null&&o.length>1&&(o=o.popLast(),l=r.field(o)),l===null?s.delete(o):s.set(o,l),i=i.add(o)}return new Ys(n.key,s,new un(i.toArray()),In.none())}}function RM(n,t,r){n instanceof fc?function(i,o,l){const c=i.value.clone(),u=cb(i.fieldTransforms,o,l.transformResults);c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,t,r):n instanceof Ys?function(i,o,l){if(!Ou(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=cb(i.fieldTransforms,o,l.transformResults),u=o.data;u.setAll(J2(i)),u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,t,r):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,r)}function ul(n,t,r,s){return n instanceof fc?function(o,l,c,u){if(!Ou(o.precondition,l))return c;const d=o.value.clone(),f=ub(o.fieldTransforms,u,l);return d.setAll(f),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(n,t,r,s):n instanceof Ys?function(o,l,c,u){if(!Ou(o.precondition,l))return c;const d=ub(o.fieldTransforms,u,l),f=l.data;return f.setAll(J2(o)),f.setAll(d),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,t,r,s):function(o,l,c){return Ou(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,t,r)}function DM(n,t){let r=null;for(const s of n.fieldTransforms){const i=t.data.field(s.field),o=G2(s.transform,i||null);o!=null&&(r===null&&(r=Kt.empty()),r.set(s.field,o))}return r||null}function lb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&$o(s,i,(o,l)=>kM(o,l))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class fc extends _h{constructor(t,r,s,i=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ys extends _h{constructor(t,r,s,i,o=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function J2(n){const t=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=n.data.field(r);t.set(r,s)}}),t}function cb(n,t,r){const s=new Map;Ee(n.length===r.length);for(let i=0;i<r.length;i++){const o=n[i],l=o.transform,c=t.data.field(o.field);s.set(o.field,CM(l,c,r[i]))}return s}function ub(n,t,r){const s=new Map;for(const i of n){const o=i.transform,l=r.data.field(i.field);s.set(i.field,IM(o,l,t))}return s}class By extends _h{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OM extends _h{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(t,r,s,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&RM(o,t,s[i])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=ul(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=ul(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=H2();return this.mutations.forEach(i=>{const o=t.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=r.has(i.key)?null:c;const u=X2(l,c);u!==null&&s.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(ue.min())}),s}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),pe())}isEqual(t){return this.batchId===t.batchId&&$o(this.mutations,t.mutations,(r,s)=>lb(r,s))&&$o(this.baseMutations,t.baseMutations,(r,s)=>lb(r,s))}}class zy{constructor(t,r,s,i){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=i}static from(t,r,s){Ee(t.mutations.length===s.length);let i=function(){return TM}();const o=t.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,s[l].version);return new zy(t,r,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,ye;function FM(n){switch(n){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Z2(n){if(n===void 0)return qr("GRPC error has no .code"),F.UNKNOWN;switch(n){case Ze.OK:return F.OK;case Ze.CANCELLED:return F.CANCELLED;case Ze.UNKNOWN:return F.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return F.INTERNAL;case Ze.UNAVAILABLE:return F.UNAVAILABLE;case Ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ze.NOT_FOUND:return F.NOT_FOUND;case Ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ze.ABORTED:return F.ABORTED;case Ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ze.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(ye=Ze||(Ze={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new xi([4294967295,4294967295],0);function db(n){const t=UM().encode(n),r=new T2;return r.update(t),new Uint8Array(r.digest())}function hb(n){const t=new DataView(n.buffer),r=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new xi([r,s],0),new xi([i,o],0)]}class qy{constructor(t,r,s){if(this.bitmap=t,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Ka(`Invalid padding: ${r}`);if(s<0)throw new Ka(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${s}`);if(t.length===0&&r!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=xi.fromNumber(this.Ie)}Ee(t,r,s){let i=t.add(r.multiply(xi.fromNumber(s)));return i.compare($M)===1&&(i=new xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const r=db(t),[s,i]=hb(r);for(let o=0;o<this.hashCount;o++){const l=this.Ee(s,i,o);if(!this.de(l))return!1}return!0}static create(t,r,s){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new qy(o,i,r);return s.forEach(c=>l.insert(c)),l}insert(t){if(this.Ie===0)return;const r=db(t),[s,i]=hb(r);for(let o=0;o<this.hashCount;o++){const l=this.Ee(s,i,o);this.Ae(l)}}Ae(t){const r=Math.floor(t/8),s=t%8;this.bitmap[r]|=1<<s}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,r,s,i,o){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,r,s){const i=new Map;return i.set(t,mc.createSynthesizedTargetChangeForCurrentChange(t,r,s)),new Th(ue.min(),i,new He(_e),Hr(),pe())}}class mc{constructor(t,r,s,i,o){this.resumeToken=t,this.current=r,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,r,s){return new mc(s,r,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,r,s,i){this.Re=t,this.removedTargetIds=r,this.key=s,this.Ve=i}}class ej{constructor(t,r){this.targetId=t,this.me=r}}class tj{constructor(t,r,s=xt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=s,this.cause=i}}class fb{constructor(){this.fe=0,this.ge=pb(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=pe(),r=pe(),s=pe();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:s=s.add(i);break;default:ae()}}),new mc(this.pe,this.ye,t,r,s)}Ce(){this.we=!1,this.ge=pb()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BM{constructor(t){this.Le=t,this.Be=new Map,this.ke=Hr(),this.qe=mb(),this.Qe=new He(_e)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const s=this.Ge(r);switch(t.state){case 0:this.ze(r)&&s.De(t.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(t.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(t.resumeToken));break;default:ae()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((s,i)=>{this.ze(i)&&r(i)})}He(t){const r=t.targetId,s=t.me.count,i=this.Je(r);if(i){const o=i.target;if(qp(o))if(s===0){const l=new re(o.path);this.Ue(r,l,At.newNoDocument(l,ue.min()))}else Ee(s===1);else{const l=this.Ye(r);if(l!==s){const c=this.Ze(t),u=c?this.Xe(c,t,l):1;if(u!==0){this.je(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=r;let l,c;try{l=Ai(s).toUint8Array()}catch(u){if(u instanceof P2)return Uo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qy(l,i,o)}catch(u){return Uo(u instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(t,r,s){return r.me.count===s-this.nt(t,r.targetId)?0:2}nt(t,r){const s=this.Le.getRemoteKeysForTarget(r);let i=0;return s.forEach(o=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.Ue(r,o,null),i++)}),i}rt(t){const r=new Map;this.Be.forEach((o,l)=>{const c=this.Je(l);if(c){if(o.current&&qp(c.target)){const u=new re(c.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,At.newNoDocument(u,t))}o.be&&(r.set(l,o.ve()),o.Ce())}});let s=pe();this.qe.forEach((o,l)=>{let c=!0;l.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(t));const i=new Th(t,r,this.Qe,this.ke,s);return this.ke=Hr(),this.qe=mb(),this.Qe=new He(_e),i}$e(t,r){if(!this.ze(t))return;const s=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,s){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new fb,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new yt(_e),this.qe=this.qe.insert(t,r)),r}ze(t){const r=this.Je(t)!==null;return r||J("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new fb),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function mb(){return new He(re.comparator)}function pb(){return new He(re.comparator)}const zM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),qM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),HM=(()=>({and:"AND",or:"OR"}))();class WM{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Gp(n,t){return n.useProto3Json||vh(t)?t:{value:t}}function jd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nj(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function GM(n,t){return jd(n,t.toTimestamp())}function lr(n){return Ee(!!n),ue.fromTimestamp(function(r){const s=Vs(r);return new at(s.seconds,s.nanos)}(n))}function Hy(n,t){return Kp(n,t).canonicalString()}function Kp(n,t){const r=function(i){return new De(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?r:r.child(t)}function rj(n){const t=De.fromString(n);return Ee(lj(t)),t}function Qp(n,t){return Hy(n.databaseId,t.path)}function tm(n,t){const r=rj(t);if(r.get(1)!==n.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new re(ij(r))}function sj(n,t){return Hy(n.databaseId,t)}function KM(n){const t=rj(n);return t.length===4?De.emptyPath():ij(t)}function Yp(n){return new De(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ij(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function gb(n,t,r){return{name:Qp(n,t),fields:r.value.mapValue.fields}}function QM(n,t){let r;if("targetChange"in t){t.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(Ee(f===void 0||typeof f=="string"),xt.fromBase64String(f||"")):(Ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array),xt.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,c=l&&function(d){const f=d.code===void 0?F.UNKNOWN:Z2(d.code);return new Y(f,d.message||"")}(l);r=new tj(s,i,o,c||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=tm(n,s.document.name),o=lr(s.document.updateTime),l=s.document.createTime?lr(s.document.createTime):ue.min(),c=new Kt({mapValue:{fields:s.document.fields}}),u=At.newFoundDocument(i,o,l,c),d=s.targetIds||[],f=s.removedTargetIds||[];r=new Lu(d,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=tm(n,s.document),o=s.readTime?lr(s.readTime):ue.min(),l=At.newNoDocument(i,o),c=s.removedTargetIds||[];r=new Lu([],c,l.key,l)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=tm(n,s.document),o=s.removedTargetIds||[];r=new Lu([],o,i,null)}else{if(!("filter"in t))return ae();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,l=new MM(i,o),c=s.targetId;r=new ej(c,l)}}return r}function YM(n,t){let r;if(t instanceof fc)r={update:gb(n,t.key,t.value)};else if(t instanceof By)r={delete:Qp(n,t.key)};else if(t instanceof Ys)r={update:gb(n,t.key,t.data),updateMask:i6(t.fieldMask)};else{if(!(t instanceof OM))return ae();r={verify:Qp(n,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(s=>function(o,l){const c=l.transform;if(c instanceof ql)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nd)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw ae()}(0,s))),t.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:GM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(n,t.precondition)),r}function XM(n,t){return n&&n.length>0?(Ee(t!==void 0),n.map(r=>function(i,o){let l=i.updateTime?lr(i.updateTime):lr(o);return l.isEqual(ue.min())&&(l=lr(o)),new PM(l,i.transformResults||[])}(r,t))):[]}function JM(n,t){return{documents:[sj(n,t.path)]}}function ZM(n,t){const r={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=sj(n,i);const o=function(d){if(d.length!==0)return aj(Yn.create(d,"and"))}(t.filters);o&&(r.structuredQuery.where=o);const l=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:Ji(p.field),direction:n6(p.dir)}}(f))}(t.orderBy);l&&(r.structuredQuery.orderBy=l);const c=Gp(n,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(t.endAt)),{_t:r,parent:i}}function e6(n){let t=KM(n.parent);const r=n.structuredQuery,s=r.from?r.from.length:0;let i=null;if(s>0){Ee(s===1);const f=r.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let o=[];r.where&&(o=function(m){const p=oj(m);return p instanceof Yn&&L2(p)?p.getFilters():[p]}(r.where));let l=[];r.orderBy&&(l=function(m){return m.map(p=>function(w){return new Ed(Zi(w.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(r.orderBy));let c=null;r.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,vh(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(m){const p=!!m.before,y=m.values||[];return new Td(y,p)}(r.startAt));let d=null;return r.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new Td(y,p)}(r.endAt)),vM(t,i,l,o,c,"F",u,d)}function t6(n,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function oj(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Zi(r.unaryFilter.field);return nt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(r.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zi(r.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Zi(r.unaryFilter.field);return nt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(n):n.fieldFilter!==void 0?function(r){return nt.create(Zi(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return Yn.create(r.compositeFilter.filters.map(s=>oj(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(r.compositeFilter.op))}(n):ae()}function n6(n){return zM[n]}function r6(n){return qM[n]}function s6(n){return HM[n]}function Ji(n){return{fieldPath:n.canonicalString()}}function Zi(n){return pt.fromServerFormat(n.fieldPath)}function aj(n){return n instanceof nt?function(r){if(r.op==="=="){if(nb(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NAN"}};if(tb(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(nb(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NOT_NAN"}};if(tb(r.value))return{unaryFilter:{field:Ji(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(r.field),op:r6(r.op),value:r.value}}}(n):n instanceof Yn?function(r){const s=r.getFilters().map(i=>aj(i));return s.length===1?s[0]:{compositeFilter:{op:s6(r.op),filters:s}}}(n):ae()}function i6(n){const t=[];return n.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function lj(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,r,s,i,o=ue.min(),l=ue.min(),c=xt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=r,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(t){return new ys(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t){this.ct=t}}function a6(n){const t=e6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.un=new c6}addToCollectionParentIndex(t,r){return this.un.add(r),B.resolve()}getCollectionParents(t,r){return B.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return B.resolve()}deleteFieldIndex(t,r){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,r){return B.resolve()}getDocumentsMatchingTarget(t,r){return B.resolve(null)}getIndexType(t,r){return B.resolve(0)}getFieldIndexes(t,r){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,r){return B.resolve(Ls.min())}getMinOffsetFromCollectionGroup(t,r){return B.resolve(Ls.min())}updateCollectionGroup(t,r,s){return B.resolve()}updateIndexEntries(t,r){return B.resolve()}}class c6{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),i=this.index[r]||new yt(De.comparator),o=!i.has(s);return this.index[r]=i.add(s),o}has(t){const r=t.lastSegment(),s=t.popLast(),i=this.index[r];return i&&i.has(s)}getEntries(t){return(this.index[t]||new yt(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new qo(0)}static kn(){return new qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.changes=new oa(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,At.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?B.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(t,r,s,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(s!==null&&ul(s.mutation,i,un.empty(),at.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.getLocalViewOfDocuments(t,s,pe()).next(()=>s))}getLocalViewOfDocuments(t,r,s=pe()){const i=fi();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,s).next(o=>{let l=Ga();return o.forEach((c,u)=>{l=l.insert(c,u.overlayedDocument)}),l}))}getOverlayedDocuments(t,r){const s=fi();return this.populateOverlays(t,s,r).next(()=>this.computeViews(t,r,s,pe()))}populateOverlays(t,r,s){const i=[];return s.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((l,c)=>{r.set(l,c)})})}computeViews(t,r,s,i){let o=Hr();const l=cl(),c=function(){return cl()}();return r.forEach((u,d)=>{const f=s.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ys)?o=o.insert(d.key,d):f!==void 0?(l.set(d.key,f.mutation.getFieldMask()),ul(f.mutation,d,f.mutation.getFieldMask(),at.now())):l.set(d.key,un.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((d,f)=>l.set(d,f)),r.forEach((d,f)=>{var m;return c.set(d,new d6(f,(m=l.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(t,r){const s=cl();let i=new He((l,c)=>l-c),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(l=>{for(const c of l)c.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let f=s.get(u)||un.empty();f=c.applyToLocalView(d,f),s.set(u,f);const m=(i.get(c.batchId)||pe()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=H2();f.forEach(p=>{if(!o.has(p)){const y=X2(r.get(p),s.get(p));y!==null&&m.set(p,y),o=o.add(p)}}),l.push(this.documentOverlayCache.saveOverlays(t,d,m))}return B.waitFor(l)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,r,s,i){return function(l){return re.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):U2(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,i):this.getDocumentsMatchingCollectionQuery(t,r,s,i)}getNextDocuments(t,r,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,i-o.size):B.resolve(fi());let c=-1,u=o;return l.next(d=>B.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),o.get(f)?B.resolve():this.remoteDocumentCache.getEntry(t,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(t,d,o)).next(()=>this.computeViews(t,u,d,pe())).next(f=>({batchId:c,changes:q2(f)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new re(r)).next(s=>{let i=Ga();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,s,i){const o=r.collectionGroup;let l=Ga();return this.indexManager.getCollectionParents(t,o).next(c=>B.forEach(c,u=>{const d=function(m,p){return new hc(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,s,i).next(f=>{f.forEach((m,p)=>{l=l.insert(m,p)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,r,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,o,i))).next(l=>{o.forEach((u,d)=>{const f=d.getKey();l.get(f)===null&&(l=l.insert(f,At.newInvalidDocument(f)))});let c=Ga();return l.forEach((u,d)=>{const f=o.get(u);f!==void 0&&ul(f.mutation,d,un.empty(),at.now()),wh(r,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return B.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(r)),B.resolve()}getNamedQuery(t,r){return B.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:a6(i.bundledQuery),readTime:lr(i.readTime)}}(r)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.overlays=new He(re.comparator),this.Ir=new Map}getOverlay(t,r){return B.resolve(this.overlays.get(r))}getOverlays(t,r){const s=fi();return B.forEach(r,i=>this.getOverlay(t,i).next(o=>{o!==null&&s.set(i,o)})).next(()=>s)}saveOverlays(t,r,s){return s.forEach((i,o)=>{this.ht(t,r,o)}),B.resolve()}removeOverlaysForBatchId(t,r,s){const i=this.Ir.get(s);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(s)),B.resolve()}getOverlaysForCollection(t,r,s){const i=fi(),o=r.length+1,l=new re(r.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>s&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(t,r,s,i){let o=new He((d,f)=>d-f);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>s){let f=o.get(d.largestBatchId);f===null&&(f=fi(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=fi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return B.resolve(c)}ht(t,r,s){const i=this.overlays.get(s.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(s.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new VM(r,s));let o=this.Ir.get(r);o===void 0&&(o=pe(),this.Ir.set(r,o)),this.Ir.set(r,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.Tr=new yt(lt.Er),this.dr=new yt(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const s=new lt(t,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(t,r){t.forEach(s=>this.addReference(s,r))}removeReference(t,r){this.Vr(new lt(t,r))}mr(t,r){t.forEach(s=>this.removeReference(s,r))}gr(t){const r=new re(new De([])),s=new lt(r,t),i=new lt(r,t+1),o=[];return this.dr.forEachInRange([s,i],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new re(new De([])),s=new lt(r,t),i=new lt(r,t+1);let o=pe();return this.dr.forEachInRange([s,i],l=>{o=o.add(l.key)}),o}containsKey(t){const r=new lt(t,0),s=this.Tr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class lt{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return re.comparator(t.key,r.key)||_e(t.wr,r.wr)}static Ar(t,r){return _e(t.wr,r.wr)||re.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new yt(lt.Er)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new LM(o,r,s,i);this.mutationQueue.push(l);for(const c of i)this.br=this.br.add(new lt(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return B.resolve(l)}lookupMutationBatch(t,r){return B.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,i=this.vr(s),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new lt(r,0),i=new lt(r,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([s,i],l=>{const c=this.Dr(l.wr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new yt(_e);return r.forEach(i=>{const o=new lt(i,0),l=new lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],c=>{s=s.add(c.wr)})}),B.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,i=s.length+1;let o=s;re.isDocumentKey(o)||(o=o.child(""));const l=new lt(new re(o),0);let c=new yt(_e);return this.br.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},l),B.resolve(this.Cr(c))}Cr(t){const r=[];return t.forEach(s=>{const i=this.Dr(s);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Ee(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return B.forEach(r.mutations,i=>{const o=new lt(i.key,r.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=s})}On(t){}containsKey(t,r){const s=new lt(r,0),i=this.br.firstAfterOrEqual(s);return B.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(t){this.Mr=t,this.docs=function(){return new He(re.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,i=this.docs.get(s),o=i?i.size:0,l=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return B.resolve(s?s.document.mutableCopy():At.newInvalidDocument(r))}getEntries(t,r){let s=Hr();return r.forEach(i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():At.newInvalidDocument(i))}),B.resolve(s)}getDocumentsMatchingQuery(t,r,s,i){let o=Hr();const l=r.path,c=new re(l.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||ZV(JV(f),s)<=0||(i.has(f.key)||wh(r,f))&&(o=o.insert(f.key,f.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(t,r,s,i){ae()}Or(t,r){return B.forEach(this.docs,s=>r(s))}newChangeBuffer(t){return new v6(this)}getSize(t){return B.resolve(this.size)}}class v6 extends u6{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(t,i)):this.cr.removeEntry(s)}),B.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(t){this.persistence=t,this.Nr=new oa(r=>My(r),Fy),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wy,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(t,r){return this.Nr.forEach((s,i)=>r(i)),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),B.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new qo(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,B.resolve()}updateTargetData(t,r){return this.Kn(r),B.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,r,s){let i=0;const o=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=r&&s.get(c.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,r){const s=this.Nr.get(r)||null;return B.resolve(s)}addMatchingKeys(t,r,s){return this.Br.Rr(r,s),B.resolve()}removeMatchingKeys(t,r,s){this.Br.mr(r,s);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(l=>{o.push(i.markPotentiallyOrphaned(t,l))}),B.waitFor(o)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),B.resolve()}getMatchingKeysForTargetId(t,r){const s=this.Br.yr(r);return B.resolve(s)}containsKey(t,r){return B.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(t,r){this.qr={},this.overlays={},this.Qr=new Dy(0),this.Kr=!1,this.Kr=!0,this.$r=new p6,this.referenceDelegate=t(this),this.Ur=new x6(this),this.indexManager=new l6,this.remoteDocumentCache=function(i){return new y6(i)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new o6(r),this.Gr=new f6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new m6,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.qr[t.toKey()];return s||(s=new g6(r,this.referenceDelegate),this.qr[t.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,s){J("MemoryPersistence","Starting transaction:",t);const i=new b6(this.Qr.next());return this.referenceDelegate.zr(),s(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(t,r){return B.or(Object.values(this.qr).map(s=>()=>s.containsKey(t,r)))}}class b6 extends tM{constructor(t){super(),this.currentSequenceNumber=t}}class Gy{constructor(t){this.persistence=t,this.Jr=new Wy,this.Yr=null}static Zr(t){return new Gy(t)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(t,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),B.resolve()}removeReference(t,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),B.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),B.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>s.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,s=>{const i=re.fromPath(s);return this.ei(t,i).next(o=>{o||r.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return B.or([()=>B.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,r,s,i){this.targetId=t,this.fromCache=r,this.$i=s,this.Ui=i}static Wi(t,r){let s=pe(),i=pe();for(const o of r.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ky(t,r.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return uD()?8:nM(Pt())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,s,i){const o={result:null};return this.Yi(t,r).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(t,r,i,s).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new _6;return this.Xi(t,r,l).next(c=>{if(o.result=c,this.zi)return this.es(t,r,l,c.size)})}).next(()=>o.result)}es(t,r,s,i){return s.documentReadCount<this.ji?(Oa()<=ge.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Xi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Oa()<=ge.DEBUG&&J("QueryEngine","Query:",Xi(r),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Hi*i?(Oa()<=ge.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Xi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ar(r))):B.resolve())}Yi(t,r){if(ob(r))return B.resolve(null);let s=ar(r);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Wp(r,null,"F"),s=ar(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next(o=>{const l=pe(...o);return this.Ji.getDocuments(t,l).next(c=>this.indexManager.getMinOffset(t,s).next(u=>{const d=this.ts(r,c);return this.ns(r,d,l,u.readTime)?this.Yi(t,Wp(r,null,"F")):this.rs(t,d,r,u)}))})))}Zi(t,r,s,i){return ob(r)||i.isEqual(ue.min())?B.resolve(null):this.Ji.getDocuments(t,s).next(o=>{const l=this.ts(r,o);return this.ns(r,l,s,i)?B.resolve(null):(Oa()<=ge.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xi(r)),this.rs(t,l,r,XV(i,-1)).next(c=>c))})}ts(t,r){let s=new yt(B2(t));return r.forEach((i,o)=>{wh(t,o)&&(s=s.add(o))}),s}ns(t,r,s,i){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const o=t.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(t,r,s){return Oa()<=ge.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Xi(r)),this.Ji.getDocumentsMatchingQuery(t,r,Ls.min(),s)}rs(t,r,s,i){return this.Ji.getDocumentsMatchingQuery(t,s,i).next(o=>(r.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t,r,s,i){this.persistence=t,this.ss=r,this.serializer=i,this.os=new He(_e),this._s=new oa(o=>My(o),Fy),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(s)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new h6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function N6(n,t,r,s){return new E6(n,t,r,s)}async function cj(n,t){const r=de(n);return await r.persistence.runTransaction("Handle user change","readonly",s=>{let i;return r.mutationQueue.getAllMutationBatches(s).next(o=>(i=o,r.ls(t),r.mutationQueue.getAllMutationBatches(s))).next(o=>{const l=[],c=[];let u=pe();for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(s,u).next(d=>({hs:d,removedBatchIds:l,addedBatchIds:c}))})})}function j6(n,t){const r=de(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),o=r.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,p=m.keys();let y=B.resolve();return p.forEach(w=>{y=y.next(()=>f.getEntry(u,w)).next(T=>{const j=d.docVersions.get(w);Ee(j!==null),T.version.compareTo(j)<0&&(m.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(r,s,t,o).next(()=>o.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=pe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(t))).next(()=>r.localDocuments.getDocuments(s,i))})}function uj(n){const t=de(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function S6(n,t){const r=de(n),s=t.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];t.targetChanges.forEach((f,m)=>{const p=i.get(m);if(!p)return;c.push(r.Ur.removeMatchingKeys(o,f.removedDocuments,m).next(()=>r.Ur.addMatchingKeys(o,f.addedDocuments,m)));let y=p.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(m)!==null?y=y.withResumeToken(xt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,s)),i=i.insert(m,y),function(T,j,b){return T.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,f)&&c.push(r.Ur.updateTargetData(o,y))});let u=Hr(),d=pe();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(I6(o,l,t.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!s.isEqual(ue.min())){const f=r.Ur.getLastRemoteSnapshotVersion(o).next(m=>r.Ur.setTargetsMetadata(o,o.currentSequenceNumber,s));c.push(f)}return B.waitFor(c).next(()=>l.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(r.os=i,o))}function I6(n,t,r){let s=pe(),i=pe();return r.forEach(o=>s=s.add(o)),t.getEntries(n,s).next(o=>{let l=Hr();return r.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ue.min())?(t.removeEntry(c,u.readTime),l=l.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(u),l=l.insert(c,u)):J("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:l,Is:i}})}function C6(n,t){const r=de(n);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function A6(n,t){const r=de(n);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return r.Ur.getTargetData(s,t).next(o=>o?(i=o,B.resolve(i)):r.Ur.allocateTargetId(s).next(l=>(i=new ys(t,l,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=r.os.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(t,s.targetId)),s})}async function Xp(n,t,r){const s=de(n),i=s.os.get(t),o=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",o,l=>s.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!dc(l))throw l;J("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}s.os=s.os.remove(t),s._s.delete(i.target)}function yb(n,t,r){const s=de(n);let i=ue.min(),o=pe();return s.persistence.runTransaction("Execute query","readwrite",l=>function(u,d,f){const m=de(u),p=m._s.get(f);return p!==void 0?B.resolve(m.os.get(p)):m.Ur.getTargetData(d,f)}(s,l,ar(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(l,c.targetId).next(u=>{o=u})}).next(()=>s.ss.getDocumentsMatchingQuery(l,t,r?i:ue.min(),r?o:pe())).next(c=>(k6(s,wM(t),c),{documents:c,Ts:o})))}function k6(n,t,r){let s=n.us.get(t)||ue.min();r.forEach((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),n.us.set(t,s)}class vb{constructor(){this.activeTargetIds=jM()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class P6{constructor(){this.so=new vb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,s){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new vb,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=null;function nm(){return cu===null?cu=function(){return 268435456+Math.round(2147483648*Math.random())}():cu++,"0x"+cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class L6 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(r,s,i,o,l){const c=nm(),u=this.xo(r,s.toUriEncodedString());J("RestConnection",`Sending RPC '${r}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,l),this.No(r,u,d,i).then(f=>(J("RestConnection",`Received RPC '${r}' ${c}: `,f),f),f=>{throw Uo("RestConnection",`RPC '${r}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(r,s,i,o,l,c){return this.Mo(r,s,i,o,l)}Oo(r,s,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ia}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((o,l)=>r[l]=o),i&&i.headers.forEach((o,l)=>r[l]=o)}xo(r,s){const i=D6[r];return`${this.Do}/v1/${s}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,s,i){const o=nm();return new Promise((l,c)=>{const u=new E2;u.setWithCredentials(!0),u.listenOnce(N2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ru.NO_ERROR:const f=u.getResponseJson();J(jt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),l(f);break;case Ru.TIMEOUT:J(jt,`RPC '${t}' ${o} timed out`),c(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const m=u.getStatus();if(J(jt,`RPC '${t}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const w=function(j){const b=j.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(b)>=0?b:F.UNKNOWN}(y.status);c(new Y(w,y.message))}else c(new Y(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Y(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(jt,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(i);J(jt,`RPC '${t}' ${o} sending request:`,i),u.send(r,"POST",d,s,15)})}Bo(t,r,s){const i=nm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=I2(),c=S2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,s),u.encodeInitMessageHeaders=!0;const f=o.join("");J(jt,`Creating RPC '${t}' stream ${i}: ${f}`,u);const m=l.createWebChannel(f,u);let p=!1,y=!1;const w=new O6({Io:j=>{y?J(jt,`Not sending because RPC '${t}' stream ${i} is closed:`,j):(p||(J(jt,`Opening RPC '${t}' stream ${i} transport.`),m.open(),p=!0),J(jt,`RPC '${t}' stream ${i} sending:`,j),m.send(j))},To:()=>m.close()}),T=(j,b,v)=>{j.listen(b,x=>{try{v(x)}catch(N){setTimeout(()=>{throw N},0)}})};return T(m,Wa.EventType.OPEN,()=>{y||(J(jt,`RPC '${t}' stream ${i} transport opened.`),w.yo())}),T(m,Wa.EventType.CLOSE,()=>{y||(y=!0,J(jt,`RPC '${t}' stream ${i} transport closed`),w.So())}),T(m,Wa.EventType.ERROR,j=>{y||(y=!0,Uo(jt,`RPC '${t}' stream ${i} transport errored:`,j),w.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),T(m,Wa.EventType.MESSAGE,j=>{var b;if(!y){const v=j.data[0];Ee(!!v);const x=v,N=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(N){J(jt,`RPC '${t}' stream ${i} received error:`,N);const P=N.status;let O=function(C){const R=Ze[C];if(R!==void 0)return Z2(R)}(P),S=N.message;O===void 0&&(O=F.INTERNAL,S="Unknown error status: "+P+" with message "+N.message),y=!0,w.So(new Y(O,S)),m.close()}else J(jt,`RPC '${t}' stream ${i} received:`,v),w.bo(v)}}),T(c,j2.STAT_EVENT,j=>{j.stat===Up.PROXY?J(jt,`RPC '${t}' stream ${i} detected buffering proxy`):j.stat===Up.NOPROXY&&J(jt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n){return new WM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(t,r,s=1e3,i=1.5,o=6e4){this.ui=t,this.timerId=r,this.ko=s,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-s);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(t,r,s,i,o,l,c,u){this.ui=t,this.Ho=s,this.Jo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dj(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===F.RESOURCE_EXHAUSTED?(qr(r.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Yo===r&&this.P_(s,i)},s=>{t(()=>{const i=new Y(F.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(i)})})}P_(t,r){const s=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{s(()=>this.I_(i))}),this.stream.onMessage(i=>{s(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return J("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V6 extends hj{constructor(t,r,s,i,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,i,l),this.serializer=o}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=QM(this.serializer,t),s=function(o){if(!("targetChange"in o))return ue.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ue.min():l.readTime?lr(l.readTime):ue.min()}(t);return this.listener.d_(r,s)}A_(t){const r={};r.database=Yp(this.serializer),r.addTarget=function(o,l){let c;const u=l.target;if(c=qp(u)?{documents:JM(o,u)}:{query:ZM(o,u)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=nj(o,l.resumeToken);const d=Gp(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(ue.min())>0){c.readTime=jd(o,l.snapshotVersion.toTimestamp());const d=Gp(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,t);const s=t6(this.serializer,t);s&&(r.labels=s),this.a_(r)}R_(t){const r={};r.database=Yp(this.serializer),r.removeTarget=t,this.a_(r)}}class M6 extends hj{constructor(t,r,s,i,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,i,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return Ee(!!t.streamToken),this.lastStreamToken=t.streamToken,Ee(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ee(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=XM(t.writeResults,t.commitTime),s=lr(t.commitTime);return this.listener.g_(s,r)}p_(){const t={};t.database=Yp(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(s=>YM(this.serializer,s))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6 extends class{}{constructor(t,r,s,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(t,Kp(r,s),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}Lo(t,r,s,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(t,Kp(r,s),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Y(F.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class U6{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(r),this.D_=!1):J("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(t,r,s,i,o){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{s.enqueueAndForget(async()=>{Ui(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=de(u);d.L_.add(4),await pc(d),d.q_.set("Unknown"),d.L_.delete(4),await Nh(d)}(this))})}),this.q_=new U6(s,i)}}async function Nh(n){if(Ui(n))for(const t of n.B_)await t(!0)}async function pc(n){for(const t of n.B_)await t(!1)}function fj(n,t){const r=de(n);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),Jy(r)?Xy(r):aa(r).r_()&&Yy(r,t))}function Qy(n,t){const r=de(n),s=aa(r);r.N_.delete(t),s.r_()&&mj(r,t),r.N_.size===0&&(s.r_()?s.o_():Ui(r)&&r.q_.set("Unknown"))}function Yy(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ue.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}aa(n).A_(t)}function mj(n,t){n.Q_.xe(t),aa(n).R_(t)}function Xy(n){n.Q_=new BM({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),aa(n).start(),n.q_.v_()}function Jy(n){return Ui(n)&&!aa(n).n_()&&n.N_.size>0}function Ui(n){return de(n).L_.size===0}function pj(n){n.Q_=void 0}async function B6(n){n.q_.set("Online")}async function z6(n){n.N_.forEach((t,r)=>{Yy(n,t)})}async function q6(n,t){pj(n),Jy(n)?(n.q_.M_(t),Xy(n)):n.q_.set("Unknown")}async function H6(n,t,r){if(n.q_.set("Online"),t instanceof tj&&t.state===2&&t.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.N_.delete(c),i.Q_.removeTarget(c))}(n,t)}catch(s){J("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Sd(n,s)}else if(t instanceof Lu?n.Q_.Ke(t):t instanceof ej?n.Q_.He(t):n.Q_.We(t),!r.isEqual(ue.min()))try{const s=await uj(n.localStore);r.compareTo(s)>=0&&await function(o,l){const c=o.Q_.rt(l);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.N_.get(d);f&&o.N_.set(d,f.withResumeToken(u.resumeToken,l))}}),c.targetMismatches.forEach((u,d)=>{const f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(xt.EMPTY_BYTE_STRING,f.snapshotVersion)),mj(o,u);const m=new ys(f.target,u,d,f.sequenceNumber);Yy(o,m)}),o.remoteSyncer.applyRemoteEvent(c)}(n,r)}catch(s){J("RemoteStore","Failed to raise snapshot:",s),await Sd(n,s)}}async function Sd(n,t,r){if(!dc(t))throw t;n.L_.add(1),await pc(n),n.q_.set("Offline"),r||(r=()=>uj(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await r(),n.L_.delete(1),await Nh(n)})}function gj(n,t){return t().catch(r=>Sd(n,r,t))}async function jh(n){const t=de(n),r=Ms(t);let s=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;W6(t);)try{const i=await C6(t.localStore,s);if(i===null){t.O_.length===0&&r.o_();break}s=i.batchId,G6(t,i)}catch(i){await Sd(t,i)}yj(t)&&vj(t)}function W6(n){return Ui(n)&&n.O_.length<10}function G6(n,t){n.O_.push(t);const r=Ms(n);r.r_()&&r.V_&&r.m_(t.mutations)}function yj(n){return Ui(n)&&!Ms(n).n_()&&n.O_.length>0}function vj(n){Ms(n).start()}async function K6(n){Ms(n).p_()}async function Q6(n){const t=Ms(n);for(const r of n.O_)t.m_(r.mutations)}async function Y6(n,t,r){const s=n.O_.shift(),i=zy.from(s,t,r);await gj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await jh(n)}async function X6(n,t){t&&Ms(n).V_&&await async function(s,i){if(function(l){return FM(l)&&l!==F.ABORTED}(i.code)){const o=s.O_.shift();Ms(s).s_(),await gj(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i)),await jh(s)}}(n,t),yj(n)&&vj(n)}async function wb(n,t){const r=de(n);r.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const s=Ui(r);r.L_.add(3),await pc(r),s&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await Nh(r)}async function J6(n,t){const r=de(n);t?(r.L_.delete(2),await Nh(r)):t||(r.L_.add(2),await pc(r),r.q_.set("Unknown"))}function aa(n){return n.K_||(n.K_=function(r,s,i){const o=de(r);return o.w_(),new V6(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:B6.bind(null,n),Ro:z6.bind(null,n),mo:q6.bind(null,n),d_:H6.bind(null,n)}),n.B_.push(async t=>{t?(n.K_.s_(),Jy(n)?Xy(n):n.q_.set("Unknown")):(await n.K_.stop(),pj(n))})),n.K_}function Ms(n){return n.U_||(n.U_=function(r,s,i){const o=de(r);return o.w_(),new M6(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:K6.bind(null,n),mo:X6.bind(null,n),f_:Q6.bind(null,n),g_:Y6.bind(null,n)}),n.B_.push(async t=>{t?(n.U_.s_(),await jh(n)):(await n.U_.stop(),n.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,r,s,i,o){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,i,o){const l=Date.now()+s,c=new Zy(t,r,l,i,o);return c.start(s),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e0(n,t){if(qr("AsyncQueue",`${t}: ${n}`),dc(n))return new Y(F.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t){this.comparator=t?(r,s)=>t(r,s)||re.comparator(r.key,s.key):(r,s)=>re.comparator(r.key,s.key),this.keyedMap=Ga(),this.sortedSet=new He(this.comparator)}static emptySet(t){return new Io(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,s)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Io)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const s=new Io;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=r,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.W_=new He(re.comparator)}track(t){const r=t.doc.key,s=this.W_.get(r);s?t.type!==0&&s.type===3?this.W_=this.W_.insert(r,t):t.type===3&&s.type!==1?this.W_=this.W_.insert(r,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.W_=this.W_.remove(r):t.type===1&&s.type===2?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):ae():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,s)=>{t.push(s)}),t}}class Ho{constructor(t,r,s,i,o,l,c,u,d){this.query=t,this.docs=r,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(t,r,s,i,o){const l=[];return r.forEach(c=>{l.push({type:0,doc:c})}),new Ho(t,r,Io.emptySet(r),l,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,s=t.docChanges;if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==s[i].type||!r[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class e5{constructor(){this.queries=_b(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,s){const i=de(r),o=i.queries;i.queries=_b(),o.forEach((l,c)=>{for(const u of c.j_)u.onError(s)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function _b(){return new oa(n=>$2(n),xh)}async function xj(n,t){const r=de(n);let s=3;const i=t.query;let o=r.queries.get(i);o?!o.H_()&&t.J_()&&(s=2):(o=new Z6,s=t.J_()?0:1);try{switch(s){case 0:o.z_=await r.onListen(i,!0);break;case 1:o.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(l){const c=e0(l,`Initialization of query '${Xi(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,o),o.j_.push(t),t.Z_(r.onlineState),o.z_&&t.X_(o.z_)&&t0(r)}async function wj(n,t){const r=de(n),s=t.query;let i=3;const o=r.queries.get(s);if(o){const l=o.j_.indexOf(t);l>=0&&(o.j_.splice(l,1),o.j_.length===0?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function t5(n,t){const r=de(n);let s=!1;for(const i of t){const o=i.query,l=r.queries.get(o);if(l){for(const c of l.j_)c.X_(i)&&(s=!0);l.z_=i}}s&&t0(r)}function n5(n,t,r){const s=de(n),i=s.queries.get(t);if(i)for(const o of i.j_)o.onError(r);s.queries.delete(t)}function t0(n){n.Y_.forEach(t=>{t.next()})}var Jp,Tb;(Tb=Jp||(Jp={})).ea="default",Tb.Cache="cache";class bj{constructor(t,r,s){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new Ho(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){if(!t.fromCache||!this.J_())return!0;const s=r!=="Offline";return(!this.options._a||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(t){t=Ho.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(t){this.key=t}}class Tj{constructor(t){this.key=t}}class r5{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=B2(t),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(t,r){const s=r?r.fa:new bb,i=r?r.Ra:this.Ra;let o=r?r.mutatedKeys:this.mutatedKeys,l=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,m)=>{const p=i.get(f),y=wh(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let j=!1;p&&y?p.data.isEqual(y.data)?w!==T&&(s.track({type:3,doc:y}),j=!0):this.ga(p,y)||(s.track({type:2,doc:y}),j=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(c=!0)):!p&&y?(s.track({type:0,doc:y}),j=!0):p&&!y&&(s.track({type:1,doc:p}),j=!0,(u||d)&&(c=!0)),j&&(y?(l=l.add(y),o=T?o.add(f):o.delete(f)):(l=l.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const f=this.query.limitType==="F"?l.last():l.first();l=l.delete(f.key),o=o.delete(f.key),s.track({type:1,doc:f})}return{Ra:l,fa:s,ns:c,mutatedKeys:o}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,s,i){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const l=t.fa.G_();l.sort((f,m)=>function(y,w){const T=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return T(y)-T(w)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(s),i=i!=null&&i;const c=r&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,l.length!==0||d?{snapshot:new Ho(this.query,t.Ra,o,l,t.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=pe(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return t.forEach(s=>{this.da.has(s)||r.push(new Tj(s))}),this.da.forEach(s=>{t.has(s)||r.push(new _j(s))}),r}ba(t){this.Ta=t.Ts,this.da=pe();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class s5{constructor(t,r,s){this.query=t,this.targetId=r,this.view=s}}class i5{constructor(t){this.key=t,this.va=!1}}class o5{constructor(t,r,s,i,o,l){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new oa(c=>$2(c),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new He(re.comparator),this.Na=new Map,this.La=new Wy,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function a5(n,t,r=!0){const s=Cj(n);let i;const o=s.Fa.get(t);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Ej(s,t,r,!0),i}async function l5(n,t){const r=Cj(n);await Ej(r,t,!0,!1)}async function Ej(n,t,r,s){const i=await A6(n.localStore,ar(t)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,r);let c;return s&&(c=await c5(n,t,o,l==="current",i.resumeToken)),n.isPrimaryClient&&r&&fj(n.remoteStore,i),c}async function c5(n,t,r,s,i){n.Ka=(m,p,y)=>async function(T,j,b,v){let x=j.view.ma(b);x.ns&&(x=await yb(T.localStore,j.query,!1).then(({documents:S})=>j.view.ma(S,x)));const N=v&&v.targetChanges.get(j.targetId),P=v&&v.targetMismatches.get(j.targetId)!=null,O=j.view.applyChanges(x,T.isPrimaryClient,N,P);return Nb(T,j.targetId,O.wa),O.snapshot}(n,m,p,y);const o=await yb(n.localStore,t,!0),l=new r5(t,o.Ts),c=l.ma(o.documents),u=mc.createSynthesizedTargetChangeForCurrentChange(r,s&&n.onlineState!=="Offline",i),d=l.applyChanges(c,n.isPrimaryClient,u);Nb(n,r,d.wa);const f=new s5(t,r,l);return n.Fa.set(t,f),n.Ma.has(r)?n.Ma.get(r).push(t):n.Ma.set(r,[t]),d.snapshot}async function u5(n,t,r){const s=de(n),i=s.Fa.get(t),o=s.Ma.get(i.targetId);if(o.length>1)return s.Ma.set(i.targetId,o.filter(l=>!xh(l,t))),void s.Fa.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Xp(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),r&&Qy(s.remoteStore,i.targetId),Zp(s,i.targetId)}).catch(uc)):(Zp(s,i.targetId),await Xp(s.localStore,i.targetId,!0))}async function d5(n,t){const r=de(n),s=r.Fa.get(t),i=r.Ma.get(s.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Qy(r.remoteStore,s.targetId))}async function h5(n,t,r){const s=x5(n);try{const i=await function(l,c){const u=de(l),d=at.now(),f=c.reduce((y,w)=>y.add(w.key),pe());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Hr(),T=pe();return u.cs.getEntries(y,f).next(j=>{w=j,w.forEach((b,v)=>{v.isValidDocument()||(T=T.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(j=>{m=j;const b=[];for(const v of c){const x=DM(v,m.get(v.key).overlayedDocument);x!=null&&b.push(new Ys(v.key,x,R2(x.value.mapValue),In.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,b,c)}).next(j=>{p=j;const b=j.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(y,j.batchId,b)})}).then(()=>({batchId:p.batchId,changes:q2(m)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(l,c,u){let d=l.Ba[l.currentUser.toKey()];d||(d=new He(_e)),d=d.insert(c,u),l.Ba[l.currentUser.toKey()]=d}(s,i.batchId,r),await gc(s,i.changes),await jh(s.remoteStore)}catch(i){const o=e0(i,"Failed to persist write");r.reject(o)}}async function Nj(n,t){const r=de(n);try{const s=await S6(r.localStore,t);t.targetChanges.forEach((i,o)=>{const l=r.Na.get(o);l&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?Ee(l.va):i.removedDocuments.size>0&&(Ee(l.va),l.va=!1))}),await gc(r,s,t)}catch(s){await uc(s)}}function Eb(n,t,r){const s=de(n);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const i=[];s.Fa.forEach((o,l)=>{const c=l.view.Z_(t);c.snapshot&&i.push(c.snapshot)}),function(l,c){const u=de(l);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&t0(u)}(s.eventManager,t),i.length&&s.Ca.d_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function f5(n,t,r){const s=de(n);s.sharedClientState.updateQueryState(t,"rejected",r);const i=s.Na.get(t),o=i&&i.key;if(o){let l=new He(re.comparator);l=l.insert(o,At.newNoDocument(o,ue.min()));const c=pe().add(o),u=new Th(ue.min(),new Map,new He(_e),l,c);await Nj(s,u),s.Oa=s.Oa.remove(o),s.Na.delete(t),n0(s)}else await Xp(s.localStore,t,!1).then(()=>Zp(s,t,r)).catch(uc)}async function m5(n,t){const r=de(n),s=t.batch.batchId;try{const i=await j6(r.localStore,t);Sj(r,s,null),jj(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await gc(r,i)}catch(i){await uc(i)}}async function p5(n,t,r){const s=de(n);try{const i=await function(l,c){const u=de(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ee(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(s.localStore,t);Sj(s,t,r),jj(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await gc(s,i)}catch(i){await uc(i)}}function jj(n,t){(n.ka.get(t)||[]).forEach(r=>{r.resolve()}),n.ka.delete(t)}function Sj(n,t,r){const s=de(n);let i=s.Ba[s.currentUser.toKey()];if(i){const o=i.get(t);o&&(r?o.reject(r):o.resolve(),i=i.remove(t)),s.Ba[s.currentUser.toKey()]=i}}function Zp(n,t,r=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Ma.get(t))n.Fa.delete(s),r&&n.Ca.$a(s,r);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(s=>{n.La.containsKey(s)||Ij(n,s)})}function Ij(n,t){n.xa.delete(t.path.canonicalString());const r=n.Oa.get(t);r!==null&&(Qy(n.remoteStore,r),n.Oa=n.Oa.remove(t),n.Na.delete(r),n0(n))}function Nb(n,t,r){for(const s of r)s instanceof _j?(n.La.addReference(s.key,t),g5(n,s)):s instanceof Tj?(J("SyncEngine","Document no longer in limbo: "+s.key),n.La.removeReference(s.key,t),n.La.containsKey(s.key)||Ij(n,s.key)):ae()}function g5(n,t){const r=t.key,s=r.path.canonicalString();n.Oa.get(r)||n.xa.has(s)||(J("SyncEngine","New document in limbo: "+r),n.xa.add(s),n0(n))}function n0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const r=new re(De.fromString(t)),s=n.qa.next();n.Na.set(s,new i5(r)),n.Oa=n.Oa.insert(r,s),fj(n.remoteStore,new ys(ar(Uy(r.path)),s,"TargetPurposeLimboResolution",Dy.oe))}}async function gc(n,t,r){const s=de(n),i=[],o=[],l=[];s.Fa.isEmpty()||(s.Fa.forEach((c,u)=>{l.push(s.Ka(u,t,r).then(d=>{var f;if((d||r)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Ky.Wi(u.targetId,d);o.push(m)}}))}),await Promise.all(l),s.Ca.d_(i),await async function(u,d){const f=de(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,p=>B.forEach(p.$i,y=>f.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>B.forEach(p.Ui,y=>f.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!dc(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=f.os.get(p),w=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(w);f.os=f.os.insert(p,T)}}}(s.localStore,o))}async function y5(n,t){const r=de(n);if(!r.currentUser.isEqual(t)){J("SyncEngine","User change. New user:",t.toKey());const s=await cj(r.localStore,t);r.currentUser=t,function(o,l){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new Y(F.CANCELLED,l))})}),o.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await gc(r,s.hs)}}function v5(n,t){const r=de(n),s=r.Na.get(t);if(s&&s.va)return pe().add(s.key);{let i=pe();const o=r.Ma.get(t);if(!o)return i;for(const l of o){const c=r.Fa.get(l);i=i.unionWith(c.view.Va)}return i}}function Cj(n){const t=de(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nj.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=v5.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=f5.bind(null,t),t.Ca.d_=t5.bind(null,t.eventManager),t.Ca.$a=n5.bind(null,t.eventManager),t}function x5(n){const t=de(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m5.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=p5.bind(null,t),t}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Eh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return N6(this.persistence,new T6,t.initialUser,this.serializer)}Ga(t){return new w6(Gy.Zr,this.serializer)}Wa(t){return new P6}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class eg{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Eb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=y5.bind(null,this.syncEngine),await J6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new e5}()}createDatastore(t){const r=Eh(t.databaseInfo.databaseId),s=function(o){return new L6(o)}(t.databaseInfo);return function(o,l,c,u){return new F6(o,l,c,u)}(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return function(s,i,o,l,c){return new $6(s,i,o,l,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Eb(this.syncEngine,r,0),function(){return xb.D()?new xb:new R6}())}createSyncEngine(t,r){return function(i,o,l,c,u,d,f){const m=new o5(i,o,l,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const o=de(i);J("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await pc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}eg.provider={build:()=>new eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):qr("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(t,r,s,i,o){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=A2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async l=>{J("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(s,l=>(J("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=e0(r,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function sm(n,t){n.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const r=n.configuration;await t.initialize(r);let s=r.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await cj(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function jb(n,t){n.asyncQueue.verifyOperationInProgress();const r=await b5(n);J("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,n.configuration),n.setCredentialChangeListener(s=>wb(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>wb(t.remoteStore,i)),n._onlineComponents=t}async function b5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await sm(n,n._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Uo("Error using user provided cache. Falling back to memory cache: "+r),await sm(n,new Id)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await sm(n,new Id);return n._offlineComponents}async function kj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await jb(n,n._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await jb(n,new eg))),n._onlineComponents}function _5(n){return kj(n).then(t=>t.syncEngine)}async function Pj(n){const t=await kj(n),r=t.eventManager;return r.onListen=a5.bind(null,t.syncEngine),r.onUnlisten=u5.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=l5.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=d5.bind(null,t.syncEngine),r}function T5(n,t,r={}){const s=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,u,d){const f=new Aj({next:p=>{f.Za(),l.enqueueAndForget(()=>wj(o,m));const y=p.docs.has(c);!y&&p.fromCache?d.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new bj(Uy(c.path),f,{includeMetadataChanges:!0,_a:!0});return xj(o,m)}(await Pj(n),n.asyncQueue,t,r,s)),s.promise}function E5(n,t,r={}){const s=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,u,d){const f=new Aj({next:p=>{f.Za(),l.enqueueAndForget(()=>wj(o,m)),p.fromCache&&u.source==="server"?d.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new bj(c,f,{includeMetadataChanges:!0,_a:!0});return xj(o,m)}(await Pj(n),n.asyncQueue,t,r,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(n,t,r){if(!r)throw new Y(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function N5(n,t,r,s){if(t===!0&&s===!0)throw new Y(F.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function Ib(n){if(!re.isDocumentKey(n))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cb(n){if(re.isDocumentKey(n))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ae()}function Xn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Sh(n);throw new Y(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(t){var r,s;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}N5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rj((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ih{constructor(t,r,s,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ab({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ab(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new BV;switch(s.type){case"firstParty":return new WV(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Sb.get(r);s&&(J("ComponentProvider","Removing Datastore"),Sb.delete(r),s.terminate())}(this),Promise.resolve()}}function j5(n,t,r,s={}){var i;const o=(n=Xn(n,Ih))._getSettings(),l=`${t}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),s.mockUserToken){let c,u;if(typeof s.mockUserToken=="string")c=s.mockUserToken,u=It.MOCK_USER;else{c=PN(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new It(d)}n._authCredentials=new zV(new C2(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new la(this.firestore,t,this._query)}}class zt{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zt(this.firestore,t,this._key)}}class Cs extends la{constructor(t,r,s){super(t,r,Uy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zt(this.firestore,null,new re(t))}withConverter(t){return new Cs(this.firestore,t,this._path)}}function rt(n,t,...r){if(n=qe(n),Dj("collection","path",t),n instanceof Ih){const s=De.fromString(t,...r);return Cb(s),new Cs(n,null,s)}{if(!(n instanceof zt||n instanceof Cs))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(De.fromString(t,...r));return Cb(s),new Cs(n.firestore,null,s)}}function Ie(n,t,...r){if(n=qe(n),arguments.length===1&&(t=A2.newId()),Dj("doc","path",t),n instanceof Ih){const s=De.fromString(t,...r);return Ib(s),new zt(n,null,new re(s))}{if(!(n instanceof zt||n instanceof Cs))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(De.fromString(t,...r));return Ib(s),new zt(n.firestore,n instanceof Cs?n.converter:null,new re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dj(this,"async_queue_retry"),this.Vu=()=>{const s=rm();s&&J("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=t;const r=rm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=rm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!dc(t))throw t;J("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(s=>{this.Eu=s,this.du=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(s);throw qr("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(t,r,s){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const i=Zy.createAndSchedule(this,t,r,s,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}class $i extends Ih{constructor(t,r,s,i){super(t,r,s,i),this.type="firestore",this._queue=new kb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kb(t),this._firestoreClient=void 0,await t}}}function S5(n,t){const r=typeof n=="object"?n:mh(),s=typeof n=="string"?n:t||"(default)",i=Gs(r,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=CN("firestore");o&&j5(i,...o)}return i}function r0(n){if(n._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I5(n),n._firestoreClient}function I5(n){var t,r,s;const i=n._freezeSettings(),o=function(c,u,d,f){return new iM(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Rj(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new w5(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Wo(xt.fromBase64String(t))}catch(r){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Wo(xt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _e(this._lat,t._lat)||_e(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=/^__.*__$/;class A5{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,r,this.fieldTransforms):new fc(t,this.data,r,this.fieldTransforms)}}class Oj{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return new Ys(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Lj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class o0{constructor(t,r,s,i,o,l){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new o0(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.Fu({path:s,xu:!1});return i.Ou(t),i}Nu(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.Fu({path:s,xu:!1});return i.vu(),i}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Cd(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(Lj(this.Cu)&&C5.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class k5{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||Eh(t)}Qu(t,r,s,i=!1){return new o0({Cu:t,methodName:r,qu:s,path:pt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kh(n){const t=n._freezeSettings(),r=Eh(n._databaseId);return new k5(n._databaseId,!!t.ignoreUndefinedProperties,r)}function Vj(n,t,r,s,i,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,t,r,i);l0("Data must be an object, but it was:",l,s);const c=Mj(s,l);let u,d;if(o.merge)u=new un(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const f=[];for(const m of o.mergeFields){const p=tg(t,m,r);if(!l.contains(p))throw new Y(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Uj(f,p)||f.push(p)}u=new un(f),d=l.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=l.fieldTransforms;return new A5(new Kt(c),u,d)}class Ph extends Ah{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ph}}class a0 extends Ah{_toFieldTransform(t){return new AM(t.path,new ql)}isEqual(t){return t instanceof a0}}function P5(n,t,r,s){const i=n.Qu(1,t,r);l0("Data must be an object, but it was:",i,s);const o=[],l=Kt.empty();Fi(s,(u,d)=>{const f=c0(t,u,r);d=qe(d);const m=i.Nu(f);if(d instanceof Ph)o.push(f);else{const p=yc(d,m);p!=null&&(o.push(f),l.set(f,p))}});const c=new un(o);return new Oj(l,c,i.fieldTransforms)}function R5(n,t,r,s,i,o){const l=n.Qu(1,t,r),c=[tg(t,s,r)],u=[i];if(o.length%2!=0)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)c.push(tg(t,o[p])),u.push(o[p+1]);const d=[],f=Kt.empty();for(let p=c.length-1;p>=0;--p)if(!Uj(d,c[p])){const y=c[p];let w=u[p];w=qe(w);const T=l.Nu(y);if(w instanceof Ph)d.push(y);else{const j=yc(w,T);j!=null&&(d.push(y),f.set(y,j))}}const m=new un(d);return new Oj(f,m,l.fieldTransforms)}function D5(n,t,r,s=!1){return yc(r,n.Qu(s?4:3,t))}function yc(n,t){if(Fj(n=qe(n)))return l0("Unsupported field value:",t,n),Mj(n,t);if(n instanceof Ah)return function(s,i){if(!Lj(i.Cu))throw i.Bu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(s,i){const o=[];let l=0;for(const c of s){let u=yc(c,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),l++}return{arrayValue:{values:o}}}(n,t)}return function(s,i){if((s=qe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return SM(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=at.fromDate(s);return{timestampValue:jd(i.serializer,o)}}if(s instanceof at){const o=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:jd(i.serializer,o)}}if(s instanceof s0)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wo)return{bytesValue:nj(i.serializer,s._byteString)};if(s instanceof zt){const o=i.databaseId,l=s.firestore._databaseId;if(!l.isEqual(o))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hy(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof i0)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return $y(c.serializer,u)})}}}}}}(s,i);throw i.Bu(`Unsupported field value: ${Sh(s)}`)}(n,t)}function Mj(n,t){const r={};return k2(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fi(n,(s,i)=>{const o=yc(i,t.Mu(s));o!=null&&(r[s]=o)}),{mapValue:{fields:r}}}function Fj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof s0||n instanceof Wo||n instanceof zt||n instanceof Ah||n instanceof i0)}function l0(n,t,r){if(!Fj(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const s=Sh(r);throw s==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+s)}}function tg(n,t,r){if((t=qe(t))instanceof Ch)return t._internalPath;if(typeof t=="string")return c0(n,t);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,r)}const O5=new RegExp("[~\\*/\\[\\]]");function c0(n,t,r){if(t.search(O5)>=0)throw Cd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new Ch(...t.split("."))._internalPath}catch{throw Cd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Cd(n,t,r,s,i){const o=s&&!s.isEmpty(),l=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||l)&&(u+=" (found",o&&(u+=` in field ${s}`),l&&(u+=` in document ${i}`),u+=")"),new Y(F.INVALID_ARGUMENT,c+n+u)}function Uj(n,t){return n.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(t,r,s,i,o){this._firestore=t,this._userDataWriter=r,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new L5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(u0("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class L5 extends $j{data(){return super.data()}}function u0(n,t){return typeof t=="string"?c0(n,t):t instanceof Ch?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d0{}class M5 extends d0{}function F5(n,t,...r){let s=[];t instanceof d0&&s.push(t),s=s.concat(r),function(o){const l=o.filter(u=>u instanceof h0).length,c=o.filter(u=>u instanceof Rh).length;if(l>1||l>0&&c>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)n=i._apply(n);return n}class Rh extends M5{constructor(t,r,s){super(),this._field=t,this._op=r,this._value=s,this.type="where"}static _create(t,r,s){return new Rh(t,r,s)}_apply(t){const r=this._parse(t);return Bj(t._query,r),new la(t.firestore,t.converter,Hp(t._query,r))}_parse(t){const r=kh(t.firestore);return function(o,l,c,u,d,f,m){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Rb(m,f);const y=[];for(const w of m)y.push(Pb(u,o,w));p={arrayValue:{values:y}}}else p=Pb(u,o,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Rb(m,f),p=D5(c,l,m,f==="in"||f==="not-in");return nt.create(d,f,p)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function U5(n,t,r){const s=t,i=u0("where",n);return Rh._create(i,s,r)}class h0 extends d0{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new h0(t,r)}_parse(t){const r=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return r.length===1?r[0]:Yn.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const u of c)Bj(l,u),l=Hp(l,u)}(t._query,r),new la(t.firestore,t.converter,Hp(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Pb(n,t,r){if(typeof(r=qe(r))=="string"){if(r==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U2(t)&&r.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=t.path.child(De.fromString(r));if(!re.isDocumentKey(s))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return eb(n,new re(s))}if(r instanceof zt)return eb(n,r._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(r)}.`)}function Rb(n,t){if(!Array.isArray(n)||n.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Bj(n,t){const r=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class $5{convertValue(t,r="none"){switch(ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Ai(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw ae()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const s={};return Fi(t,(i,o)=>{s[i]=this.convertValue(o,r)}),s}convertVectorValue(t){var r,s,i;const o=(i=(s=(r=t.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(l=>Qe(l.doubleValue));return new i0(o)}convertGeoPoint(t){return new s0(Qe(t.latitude),Qe(t.longitude))}convertArray(t,r){return(t.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(t,r){switch(r){case"previous":const s=Ly(t);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp($l(t));default:return null}}convertTimestamp(t){const r=Vs(t);return new at(r.seconds,r.nanos)}convertDocumentKey(t,r){const s=De.fromString(t);Ee(lj(s));const i=new Bl(s.get(1),s.get(3)),o=new re(s.popFirst(5));return i.isEqual(r)||qr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n,t,r){let s;return s=n?r&&(r.merge||r.mergeFields)?n.toFirestore(t,r):n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qj extends $j{constructor(t,r,s,i,o,l){super(t,r,s,i,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const s=this._document.data.field(u0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Vu extends qj{data(t={}){return super.data(t)}}class B5{constructor(t,r,s,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new Qa(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(s=>{t.call(r,new Vu(this._firestore,this._userDataWriter,s.key,s,new Qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const u=new Vu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new Vu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),f=l.indexOf(c.doc.key)),{type:z5(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function z5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n){n=Xn(n,zt);const t=Xn(n.firestore,$i);return T5(r0(t),n._key).then(r=>q5(t,n,r))}class Hj extends $5{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wo(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zt(this.firestore,null,r)}}function tn(n){n=Xn(n,la);const t=Xn(n.firestore,$i),r=r0(t),s=new Hj(t);return V5(n._query),E5(r,n._query).then(i=>new B5(t,s,n,i))}function uu(n,t,r){n=Xn(n,zt);const s=Xn(n.firestore,$i),i=zj(n.converter,t,r);return Dh(s,[Vj(kh(s),"setDoc",n._key,i,n.converter!==null,r).toMutation(n._key,In.none())])}function mr(n,t,r,...s){n=Xn(n,zt);const i=Xn(n.firestore,$i),o=kh(i);let l;return l=typeof(t=qe(t))=="string"||t instanceof Ch?R5(o,"updateDoc",n._key,t,r,s):P5(o,"updateDoc",n._key,t),Dh(i,[l.toMutation(n._key,In.exists(!0))])}function ca(n){return Dh(Xn(n.firestore,$i),[new By(n._key,In.none())])}function ua(n,t){const r=Xn(n.firestore,$i),s=Ie(n),i=zj(n.converter,t);return Dh(r,[Vj(kh(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,In.exists(!1))]).then(()=>s)}function Dh(n,t){return function(s,i){const o=new Rr;return s.asyncQueue.enqueueAndForget(async()=>h5(await _5(s),i,o)),o.promise}(r0(n),t)}function q5(n,t,r){const s=r.docs.get(t._key),i=new Hj(n);return new qj(n,i,t._key,s,new Qa(r.hasPendingWrites,r.fromCache),t.converter)}function rs(){return new a0("serverTimestamp")}(function(t,r=!0){(function(i){ia=i})(Mi),Kn(new kn("firestore",(s,{instanceIdentifier:i,options:o})=>{const l=s.getProvider("app").getImmediate(),c=new $i(new qV(s.getProvider("auth-internal")),new KV(s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(d.options.projectId,f)}(l,i),l);return o=Object.assign({useFetchStreams:r},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Zt(Qw,"4.7.3",t),Zt(Qw,"4.7.3","esm2017")})();var H5="firebase",W5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt(H5,W5,"app");const Wj="@firebase/installations",f0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1e4,Kj=`w:${f0}`,Qj="FIS_v2",G5="https://firebaseinstallations.googleapis.com/v1",K5=60*60*1e3,Q5="installations",Y5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pi=new Vi(Q5,Y5,X5);function Yj(n){return n instanceof Rn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj({projectId:n}){return`${G5}/projects/${n}/installations`}function Jj(n){return{token:n.token,requestStatus:2,expiresIn:Z5(n.expiresIn),creationTime:Date.now()}}async function Zj(n,t){const s=(await t.json()).error;return Pi.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function eS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function J5(n,{refreshToken:t}){const r=eS(n);return r.append("Authorization",e3(t)),r}async function tS(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Z5(n){return Number(n.replace("s","000"))}function e3(n){return`${Qj} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3({appConfig:n,heartbeatServiceProvider:t},{fid:r}){const s=Xj(n),i=eS(n),o=t.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const l={fid:r,authVersion:Qj,appId:n.appId,sdkVersion:Kj},c={method:"POST",headers:i,body:JSON.stringify(l)},u=await tS(()=>fetch(s,c));if(u.ok){const d=await u.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:Jj(d.authToken)}}else throw await Zj("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){return new Promise(t=>{setTimeout(t,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=/^[cdef][\w-]{21}$/,ng="";function s3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=i3(n);return r3.test(r)?r:ng}catch{return ng}}function i3(n){return n3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;function sS(n,t){const r=Oh(n);iS(r,t),o3(r,t)}function iS(n,t){const r=rS.get(n);if(r)for(const s of r)s(t)}function o3(n,t){const r=a3();r&&r.postMessage({key:n,fid:t}),l3()}let pi=null;function a3(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=n=>{iS(n.data.key,n.data.fid)}),pi}function l3(){rS.size===0&&pi&&(pi.close(),pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="firebase-installations-database",u3=1,Ri="firebase-installations-store";let im=null;function m0(){return im||(im=MN(c3,u3,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Ri)}}})),im}async function Ad(n,t){const r=Oh(n),i=(await m0()).transaction(Ri,"readwrite"),o=i.objectStore(Ri),l=await o.get(r);return await o.put(t,r),await i.done,(!l||l.fid!==t.fid)&&sS(n,t.fid),t}async function oS(n){const t=Oh(n),s=(await m0()).transaction(Ri,"readwrite");await s.objectStore(Ri).delete(t),await s.done}async function Lh(n,t){const r=Oh(n),i=(await m0()).transaction(Ri,"readwrite"),o=i.objectStore(Ri),l=await o.get(r),c=t(l);return c===void 0?await o.delete(r):await o.put(c,r),await i.done,c&&(!l||l.fid!==c.fid)&&sS(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p0(n){let t;const r=await Lh(n.appConfig,s=>{const i=d3(s),o=h3(n,i);return t=o.registrationPromise,o.installationEntry});return r.fid===ng?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function d3(n){const t=n||{fid:s3(),registrationStatus:0};return aS(t)}function h3(n,t){if(t.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Pi.create("app-offline"));return{installationEntry:t,registrationPromise:i}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=f3(n,r);return{installationEntry:r,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:m3(n)}:{installationEntry:t}}async function f3(n,t){try{const r=await t3(n,t);return Ad(n.appConfig,r)}catch(r){throw Yj(r)&&r.customData.serverCode===409?await oS(n.appConfig):await Ad(n.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function m3(n){let t=await Db(n.appConfig);for(;t.registrationStatus===1;)await nS(100),t=await Db(n.appConfig);if(t.registrationStatus===0){const{installationEntry:r,registrationPromise:s}=await p0(n);return s||r}return t}function Db(n){return Lh(n,t=>{if(!t)throw Pi.create("installation-not-found");return aS(t)})}function aS(n){return p3(n)?{fid:n.fid,registrationStatus:0}:n}function p3(n){return n.registrationStatus===1&&n.registrationTime+Gj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3({appConfig:n,heartbeatServiceProvider:t},r){const s=y3(n,r),i=J5(n,r),o=t.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const l={installation:{sdkVersion:Kj,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},u=await tS(()=>fetch(s,c));if(u.ok){const d=await u.json();return Jj(d)}else throw await Zj("Generate Auth Token",u)}function y3(n,{fid:t}){return`${Xj(n)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(n,t=!1){let r;const s=await Lh(n.appConfig,o=>{if(!lS(o))throw Pi.create("not-registered");const l=o.authToken;if(!t&&w3(l))return o;if(l.requestStatus===1)return r=v3(n,t),o;{if(!navigator.onLine)throw Pi.create("app-offline");const c=_3(o);return r=x3(n,c),c}});return r?await r:s.authToken}async function v3(n,t){let r=await Ob(n.appConfig);for(;r.authToken.requestStatus===1;)await nS(100),r=await Ob(n.appConfig);const s=r.authToken;return s.requestStatus===0?g0(n,t):s}function Ob(n){return Lh(n,t=>{if(!lS(t))throw Pi.create("not-registered");const r=t.authToken;return T3(r)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function x3(n,t){try{const r=await g3(n,t),s=Object.assign(Object.assign({},t),{authToken:r});return await Ad(n.appConfig,s),r}catch(r){if(Yj(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await oS(n.appConfig);else{const s=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ad(n.appConfig,s)}throw r}}function lS(n){return n!==void 0&&n.registrationStatus===2}function w3(n){return n.requestStatus===2&&!b3(n)}function b3(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+K5}function _3(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function T3(n){return n.requestStatus===1&&n.requestTime+Gj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(n){const t=n,{installationEntry:r,registrationPromise:s}=await p0(t);return s?s.catch(console.error):g0(t).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(n,t=!1){const r=n;return await j3(r),(await g0(r,t)).token}async function j3(n){const{registrationPromise:t}=await p0(n);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(n){if(!n||!n.options)throw om("App Configuration");if(!n.name)throw om("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!n.options[r])throw om(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function om(n){return Pi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="installations",I3="installations-internal",C3=n=>{const t=n.getProvider("app").getImmediate(),r=S3(t),s=Gs(t,"heartbeat");return{app:t,appConfig:r,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},A3=n=>{const t=n.getProvider("app").getImmediate(),r=Gs(t,cS).getImmediate();return{getId:()=>E3(r),getToken:i=>N3(r,i)}};function k3(){Kn(new kn(cS,C3,"PUBLIC")),Kn(new kn(I3,A3,"PRIVATE"))}k3();Zt(Wj,f0);Zt(Wj,f0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="analytics",P3="firebase_id",R3="origin",D3=60*1e3,O3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",y0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new fh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},hn=new Vi("analytics","Analytics",L3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n){if(!n.startsWith(y0)){const t=hn.create("invalid-gtag-resource",{gtagURL:n});return en.warn(t.message),""}return n}function uS(n){return Promise.all(n.map(t=>t.catch(r=>r)))}function M3(n,t){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,t)),r}function F3(n,t){const r=M3("firebase-js-sdk-policy",{createScriptURL:V3}),s=document.createElement("script"),i=`${y0}?l=${n}&id=${t}`;s.src=r?r==null?void 0:r.createScriptURL(i):i,s.async=!0,document.head.appendChild(s)}function U3(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}async function $3(n,t,r,s,i,o){const l=s[i];try{if(l)await t[l];else{const u=(await uS(r)).find(d=>d.measurementId===i);u&&await t[u.appId]}}catch(c){en.error(c)}n("config",i,o)}async function B3(n,t,r,s,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await uS(r);for(const u of l){const d=c.find(m=>m.measurementId===u),f=d&&t[d.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),n("event",s,i||{})}catch(o){en.error(o)}}function z3(n,t,r,s){async function i(o,...l){try{if(o==="event"){const[c,u]=l;await B3(n,t,r,c,u)}else if(o==="config"){const[c,u]=l;await $3(n,t,r,s,c,u)}else if(o==="consent"){const[c,u]=l;n("consent",c,u)}else if(o==="get"){const[c,u,d]=l;n("get",c,u,d)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){en.error(c)}}return i}function q3(n,t,r,s,i){let o=function(...l){window[s].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=z3(o,n,t,r),{gtagCore:o,wrappedGtag:window[i]}}function H3(n){const t=window.document.getElementsByTagName("script");for(const r of Object.values(t))if(r.src&&r.src.includes(y0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=30,G3=1e3;class K3{constructor(t={},r=G3){this.throttleMetadata=t,this.intervalMillis=r}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,r){this.throttleMetadata[t]=r}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const dS=new K3;function Q3(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Y3(n){var t;const{appId:r,apiKey:s}=n,i={method:"GET",headers:Q3(s)},o=O3.replace("{app-id}",r),l=await fetch(o,i);if(l.status!==200&&l.status!==304){let c="";try{const u=await l.json();!((t=u.error)===null||t===void 0)&&t.message&&(c=u.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function X3(n,t=dS,r){const{appId:s,apiKey:i,measurementId:o}=n.options;if(!s)throw hn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:s};throw hn.create("no-api-key")}const l=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new eF;return setTimeout(async()=>{c.abort()},r!==void 0?r:D3),hS({appId:s,apiKey:i,measurementId:o},l,c,t)}async function hS(n,{throttleEndTimeMillis:t,backoffCount:r},s,i=dS){var o;const{appId:l,measurementId:c}=n;try{await J3(s,t)}catch(u){if(c)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:l,measurementId:c};throw u}try{const u=await Y3(n);return i.deleteThrottleMetadata(l),u}catch(u){const d=u;if(!Z3(d)){if(i.deleteThrottleMetadata(l),c)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:l,measurementId:c};throw u}const f=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?xw(r,i.intervalMillis,W3):xw(r,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return i.setThrottleMetadata(l,m),en.debug(`Calling attemptFetch again in ${f} millis`),hS(n,m,s,i)}}function J3(n,t){return new Promise((r,s)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(r,i);n.addEventListener(()=>{clearTimeout(o),s(hn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Z3(n){if(!(n instanceof Rn)||!n.customData)return!1;const t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}class eF{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function tF(n,t,r,s,i){if(i&&i.global){n("event",r,s);return}else{const o=await t,l=Object.assign(Object.assign({},s),{send_to:o});n("event",r,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(){if(DN())try{await ON()}catch(n){return en.warn(hn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return en.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rF(n,t,r,s,i,o,l){var c;const u=X3(n);u.then(y=>{r[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>en.error(y)),t.push(u);const d=nF().then(y=>{if(y)return s.getId()}),[f,m]=await Promise.all([u,d]);H3(o)||F3(o,f.measurementId),i("js",new Date);const p=(c=l==null?void 0:l.config)!==null&&c!==void 0?c:{};return p[R3]="firebase",p.update=!0,m!=null&&(p[P3]=m),i("config",f.measurementId,p),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(t){this.app=t}_delete(){return delete dl[this.app.options.appId],Promise.resolve()}}let dl={},Lb=[];const Vb={};let am="dataLayer",iF="gtag",Mb,fS,Fb=!1;function oF(){const n=[];if(RN()&&n.push("This is a browser extension environment."),dD()||n.push("Cookies are not available."),n.length>0){const t=n.map((s,i)=>`(${i+1}) ${s}`).join(" "),r=hn.create("invalid-analytics-context",{errorInfo:t});en.warn(r.message)}}function aF(n,t,r){oF();const s=n.options.appId;if(!s)throw hn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw hn.create("no-api-key");if(dl[s]!=null)throw hn.create("already-exists",{id:s});if(!Fb){U3(am);const{wrappedGtag:o,gtagCore:l}=q3(dl,Lb,Vb,am,iF);fS=o,Mb=l,Fb=!0}return dl[s]=rF(n,Lb,Vb,t,Mb,am,r),new sF(n)}function lF(n=mh()){n=qe(n);const t=Gs(n,kd);return t.isInitialized()?t.getImmediate():cF(n)}function cF(n,t={}){const r=Gs(n,kd);if(r.isInitialized()){const i=r.getImmediate();if(Vl(t,r.getOptions()))return i;throw hn.create("already-initialized")}return r.initialize({options:t})}function uF(n,t,r,s){n=qe(n),tF(fS,dl[n.app.options.appId],t,r,s).catch(i=>en.error(i))}const Ub="@firebase/analytics",$b="0.10.8";function dF(){Kn(new kn(kd,(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();return aF(s,i,r)},"PUBLIC")),Kn(new kn("analytics-internal",n,"PRIVATE")),Zt(Ub,$b),Zt(Ub,$b,"esm2017");function n(t){try{const r=t.getProvider(kd).getImmediate();return{logEvent:(s,i,o)=>uF(r,s,i,o)}}catch(r){throw hn.create("interop-component-reg-failed",{reason:r})}}}dF();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebasestorage.googleapis.com",hF="storageBucket",fF=2*60*1e3,mF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Rn{constructor(t,r,s=0){super(lm(t),`Firebase Storage: ${r} (${lm(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return lm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hr||(hr={}));function lm(n){return"storage/"+n}function pF(){const n="An unknown error occurred, please check the error payload for server response.";return new pr(hr.UNKNOWN,n)}function gF(){return new pr(hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yF(){return new pr(hr.CANCELED,"User canceled the upload/download.")}function vF(n){return new pr(hr.INVALID_URL,"Invalid URL '"+n+"'.")}function xF(n){return new pr(hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Bb(n){return new pr(hr.INVALID_ARGUMENT,n)}function pS(){return new pr(hr.APP_DELETED,"The Firebase app was deleted.")}function wF(n){return new pr(hr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let s;try{s=Bn.makeFromUrl(t,r)}catch{return new Bn(t,"")}if(s.path==="")return s;throw xF(t)}static makeFromUrl(t,r){let s=null;const i="([A-Za-z0-9.\\-_]+)";function o(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),u={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${f}/b/${i}/o${p}`,"i"),w={bucket:1,path:3},T=r===mS?"(?:storage.googleapis.com|storage.cloud.google.com)":r,j="([^?#]*)",b=new RegExp(`^https?://${T}/${i}/${j}`,"i"),x=[{regex:c,indices:u,postModify:o},{regex:y,indices:w,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<x.length;N++){const P=x[N],O=P.regex.exec(t);if(O){const S=O[P.indices.bucket];let _=O[P.indices.path];_||(_=""),s=new Bn(S,_),P.postModify(s);break}}if(s==null)throw vF(t);return s}}class bF{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(n,t,r){let s=1,i=null,o=null,l=!1,c=0;function u(){return c===2}let d=!1;function f(...j){d||(d=!0,t.apply(null,j))}function m(j){i=setTimeout(()=>{i=null,n(y,u())},j)}function p(){o&&clearTimeout(o)}function y(j,...b){if(d){p();return}if(j){p(),f.call(null,j,...b);return}if(u()||l){p(),f.call(null,j,...b);return}s<64&&(s*=2);let x;c===1?(c=2,x=0):x=(s+Math.random())*1e3,m(x)}let w=!1;function T(j){w||(w=!0,p(),!d&&(i!==null?(j||(c=2),clearTimeout(i),m(0)):j||(c=1)))}return m(0),o=setTimeout(()=>{l=!0,T(!0)},r),T}function TF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(n){return n!==void 0}function zb(n,t,r,s){if(s<t)throw Bb(`Invalid value for '${n}'. Expected ${t} or greater.`);if(s>r)throw Bb(`Invalid value for '${n}'. Expected ${r} or less.`)}function NF(n){const t=encodeURIComponent;let r="?";for(const s in n)if(n.hasOwnProperty(s)){const i=t(s)+"="+t(n[s]);r=r+i+"&"}return r=r.slice(0,-1),r}var Pd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Pd||(Pd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(n,t){const r=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(t,r,s,i,o,l,c,u,d,f,m,p=!0){this.url_=t,this.method_=r,this.headers_=s,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new du(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Pd.NO_ERROR,u=o.getStatus();if(!c||jF(u,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Pd.ABORT;s(!1,new du(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new du(d,o))})},r=(s,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());EF(u)?o(u):o()}catch(u){l(u)}else if(c!==null){const u=pF();u.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,u)):l(u)}else if(i.canceled){const u=this.appDelete_?pS():yF();l(u)}else{const u=gF();l(u)}};this.canceled_?r(!1,new du(!1,null,!0)):this.backoffId_=_F(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&TF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class du{constructor(t,r,s){this.wasSuccessCode=t,this.connection=r,this.canceled=!!s}}function IF(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function CF(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function AF(n,t){t&&(n["X-Firebase-GMPID"]=t)}function kF(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function PF(n,t,r,s,i,o,l=!0){const c=NF(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return AF(d,t),IF(d,r),CF(d,o),kF(d,s),new SF(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function DF(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,r){this._service=t,r instanceof Bn?this._location=r:this._location=Bn.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Rd(t,r)}get root(){const t=new Bn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DF(this._location.path)}get storage(){return this._service}get parent(){const t=RF(this._location.path);if(t===null)return null;const r=new Bn(this._location.bucket,t);return new Rd(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw wF(t)}}function qb(n,t){const r=t==null?void 0:t[hF];return r==null?null:Bn.makeFromBucketSpec(r,n)}function OF(n,t,r,s={}){n.host=`${t}:${r}`,n._protocol="http";const{mockUserToken:i}=s;i&&(n._overrideAuthToken=typeof i=="string"?i:PN(i,n.app.options.projectId))}class LF{constructor(t,r,s,i,o){this.app=t,this._authProvider=r,this._appCheckProvider=s,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=mS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fF,this._maxUploadRetryTime=mF,this._requests=new Set,i!=null?this._bucket=Bn.makeFromBucketSpec(i,this._host):this._bucket=qb(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,t):this._bucket=qb(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){zb("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){zb("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Rd(this,t)}_makeRequest(t,r,s,i,o=!0){if(this._deleted)return new bF(pS());{const l=PF(t,this._appId,s,i,r,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,r){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,s,i).getPromise()}}const Hb="@firebase/storage",Wb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="storage";function VF(n=mh(),t){n=qe(n);const s=Gs(n,gS).getImmediate({identifier:t}),i=CN("storage");return i&&MF(s,...i),s}function MF(n,t,r,s={}){OF(n,t,r,s)}function FF(n,{instanceIdentifier:t}){const r=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new LF(r,s,i,t,Mi)}function UF(){Kn(new kn(gS,FF,"PUBLIC").setMultipleInstances(!0)),Zt(Hb,Wb,""),Zt(Hb,Wb,"esm2017")}UF();const $F={apiKey:"AIzaSyAYp9XIA8lLXEdo8AzOJMq018pqLGiUc7o",authDomain:"ecomed-academy.firebaseapp.com",projectId:"ecomed-academy",storageBucket:"ecomed-academy.firebasestorage.app",messagingSenderId:"1057330857144",appId:"1:1057330857144:web:f6a0a7b86922ca4441604d",measurementId:"G-HSNYK50PP5"},Vh=FN($F);lF(Vh);const be=UV(Vh),le=S5(Vh);VF(Vh);const yS=I.createContext(),dt=()=>{const n=I.useContext(yS);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},BF=({children:n})=>{const[t,r]=I.useState(null),[s,i]=I.useState(!0);I.useState(!1),I.useEffect(()=>{const y=lc(be,async w=>{if(w){const j=(await mi(Ie(le,"users",w.uid))).data()||{};console.log("🔍 Firestore user data:",j),console.log("🔍 User role from Firestore:",j.role);const b={uid:w.uid,email:w.email,name:j.name||w.displayName||(w.email?w.email.split("@")[0]:"user"),username:j.username||w.displayName||(w.email?w.email.split("@")[0]:"user"),displayName:w.displayName||(w.email?w.email.split("@")[0]:"user"),photoURL:w.photoURL,role:j.role||"user",...j};console.log("🔍 Final user data:",b),console.log("🔍 User role:",b.role),r(b)}else r(null);i(!1)});return()=>y()},[]);const p={user:t,loading:s,login:async(y,w)=>{try{i(!0);const T=await EL(be,y,w),j=await mi(Ie(le,"users",T.user.uid));if(!j.exists()){const P={uid:T.user.uid,email:T.user.email,name:T.user.displayName||T.user.email.split("@")[0],username:T.user.displayName||T.user.email.split("@")[0],displayName:T.user.displayName||T.user.email.split("@")[0],role:"user",createdAt:rs(),lastLogin:rs()};await uu(Ie(le,"users",T.user.uid),P);const O={uid:T.user.uid,email:T.user.email,displayName:T.user.displayName||T.user.email.split("@")[0],role:"user",...P};return r(O),U({title:"مرحباً بك في أكاديمية الطب الأخضر! 🎉",description:"أهلاً وسهلاً بك! تم إنشاء حسابك بنجاح. يمكنك الآن الاستفادة من جميع خدماتنا."}),{success:!0}}const b=j.data()||{},x=!b.lastLogin;await uu(Ie(le,"users",T.user.uid),{lastLogin:rs()},{merge:!0}),x&&U({title:"مرحباً بك في أكاديمية الطب الأخضر! 🌟",description:`أهلاً وسهلاً بك ${b.name||b.displayName||"عزيزي المستخدم"}! نتمنى لك تجربة ممتعة في أكاديمية الطب الأخضر.`}),console.log("🔍 Login - Firestore user data:",b),console.log("🔍 Login - User role from Firestore:",b.role);const N={uid:T.user.uid,email:T.user.email,name:b.name||T.user.displayName||T.user.email.split("@")[0],username:b.username||T.user.displayName||T.user.email.split("@")[0],displayName:T.user.displayName||T.user.email.split("@")[0],role:b.role||"user",...b};return console.log("🔍 Login - Final user data:",N),console.log("🔍 Login - User role:",N.role),r(N),(N.role==="admin"||N.role==="owner")&&(U({title:`مرحباً بك ${N.name}! 👋`,description:`تم تسجيل دخولك بنجاح كـ ${N.role==="owner"?"مالك الموقع":"مدير"}. سيتم توجيهك إلى لوحة الإدارة تلقائياً.`}),setTimeout(()=>{window.location.href="/admin"},1500)),{success:!0}}catch(T){console.error("Login error:",T);let j="حدث خطأ أثناء تسجيل الدخول";return T.code==="auth/user-not-found"||T.code==="auth/wrong-password"||T.code==="auth/invalid-credential"?j="البريد الإلكتروني أو كلمة المرور غير صحيحة":T.code==="auth/too-many-requests"?j="تم تجاوز عدد المحاولات المسموح بها. يرجى المحاولة لاحقاً":T.code==="auth/user-disabled"?j="هذا الحساب معطل. يرجى التواصل مع الدعم الفني":T.code==="auth/admin-restricted-operation"&&(j="هذه العملية محجوبة من قبل إدارة Firebase. يرجى التحقق من الإعدادات"),{success:!1,error:j}}finally{i(!1)}},register:async(y,w,T,j)=>{let b=null;try{i(!0),console.log("🔄 بدء عملية إنشاء الحساب..."),console.log("📝 إنشاء المستخدم في Firebase Auth..."),b=await TL(be,w,j),console.log("✅ تم إنشاء المستخدم في Firebase Auth:",b.user.uid),console.log("👤 تحديث ملف المستخدم..."),await Mw(b.user,{displayName:y}),console.log("✅ تم تحديث ملف المستخدم"),console.log("📄 إنشاء مستند المستخدم في Firestore...");const v={uid:b.user.uid,email:b.user.email,name:y,username:y,displayName:y,phone:T,role:"user",createdAt:rs(),updatedAt:rs(),lastLogin:rs()};return await uu(Ie(le,"users",b.user.uid),v),console.log("✅ تم إنشاء مستند المستخدم في Firestore"),r(v),console.log("🎉 تم إنشاء الحساب بنجاح!"),{success:!0}}catch(v){if(console.error("❌ خطأ في إنشاء الحساب:",v),b&&b.user)try{console.log("🧹 حذف المستخدم من Auth بسبب فشل في Firestore..."),await CL(b.user),console.log("✅ تم حذف المستخدم من Auth")}catch(N){console.error("❌ خطأ في حذف المستخدم من Auth:",N)}let x="حدث خطأ أثناء إنشاء الحساب";return v.code==="auth/email-already-in-use"?x="هذا البريد الإلكتروني مستخدم بالفعل":v.code==="auth/weak-password"?x="كلمة المرور ضعيفة جداً. يجب أن تحتوي على 6 أحرف على الأقل":v.code==="auth/invalid-email"?x="البريد الإلكتروني غير صالح":v.code==="auth/admin-restricted-operation"?x="هذه العملية محجوبة من قبل إدارة Firebase. يرجى التحقق من الإعدادات":v.code==="auth/operation-not-allowed"?x="تسجيل الحسابات الجديدة غير مفعل. يرجى التواصل مع الإدارة":v.code==="auth/network-request-failed"?x="مشكلة في الاتصال بالإنترنت. تحقق من اتصالك وحاول مرة أخرى":v.code==="auth/too-many-requests"?x="تم تجاوز الحد المسموح من المحاولات. انتظر قليلاً وحاول مرة أخرى":x=`حدث خطأ غير متوقع: ${v.message}`,{success:!1,error:x}}finally{i(!1)}},logout:async()=>{try{i(!0),await IL(be),r(null)}catch(y){throw console.error("Logout error:",y),y}finally{i(!1)}},isAdmin:async()=>{if(!be.currentUser)return!1;try{const y=await mi(Ie(le,"users",be.currentUser.uid));if(!y.exists())return!1;const w=y.data().role;return console.log("🔍 isAdmin check - User role from Firestore:",w),t&&t.role!==w&&(console.log("🔄 Updating local user role from",t.role,"to",w),r(T=>({...T,role:w}))),w==="admin"||w==="owner"}catch(y){return console.error("Error checking admin status:",y),!1}},isOwner:async()=>{if(!be.currentUser)return!1;try{const y=await mi(Ie(le,"users",be.currentUser.uid));if(!y.exists())return!1;const w=y.data().role;return t&&t.role!==w&&r(T=>({...T,role:w})),w==="owner"}catch(y){return console.error("Error checking owner status:",y),!1}},isAuthenticated:()=>!!t,updateUser:async y=>{if(console.log("=== UPDATE USER FUNCTION START ==="),console.log("Current user:",t),console.log("Auth current user:",be.currentUser),console.log("Updated data:",y),!t)return console.error("❌ No user in context"),!1;if(!be.currentUser)return console.error("❌ No auth.currentUser"),!1;try{console.log("✅ Starting Firestore update...");const w=Ie(le,"users",be.currentUser.uid),T={...y,updatedAt:rs()};console.log("📝 Saving to Firestore:",T),await uu(w,T,{merge:!0}),console.log("✅ Firestore update successful");const j={...t,...y};if(r(j),console.log("✅ Local state updated"),y.displayName||y.photoURL){const b={};y.displayName&&(b.displayName=y.displayName),y.photoURL&&(y.photoURL.length>1e3?(console.log("⚠️ Photo URL too long for Firebase Auth, skipping Auth update"),console.log("📝 Photo URL length:",y.photoURL.length)):b.photoURL=y.photoURL),Object.keys(b).length>0&&(console.log("🔄 Updating Firebase Auth profile:",b),await Mw(be.currentUser,b),console.log("✅ Firebase Auth profile updated"))}return console.log("🎉 User update completed successfully"),!0}catch(w){throw console.error("❌ Failed to update user:",w),console.error("🔍 Error details:",{code:w.code,message:w.message,stack:w.stack}),w}}};return a.jsx(yS.Provider,{value:p,children:n})},rg=()=>{try{const n=JSON.parse(localStorage.getItem("orders")||"[]");let t=!1;const r=n.map(s=>{if(s.status==="pending"){const i=new Date(s.createdAt);if((new Date-i)/(1e3*60*60*24)>=5)return t=!0,{...s,status:"delivered",deliveredAt:new Date().toISOString()}}return s});return t&&(localStorage.setItem("orders",JSON.stringify(r)),console.log("✅ تم تحديث حالات الطلبات تلقائياً")),r}catch(n){return console.error("❌ خطأ في تحديث حالات الطلبات:",n),[]}},Gb=()=>rg(),Dd=()=>{try{const n=JSON.parse(localStorage.getItem("bookings")||"[]");let t=!1;const r=n.map(s=>{if(s.status==="pending"){const i=new Date(s.createdAt);if((new Date-i)/(1e3*60*60*24)>=5)return t=!0,{...s,status:"completed",completedAt:new Date().toISOString()}}return s});return t&&(localStorage.setItem("bookings",JSON.stringify(r)),console.log("✅ تم تحديث حالات الحجوزات تلقائياً")),r}catch(n){return console.error("❌ خطأ في تحديث حالات الحجوزات:",n),[]}},cm=n=>{const t=new Date(n),s=(new Date-t)/(1e3*60*60*24),i=Math.max(0,5-s);return Math.ceil(i)},zF=()=>{rg(),Dd(),setInterval(()=>{rg(),Dd()},60*60*1e3)},vS=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Mh=I.createContext({}),Fh=I.createContext(null),Uh=typeof document<"u",v0=Uh?I.useLayoutEffect:I.useEffect,xS=I.createContext({strict:!1}),x0=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),qF="framerAppearId",wS="data-"+x0(qF);function HF(n,t,r,s){const{visualElement:i}=I.useContext(Mh),o=I.useContext(xS),l=I.useContext(Fh),c=I.useContext(vS).reducedMotion,u=I.useRef();s=s||o.renderer,!u.current&&s&&(u.current=s(n,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current;I.useInsertionEffect(()=>{d&&d.update(r,l)});const f=I.useRef(!!(r[wS]&&!window.HandoffComplete));return v0(()=>{d&&(d.render(),f.current&&d.animationState&&d.animationState.animateChanges())}),I.useEffect(()=>{d&&(d.updateFeatures(),!f.current&&d.animationState&&d.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),d}function mo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function WF(n,t,r){return I.useCallback(s=>{s&&n.mount&&n.mount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):mo(r)&&(r.current=s))},[t])}function Gl(n){return typeof n=="string"||Array.isArray(n)}function $h(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const w0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],b0=["initial",...w0];function Bh(n){return $h(n.animate)||b0.some(t=>Gl(n[t]))}function bS(n){return!!(Bh(n)||n.variants)}function GF(n,t){if(Bh(n)){const{initial:r,animate:s}=n;return{initial:r===!1||Gl(r)?r:void 0,animate:Gl(s)?s:void 0}}return n.inherit!==!1?t:{}}function KF(n){const{initial:t,animate:r}=GF(n,I.useContext(Mh));return I.useMemo(()=>({initial:t,animate:r}),[Kb(t),Kb(r)])}function Kb(n){return Array.isArray(n)?n.join(" "):n}const Qb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kl={};for(const n in Qb)Kl[n]={isEnabled:t=>Qb[n].some(r=>!!t[r])};function QF(n){for(const t in n)Kl[t]={...Kl[t],...n[t]}}const _0=I.createContext({}),_S=I.createContext({}),YF=Symbol.for("motionComponentSymbol");function XF({preloadedFeatures:n,createVisualElement:t,useRender:r,useVisualState:s,Component:i}){n&&QF(n);function o(c,u){let d;const f={...I.useContext(vS),...c,layoutId:JF(c)},{isStatic:m}=f,p=KF(c),y=s(c,m);if(!m&&Uh){p.visualElement=HF(i,y,f,t);const w=I.useContext(_S),T=I.useContext(xS).strict;p.visualElement&&(d=p.visualElement.loadFeatures(f,T,n,w))}return I.createElement(Mh.Provider,{value:p},d&&p.visualElement?I.createElement(d,{visualElement:p.visualElement,...f}):null,r(i,c,WF(y,p.visualElement,u),y,m,p.visualElement))}const l=I.forwardRef(o);return l[YF]=i,l}function JF({layoutId:n}){const t=I.useContext(_0).id;return t&&n!==void 0?t+"-"+n:n}function ZF(n){function t(s,i={}){return XF(n(s,i))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(s,i)=>(r.has(i)||r.set(i,t(i)),r.get(i))})}const eU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function T0(n){return typeof n!="string"||n.includes("-")?!1:!!(eU.indexOf(n)>-1||/[A-Z]/.test(n))}const Od={};function tU(n){Object.assign(Od,n)}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bi=new Set(vc);function TS(n,{layout:t,layoutId:r}){return Bi.has(n)||n.startsWith("origin")||(t||r!==void 0)&&(!!Od[n]||n==="opacity")}const nn=n=>!!(n&&n.getVelocity),nU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rU=vc.length;function sU(n,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},s,i){let o="";for(let l=0;l<rU;l++){const c=vc[l];if(n[c]!==void 0){const u=nU[c]||c;o+=`${u}(${n[c]}) `}}return t&&!n.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(n,s?"":o):r&&s&&(o="none"),o}const ES=n=>t=>typeof t=="string"&&t.startsWith(n),NS=ES("--"),sg=ES("var(--"),iU=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,oU=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Fs=(n,t,r)=>Math.min(Math.max(r,n),t),zi={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},hl={...zi,transform:n=>Fs(0,1,n)},hu={...zi,default:1},fl=n=>Math.round(n*1e5)/1e5,zh=/(-)?([\d]*\.?[\d])+/g,jS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,aU=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function xc(n){return typeof n=="string"}const wc=n=>({test:t=>xc(t)&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),ss=wc("deg"),cr=wc("%"),se=wc("px"),lU=wc("vh"),cU=wc("vw"),Yb={...cr,parse:n=>cr.parse(n)/100,transform:n=>cr.transform(n*100)},Xb={...zi,transform:Math.round},SS={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,size:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,rotate:ss,rotateX:ss,rotateY:ss,rotateZ:ss,scale:hu,scaleX:hu,scaleY:hu,scaleZ:hu,skew:ss,skewX:ss,skewY:ss,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:hl,originX:Yb,originY:Yb,originZ:se,zIndex:Xb,fillOpacity:hl,strokeOpacity:hl,numOctaves:Xb};function E0(n,t,r,s){const{style:i,vars:o,transform:l,transformOrigin:c}=n;let u=!1,d=!1,f=!0;for(const m in t){const p=t[m];if(NS(m)){o[m]=p;continue}const y=SS[m],w=oU(p,y);if(Bi.has(m)){if(u=!0,l[m]=w,!f)continue;p!==(y.default||0)&&(f=!1)}else m.startsWith("origin")?(d=!0,c[m]=w):i[m]=w}if(t.transform||(u||s?i.transform=sU(n.transform,r,f,s):i.transform&&(i.transform="none")),d){const{originX:m="50%",originY:p="50%",originZ:y=0}=c;i.transformOrigin=`${m} ${p} ${y}`}}const N0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IS(n,t,r){for(const s in t)!nn(t[s])&&!TS(s,r)&&(n[s]=t[s])}function uU({transformTemplate:n},t,r){return I.useMemo(()=>{const s=N0();return E0(s,t,{enableHardwareAcceleration:!r},n),Object.assign({},s.vars,s.style)},[t])}function dU(n,t,r){const s=n.style||{},i={};return IS(i,s,n),Object.assign(i,uU(n,t,r)),n.transformValues?n.transformValues(i):i}function hU(n,t,r){const s={},i=dU(n,t,r);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=i,s}const fU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ld(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||fU.has(n)}let CS=n=>!Ld(n);function mU(n){n&&(CS=t=>t.startsWith("on")?!Ld(t):n(t))}try{mU(require("@emotion/is-prop-valid").default)}catch{}function pU(n,t,r){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(CS(i)||r===!0&&Ld(i)||!t&&!Ld(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}function Jb(n,t,r){return typeof n=="string"?n:se.transform(t+r*n)}function gU(n,t,r){const s=Jb(t,n.x,n.width),i=Jb(r,n.y,n.height);return`${s} ${i}`}const yU={offset:"stroke-dashoffset",array:"stroke-dasharray"},vU={offset:"strokeDashoffset",array:"strokeDasharray"};function xU(n,t,r=1,s=0,i=!0){n.pathLength=1;const o=i?yU:vU;n[o.offset]=se.transform(-s);const l=se.transform(t),c=se.transform(r);n[o.array]=`${l} ${c}`}function j0(n,{attrX:t,attrY:r,attrScale:s,originX:i,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...d},f,m,p){if(E0(n,d,f,p),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:w,dimensions:T}=n;y.transform&&(T&&(w.transform=y.transform),delete y.transform),T&&(i!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=gU(T,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(y.x=t),r!==void 0&&(y.y=r),s!==void 0&&(y.scale=s),l!==void 0&&xU(y,l,c,u,!1)}const AS=()=>({...N0(),attrs:{}}),S0=n=>typeof n=="string"&&n.toLowerCase()==="svg";function wU(n,t,r,s){const i=I.useMemo(()=>{const o=AS();return j0(o,t,{enableHardwareAcceleration:!1},S0(s),n.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(n.style){const o={};IS(o,n.style,n),i.style={...o,...i.style}}return i}function bU(n=!1){return(r,s,i,{latestValues:o},l)=>{const u=(T0(r)?wU:hU)(s,o,l,r),f={...pU(s,typeof r=="string",n),...u,ref:i},{children:m}=s,p=I.useMemo(()=>nn(m)?m.get():m,[m]);return I.createElement(r,{...f,children:p})}}function kS(n,{style:t,vars:r},s,i){Object.assign(n.style,t,i&&i.getProjectionStyles(s));for(const o in r)n.style.setProperty(o,r[o])}const PS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RS(n,t,r,s){kS(n,t,void 0,s);for(const i in t.attrs)n.setAttribute(PS.has(i)?i:x0(i),t.attrs[i])}function I0(n,t){const{style:r}=n,s={};for(const i in r)(nn(r[i])||t.style&&nn(t.style[i])||TS(i,n))&&(s[i]=r[i]);return s}function DS(n,t){const r=I0(n,t);for(const s in n)if(nn(n[s])||nn(t[s])){const i=vc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=n[s]}return r}function C0(n,t,r,s={},i={}){return typeof t=="function"&&(t=t(r!==void 0?r:n.custom,s,i)),typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:n.custom,s,i)),t}function OS(n){const t=I.useRef(null);return t.current===null&&(t.current=n()),t.current}const Vd=n=>Array.isArray(n),_U=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),TU=n=>Vd(n)?n[n.length-1]||0:n;function Mu(n){const t=nn(n)?n.get():n;return _U(t)?t.toValue():t}function EU({scrapeMotionValuesFromProps:n,createRenderState:t,onMount:r},s,i,o){const l={latestValues:NU(s,i,o,n),renderState:t()};return r&&(l.mount=c=>r(s,c,l)),l}const LS=n=>(t,r)=>{const s=I.useContext(Mh),i=I.useContext(Fh),o=()=>EU(n,t,s,i);return r?o():OS(o)};function NU(n,t,r,s){const i={},o=s(n,{});for(const p in o)i[p]=Mu(o[p]);let{initial:l,animate:c}=n;const u=Bh(n),d=bS(n);t&&d&&!u&&n.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let f=r?r.initial===!1:!1;f=f||l===!1;const m=f?c:l;return m&&typeof m!="boolean"&&!$h(m)&&(Array.isArray(m)?m:[m]).forEach(y=>{const w=C0(n,y);if(!w)return;const{transitionEnd:T,transition:j,...b}=w;for(const v in b){let x=b[v];if(Array.isArray(x)){const N=f?x.length-1:0;x=x[N]}x!==null&&(i[v]=x)}for(const v in T)i[v]=T[v]}),i}const Ke=n=>n;class Zb{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function jU(n){let t=new Zb,r=new Zb,s=0,i=!1,o=!1;const l=new WeakSet,c={schedule:(u,d=!1,f=!1)=>{const m=f&&i,p=m?t:r;return d&&l.add(u),p.add(u)&&m&&i&&(s=t.order.length),u},cancel:u=>{r.remove(u),l.delete(u)},process:u=>{if(i){o=!0;return}if(i=!0,[t,r]=[r,t],r.clear(),s=t.order.length,s)for(let d=0;d<s;d++){const f=t.order[d];f(u),l.has(f)&&(c.schedule(f),n())}i=!1,o&&(o=!1,c.process(u))}};return c}const fu=["prepare","read","update","preRender","render","postRender"],SU=40;function IU(n,t){let r=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=fu.reduce((m,p)=>(m[p]=jU(()=>r=!0),m),{}),l=m=>o[m].process(i),c=()=>{const m=performance.now();r=!1,i.delta=s?1e3/60:Math.max(Math.min(m-i.timestamp,SU),1),i.timestamp=m,i.isProcessing=!0,fu.forEach(l),i.isProcessing=!1,r&&t&&(s=!1,n(c))},u=()=>{r=!0,s=!0,i.isProcessing||n(c)};return{schedule:fu.reduce((m,p)=>{const y=o[p];return m[p]=(w,T=!1,j=!1)=>(r||u(),y.schedule(w,T,j)),m},{}),cancel:m=>fu.forEach(p=>o[p].cancel(m)),state:i,steps:o}}const{schedule:Ae,cancel:Wr,state:St,steps:um}=IU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ke,!0),CU={useVisualState:LS({scrapeMotionValuesFromProps:DS,createRenderState:AS,onMount:(n,t,{renderState:r,latestValues:s})=>{Ae.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ae.render(()=>{j0(r,s,{enableHardwareAcceleration:!1},S0(t.tagName),n.transformTemplate),RS(t,r)})}})},AU={useVisualState:LS({scrapeMotionValuesFromProps:I0,createRenderState:N0})};function kU(n,{forwardMotionProps:t=!1},r,s){return{...T0(n)?CU:AU,preloadedFeatures:r,useRender:bU(t),createVisualElement:s,Component:n}}function Sr(n,t,r,s={passive:!0}){return n.addEventListener(t,r,s),()=>n.removeEventListener(t,r)}const VS=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function qh(n,t="page"){return{point:{x:n[t+"X"],y:n[t+"Y"]}}}const PU=n=>t=>VS(t)&&n(t,qh(t));function Dr(n,t,r,s){return Sr(n,t,PU(r),s)}const RU=(n,t)=>r=>t(n(r)),As=(...n)=>n.reduce(RU);function MS(n){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=n,r):!1}}const e1=MS("dragHorizontal"),t1=MS("dragVertical");function FS(n){let t=!1;if(n==="y")t=t1();else if(n==="x")t=e1();else{const r=e1(),s=t1();r&&s?t=()=>{r(),s()}:(r&&r(),s&&s())}return t}function US(){const n=FS(!0);return n?(n(),!1):!0}class Xs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function n1(n,t){const r="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),i=(o,l)=>{if(o.pointerType==="touch"||US())return;const c=n.getProps();n.animationState&&c.whileHover&&n.animationState.setActive("whileHover",t),c[s]&&Ae.update(()=>c[s](o,l))};return Dr(n.current,r,i,{passive:!n.getProps()[s]})}class DU extends Xs{mount(){this.unmount=As(n1(this.node,!0),n1(this.node,!1))}unmount(){}}class OU extends Xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=As(Sr(this.node.current,"focus",()=>this.onFocus()),Sr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const $S=(n,t)=>t?n===t?!0:$S(n,t.parentElement):!1;function dm(n,t){if(!t)return;const r=new PointerEvent("pointer"+n);t(r,qh(r))}class LU extends Xs{constructor(){super(...arguments),this.removeStartListeners=Ke,this.removeEndListeners=Ke,this.removeAccessibleListeners=Ke,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),o=Dr(window,"pointerup",(c,u)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:f,globalTapTarget:m}=this.node.getProps();Ae.update(()=>{!m&&!$S(this.node.current,c.target)?f&&f(c,u):d&&d(c,u)})},{passive:!(s.onTap||s.onPointerUp)}),l=Dr(window,"pointercancel",(c,u)=>this.cancelPress(c,u),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=As(o,l),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const l=c=>{c.key!=="Enter"||!this.checkPressEnd()||dm("up",(u,d)=>{const{onTap:f}=this.node.getProps();f&&Ae.update(()=>f(u,d))})};this.removeEndListeners(),this.removeEndListeners=Sr(this.node.current,"keyup",l),dm("down",(c,u)=>{this.startPress(c,u)})},r=Sr(this.node.current,"keydown",t),s=()=>{this.isPressing&&dm("cancel",(o,l)=>this.cancelPress(o,l))},i=Sr(this.node.current,"blur",s);this.removeAccessibleListeners=As(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Ae.update(()=>s(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!US()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Ae.update(()=>s(t,r))}mount(){const t=this.node.getProps(),r=Dr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Sr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=As(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ig=new WeakMap,hm=new WeakMap,VU=n=>{const t=ig.get(n.target);t&&t(n)},MU=n=>{n.forEach(VU)};function FU({root:n,...t}){const r=n||document;hm.has(r)||hm.set(r,{});const s=hm.get(r),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(MU,{root:n,...t})),s[i]}function UU(n,t,r){const s=FU(t);return ig.set(n,r),s.observe(n),()=>{ig.delete(n),s.unobserve(n)}}const $U={some:0,all:1};class BU extends Xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:i="some",once:o}=t,l={root:r?r.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:$U[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),p=d?f:m;p&&p(u)};return UU(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(zU(t,r))&&this.startObserver()}unmount(){}}function zU({viewport:n={}},{viewport:t={}}={}){return r=>n[r]!==t[r]}const qU={inView:{Feature:BU},tap:{Feature:LU},focus:{Feature:OU},hover:{Feature:DU}};function BS(n,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==n.length)return!1;for(let s=0;s<r;s++)if(t[s]!==n[s])return!1;return!0}function HU(n){const t={};return n.values.forEach((r,s)=>t[s]=r.get()),t}function WU(n){const t={};return n.values.forEach((r,s)=>t[s]=r.getVelocity()),t}function Hh(n,t,r){const s=n.getProps();return C0(s,t,r!==void 0?r:s.custom,HU(n),WU(n))}let GU=Ke,A0=Ke;const ks=n=>n*1e3,Or=n=>n/1e3,KU={current:!1},zS=n=>Array.isArray(n)&&typeof n[0]=="number";function qS(n){return!!(!n||typeof n=="string"&&HS[n]||zS(n)||Array.isArray(n)&&n.every(qS))}const Ya=([n,t,r,s])=>`cubic-bezier(${n}, ${t}, ${r}, ${s})`,HS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ya([0,.65,.55,1]),circOut:Ya([.55,0,1,.45]),backIn:Ya([.31,.01,.66,-.59]),backOut:Ya([.33,1.53,.69,.99])};function WS(n){if(n)return zS(n)?Ya(n):Array.isArray(n)?n.map(WS):HS[n]}function QU(n,t,r,{delay:s=0,duration:i,repeat:o=0,repeatType:l="loop",ease:c,times:u}={}){const d={[t]:r};u&&(d.offset=u);const f=WS(c);return Array.isArray(f)&&(d.easing=f),n.animate(d,{delay:s,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}function YU(n,{repeat:t,repeatType:r="loop"}){const s=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[s]}const GS=(n,t,r)=>(((1-3*r+3*t)*n+(3*r-6*t))*n+3*t)*n,XU=1e-7,JU=12;function ZU(n,t,r,s,i){let o,l,c=0;do l=t+(r-t)/2,o=GS(l,s,i)-n,o>0?r=l:t=l;while(Math.abs(o)>XU&&++c<JU);return l}function bc(n,t,r,s){if(n===t&&r===s)return Ke;const i=o=>ZU(o,0,1,n,r);return o=>o===0||o===1?o:GS(i(o),t,s)}const e9=bc(.42,0,1,1),t9=bc(0,0,.58,1),KS=bc(.42,0,.58,1),n9=n=>Array.isArray(n)&&typeof n[0]!="number",QS=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,YS=n=>t=>1-n(1-t),k0=n=>1-Math.sin(Math.acos(n)),XS=YS(k0),r9=QS(k0),JS=bc(.33,1.53,.69,.99),P0=YS(JS),s9=QS(P0),i9=n=>(n*=2)<1?.5*P0(n):.5*(2-Math.pow(2,-10*(n-1))),o9={linear:Ke,easeIn:e9,easeInOut:KS,easeOut:t9,circIn:k0,circInOut:r9,circOut:XS,backIn:P0,backInOut:s9,backOut:JS,anticipate:i9},r1=n=>{if(Array.isArray(n)){A0(n.length===4);const[t,r,s,i]=n;return bc(t,r,s,i)}else if(typeof n=="string")return o9[n];return n},R0=(n,t)=>r=>!!(xc(r)&&aU.test(r)&&r.startsWith(n)||t&&Object.prototype.hasOwnProperty.call(r,t)),ZS=(n,t,r)=>s=>{if(!xc(s))return s;const[i,o,l,c]=s.match(zh);return{[n]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},a9=n=>Fs(0,255,n),fm={...zi,transform:n=>Math.round(a9(n))},gi={test:R0("rgb","red"),parse:ZS("red","green","blue"),transform:({red:n,green:t,blue:r,alpha:s=1})=>"rgba("+fm.transform(n)+", "+fm.transform(t)+", "+fm.transform(r)+", "+fl(hl.transform(s))+")"};function l9(n){let t="",r="",s="",i="";return n.length>5?(t=n.substring(1,3),r=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),r=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),t+=t,r+=r,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const og={test:R0("#"),parse:l9,transform:gi.transform},po={test:R0("hsl","hue"),parse:ZS("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(n)+", "+cr.transform(fl(t))+", "+cr.transform(fl(r))+", "+fl(hl.transform(s))+")"},Ft={test:n=>gi.test(n)||og.test(n)||po.test(n),parse:n=>gi.test(n)?gi.parse(n):po.test(n)?po.parse(n):og.parse(n),transform:n=>xc(n)?n:n.hasOwnProperty("red")?gi.transform(n):po.transform(n)},$e=(n,t,r)=>-r*n+r*t+n;function mm(n,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(t-n)*6*r:r<1/2?t:r<2/3?n+(t-n)*(2/3-r)*6:n}function c9({hue:n,saturation:t,lightness:r,alpha:s}){n/=360,t/=100,r/=100;let i=0,o=0,l=0;if(!t)i=o=l=r;else{const c=r<.5?r*(1+t):r+t-r*t,u=2*r-c;i=mm(u,c,n+1/3),o=mm(u,c,n),l=mm(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}const pm=(n,t,r)=>{const s=n*n;return Math.sqrt(Math.max(0,r*(t*t-s)+s))},u9=[og,gi,po],d9=n=>u9.find(t=>t.test(n));function s1(n){const t=d9(n);let r=t.parse(n);return t===po&&(r=c9(r)),r}const eI=(n,t)=>{const r=s1(n),s=s1(t),i={...r};return o=>(i.red=pm(r.red,s.red,o),i.green=pm(r.green,s.green,o),i.blue=pm(r.blue,s.blue,o),i.alpha=$e(r.alpha,s.alpha,o),gi.transform(i))};function h9(n){var t,r;return isNaN(n)&&xc(n)&&(((t=n.match(zh))===null||t===void 0?void 0:t.length)||0)+(((r=n.match(jS))===null||r===void 0?void 0:r.length)||0)>0}const tI={regex:iU,countKey:"Vars",token:"${v}",parse:Ke},nI={regex:jS,countKey:"Colors",token:"${c}",parse:Ft.parse},rI={regex:zh,countKey:"Numbers",token:"${n}",parse:zi.parse};function gm(n,{regex:t,countKey:r,token:s,parse:i}){const o=n.tokenised.match(t);o&&(n["num"+r]=o.length,n.tokenised=n.tokenised.replace(t,s),n.values.push(...o.map(i)))}function Md(n){const t=n.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&gm(r,tI),gm(r,nI),gm(r,rI),r}function sI(n){return Md(n).values}function iI(n){const{values:t,numColors:r,numVars:s,tokenised:i}=Md(n),o=t.length;return l=>{let c=i;for(let u=0;u<o;u++)u<s?c=c.replace(tI.token,l[u]):u<s+r?c=c.replace(nI.token,Ft.transform(l[u])):c=c.replace(rI.token,fl(l[u]));return c}}const f9=n=>typeof n=="number"?0:n;function m9(n){const t=sI(n);return iI(n)(t.map(f9))}const Us={test:h9,parse:sI,createTransformer:iI,getAnimatableNone:m9},oI=(n,t)=>r=>`${r>0?t:n}`;function aI(n,t){return typeof n=="number"?r=>$e(n,t,r):Ft.test(n)?eI(n,t):n.startsWith("var(")?oI(n,t):cI(n,t)}const lI=(n,t)=>{const r=[...n],s=r.length,i=n.map((o,l)=>aI(o,t[l]));return o=>{for(let l=0;l<s;l++)r[l]=i[l](o);return r}},p9=(n,t)=>{const r={...n,...t},s={};for(const i in r)n[i]!==void 0&&t[i]!==void 0&&(s[i]=aI(n[i],t[i]));return i=>{for(const o in s)r[o]=s[o](i);return r}},cI=(n,t)=>{const r=Us.createTransformer(t),s=Md(n),i=Md(t);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?As(lI(s.values,i.values),r):oI(n,t)},Ql=(n,t,r)=>{const s=t-n;return s===0?1:(r-n)/s},i1=(n,t)=>r=>$e(n,t,r);function g9(n){return typeof n=="number"?i1:typeof n=="string"?Ft.test(n)?eI:cI:Array.isArray(n)?lI:typeof n=="object"?p9:i1}function y9(n,t,r){const s=[],i=r||g9(n[0]),o=n.length-1;for(let l=0;l<o;l++){let c=i(n[l],n[l+1]);if(t){const u=Array.isArray(t)?t[l]||Ke:t;c=As(u,c)}s.push(c)}return s}function uI(n,t,{clamp:r=!0,ease:s,mixer:i}={}){const o=n.length;if(A0(o===t.length),o===1)return()=>t[0];n[0]>n[o-1]&&(n=[...n].reverse(),t=[...t].reverse());const l=y9(t,s,i),c=l.length,u=d=>{let f=0;if(c>1)for(;f<n.length-2&&!(d<n[f+1]);f++);const m=Ql(n[f],n[f+1],d);return l[f](m)};return r?d=>u(Fs(n[0],n[o-1],d)):u}function v9(n,t){const r=n[n.length-1];for(let s=1;s<=t;s++){const i=Ql(0,t,s);n.push($e(r,1,i))}}function x9(n){const t=[0];return v9(t,n.length-1),t}function w9(n,t){return n.map(r=>r*t)}function b9(n,t){return n.map(()=>t||KS).splice(0,n.length-1)}function Fd({duration:n=300,keyframes:t,times:r,ease:s="easeInOut"}){const i=n9(s)?s.map(r1):r1(s),o={done:!1,value:t[0]},l=w9(r&&r.length===t.length?r:x9(t),n),c=uI(l,t,{ease:Array.isArray(i)?i:b9(t,i)});return{calculatedDuration:n,next:u=>(o.value=c(u),o.done=u>=n,o)}}function dI(n,t){return t?n*(1e3/t):0}const _9=5;function hI(n,t,r){const s=Math.max(t-_9,0);return dI(r-n(s),t-s)}const ym=.001,T9=.01,o1=10,E9=.05,N9=1;function j9({duration:n=800,bounce:t=.25,velocity:r=0,mass:s=1}){let i,o;GU(n<=ks(o1));let l=1-t;l=Fs(E9,N9,l),n=Fs(T9,o1,Or(n)),l<1?(i=d=>{const f=d*l,m=f*n,p=f-r,y=ag(d,l),w=Math.exp(-m);return ym-p/y*w},o=d=>{const m=d*l*n,p=m*r+r,y=Math.pow(l,2)*Math.pow(d,2)*n,w=Math.exp(-m),T=ag(Math.pow(d,2),l);return(-i(d)+ym>0?-1:1)*((p-y)*w)/T}):(i=d=>{const f=Math.exp(-d*n),m=(d-r)*n+1;return-ym+f*m},o=d=>{const f=Math.exp(-d*n),m=(r-d)*(n*n);return f*m});const c=5/n,u=I9(i,o,c);if(n=ks(n),isNaN(u))return{stiffness:100,damping:10,duration:n};{const d=Math.pow(u,2)*s;return{stiffness:d,damping:l*2*Math.sqrt(s*d),duration:n}}}const S9=12;function I9(n,t,r){let s=r;for(let i=1;i<S9;i++)s=s-n(s)/t(s);return s}function ag(n,t){return n*Math.sqrt(1-t*t)}const C9=["duration","bounce"],A9=["stiffness","damping","mass"];function a1(n,t){return t.some(r=>n[r]!==void 0)}function k9(n){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!a1(n,A9)&&a1(n,C9)){const r=j9(n);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function fI({keyframes:n,restDelta:t,restSpeed:r,...s}){const i=n[0],o=n[n.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:p}=k9({...s,velocity:-Or(s.velocity||0)}),y=m||0,w=u/(2*Math.sqrt(c*d)),T=o-i,j=Or(Math.sqrt(c/d)),b=Math.abs(T)<5;r||(r=b?.01:2),t||(t=b?.005:.5);let v;if(w<1){const x=ag(j,w);v=N=>{const P=Math.exp(-w*j*N);return o-P*((y+w*j*T)/x*Math.sin(x*N)+T*Math.cos(x*N))}}else if(w===1)v=x=>o-Math.exp(-j*x)*(T+(y+j*T)*x);else{const x=j*Math.sqrt(w*w-1);v=N=>{const P=Math.exp(-w*j*N),O=Math.min(x*N,300);return o-P*((y+w*j*T)*Math.sinh(O)+x*T*Math.cosh(O))/x}}return{calculatedDuration:p&&f||null,next:x=>{const N=v(x);if(p)l.done=x>=f;else{let P=y;x!==0&&(w<1?P=hI(v,x,N):P=0);const O=Math.abs(P)<=r,S=Math.abs(o-N)<=t;l.done=O&&S}return l.value=l.done?o:N,l}}}function l1({keyframes:n,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:u,restDelta:d=.5,restSpeed:f}){const m=n[0],p={done:!1,value:m},y=_=>c!==void 0&&_<c||u!==void 0&&_>u,w=_=>c===void 0?u:u===void 0||Math.abs(c-_)<Math.abs(u-_)?c:u;let T=r*t;const j=m+T,b=l===void 0?j:l(j);b!==j&&(T=b-m);const v=_=>-T*Math.exp(-_/s),x=_=>b+v(_),N=_=>{const C=v(_),R=x(_);p.done=Math.abs(C)<=d,p.value=p.done?b:R};let P,O;const S=_=>{y(p.value)&&(P=_,O=fI({keyframes:[p.value,w(p.value)],velocity:hI(x,_,p.value),damping:i,stiffness:o,restDelta:d,restSpeed:f}))};return S(0),{calculatedDuration:null,next:_=>{let C=!1;return!O&&P===void 0&&(C=!0,N(_),S(_)),P!==void 0&&_>P?O.next(_-P):(!C&&N(_),p)}}}const P9=n=>{const t=({timestamp:r})=>n(r);return{start:()=>Ae.update(t,!0),stop:()=>Wr(t),now:()=>St.isProcessing?St.timestamp:performance.now()}},c1=2e4;function u1(n){let t=0;const r=50;let s=n.next(t);for(;!s.done&&t<c1;)t+=r,s=n.next(t);return t>=c1?1/0:t}const R9={decay:l1,inertia:l1,tween:Fd,keyframes:Fd,spring:fI};function Ud({autoplay:n=!0,delay:t=0,driver:r=P9,keyframes:s,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:c="loop",onPlay:u,onStop:d,onComplete:f,onUpdate:m,...p}){let y=1,w=!1,T,j;const b=()=>{j=new Promise(te=>{T=te})};b();let v;const x=R9[i]||Fd;let N;x!==Fd&&typeof s[0]!="number"&&(N=uI([0,100],s,{clamp:!1}),s=[0,100]);const P=x({...p,keyframes:s});let O;c==="mirror"&&(O=x({...p,keyframes:[...s].reverse(),velocity:-(p.velocity||0)}));let S="idle",_=null,C=null,R=null;P.calculatedDuration===null&&o&&(P.calculatedDuration=u1(P));const{calculatedDuration:A}=P;let L=1/0,D=1/0;A!==null&&(L=A+l,D=L*(o+1)-l);let $=0;const Z=te=>{if(C===null)return;y>0&&(C=Math.min(C,te)),y<0&&(C=Math.min(te-D/y,C)),_!==null?$=_:$=Math.round(te-C)*y;const ce=$-t*(y>=0?1:-1),ne=y>=0?ce<0:ce>D;$=Math.max(ce,0),S==="finished"&&_===null&&($=D);let Dt=$,vn=P;if(o){const da=Math.min($,D)/L;let gr=Math.floor(da),xn=da%1;!xn&&da>=1&&(xn=1),xn===1&&gr--,gr=Math.min(gr,o+1),!!(gr%2)&&(c==="reverse"?(xn=1-xn,l&&(xn-=l/L)):c==="mirror"&&(vn=O)),Dt=Fs(0,1,xn)*L}const Ot=ne?{done:!1,value:s[0]}:vn.next(Dt);N&&(Ot.value=N(Ot.value));let{done:rn}=Ot;!ne&&A!==null&&(rn=y>=0?$>=D:$<=0);const Kh=_===null&&(S==="finished"||S==="running"&&rn);return m&&m(Ot.value),Kh&&q(),Ot},oe=()=>{v&&v.stop(),v=void 0},ve=()=>{S="idle",oe(),T(),b(),C=R=null},q=()=>{S="finished",f&&f(),oe(),T()},K=()=>{if(w)return;v||(v=r(Z));const te=v.now();u&&u(),_!==null?C=te-_:(!C||S==="finished")&&(C=te),S==="finished"&&b(),R=C,_=null,S="running",v.start()};n&&K();const ee={then(te,ce){return j.then(te,ce)},get time(){return Or($)},set time(te){te=ks(te),$=te,_!==null||!v||y===0?_=te:C=v.now()-te/y},get duration(){const te=P.calculatedDuration===null?u1(P):P.calculatedDuration;return Or(te)},get speed(){return y},set speed(te){te===y||!v||(y=te,ee.time=Or($))},get state(){return S},play:K,pause:()=>{S="paused",_=$},stop:()=>{w=!0,S!=="idle"&&(S="idle",d&&d(),ve())},cancel:()=>{R!==null&&Z(R),ve()},complete:()=>{S="finished"},sample:te=>(C=0,Z(te))};return ee}function D9(n){let t;return()=>(t===void 0&&(t=n()),t)}const O9=D9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),L9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),mu=10,V9=2e4,M9=(n,t)=>t.type==="spring"||n==="backgroundColor"||!qS(t.ease);function F9(n,t,{onUpdate:r,onComplete:s,...i}){if(!(O9()&&L9.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let l=!1,c,u,d=!1;const f=()=>{u=new Promise(x=>{c=x})};f();let{keyframes:m,duration:p=300,ease:y,times:w}=i;if(M9(t,i)){const x=Ud({...i,repeat:0,delay:0});let N={done:!1,value:m[0]};const P=[];let O=0;for(;!N.done&&O<V9;)N=x.sample(O),P.push(N.value),O+=mu;w=void 0,m=P,p=O-mu,y="linear"}const T=QU(n.owner.current,t,m,{...i,duration:p,ease:y,times:w}),j=()=>{d=!1,T.cancel()},b=()=>{d=!0,Ae.update(j),c(),f()};return T.onfinish=()=>{d||(n.set(YU(m,i)),s&&s(),b())},{then(x,N){return u.then(x,N)},attachTimeline(x){return T.timeline=x,T.onfinish=null,Ke},get time(){return Or(T.currentTime||0)},set time(x){T.currentTime=ks(x)},get speed(){return T.playbackRate},set speed(x){T.playbackRate=x},get duration(){return Or(p)},play:()=>{l||(T.play(),Wr(j))},pause:()=>T.pause(),stop:()=>{if(l=!0,T.playState==="idle")return;const{currentTime:x}=T;if(x){const N=Ud({...i,autoplay:!1});n.setWithVelocity(N.sample(x-mu).value,N.sample(x).value,mu)}b()},complete:()=>{d||T.finish()},cancel:b}}function U9({keyframes:n,delay:t,onUpdate:r,onComplete:s}){const i=()=>(r&&r(n[n.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Ke,pause:Ke,stop:Ke,then:o=>(o(),Promise.resolve()),cancel:Ke,complete:Ke});return t?Ud({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const $9={type:"spring",stiffness:500,damping:25,restSpeed:10},B9=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),z9={type:"keyframes",duration:.8},q9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},H9=(n,{keyframes:t})=>t.length>2?z9:Bi.has(n)?n.startsWith("scale")?B9(t[1]):$9:q9,lg=(n,t)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Us.test(t)||t==="0")&&!t.startsWith("url(")),W9=new Set(["brightness","contrast","saturate","opacity"]);function G9(n){const[t,r]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[s]=r.match(zh)||[];if(!s)return n;const i=r.replace(s,"");let o=W9.has(t)?1:0;return s!==r&&(o*=100),t+"("+o+i+")"}const K9=/([a-z-]*)\(.*?\)/g,cg={...Us,getAnimatableNone:n=>{const t=n.match(K9);return t?t.map(G9).join(" "):n}},Q9={...SS,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:cg,WebkitFilter:cg},D0=n=>Q9[n];function mI(n,t){let r=D0(n);return r!==cg&&(r=Us),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const pI=n=>/^0[^.\s]+$/.test(n);function Y9(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||pI(n)}function X9(n,t,r,s){const i=lg(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const l=s.from!==void 0?s.from:n.get();let c;const u=[];for(let d=0;d<o.length;d++)o[d]===null&&(o[d]=d===0?l:o[d-1]),Y9(o[d])&&u.push(d),typeof o[d]=="string"&&o[d]!=="none"&&o[d]!=="0"&&(c=o[d]);if(i&&u.length&&c)for(let d=0;d<u.length;d++){const f=u[d];o[f]=mI(t,c)}return o}function J9({when:n,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:c,from:u,elapsed:d,...f}){return!!Object.keys(f).length}function O0(n,t){return n[t]||n.default||n}const Z9={skipAnimations:!1},L0=(n,t,r,s={})=>i=>{const o=O0(s,n)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-ks(l);const u=X9(t,n,r,o),d=u[0],f=u[u.length-1],m=lg(n,d),p=lg(n,f);let y={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-c,onUpdate:w=>{t.set(w),o.onUpdate&&o.onUpdate(w)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(J9(o)||(y={...y,...H9(n,y)}),y.duration&&(y.duration=ks(y.duration)),y.repeatDelay&&(y.repeatDelay=ks(y.repeatDelay)),!m||!p||KU.current||o.type===!1||Z9.skipAnimations)return U9(y);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const w=F9(t,n,y);if(w)return w}return Ud(y)};function $d(n){return!!(nn(n)&&n.add)}const gI=n=>/^\-?\d*\.?\d+$/.test(n);function V0(n,t){n.indexOf(t)===-1&&n.push(t)}function M0(n,t){const r=n.indexOf(t);r>-1&&n.splice(r,1)}class F0{constructor(){this.subscriptions=[]}add(t){return V0(this.subscriptions,t),()=>M0(this.subscriptions,t)}notify(t,r,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,s);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const e7=n=>!isNaN(parseFloat(n));class t7{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:o,timestamp:l}=St;this.lastUpdated!==l&&(this.timeDelta=o,this.lastUpdated=l,Ae.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ae.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=e7(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new F0);const s=this.events[t].add(r);return t==="change"?()=>{s(),Ae.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,s){this.set(r),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?dI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Go(n,t){return new t7(n,t)}const yI=n=>t=>t.test(n),n7={test:n=>n==="auto",parse:n=>n},vI=[zi,se,cr,ss,cU,lU,n7],La=n=>vI.find(yI(n)),r7=[...vI,Ft,Us],s7=n=>r7.find(yI(n));function i7(n,t,r){n.hasValue(t)?n.getValue(t).set(r):n.addValue(t,Go(r))}function o7(n,t){const r=Hh(n,t);let{transitionEnd:s={},transition:i={},...o}=r?n.makeTargetAnimatable(r,!1):{};o={...o,...s};for(const l in o){const c=TU(o[l]);i7(n,l,c)}}function a7(n,t,r){var s,i;const o=Object.keys(t).filter(c=>!n.hasValue(c)),l=o.length;if(l)for(let c=0;c<l;c++){const u=o[c],d=t[u];let f=null;Array.isArray(d)&&(f=d[0]),f===null&&(f=(i=(s=r[u])!==null&&s!==void 0?s:n.readValue(u))!==null&&i!==void 0?i:t[u]),f!=null&&(typeof f=="string"&&(gI(f)||pI(f))?f=parseFloat(f):!s7(f)&&Us.test(d)&&(f=mI(u,d)),n.addValue(u,Go(f,{owner:n})),r[u]===void 0&&(r[u]=f),f!==null&&n.setBaseTarget(u,f))}}function l7(n,t){return t?(t[n]||t.default||t).from:void 0}function c7(n,t,r){const s={};for(const i in n){const o=l7(i,t);if(o!==void 0)s[i]=o;else{const l=r.getValue(i);l&&(s[i]=l.get())}}return s}function u7({protectedKeys:n,needsAnimating:t},r){const s=n.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function d7(n,t){const r=n.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==r)return!0}else return r!==t}function xI(n,t,{delay:r=0,transitionOverride:s,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=n.makeTargetAnimatable(t);const u=n.getValue("willChange");s&&(o=s);const d=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const m in c){const p=n.getValue(m),y=c[m];if(!p||y===void 0||f&&u7(f,m))continue;const w={delay:r,elapsed:0,...O0(o||{},m)};if(window.HandoffAppearAnimations){const b=n.getProps()[wS];if(b){const v=window.HandoffAppearAnimations(b,m,p,Ae);v!==null&&(w.elapsed=v,w.isHandoff=!0)}}let T=!w.isHandoff&&!d7(p,y);if(w.type==="spring"&&(p.getVelocity()||w.velocity)&&(T=!1),p.animation&&(T=!1),T)continue;p.start(L0(m,p,y,n.shouldReduceMotion&&Bi.has(m)?{type:!1}:w));const j=p.animation;$d(u)&&(u.add(m),j.then(()=>u.remove(m))),d.push(j)}return l&&Promise.all(d).then(()=>{l&&o7(n,l)}),d}function ug(n,t,r={}){const s=Hh(n,t,r.custom);let{transition:i=n.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(xI(n,s,r)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=i;return h7(n,t,d+u,f,m,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(r.delay)])}function h7(n,t,r=0,s=0,i=1,o){const l=[],c=(n.variantChildren.size-1)*s,u=i===1?(d=0)=>d*s:(d=0)=>c-d*s;return Array.from(n.variantChildren).sort(f7).forEach((d,f)=>{d.notify("AnimationStart",t),l.push(ug(d,t,{...o,delay:r+u(f)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(l)}function f7(n,t){return n.sortNodePosition(t)}function m7(n,t,r={}){n.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(o=>ug(n,o,r));s=Promise.all(i)}else if(typeof t=="string")s=ug(n,t,r);else{const i=typeof t=="function"?Hh(n,t,r.custom):t;s=Promise.all(xI(n,i,r))}return s.then(()=>n.notify("AnimationComplete",t))}const p7=[...w0].reverse(),g7=w0.length;function y7(n){return t=>Promise.all(t.map(({animation:r,options:s})=>m7(n,r,s)))}function v7(n){let t=y7(n);const r=w7();let s=!0;const i=(u,d)=>{const f=Hh(n,d);if(f){const{transition:m,transitionEnd:p,...y}=f;u={...u,...y,...p}}return u};function o(u){t=u(n)}function l(u,d){const f=n.getProps(),m=n.getVariantContext(!0)||{},p=[],y=new Set;let w={},T=1/0;for(let b=0;b<g7;b++){const v=p7[b],x=r[v],N=f[v]!==void 0?f[v]:m[v],P=Gl(N),O=v===d?x.isActive:null;O===!1&&(T=b);let S=N===m[v]&&N!==f[v]&&P;if(S&&s&&n.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...w},!x.isActive&&O===null||!N&&!x.prevProp||$h(N)||typeof N=="boolean")continue;let C=x7(x.prevProp,N)||v===d&&x.isActive&&!S&&P||b>T&&P,R=!1;const A=Array.isArray(N)?N:[N];let L=A.reduce(i,{});O===!1&&(L={});const{prevResolvedValues:D={}}=x,$={...D,...L},Z=oe=>{C=!0,y.has(oe)&&(R=!0,y.delete(oe)),x.needsAnimating[oe]=!0};for(const oe in $){const ve=L[oe],q=D[oe];if(w.hasOwnProperty(oe))continue;let K=!1;Vd(ve)&&Vd(q)?K=!BS(ve,q):K=ve!==q,K?ve!==void 0?Z(oe):y.add(oe):ve!==void 0&&y.has(oe)?Z(oe):x.protectedKeys[oe]=!0}x.prevProp=N,x.prevResolvedValues=L,x.isActive&&(w={...w,...L}),s&&n.blockInitialAnimation&&(C=!1),C&&(!S||R)&&p.push(...A.map(oe=>({animation:oe,options:{type:v,...u}})))}if(y.size){const b={};y.forEach(v=>{const x=n.getBaseTarget(v);x!==void 0&&(b[v]=x)}),p.push({animation:b})}let j=!!p.length;return s&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(j=!1),s=!1,j?t(p):Promise.resolve()}function c(u,d,f){var m;if(r[u].isActive===d)return Promise.resolve();(m=n.variantChildren)===null||m===void 0||m.forEach(y=>{var w;return(w=y.animationState)===null||w===void 0?void 0:w.setActive(u,d)}),r[u].isActive=d;const p=l(f,u);for(const y in r)r[y].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>r}}function x7(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!BS(t,n):!1}function ni(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function w7(){return{animate:ni(!0),whileInView:ni(),whileHover:ni(),whileTap:ni(),whileDrag:ni(),whileFocus:ni(),exit:ni()}}class b7 extends Xs{constructor(t){super(t),t.animationState||(t.animationState=v7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),$h(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let _7=0;class T7 extends Xs{constructor(){super(...arguments),this.id=_7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const E7={animation:{Feature:b7},exit:{Feature:T7}},d1=(n,t)=>Math.abs(n-t);function N7(n,t){const r=d1(n.x,t.x),s=d1(n.y,t.y);return Math.sqrt(r**2+s**2)}class wI{constructor(t,r,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=xm(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=N7(m.offset,{x:0,y:0})>=3;if(!p&&!y)return;const{point:w}=m,{timestamp:T}=St;this.history.push({...w,timestamp:T});const{onStart:j,onMove:b}=this.handlers;p||(j&&j(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=vm(p,this.transformPagePoint),Ae.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=xm(m.type==="pointercancel"?this.lastMoveEventInfo:vm(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,j),w&&w(m,j)},!VS(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=s,this.contextWindow=i||window;const l=qh(t),c=vm(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=St;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,xm(c,this.history)),this.removeListeners=As(Dr(this.contextWindow,"pointermove",this.handlePointerMove),Dr(this.contextWindow,"pointerup",this.handlePointerUp),Dr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wr(this.updatePoint)}}function vm(n,t){return t?{point:t(n.point)}:n}function h1(n,t){return{x:n.x-t.x,y:n.y-t.y}}function xm({point:n},t){return{point:n,delta:h1(n,bI(t)),offset:h1(n,j7(t)),velocity:S7(t,.1)}}function j7(n){return n[0]}function bI(n){return n[n.length-1]}function S7(n,t){if(n.length<2)return{x:0,y:0};let r=n.length-1,s=null;const i=bI(n);for(;r>=0&&(s=n[r],!(i.timestamp-s.timestamp>ks(t)));)r--;if(!s)return{x:0,y:0};const o=Or(i.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-s.x)/o,y:(i.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function mn(n){return n.max-n.min}function dg(n,t=0,r=.01){return Math.abs(n-t)<=r}function f1(n,t,r,s=.5){n.origin=s,n.originPoint=$e(t.min,t.max,n.origin),n.scale=mn(r)/mn(t),(dg(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=$e(r.min,r.max,n.origin)-n.originPoint,(dg(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ml(n,t,r,s){f1(n.x,t.x,r.x,s?s.originX:void 0),f1(n.y,t.y,r.y,s?s.originY:void 0)}function m1(n,t,r){n.min=r.min+t.min,n.max=n.min+mn(t)}function I7(n,t,r){m1(n.x,t.x,r.x),m1(n.y,t.y,r.y)}function p1(n,t,r){n.min=t.min-r.min,n.max=n.min+mn(t)}function pl(n,t,r){p1(n.x,t.x,r.x),p1(n.y,t.y,r.y)}function C7(n,{min:t,max:r},s){return t!==void 0&&n<t?n=s?$e(t,n,s.min):Math.max(n,t):r!==void 0&&n>r&&(n=s?$e(r,n,s.max):Math.min(n,r)),n}function g1(n,t,r){return{min:t!==void 0?n.min+t:void 0,max:r!==void 0?n.max+r-(n.max-n.min):void 0}}function A7(n,{top:t,left:r,bottom:s,right:i}){return{x:g1(n.x,r,i),y:g1(n.y,t,s)}}function y1(n,t){let r=t.min-n.min,s=t.max-n.max;return t.max-t.min<n.max-n.min&&([r,s]=[s,r]),{min:r,max:s}}function k7(n,t){return{x:y1(n.x,t.x),y:y1(n.y,t.y)}}function P7(n,t){let r=.5;const s=mn(n),i=mn(t);return i>s?r=Ql(t.min,t.max-s,n.min):s>i&&(r=Ql(n.min,n.max-i,t.min)),Fs(0,1,r)}function R7(n,t){const r={};return t.min!==void 0&&(r.min=t.min-n.min),t.max!==void 0&&(r.max=t.max-n.min),r}const hg=.35;function D7(n=hg){return n===!1?n=0:n===!0&&(n=hg),{x:v1(n,"left","right"),y:v1(n,"top","bottom")}}function v1(n,t,r){return{min:x1(n,t),max:x1(n,r)}}function x1(n,t){return typeof n=="number"?n:n[t]||0}const w1=()=>({translate:0,scale:1,origin:0,originPoint:0}),go=()=>({x:w1(),y:w1()}),b1=()=>({min:0,max:0}),et=()=>({x:b1(),y:b1()});function bn(n){return[n("x"),n("y")]}function _I({top:n,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:n,max:s}}}function O7({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function L7(n,t){if(!t)return n;const r=t({x:n.left,y:n.top}),s=t({x:n.right,y:n.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function wm(n){return n===void 0||n===1}function fg({scale:n,scaleX:t,scaleY:r}){return!wm(n)||!wm(t)||!wm(r)}function oi(n){return fg(n)||TI(n)||n.z||n.rotate||n.rotateX||n.rotateY}function TI(n){return _1(n.x)||_1(n.y)}function _1(n){return n&&n!=="0%"}function Bd(n,t,r){const s=n-r,i=t*s;return r+i}function T1(n,t,r,s,i){return i!==void 0&&(n=Bd(n,i,s)),Bd(n,r,s)+t}function mg(n,t=0,r=1,s,i){n.min=T1(n.min,t,r,s,i),n.max=T1(n.max,t,r,s,i)}function EI(n,{x:t,y:r}){mg(n.x,t.translate,t.scale,t.originPoint),mg(n.y,r.translate,r.scale,r.originPoint)}function V7(n,t,r,s=!1){const i=r.length;if(!i)return;t.x=t.y=1;let o,l;for(let c=0;c<i;c++){o=r[c],l=o.projectionDelta;const u=o.instance;u&&u.style&&u.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&yo(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,EI(n,l)),s&&oi(o.latestValues)&&yo(n,o.latestValues))}t.x=E1(t.x),t.y=E1(t.y)}function E1(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function as(n,t){n.min=n.min+t,n.max=n.max+t}function N1(n,t,[r,s,i]){const o=t[i]!==void 0?t[i]:.5,l=$e(n.min,n.max,o);mg(n,t[r],t[s],l,t.scale)}const M7=["x","scaleX","originX"],F7=["y","scaleY","originY"];function yo(n,t){N1(n.x,t,M7),N1(n.y,t,F7)}function NI(n,t){return _I(L7(n.getBoundingClientRect(),t))}function U7(n,t,r){const s=NI(n,r),{scroll:i}=t;return i&&(as(s.x,i.offset.x),as(s.y,i.offset.y)),s}const jI=({current:n})=>n?n.ownerDocument.defaultView:null,$7=new WeakMap;class B7{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=et(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(qh(f,"page").point)},o=(f,m)=>{const{drag:p,dragPropagation:y,onDragStart:w}=this.getProps();if(p&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=FS(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bn(j=>{let b=this.getAxisMotionValue(j).get()||0;if(cr.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[j];x&&(b=mn(x)*(parseFloat(b)/100))}}this.originPoint[j]=b}),w&&Ae.update(()=>w(f,m),!1,!0);const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},l=(f,m)=>{const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:w,onDrag:T}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:j}=m;if(y&&this.currentDirection===null){this.currentDirection=z7(j),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),T&&T(f,m)},c=(f,m)=>this.stop(f,m),u=()=>bn(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wI(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:jI(this.visualElement)})}stop(t,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ae.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:i}=this.getProps();if(!s||!pu(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(l=C7(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&mo(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=A7(i.layoutBox,r):this.constraints=!1,this.elastic=D7(s),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&bn(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=R7(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!mo(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=U7(s,i.root,this.visualElement.getTransformPagePoint());let l=k7(i.layout.layoutBox,o);if(r){const c=r(O7(l));this.hasMutatedConstraints=!!c,c&&(l=_I(c))}return l}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=bn(f=>{if(!pu(f,r,this.currentDirection))return;let m=u&&u[f]||{};l&&(m={min:0,max:0});const p=i?200:1e6,y=i?40:1e7,w={type:"inertia",velocity:s?t[f]:0,bounceStiffness:p,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(f,w)});return Promise.all(d).then(c)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return s.start(L0(t,s,0,r))}stopAnimation(){bn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),i=s[r];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){bn(r=>{const{drag:s}=this.getProps();if(!pu(r,s,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(r);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[r];o.set(t[r]-$e(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!mo(r)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bn(l=>{const c=this.getAxisMotionValue(l);if(c){const u=c.get();i[l]=P7({min:u,max:u},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),bn(l=>{if(!pu(l,t,null))return;const c=this.getAxisMotionValue(l),{min:u,max:d}=this.constraints[l];c.set($e(u,d,i[l]))})}addListeners(){if(!this.visualElement.current)return;$7.set(this.visualElement,this);const t=this.visualElement.current,r=Dr(t,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();mo(u)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const l=Sr(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(bn(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=u[f].translate,m.set(m.get()+u[f].translate))}),this.visualElement.render())});return()=>{l(),r(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=hg,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function pu(n,t,r){return(t===!0||t===n)&&(r===null||r===n)}function z7(n,t=10){let r=null;return Math.abs(n.y)>t?r="y":Math.abs(n.x)>t&&(r="x"),r}class q7 extends Xs{constructor(t){super(t),this.removeGroupControls=Ke,this.removeListeners=Ke,this.controls=new B7(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ke}unmount(){this.removeGroupControls(),this.removeListeners()}}const j1=n=>(t,r)=>{n&&Ae.update(()=>n(t,r))};class H7 extends Xs{constructor(){super(...arguments),this.removePointerDownListener=Ke}onPointerDown(t){this.session=new wI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:j1(t),onStart:j1(r),onMove:s,onEnd:(o,l)=>{delete this.session,i&&Ae.update(()=>i(o,l))}}}mount(){this.removePointerDownListener=Dr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function W7(){const n=I.useContext(Fh);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=n,i=I.useId();return I.useEffect(()=>s(i),[]),!t&&r?[!1,()=>r&&r(i)]:[!0]}const Fu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function S1(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Va={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(se.test(n))n=parseFloat(n);else return n;const r=S1(n,t.target.x),s=S1(n,t.target.y);return`${r}% ${s}%`}},G7={correct:(n,{treeScale:t,projectionDelta:r})=>{const s=n,i=Us.parse(n);if(i.length>5)return s;const o=Us.createTransformer(n),l=typeof i[0]!="number"?1:0,c=r.x.scale*t.x,u=r.y.scale*t.y;i[0+l]/=c,i[1+l]/=u;const d=$e(c,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=d),typeof i[3+l]=="number"&&(i[3+l]/=d),o(i)}};class K7 extends je.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:i}=this.props,{projection:o}=t;tU(Q7),o&&(r.group&&r.group.add(o),s&&s.register&&i&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Fu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:i,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,i||t.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||Ae.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function SI(n){const[t,r]=W7(),s=I.useContext(_0);return je.createElement(K7,{...n,layoutGroup:s,switchLayoutGroup:I.useContext(_S),isPresent:t,safeToRemove:r})}const Q7={borderRadius:{...Va,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Va,borderTopRightRadius:Va,borderBottomLeftRadius:Va,borderBottomRightRadius:Va,boxShadow:G7},II=["TopLeft","TopRight","BottomLeft","BottomRight"],Y7=II.length,I1=n=>typeof n=="string"?parseFloat(n):n,C1=n=>typeof n=="number"||se.test(n);function X7(n,t,r,s,i,o){i?(n.opacity=$e(0,r.opacity!==void 0?r.opacity:1,J7(s)),n.opacityExit=$e(t.opacity!==void 0?t.opacity:1,0,Z7(s))):o&&(n.opacity=$e(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let l=0;l<Y7;l++){const c=`border${II[l]}Radius`;let u=A1(t,c),d=A1(r,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||C1(u)===C1(d)?(n[c]=Math.max($e(I1(u),I1(d),s),0),(cr.test(d)||cr.test(u))&&(n[c]+="%")):n[c]=d}(t.rotate||r.rotate)&&(n.rotate=$e(t.rotate||0,r.rotate||0,s))}function A1(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const J7=CI(0,.5,XS),Z7=CI(.5,.95,Ke);function CI(n,t,r){return s=>s<n?0:s>t?1:r(Ql(n,t,s))}function k1(n,t){n.min=t.min,n.max=t.max}function wn(n,t){k1(n.x,t.x),k1(n.y,t.y)}function P1(n,t,r,s,i){return n-=t,n=Bd(n,1/r,s),i!==void 0&&(n=Bd(n,1/i,s)),n}function e8(n,t=0,r=1,s=.5,i,o=n,l=n){if(cr.test(t)&&(t=parseFloat(t),t=$e(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=$e(o.min,o.max,s);n===o&&(c-=t),n.min=P1(n.min,t,r,c,i),n.max=P1(n.max,t,r,c,i)}function R1(n,t,[r,s,i],o,l){e8(n,t[r],t[s],t[i],t.scale,o,l)}const t8=["x","scaleX","originX"],n8=["y","scaleY","originY"];function D1(n,t,r,s){R1(n.x,t,t8,r?r.x:void 0,s?s.x:void 0),R1(n.y,t,n8,r?r.y:void 0,s?s.y:void 0)}function O1(n){return n.translate===0&&n.scale===1}function AI(n){return O1(n.x)&&O1(n.y)}function r8(n,t){return n.x.min===t.x.min&&n.x.max===t.x.max&&n.y.min===t.y.min&&n.y.max===t.y.max}function kI(n,t){return Math.round(n.x.min)===Math.round(t.x.min)&&Math.round(n.x.max)===Math.round(t.x.max)&&Math.round(n.y.min)===Math.round(t.y.min)&&Math.round(n.y.max)===Math.round(t.y.max)}function L1(n){return mn(n.x)/mn(n.y)}class s8{constructor(){this.members=[]}add(t){V0(this.members,t),t.scheduleRender()}remove(t){if(M0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let s;for(let i=r;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function V1(n,t,r){let s="";const i=n.x.translate/t.x,o=n.y.translate/t.y;if((i||o)&&(s=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:u,rotateX:d,rotateY:f}=r;u&&(s+=`rotate(${u}deg) `),d&&(s+=`rotateX(${d}deg) `),f&&(s+=`rotateY(${f}deg) `)}const l=n.x.scale*t.x,c=n.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const i8=(n,t)=>n.depth-t.depth;class o8{constructor(){this.children=[],this.isDirty=!1}add(t){V0(this.children,t),this.isDirty=!0}remove(t){M0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(i8),this.isDirty=!1,this.children.forEach(t)}}function a8(n,t){const r=performance.now(),s=({timestamp:i})=>{const o=i-r;o>=t&&(Wr(s),n(o-t))};return Ae.read(s,!0),()=>Wr(s)}function l8(n){window.MotionDebug&&window.MotionDebug.record(n)}function c8(n){return n instanceof SVGElement&&n.tagName!=="svg"}function u8(n,t,r){const s=nn(n)?n:Go(n);return s.start(L0("",s,t,r)),s.animation}const M1=["","X","Y","Z"],d8={visibility:"hidden"},F1=1e3;let h8=0;const ai={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function PI({attachResizeListener:n,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},c=t==null?void 0:t()){this.id=h8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ai.totalNodes=ai.resolvedTargetDeltas=ai.recalculatedProjection=0,this.nodes.forEach(p8),this.nodes.forEach(w8),this.nodes.forEach(b8),this.nodes.forEach(g8),l8(ai)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new o8)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new F0),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c8(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||u)&&(this.isLayoutDirty=!0),n){let m;const p=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=a8(p,250),Fu.hasAnimatedSinceResize&&(Fu.hasAnimatedSinceResize=!1,this.nodes.forEach($1))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeTargetChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||j8,{onLayoutAnimationStart:j,onLayoutAnimationComplete:b}=f.getProps(),v=!this.targetLayout||!kI(this.targetLayout,w)||y,x=!p&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,x);const N={...O0(T,"layout"),onPlay:j,onComplete:b};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else p||$1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_8),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(U1);return}this.isUpdating||this.nodes.forEach(v8),this.isUpdating=!1,this.nodes.forEach(x8),this.nodes.forEach(f8),this.nodes.forEach(m8),this.clearAllSnapshots();const c=performance.now();St.delta=Fs(0,1e3/60,c-St.timestamp),St.timestamp=c,St.isProcessing=!0,um.update.process(St),um.preRender.process(St),um.render.process(St),St.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(y8),this.sharedNodes.forEach(T8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform,c=this.projectionDelta&&!AI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;l&&(c||oi(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),S8(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return et();const c=l.measureViewportBox(),{scroll:u}=this.root;return u&&(as(c.x,u.offset.x),as(c.y,u.offset.y)),c}removeElementScroll(l){const c=et();wn(c,l);for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:m}=d;if(d!==this.root&&f&&m.layoutScroll){if(f.isRoot){wn(c,l);const{scroll:p}=this.root;p&&(as(c.x,-p.offset.x),as(c.y,-p.offset.y))}as(c.x,f.offset.x),as(c.y,f.offset.y)}}return c}applyTransform(l,c=!1){const u=et();wn(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&yo(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),oi(f.latestValues)&&yo(u,f.latestValues)}return oi(this.latestValues)&&yo(u,this.latestValues),u}removeTransform(l){const c=et();wn(c,l);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!oi(d.latestValues))continue;fg(d.latestValues)&&d.updateSnapshot();const f=et(),m=d.measurePageBox();wn(f,m),D1(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return oi(this.latestValues)&&D1(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==St.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=St.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),pl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=et(),this.targetWithTransforms=et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),I7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wn(this.target,this.layout.layoutBox),EI(this.target,this.targetDelta)):wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),pl(this.relativeTargetOrigin,this.target,y.target),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ai.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fg(this.parent.latestValues)||TI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===St.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;wn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;V7(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox);const{target:w}=c;if(!w){this.projectionTransform&&(this.projectionDelta=go(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=go(),this.projectionDeltaWithTransform=go());const T=this.projectionTransform;ml(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=V1(this.projectionDelta,this.treeScale),(this.projectionTransform!==T||this.treeScale.x!==p||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),ai.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,c=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},m=go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=et(),y=u?u.source:void 0,w=this.layout?this.layout.source:void 0,T=y!==w,j=this.getStack(),b=!j||j.members.length<=1,v=!!(T&&!b&&this.options.crossfade===!0&&!this.path.some(N8));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const P=N/1e3;B1(m.x,l.x,P),B1(m.y,l.y,P),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E8(this.relativeTarget,this.relativeTargetOrigin,p,P),x&&r8(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=et()),wn(x,this.relativeTarget)),T&&(this.animationValues=f,X7(f,d,this.latestValues,P,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ae.update(()=>{Fu.hasAnimatedSinceResize=!0,this.currentAnimation=u8(0,F1,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:f}=l;if(!(!c||!u||!d)){if(this!==l&&this.layout&&d&&RI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||et();const m=mn(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+m;const p=mn(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+p}wn(c,u),yo(c,f),ml(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new s8),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(c=!0),!c)return;const d={};for(let f=0;f<M1.length;f++){const m="rotate"+M1[f];u[m]&&(d[m]=u[m],l.setStaticValue(m,0))}l.render();for(const f in d)l.setStaticValue(f,d[f]);l.scheduleRender()}getProjectionStyles(l){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d8;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Mu(l==null?void 0:l.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Mu(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!oi(this.latestValues)&&(T.transform=f?f({},""):"none",this.hasProjected=!1),T}const p=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=V1(this.projectionDeltaWithTransform,this.treeScale,p),f&&(d.transform=f(p,d.transform));const{x:y,y:w}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,m.animationValues?d.opacity=m===this?(u=(c=p.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:d.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Od){if(p[T]===void 0)continue;const{correct:j,applyTo:b}=Od[T],v=d.transform==="none"?p[T]:j(p[T],m);if(b){const x=b.length;for(let N=0;N<x;N++)d[b[N]]=v}else d[T]=v}return this.options.layoutId&&(d.pointerEvents=m===this?Mu(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(U1),this.root.sharedNodes.clear()}}}function f8(n){n.updateLayout()}function m8(n){var t;const r=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&r&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=n.layout,{animationType:o}=n.options,l=r.source!==n.layout.source;o==="size"?bn(m=>{const p=l?r.measuredBox[m]:r.layoutBox[m],y=mn(p);p.min=s[m].min,p.max=p.min+y}):RI(o,r.layoutBox,s)&&bn(m=>{const p=l?r.measuredBox[m]:r.layoutBox[m],y=mn(s[m]);p.max=p.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+y)});const c=go();ml(c,s,r.layoutBox);const u=go();l?ml(u,n.applyTransform(i,!0),r.measuredBox):ml(u,s,r.layoutBox);const d=!AI(c);let f=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:y}=m;if(p&&y){const w=et();pl(w,r.layoutBox,p.layoutBox);const T=et();pl(T,s,y.layoutBox),kI(w,T)||(f=!0),m.options.layoutRoot&&(n.relativeTarget=T,n.relativeTargetOrigin=w,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function p8(n){ai.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function g8(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function y8(n){n.clearSnapshot()}function U1(n){n.clearMeasurements()}function v8(n){n.isLayoutDirty=!1}function x8(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function $1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function w8(n){n.resolveTargetDelta()}function b8(n){n.calcProjection()}function _8(n){n.resetRotation()}function T8(n){n.removeLeadSnapshot()}function B1(n,t,r){n.translate=$e(t.translate,0,r),n.scale=$e(t.scale,1,r),n.origin=t.origin,n.originPoint=t.originPoint}function z1(n,t,r,s){n.min=$e(t.min,r.min,s),n.max=$e(t.max,r.max,s)}function E8(n,t,r,s){z1(n.x,t.x,r.x,s),z1(n.y,t.y,r.y,s)}function N8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const j8={duration:.45,ease:[.4,0,.1,1]},q1=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),H1=q1("applewebkit/")&&!q1("chrome/")?Math.round:Ke;function W1(n){n.min=H1(n.min),n.max=H1(n.max)}function S8(n){W1(n.x),W1(n.y)}function RI(n,t,r){return n==="position"||n==="preserve-aspect"&&!dg(L1(t),L1(r),.2)}const I8=PI({attachResizeListener:(n,t)=>Sr(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bm={current:void 0},DI=PI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!bm.current){const n=new I8({});n.mount(window),n.setOptions({layoutScroll:!0}),bm.current=n}return bm.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),C8={pan:{Feature:H7},drag:{Feature:q7,ProjectionNode:DI,MeasureLayout:SI}},A8=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function k8(n){const t=A8.exec(n);if(!t)return[,];const[,r,s]=t;return[r,s]}function pg(n,t,r=1){const[s,i]=k8(n);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const l=o.trim();return gI(l)?parseFloat(l):l}else return sg(i)?pg(i,t,r+1):i}function P8(n,{...t},r){const s=n.current;if(!(s instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),n.values.forEach(i=>{const o=i.get();if(!sg(o))return;const l=pg(o,s);l&&i.set(l)});for(const i in t){const o=t[i];if(!sg(o))continue;const l=pg(o,s);l&&(t[i]=l,r||(r={}),r[i]===void 0&&(r[i]=o))}return{target:t,transitionEnd:r}}const R8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),OI=n=>R8.has(n),D8=n=>Object.keys(n).some(OI),G1=n=>n===zi||n===se,K1=(n,t)=>parseFloat(n.split(", ")[t]),Q1=(n,t)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return K1(i[1],t);{const o=s.match(/^matrix\((.+)\)$/);return o?K1(o[1],n):0}},O8=new Set(["x","y","z"]),L8=vc.filter(n=>!O8.has(n));function V8(n){const t=[];return L8.forEach(r=>{const s=n.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t.length&&n.render(),t}const Ko={width:({x:n},{paddingLeft:t="0",paddingRight:r="0"})=>n.max-n.min-parseFloat(t)-parseFloat(r),height:({y:n},{paddingTop:t="0",paddingBottom:r="0"})=>n.max-n.min-parseFloat(t)-parseFloat(r),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:Q1(4,13),y:Q1(5,14)};Ko.translateX=Ko.x;Ko.translateY=Ko.y;const M8=(n,t,r)=>{const s=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:l}=o,c={};l==="none"&&t.setStaticValue("display",n.display||"block"),r.forEach(d=>{c[d]=Ko[d](s,o)}),t.render();const u=t.measureViewportBox();return r.forEach(d=>{const f=t.getValue(d);f&&f.jump(c[d]),n[d]=Ko[d](u,o)}),n},F8=(n,t,r={},s={})=>{t={...t},s={...s};const i=Object.keys(t).filter(OI);let o=[],l=!1;const c=[];if(i.forEach(u=>{const d=n.getValue(u);if(!n.hasValue(u))return;let f=r[u],m=La(f);const p=t[u];let y;if(Vd(p)){const w=p.length,T=p[0]===null?1:0;f=p[T],m=La(f);for(let j=T;j<w&&p[j]!==null;j++)y?A0(La(p[j])===y):y=La(p[j])}else y=La(p);if(m!==y)if(G1(m)&&G1(y)){const w=d.get();typeof w=="string"&&d.set(parseFloat(w)),typeof p=="string"?t[u]=parseFloat(p):Array.isArray(p)&&y===se&&(t[u]=p.map(parseFloat))}else m!=null&&m.transform&&(y!=null&&y.transform)&&(f===0||p===0)?f===0?d.set(y.transform(f)):t[u]=m.transform(p):(l||(o=V8(n),l=!0),c.push(u),s[u]=s[u]!==void 0?s[u]:t[u],d.jump(p))}),c.length){const u=c.indexOf("height")>=0?window.pageYOffset:null,d=M8(t,n,c);return o.length&&o.forEach(([f,m])=>{n.getValue(f).set(m)}),n.render(),Uh&&u!==null&&window.scrollTo({top:u}),{target:d,transitionEnd:s}}else return{target:t,transitionEnd:s}};function U8(n,t,r,s){return D8(t)?F8(n,t,r,s):{target:t,transitionEnd:s}}const $8=(n,t,r,s)=>{const i=P8(n,t,s);return t=i.target,s=i.transitionEnd,U8(n,t,r,s)},gg={current:null},LI={current:!1};function B8(){if(LI.current=!0,!!Uh)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>gg.current=n.matches;n.addListener(t),t()}else gg.current=!1}function z8(n,t,r){const{willChange:s}=t;for(const i in t){const o=t[i],l=r[i];if(nn(o))n.addValue(i,o),$d(s)&&s.add(i);else if(nn(l))n.addValue(i,Go(o,{owner:n})),$d(s)&&s.remove(i);else if(l!==o)if(n.hasValue(i)){const c=n.getValue(i);!c.hasAnimated&&c.set(o)}else{const c=n.getStaticValue(i);n.addValue(i,Go(c!==void 0?c:o,{owner:n}))}}for(const i in r)t[i]===void 0&&n.removeValue(i);return t}const Y1=new WeakMap,VI=Object.keys(Kl),q8=VI.length,X1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],H8=b0.length;class W8{constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ae.render(this.render,!1,!0);const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.isControllingVariants=Bh(r),this.isVariantNode=bS(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{});for(const m in f){const p=f[m];c[m]!==void 0&&nn(p)&&(p.set(c[m],!1),$d(d)&&d.add(m))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,Y1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),LI.current||B8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Y1.delete(this.current),this.projection&&this.projection.unmount(),Wr(this.notifyUpdate),Wr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const s=Bi.has(t),i=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ae.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},s,i,o){let l,c;for(let u=0;u<q8;u++){const d=VI[u],{isEnabled:f,Feature:m,ProjectionNode:p,MeasureLayout:y}=Kl[d];p&&(l=p),f(r)&&(!this.features[d]&&m&&(this.features[d]=new m(this)),y&&(c=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:d,drag:f,dragConstraints:m,layoutScroll:p,layoutRoot:y}=r;this.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!f||m&&mo(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:p,layoutRoot:y})}return c}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):et()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<X1.length;s++){const i=X1[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=z8(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const r={};for(let s=0;s<H8;s++){const i=b0[s],o=this.props[i];(Gl(o)||o===!1)&&(r[i]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=Go(r,{owner:this}),this.addValue(t,s)),s}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(r=C0(this.props,s))===null||r===void 0?void 0:r[t]:void 0;if(s&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!nn(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new F0),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class MI extends W8{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...s},{transformValues:i},o){let l=c7(s,t||{},this);if(i&&(r&&(r=i(r)),s&&(s=i(s)),l&&(l=i(l))),o){a7(this,s,l);const c=$8(this,s,l,r);r=c.transitionEnd,s=c.target}return{transition:t,transitionEnd:r,...s}}}function G8(n){return window.getComputedStyle(n)}class K8 extends MI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Bi.has(r)){const s=D0(r);return s&&s.default||0}else{const s=G8(t),i=(NS(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return NI(t,r)}build(t,r,s,i){E0(t,r,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,r){return I0(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,s,i){kS(t,r,s,i)}}class Q8 extends MI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Bi.has(r)){const s=D0(r);return s&&s.default||0}return r=PS.has(r)?r:x0(r),t.getAttribute(r)}measureInstanceViewportBox(){return et()}scrapeMotionValuesFromProps(t,r){return DS(t,r)}build(t,r,s,i){j0(t,r,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,r,s,i){RS(t,r,s,i)}mount(t){this.isSVGTag=S0(t.tagName),super.mount(t)}}const Y8=(n,t)=>T0(n)?new Q8(t,{enableHardwareAcceleration:!1}):new K8(t,{enableHardwareAcceleration:!0}),X8={layout:{ProjectionNode:DI,MeasureLayout:SI}},J8={...E7,...qU,...C8,...X8},z=ZF((n,t)=>kU(n,t,J8,Y8));function FI(){const n=I.useRef(!1);return v0(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function Z8(){const n=FI(),[t,r]=I.useState(0),s=I.useCallback(()=>{n.current&&r(t+1)},[t]);return[I.useCallback(()=>Ae.postRender(s),[s]),t]}class e$ extends I.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function t$({children:n,isPresent:t}){const r=I.useId(),s=I.useRef(null),i=I.useRef({width:0,height:0,top:0,left:0});return I.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u}=i.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),I.createElement(e$,{isPresent:t,childRef:s,sizeRef:i},I.cloneElement(n,{ref:s}))}const _m=({children:n,initial:t,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l})=>{const c=OS(n$),u=I.useId(),d=I.useMemo(()=>({id:u,initial:t,isPresent:r,custom:i,onExitComplete:f=>{c.set(f,!0);for(const m of c.values())if(!m)return;s&&s()},register:f=>(c.set(f,!1),()=>c.delete(f))}),o?void 0:[r]);return I.useMemo(()=>{c.forEach((f,m)=>c.set(m,!1))},[r]),I.useEffect(()=>{!r&&!c.size&&s&&s()},[r]),l==="popLayout"&&(n=I.createElement(t$,{isPresent:r},n)),I.createElement(Fh.Provider,{value:d},n)};function n$(){return new Map}function r$(n){return I.useEffect(()=>()=>n(),[])}const li=n=>n.key||"";function s$(n,t){n.forEach(r=>{const s=li(r);t.set(s,r)})}function i$(n){const t=[];return I.Children.forEach(n,r=>{I.isValidElement(r)&&t.push(r)}),t}const J1=({children:n,custom:t,initial:r=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"})=>{const c=I.useContext(_0).forceRender||Z8()[0],u=FI(),d=i$(n);let f=d;const m=I.useRef(new Map).current,p=I.useRef(f),y=I.useRef(new Map).current,w=I.useRef(!0);if(v0(()=>{w.current=!1,s$(d,y),p.current=f}),r$(()=>{w.current=!0,y.clear(),m.clear()}),w.current)return I.createElement(I.Fragment,null,f.map(v=>I.createElement(_m,{key:li(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:l},v)));f=[...f];const T=p.current.map(li),j=d.map(li),b=T.length;for(let v=0;v<b;v++){const x=T[v];j.indexOf(x)===-1&&!m.has(x)&&m.set(x,void 0)}return l==="wait"&&m.size&&(f=[]),m.forEach((v,x)=>{if(j.indexOf(x)!==-1)return;const N=y.get(x);if(!N)return;const P=T.indexOf(x);let O=v;if(!O){const S=()=>{m.delete(x);const _=Array.from(y.keys()).filter(C=>!j.includes(C));if(_.forEach(C=>y.delete(C)),p.current=d.filter(C=>{const R=li(C);return R===x||_.includes(R)}),!m.size){if(u.current===!1)return;c(),s&&s()}};O=I.createElement(_m,{key:li(N),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:l},N),m.set(x,O)}f.splice(P,0,O)}),f=f.map(v=>{const x=v.key;return m.has(x)?v:I.createElement(_m,{key:li(v),isPresent:!0,presenceAffectsLayout:o,mode:l},v)}),I.createElement(I.Fragment,null,m.size?f:f.map(v=>I.cloneElement(v)))},o$=fN("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=je.forwardRef(({className:n,variant:t,size:r,asChild:s=!1,...i},o)=>{const l=s?IR:"button";return a.jsx(l,{className:Hs(o$({variant:t,size:r,className:n})),ref:o,...i})});G.displayName="Button";const a$=()=>{var L;const n=Rt(),t=Pn(),[r,s]=I.useState(!1),[i,o]=I.useState(!1),l=I.useRef(null),{user:c,isAuthenticated:u,isAdmin:d,isOwner:f,logout:m,loading:p}=dt(),[y,w]=I.useState(!1),[T,j]=I.useState(!0),b=I.useRef(!1);I.useEffect(()=>{(async()=>{if(c)try{const $=await d(),Z=await f();console.log("Navbar - User role:",c.role,"isAdmin:",$,"isOwner:",Z),w($||Z)}catch($){console.error("Error checking admin status:",$),w(!1)}else w(!1),b.current=!1,window.location.pathname.startsWith("/admin")&&n("/");j(!1)})()},[c,d,f,n]),I.useEffect(()=>{function D($){l.current&&!l.current.contains($.target)&&o(!1)}return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]),I.useEffect(()=>(r?document.body.classList.add("mobile-menu-open"):document.body.classList.remove("mobile-menu-open"),()=>{document.body.classList.remove("mobile-menu-open")}),[r]);const v=async()=>{try{await m(),o(!1),U({title:"تم تسجيل الخروج بنجاح",description:"نراك قريباً!"}),n("/")}catch(D){console.error("Logout error:",D),U({title:"خطأ",description:"حدث خطأ أثناء تسجيل الخروج. يرجى المحاولة مرة أخرى.",variant:"destructive"})}},x=()=>{o(!1),n("/admin")},N=()=>{o(!1),n("/admin?tab=users")},P=()=>{o(!1),n("/admin?tab=products")},O=()=>{o(!1),n("/admin?tab=consultations")},S=()=>{o(!1),n("/admin?tab=courses")},_=()=>{o(!1),(c==null?void 0:c.role)==="owner"?n("/admin/profile"):n(y?"/admin/profile":"/profile")},C=async()=>{try{await m(),o(!1),n("/")}catch(D){console.error("Logout error:",D),U({title:"خطأ",description:"حدث خطأ أثناء تسجيل الخروج. يرجى المحاولة مرة أخرى.",variant:"destructive"})}},R=[{name:"الرئيسية",path:"/"},{name:"عن الأكاديمية",path:"/about"},{name:"المقالات",path:"/articles"},{name:"الإعلانات",path:"/ads"},{name:"الاستشارات",path:"/consultations"},{name:"الدورات",path:"/courses"}],A=()=>{var D;return p?a.jsx("div",{className:"h-8 w-8 rounded-full border-2 border-green-500 border-t-transparent animate-spin"}):u()?a.jsxs("div",{className:"relative",ref:l,children:[a.jsxs("button",{onClick:()=>o(!i),className:"navbar-user-profile focus:outline-none hover:bg-green-50 rounded-xl px-4 py-2.5 transition-all duration-200 border border-transparent hover:border-green-200","aria-label":"حساب المستخدم",children:[c!=null&&c.photoURL?a.jsx("img",{src:c.photoURL,alt:c.displayName||"صورة المستخدم",className:"h-12 w-12 rounded-full object-cover border-2 border-green-200 shadow-md flex-shrink-0"}):a.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center border-2 border-green-200 shadow-md flex-shrink-0",children:a.jsx(Se,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"navbar-user-info",children:[a.jsx("span",{className:"hidden md:inline navbar-user-name text-gray-800 font-heading navbar-text-bold",children:(c==null?void 0:c.displayName)||((D=c==null?void 0:c.email)==null?void 0:D.split("@")[0])||"حسابي"}),a.jsx("span",{className:"hidden md:inline navbar-user-role text-gray-500 font-body navbar-text-regular",children:(c==null?void 0:c.role)==="owner"?"مالك الموقع":(c==null?void 0:c.role)==="admin"?"مدير":"مستخدم"})]}),a.jsx(E4,{className:`h-4 w-4 text-gray-500 transition-transform duration-200 flex-shrink-0 ${i?"transform rotate-180":""}`,"aria-hidden":"true"})]}),a.jsx(J1,{children:i&&a.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:a.jsxs("div",{className:"py-1",children:[y||(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="owner"?a.jsxs("div",{children:[a.jsxs("button",{onClick:x,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Ap,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة لوحة التحكم"})]}),a.jsxs("button",{onClick:N,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Sn,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة المستخدمين"})]}),a.jsxs("button",{onClick:P,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(cn,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة الإعلانات"})]}),a.jsxs("button",{onClick:O,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Ue,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة الاستشارات"})]}),a.jsxs("button",{onClick:S,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Cr,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة الدورات"})]}),a.jsxs("button",{onClick:_,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Se,{className:"h-5 w-5"}),a.jsx("span",{children:(c==null?void 0:c.role)==="owner"?"الملف الشخصي للمالك":"الملف الشخصي للمدير"})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:_,className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(Se,{className:"h-5 w-5"}),a.jsx("span",{children:"الملف الشخصي"})]})}),a.jsx("div",{className:"border-t border-gray-100 my-1"}),a.jsxs("button",{onClick:C,className:"w-full text-right px-4 py-3 text-base font-bold text-red-600 hover:bg-gray-100 flex items-center justify-end gap-3 font-heading",children:[a.jsx(L4,{className:"h-5 w-5"}),a.jsx("span",{children:"تسجيل الخروج"})]})]})})})]}):a.jsxs($t,{to:"/auth",state:{from:t.pathname},className:"inline-flex items-center justify-center px-6 py-2.5 border border-transparent text-sm font-bold rounded-xl text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 font-heading shadow-lg hover:shadow-xl transition-all duration-200 whitespace-nowrap",children:[a.jsx(Se,{className:"h-4 w-4 ml-2"}),a.jsx("span",{children:"تسجيل الدخول"})]})};return a.jsxs("nav",{className:"bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-50 border-b border-green-100",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-20",children:[a.jsx("div",{className:"navbar-logo-section",children:a.jsxs($t,{to:"/",className:"navbar-logo",children:[a.jsx(z.div,{whileHover:{rotate:360},transition:{duration:.5},className:"bg-gradient-to-r from-green-500 to-green-600 p-2.5 rounded-full shadow-lg flex-shrink-0",children:a.jsx(uh,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"navbar-brand-text",children:[a.jsx("span",{className:"navbar-brand-title gradient-text font-heading",children:"أكاديمية الطب الأخضر"}),a.jsx("p",{className:"navbar-brand-subtitle text-green-600 font-body",children:"الإلكترونية"})]})]})}),a.jsx("div",{className:"navbar-navigation",children:a.jsx("div",{className:"flex items-center justify-center space-x-2 space-x-reverse",children:R.map((D,$)=>a.jsx($t,{to:D.path,onClick:Z=>{t.pathname===D.path&&(Z.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}))},className:`navbar-link text-gray-700 hover:text-green-600 px-4 py-2.5 rounded-lg text-sm font-bold font-heading transition-all duration-200 hover:bg-green-50 tracking-wide leading-relaxed navbar-text navbar-text-bold ${t.pathname===D.path?"text-green-600 bg-green-50 shadow-sm active":""}`,children:D.name},D.path))})}),a.jsx("div",{className:"navbar-auth-section",children:A()}),a.jsx("div",{className:"md:hidden flex items-center flex-shrink-0",children:a.jsxs("button",{onClick:()=>s(!r),className:"inline-flex items-center justify-center p-2.5 rounded-lg text-gray-700 hover:text-green-600 hover:bg-green-50 focus:outline-none transition-colors","aria-expanded":r,children:[a.jsx("span",{className:"sr-only",children:"Open main menu"}),r?a.jsx(yn,{className:"block h-6 w-6","aria-hidden":"true"}):a.jsx(V4,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),a.jsx(J1,{children:r&&a.jsxs(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"md:hidden overflow-hidden bg-white shadow-lg",children:[a.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white",children:R.map(D=>a.jsx($t,{to:D.path,onClick:()=>{s(!1),t.pathname===D.path&&window.scrollTo({top:0,behavior:"smooth"})},className:`block px-5 py-4 rounded-lg text-lg font-bold font-heading tracking-wide leading-relaxed navbar-text navbar-text-bold ${t.pathname===D.path?"bg-green-50 text-green-600":"text-gray-700 hover:bg-green-50 hover:text-green-600"}`,children:D.name},D.path))}),a.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200 px-4 space-y-3 bg-white",children:p?a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-600"})}):u()?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center px-4 py-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl mx-2 border border-green-200",children:[c!=null&&c.photoURL?a.jsx("img",{src:c.photoURL,alt:c.displayName||"صورة المستخدم",className:"h-14 w-14 rounded-full object-cover border-3 border-green-200 shadow-lg"}):a.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center border-3 border-green-200 shadow-lg",children:a.jsx(Se,{className:"h-7 w-7 text-green-600"})}),a.jsxs("div",{className:"mr-4 space-y-1 navbar-text",children:[a.jsx("p",{className:"navbar-user-name text-gray-800 font-heading navbar-text-bold",children:(c==null?void 0:c.displayName)||((L=c==null?void 0:c.email)==null?void 0:L.split("@")[0])}),a.jsx("p",{className:"navbar-user-role text-gray-500 font-body navbar-text-regular",children:(c==null?void 0:c.role)==="owner"?"مالك الموقع":(c==null?void 0:c.role)==="admin"?"مدير":"مستخدم"}),a.jsx("p",{className:"text-xs text-gray-400 font-body tracking-wide navbar-text-regular",children:c==null?void 0:c.email})]})]}),a.jsxs("div",{className:"py-1",children:[y||(c==null?void 0:c.role)==="admin"||(c==null?void 0:c.role)==="owner"?a.jsxs(a.Fragment,{children:[a.jsxs($t,{to:"/admin",className:"block px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",onClick:()=>s(!1),children:[a.jsx(Ap,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة لوحة التحكم"})]}),a.jsxs($t,{to:"/admin/profile",className:"block px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",onClick:()=>s(!1),children:[a.jsx(Se,{className:"h-5 w-5"}),a.jsx("span",{children:(c==null?void 0:c.role)==="owner"?"الملف الشخصي للمالك":"الملف الشخصي للمدير"})]}),a.jsxs("button",{onClick:()=>{s(!1),n("/admin?tab=users")},className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",children:[a.jsx(Sn,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة المستخدمين"})]}),a.jsxs("button",{onClick:()=>{s(!1),n("/admin?tab=products")},className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",children:[a.jsx(cn,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة الإعلانات"})]}),a.jsxs("button",{onClick:()=>{s(!1),n("/admin?tab=consultations")},className:"w-full text-right px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",children:[a.jsx(Ue,{className:"h-5 w-5"}),a.jsx("span",{children:"إدارة الاستشارات"})]})]}):a.jsx("div",{children:a.jsxs($t,{to:"/profile",className:"block px-4 py-3 text-base font-bold text-gray-700 hover:bg-gray-100 flex items-center gap-3 font-heading",onClick:()=>s(!1),children:[a.jsx(Se,{className:"h-5 w-5"}),a.jsx("span",{children:"الملف الشخصي"})]})}),a.jsx("div",{className:"border-t border-gray-100 my-1"}),a.jsxs("button",{onClick:()=>{v(),s(!1)},className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-3 rounded-md text-base font-bold flex items-center justify-center font-heading",children:[a.jsx(Se,{className:"ml-2 h-5 w-5"}),a.jsx("span",{children:"تسجيل الخروج"})]})]})]}):a.jsxs($t,{to:"/auth",className:"block w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-3 rounded-md text-base font-bold flex items-center justify-center font-heading",onClick:()=>s(!1),children:[a.jsx(Se,{className:"ml-2 h-5 w-5"}),a.jsx("span",{children:"تسجيل الدخول"})]})})]})})]})},l$=()=>{const n=[{name:"فيسبوك الرسمي",url:"https://www.facebook.com/share/19KRNfioLz/",icon:Ip,color:"text-blue-600"},{name:"صفحة الأكاديمية",url:"https://www.facebook.com/mohamedkhlil186com?mibextid=ZbWKwL",icon:Ip,color:"text-blue-600"},{name:"يوتيوب",url:"https://www.youtube.com/@Mohamedk223",icon:xN,color:"text-red-600"},{name:"واتساب الأكاديمية",url:"https://chat.whatsapp.com/Ja86ahQfI6SF48IFIgiODm",icon:Ue,color:"text-green-600"},{name:"واتساب الرقية",url:"https://chat.whatsapp.com/FszfhTnQQuE5MulOsnw9Vp",icon:Ue,color:"text-green-600"}];return a.jsx("footer",{className:"bg-gradient-to-r from-green-800 to-green-900 text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center md:text-right",children:[a.jsxs("div",{className:"flex items-center justify-center md:justify-start space-x-2 space-x-reverse mb-4",children:[a.jsx(z.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"bg-white/20 p-2 rounded-full",children:a.jsx(uh,{className:"h-6 w-6 text-green-300"})}),a.jsx("div",{children:a.jsx("span",{className:"text-xl font-bold font-arabic",children:"أكاديمية الطب الأخضر الإلكترونية"})})]}),a.jsx("p",{className:"text-green-200 mb-4 font-arabic",children:"منصة إلكترونية متخصصة في تقديم برامج علاجية، استشارات، ووصفات علمية من التراث العربي الإسلامي"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-semibold mb-4 block font-arabic",children:"معلومات التواصل"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("p",{className:"text-green-200 font-arabic",children:[a.jsx("span",{className:"font-semibold",children:"الباحث والمعالج:"})," أبو حسين محمد خليل"]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse",children:[a.jsx(Gn,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-green-200",children:"01205830777"})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse",children:[a.jsx(Gn,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-green-200",children:"01093280132"})]})]})]}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("span",{className:"text-lg font-semibold mb-4 block font-arabic",children:"تابعنا على"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map((t,r)=>a.jsxs(z.a,{href:t.url,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 space-x-reverse bg-white/10 hover:bg-white/20 rounded-lg p-2 transition-colors",children:[a.jsx(t.icon,{className:`h-4 w-4 ${t.color}`}),a.jsx("span",{className:"text-sm text-green-200",children:t.name})]},r))})]})]}),a.jsx("div",{className:"mt-8 pt-8 border-t border-green-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-semibold mb-4 block font-arabic",children:"الخبرات والتخصصات"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:a.jsx("span",{className:"text-green-200 text-sm font-arabic",children:"معالج بالحجامة والرُقية الشرعية"})}),a.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:a.jsx("span",{className:"text-green-200 text-sm font-arabic",children:"معالج بالأعشاب والزيوت الطبيعية"})}),a.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:a.jsx("span",{className:"text-green-200 text-sm font-arabic",children:"عضو ذهبي بجامعة باشن الأمريكية"})}),a.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:a.jsx("span",{className:"text-green-200 text-sm font-arabic",children:"مدرس ومحاضر للطب القديم"})})]})]})}),a.jsxs("div",{className:"mt-8 pt-8 border-t border-green-700 text-center",children:[a.jsx("p",{className:"text-green-300 text-sm font-arabic",children:"© 2025 أكاديمية الطب الأخضر الإلكترونية. جميع الحقوق محفوظة."}),a.jsxs("p",{className:"text-green-300 text-base mt-3 font-medium",children:["Created by"," ",a.jsx("a",{href:"http://www.tailorweb.site",target:"_blank",rel:"noopener noreferrer",className:"text-green-100 hover:text-white hover:underline transition-colors text-lg",children:"tailorweb"})]})]})]})})},c$=()=>{const{pathname:n}=Pn();return I.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[n]),null},u$=()=>{const{user:n,isAdmin:t,isOwner:r}=dt(),s=Rt(),i=I.useRef(!1);return I.useEffect(()=>{(async()=>{if(n&&!i.current)try{const l=await t(),c=await r();if(console.log("🔄 AdminRedirect - Checking status:",{userRole:n.role,adminStatus:l,ownerStatus:c,currentPath:window.location.pathname}),(l||c)&&!window.location.pathname.startsWith("/admin")){const u=document.referrer;(u.includes("/auth")||u.includes("login")||u.includes("signup"))&&(i.current=!0,console.log("🔄 Redirecting to admin dashboard after login..."),U({title:"توجيه تلقائي",description:`مرحباً ${n.name}! سيتم توجيهك إلى لوحة الإدارة.`}),setTimeout(()=>{s("/admin",{replace:!0})},1e3))}}catch(l){console.error("Error in AdminRedirect:",l)}})()},[n,t,r,s]),I.useEffect(()=>{n||(i.current=!1)},[n]),null},d$=(n,t)=>{if(!n)return!1;const r=n.role==="admin"||n.role==="owner",s=t.startsWith("/admin"),i=document.referrer.includes("/auth")||document.referrer.includes("login")||document.referrer.includes("signup");return r&&!s&&i},h$=(n,t)=>{if(!n)return!0;const r=n.role==="admin"||n.role==="owner",s=t.startsWith("/admin");return!r&&s},Tm=(n,t,r)=>{console.log(`🔄 ${r}:`,{userRole:n==null?void 0:n.role,userName:n==null?void 0:n.name,currentPath:t,timestamp:new Date().toISOString()})},f$=()=>{const{user:n,isAdmin:t,isOwner:r}=dt(),s=Pn(),i=Rt();return I.useEffect(()=>{(async()=>{if(s.pathname.startsWith("/admin"))if(n)try{const l=await t(),c=await r();if(console.log("🔒 AdminRouteGuard - Checking access:",{currentPath:s.pathname,userRole:n.role,adminStatus:l,ownerStatus:c}),d$(n,s.pathname)){Tm(n,s.pathname,"Redirecting to admin dashboard after login"),i("/admin",{replace:!0});return}if(h$(n,s.pathname)){Tm(n,s.pathname,"Redirecting away from admin area"),i("/",{replace:!0});return}}catch(l){console.error("Error in AdminRouteGuard:",l)}else s.pathname.startsWith("/admin")&&(Tm(null,s.pathname,"No user, redirecting away from admin area"),i("/",{replace:!0}))})()},[n,s.pathname,t,r,i]),null};var UI={exports:{}},m$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p$=m$,g$=p$;function $I(){}function BI(){}BI.resetWarningCache=$I;var y$=function(){function n(s,i,o,l,c,u){if(u!==g$){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function t(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,elementType:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:BI,resetWarningCache:$I};return r.PropTypes=r,r};UI.exports=y$();var v$=UI.exports;const Le=Yo(v$);function x$(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var zI=I,w$=x$(zI);function Z1(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function b$(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}var _$=!!(typeof window<"u"&&window.document&&window.document.createElement);function T$(n,t,r){if(typeof n!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function s(i){return i.displayName||i.name||"Component"}return function(o){if(typeof o!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],c;function u(){c=n(l.map(function(f){return f.props})),d.canUseDOM?t(c):r&&(c=r(c))}var d=function(f){b$(m,f);function m(){return f.apply(this,arguments)||this}m.peek=function(){return c},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var w=c;return c=void 0,l=[],w};var p=m.prototype;return p.UNSAFE_componentWillMount=function(){l.push(this),u()},p.componentDidUpdate=function(){u()},p.componentWillUnmount=function(){var w=l.indexOf(this);l.splice(w,1),u()},p.render=function(){return w$.createElement(o,this.props)},m}(zI.PureComponent);return Z1(d,"displayName","SideEffect("+s(o)+")"),Z1(d,"canUseDOM",_$),d}}var E$=T$;const N$=Yo(E$);var j$=typeof Element<"u",S$=typeof Map=="function",I$=typeof Set=="function",C$=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Uu(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(n)){if(r=n.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!Uu(n[s],t[s]))return!1;return!0}var o;if(S$&&n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(o=n.entries();!(s=o.next()).done;)if(!t.has(s.value[0]))return!1;for(o=n.entries();!(s=o.next()).done;)if(!Uu(s.value[1],t.get(s.value[0])))return!1;return!0}if(I$&&n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(o=n.entries();!(s=o.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(C$&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(t)){if(r=n.length,r!=t.length)return!1;for(s=r;s--!==0;)if(n[s]!==t[s])return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof t.valueOf=="function")return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof t.toString=="function")return n.toString()===t.toString();if(i=Object.keys(n),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;if(j$&&n instanceof Element)return!1;for(s=r;s--!==0;)if(!((i[s]==="_owner"||i[s]==="__v"||i[s]==="__o")&&n.$$typeof)&&!Uu(n[i[s]],t[i[s]]))return!1;return!0}return n!==n&&t!==t}var A$=function(t,r){try{return Uu(t,r)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const k$=Yo(A$);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e_=Object.getOwnPropertySymbols,P$=Object.prototype.hasOwnProperty,R$=Object.prototype.propertyIsEnumerable;function D$(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function O$(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var s=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(s.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var L$=O$()?Object.assign:function(n,t){for(var r,s=D$(n),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var l in r)P$.call(r,l)&&(s[l]=r[l]);if(e_){i=e_(r);for(var c=0;c<i.length;c++)R$.call(r,i[c])&&(s[i[c]]=r[i[c]])}}return s};const V$=Yo(L$);var wi={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},he={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(he).map(function(n){return he[n]});var Ve={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},zd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Yl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},M$=Object.keys(zd).reduce(function(n,t){return n[zd[t]]=t,n},{}),F$=[he.NOSCRIPT,he.SCRIPT,he.STYLE],zn="data-react-helmet",U$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$$=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},B$=function(){function n(t,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,s){return r&&n(t.prototype,r),s&&n(t,s),t}}(),Wt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},z$=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},t_=function(n,t){var r={};for(var s in n)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);return r},q$=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},yg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},H$=function(t){var r=Co(t,he.TITLE),s=Co(t,Yl.TITLE_TEMPLATE);if(s&&r)return s.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var i=Co(t,Yl.DEFAULT_TITLE);return r||i||void 0},W$=function(t){return Co(t,Yl.ON_CHANGE_CLIENT_STATE)||function(){}},Em=function(t,r){return r.filter(function(s){return typeof s[t]<"u"}).map(function(s){return s[t]}).reduce(function(s,i){return Wt({},s,i)},{})},G$=function(t,r){return r.filter(function(s){return typeof s[he.BASE]<"u"}).map(function(s){return s[he.BASE]}).reverse().reduce(function(s,i){if(!s.length)for(var o=Object.keys(i),l=0;l<o.length;l++){var c=o[l],u=c.toLowerCase();if(t.indexOf(u)!==-1&&i[u])return s.concat(i)}return s},[])},Ma=function(t,r,s){var i={};return s.filter(function(o){return Array.isArray(o[t])?!0:(typeof o[t]<"u"&&X$("Helmet: "+t+' should be of type "Array". Instead found type "'+U$(o[t])+'"'),!1)}).map(function(o){return o[t]}).reverse().reduce(function(o,l){var c={};l.filter(function(p){for(var y=void 0,w=Object.keys(p),T=0;T<w.length;T++){var j=w[T],b=j.toLowerCase();r.indexOf(b)!==-1&&!(y===Ve.REL&&p[y].toLowerCase()==="canonical")&&!(b===Ve.REL&&p[b].toLowerCase()==="stylesheet")&&(y=b),r.indexOf(j)!==-1&&(j===Ve.INNER_HTML||j===Ve.CSS_TEXT||j===Ve.ITEM_PROP)&&(y=j)}if(!y||!p[y])return!1;var v=p[y].toLowerCase();return i[y]||(i[y]={}),c[y]||(c[y]={}),i[y][v]?!1:(c[y][v]=!0,!0)}).reverse().forEach(function(p){return o.push(p)});for(var u=Object.keys(c),d=0;d<u.length;d++){var f=u[d],m=V$({},i[f],c[f]);i[f]=m}return o},[]).reverse()},Co=function(t,r){for(var s=t.length-1;s>=0;s--){var i=t[s];if(i.hasOwnProperty(r))return i[r]}return null},K$=function(t){return{baseTag:G$([Ve.HREF,Ve.TARGET],t),bodyAttributes:Em(wi.BODY,t),defer:Co(t,Yl.DEFER),encode:Co(t,Yl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Em(wi.HTML,t),linkTags:Ma(he.LINK,[Ve.REL,Ve.HREF],t),metaTags:Ma(he.META,[Ve.NAME,Ve.CHARSET,Ve.HTTPEQUIV,Ve.PROPERTY,Ve.ITEM_PROP],t),noscriptTags:Ma(he.NOSCRIPT,[Ve.INNER_HTML],t),onChangeClientState:W$(t),scriptTags:Ma(he.SCRIPT,[Ve.SRC,Ve.INNER_HTML],t),styleTags:Ma(he.STYLE,[Ve.CSS_TEXT],t),title:H$(t),titleAttributes:Em(wi.TITLE,t)}},vg=function(){var n=Date.now();return function(t){var r=Date.now();r-n>16?(n=r,t(r)):setTimeout(function(){vg(t)},0)}}(),n_=function(t){return clearTimeout(t)},Q$=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||vg:global.requestAnimationFrame||vg,Y$=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||n_:global.cancelAnimationFrame||n_,X$=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Fa=null,J$=function(t){Fa&&Y$(Fa),t.defer?Fa=Q$(function(){r_(t,function(){Fa=null})}):(r_(t),Fa=null)},r_=function(t,r){var s=t.baseTag,i=t.bodyAttributes,o=t.htmlAttributes,l=t.linkTags,c=t.metaTags,u=t.noscriptTags,d=t.onChangeClientState,f=t.scriptTags,m=t.styleTags,p=t.title,y=t.titleAttributes;xg(he.BODY,i),xg(he.HTML,o),Z$(p,y);var w={baseTag:Yi(he.BASE,s),linkTags:Yi(he.LINK,l),metaTags:Yi(he.META,c),noscriptTags:Yi(he.NOSCRIPT,u),scriptTags:Yi(he.SCRIPT,f),styleTags:Yi(he.STYLE,m)},T={},j={};Object.keys(w).forEach(function(b){var v=w[b],x=v.newTags,N=v.oldTags;x.length&&(T[b]=x),N.length&&(j[b]=w[b].oldTags)}),r&&r(),d(t,T,j)},qI=function(t){return Array.isArray(t)?t.join(""):t},Z$=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=qI(t)),xg(he.TITLE,r)},xg=function(t,r){var s=document.getElementsByTagName(t)[0];if(s){for(var i=s.getAttribute(zn),o=i?i.split(","):[],l=[].concat(o),c=Object.keys(r),u=0;u<c.length;u++){var d=c[u],f=r[d]||"";s.getAttribute(d)!==f&&s.setAttribute(d,f),o.indexOf(d)===-1&&o.push(d);var m=l.indexOf(d);m!==-1&&l.splice(m,1)}for(var p=l.length-1;p>=0;p--)s.removeAttribute(l[p]);o.length===l.length?s.removeAttribute(zn):s.getAttribute(zn)!==c.join(",")&&s.setAttribute(zn,c.join(","))}},Yi=function(t,r){var s=document.head||document.querySelector(he.HEAD),i=s.querySelectorAll(t+"["+zn+"]"),o=Array.prototype.slice.call(i),l=[],c=void 0;return r&&r.length&&r.forEach(function(u){var d=document.createElement(t);for(var f in u)if(u.hasOwnProperty(f))if(f===Ve.INNER_HTML)d.innerHTML=u.innerHTML;else if(f===Ve.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=u.cssText:d.appendChild(document.createTextNode(u.cssText));else{var m=typeof u[f]>"u"?"":u[f];d.setAttribute(f,m)}d.setAttribute(zn,"true"),o.some(function(p,y){return c=y,d.isEqualNode(p)})?o.splice(c,1):l.push(d)}),o.forEach(function(u){return u.parentNode.removeChild(u)}),l.forEach(function(u){return s.appendChild(u)}),{oldTags:o,newTags:l}},HI=function(t){return Object.keys(t).reduce(function(r,s){var i=typeof t[s]<"u"?s+'="'+t[s]+'"':""+s;return r?r+" "+i:i},"")},eB=function(t,r,s,i){var o=HI(s),l=qI(r);return o?"<"+t+" "+zn+'="true" '+o+">"+yg(l,i)+"</"+t+">":"<"+t+" "+zn+'="true">'+yg(l,i)+"</"+t+">"},tB=function(t,r,s){return r.reduce(function(i,o){var l=Object.keys(o).filter(function(d){return!(d===Ve.INNER_HTML||d===Ve.CSS_TEXT)}).reduce(function(d,f){var m=typeof o[f]>"u"?f:f+'="'+yg(o[f],s)+'"';return d?d+" "+m:m},""),c=o.innerHTML||o.cssText||"",u=F$.indexOf(t)===-1;return i+"<"+t+" "+zn+'="true" '+l+(u?"/>":">"+c+"</"+t+">")},"")},WI=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(s,i){return s[zd[i]||i]=t[i],s},r)},nB=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(s,i){return s[M$[i]||i]=t[i],s},r)},rB=function(t,r,s){var i,o=(i={key:r},i[zn]=!0,i),l=WI(s,o);return[je.createElement(he.TITLE,l,r)]},sB=function(t,r){return r.map(function(s,i){var o,l=(o={key:i},o[zn]=!0,o);return Object.keys(s).forEach(function(c){var u=zd[c]||c;if(u===Ve.INNER_HTML||u===Ve.CSS_TEXT){var d=s.innerHTML||s.cssText;l.dangerouslySetInnerHTML={__html:d}}else l[u]=s[c]}),je.createElement(t,l)})},xr=function(t,r,s){switch(t){case he.TITLE:return{toComponent:function(){return rB(t,r.title,r.titleAttributes)},toString:function(){return eB(t,r.title,r.titleAttributes,s)}};case wi.BODY:case wi.HTML:return{toComponent:function(){return WI(r)},toString:function(){return HI(r)}};default:return{toComponent:function(){return sB(t,r)},toString:function(){return tB(t,r,s)}}}},GI=function(t){var r=t.baseTag,s=t.bodyAttributes,i=t.encode,o=t.htmlAttributes,l=t.linkTags,c=t.metaTags,u=t.noscriptTags,d=t.scriptTags,f=t.styleTags,m=t.title,p=m===void 0?"":m,y=t.titleAttributes;return{base:xr(he.BASE,r,i),bodyAttributes:xr(wi.BODY,s,i),htmlAttributes:xr(wi.HTML,o,i),link:xr(he.LINK,l,i),meta:xr(he.META,c,i),noscript:xr(he.NOSCRIPT,u,i),script:xr(he.SCRIPT,d,i),style:xr(he.STYLE,f,i),title:xr(he.TITLE,{title:p,titleAttributes:y},i)}},iB=function(t){var r,s;return s=r=function(i){z$(o,i);function o(){return $$(this,o),q$(this,i.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(c){return!k$(this.props,c)},o.prototype.mapNestedChildrenToProps=function(c,u){if(!u)return null;switch(c.type){case he.SCRIPT:case he.NOSCRIPT:return{innerHTML:u};case he.STYLE:return{cssText:u}}throw new Error("<"+c.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(c){var u,d=c.child,f=c.arrayTypeChildren,m=c.newChildProps,p=c.nestedChildren;return Wt({},f,(u={},u[d.type]=[].concat(f[d.type]||[],[Wt({},m,this.mapNestedChildrenToProps(d,p))]),u))},o.prototype.mapObjectTypeChildren=function(c){var u,d,f=c.child,m=c.newProps,p=c.newChildProps,y=c.nestedChildren;switch(f.type){case he.TITLE:return Wt({},m,(u={},u[f.type]=y,u.titleAttributes=Wt({},p),u));case he.BODY:return Wt({},m,{bodyAttributes:Wt({},p)});case he.HTML:return Wt({},m,{htmlAttributes:Wt({},p)})}return Wt({},m,(d={},d[f.type]=Wt({},p),d))},o.prototype.mapArrayTypeChildrenToProps=function(c,u){var d=Wt({},u);return Object.keys(c).forEach(function(f){var m;d=Wt({},d,(m={},m[f]=c[f],m))}),d},o.prototype.warnOnInvalidChildren=function(c,u){return!0},o.prototype.mapChildrenToProps=function(c,u){var d=this,f={};return je.Children.forEach(c,function(m){if(!(!m||!m.props)){var p=m.props,y=p.children,w=t_(p,["children"]),T=nB(w);switch(d.warnOnInvalidChildren(m,y),m.type){case he.LINK:case he.META:case he.NOSCRIPT:case he.SCRIPT:case he.STYLE:f=d.flattenArrayTypeChildren({child:m,arrayTypeChildren:f,newChildProps:T,nestedChildren:y});break;default:u=d.mapObjectTypeChildren({child:m,newProps:u,newChildProps:T,nestedChildren:y});break}}}),u=this.mapArrayTypeChildrenToProps(f,u),u},o.prototype.render=function(){var c=this.props,u=c.children,d=t_(c,["children"]),f=Wt({},d);return u&&(f=this.mapChildrenToProps(u,f)),je.createElement(t,f)},B$(o,null,[{key:"canUseDOM",set:function(c){t.canUseDOM=c}}]),o}(je.Component),r.propTypes={base:Le.object,bodyAttributes:Le.object,children:Le.oneOfType([Le.arrayOf(Le.node),Le.node]),defaultTitle:Le.string,defer:Le.bool,encodeSpecialCharacters:Le.bool,htmlAttributes:Le.object,link:Le.arrayOf(Le.object),meta:Le.arrayOf(Le.object),noscript:Le.arrayOf(Le.object),onChangeClientState:Le.func,script:Le.arrayOf(Le.object),style:Le.arrayOf(Le.object),title:Le.string,titleAttributes:Le.object,titleTemplate:Le.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var i=t.rewind();return i||(i=GI({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},s},oB=function(){return null},aB=N$(K$,J$,GI)(oB),wt=iB(aB);wt.renderStatic=wt.rewind;const lB=()=>{const n=[{icon:uh,title:"الأعشاب الطبيعية",description:"مجموعة متنوعة من الأعشاب الطبيعية المختارة بعناية للعلاج والوقاية",color:"from-green-500 to-green-600"},{icon:Ws,title:"الاستشارات الطبية",description:"استشارات متخصصة في الطب العربي القديم والعلاج بالأعشاب",color:"from-blue-500 to-blue-600"},{icon:Sn,title:"البرامج العلاجية",description:"برامج علاجية شاملة مصممة خصيصاً لكل حالة",color:"from-purple-500 to-purple-600"},{icon:Vo,title:"التدريب والتعليم",description:"دورات تدريبية في الطب العربي القديم والعلاج بالأعشاب",color:"from-orange-500 to-orange-600"}],t=[{icon:ch,title:"العلاج الطبيعي",description:"نهج شامل للعلاج باستخدام الطرق الطبيعية والتراثية"},{icon:kr,title:"الوقاية والحماية",description:"برامج وقائية لتعزيز الصحة والمناعة الطبيعية"},{icon:ra,title:"الخبرة المتميزة",description:"سنوات من الخبرة في مجال الطب العربي والعلاج بالأعشاب"}];return a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"أكاديمية الطب الأخضر الإلكترونية - الطب العربي القديم والعلاج بالأعشاب"}),a.jsx("meta",{name:"description",content:"منصة إلكترونية متخصصة في تقديم برامج علاجية، استشارات، ووصفات علمية من التراث العربي الإسلامي بإشراف الباحث والمعالج أبو حسين محمد خليل"})]}),a.jsxs("div",{className:"min-h-screen",children:[a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-50 via-white to-green-50 hero-pattern",children:[a.jsx("div",{className:"absolute inset-0 leaf-pattern opacity-30"}),a.jsx("div",{className:"relative container-responsive py-12 sm:py-16 lg:py-20",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[a.jsxs(z.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"text-center lg:text-right",children:[a.jsxs(z.h1,{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6 font-arabic",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[a.jsx("span",{className:"gradient-text",children:"أكاديمية الطب الأخضر"}),a.jsx("br",{}),a.jsx("span",{className:"text-green-800",children:"الإلكترونية"})]}),a.jsx(z.p,{className:"text-lg sm:text-xl text-gray-700 mb-6 sm:mb-8 leading-relaxed font-arabic",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"منصة إلكترونية متخصصة في تقديم برامج علاجية، استشارات، ووصفات علمية من التراث العربي الإسلامي"}),a.jsxs(z.div,{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 mb-6 sm:mb-8 shadow-lg border border-green-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsx("p",{className:"text-green-800 font-semibold mb-2 font-arabic text-sm sm:text-base",children:"بإشراف مباشر من:"}),a.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-900 font-arabic",children:"أبو حسين محمد خليل"}),a.jsx("p",{className:"text-green-700 font-arabic text-sm sm:text-base",children:"باحث ومعالج بالطب العربي القديم"}),a.jsx("p",{className:"text-xs sm:text-sm text-green-600 mt-2 font-arabic",children:"عضو ذهبي بجامعة باشن الأمريكية"})]}),a.jsxs(z.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center lg:justify-start",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[a.jsx($t,{to:"/consultations",children:a.jsx(G,{size:"lg",className:"bg-green-600 hover:bg-green-700 text-white px-6 sm:px-8 py-3 text-base sm:text-lg hover-lift w-full sm:w-auto",children:"احجز استشارتك الآن"})}),a.jsx($t,{to:"/articles",children:a.jsx(G,{variant:"outline",size:"lg",className:"border-green-600 text-green-600 hover:bg-green-50 px-6 sm:px-8 py-3 text-base sm:text-lg hover-lift w-full sm:w-auto",children:"تصفح المقالات"})})]})]}),a.jsx(z.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"relative",children:a.jsxs("div",{className:"relative",children:[a.jsx(z.div,{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-green-600 rounded-3xl blur-3xl opacity-20",animate:{scale:[1,1.1,1]},transition:{duration:4,repeat:1/0}}),a.jsx("img",{className:"relative z-10 w-full h-64 sm:h-80 lg:h-96 object-cover rounded-2xl lg:rounded-3xl shadow-2xl animate-float",alt:"الطب العربي القديم والعلاج بالأعشاب - أبو حسين محمد خليل",src:"/article-images/WhatsApp Image 2025-08-02 at 20.13.49_98944b21.jpg"})]})})]})})]}),a.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-white islamic-pattern",children:a.jsxs("div",{className:"container-responsive",children:[a.jsxs(z.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12 sm:mb-16",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4 font-arabic",children:"خدماتنا المتميزة"}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto font-arabic px-4",children:"نقدم مجموعة شاملة من الخدمات في مجال الطب العربي القديم والعلاج الطبيعي"})]}),a.jsx("div",{className:"responsive-grid",children:n.map((r,s)=>a.jsx(z.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:s*.1},className:"group",children:a.jsxs("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-lg hover:shadow-2xl transition-all duration-300 hover-lift border border-gray-100",children:[a.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r ${r.color} rounded-2xl flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform`,children:a.jsx(r.icon,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3 sm:mb-4 font-arabic",children:r.title}),a.jsx("p",{className:"text-gray-600 leading-relaxed font-arabic text-sm sm:text-base",children:r.description})]})},s))})]})}),a.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-br from-green-50 to-white",children:a.jsx("div",{className:"container-responsive",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[a.jsxs(z.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-6 sm:mb-8 font-arabic",children:"لماذا تختار أكاديمية الطب الأخضر؟"}),a.jsx("div",{className:"space-y-6",children:t.map((r,s)=>a.jsxs(z.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:s*.1},className:"flex items-start space-x-4 space-x-reverse",children:[a.jsx("div",{className:"bg-green-100 rounded-full p-3 flex-shrink-0",children:a.jsx(r.icon,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 font-arabic",children:r.title}),a.jsx("p",{className:"text-gray-600 font-arabic",children:r.description})]})]},s))})]}),a.jsx(z.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"relative",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[a.jsx("img",{className:"w-full h-32 sm:h-40 lg:h-48 object-cover rounded-xl sm:rounded-2xl shadow-lg",alt:"أعشاب طبيعية للعلاج",src:"https://images.unsplash.com/photo-1586080877699-008da29214ab"}),a.jsx("img",{className:"w-full h-32 sm:h-40 lg:h-48 object-cover rounded-xl sm:rounded-2xl shadow-lg mt-4 sm:mt-8",alt:"الطب العربي التقليدي",src:"https://images.unsplash.com/photo-1562021537-5465039d8cca"}),a.jsx("img",{className:"w-full h-32 sm:h-40 lg:h-48 object-cover rounded-xl sm:rounded-2xl shadow-lg -mt-4 sm:-mt-8",alt:"العلاج بالحجامة",src:"https://images.unsplash.com/photo-1627113302629-498a547826fc"}),a.jsx("img",{className:"w-full h-32 sm:h-40 lg:h-48 object-cover rounded-xl sm:rounded-2xl shadow-lg",alt:"الزيوت الطبيعية",src:"https://images.unsplash.com/photo-1630809396102-e957a13e3f65"})]})})]})})}),a.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-r from-green-600 to-green-800",children:a.jsx("div",{className:"container-responsive text-center",children:a.jsxs(z.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-6 sm:mb-8 font-arabic",children:"ابدأ رحلتك نحو الشفاء الطبيعي"}),a.jsx("p",{className:"text-lg sm:text-xl text-green-100 mb-8 sm:mb-12 max-w-3xl mx-auto font-arabic px-4",children:"تواصل معنا الآن للحصول على استشارة مجانية وابدأ رحلتك نحو الصحة والعافية بالطرق الطبيعية"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-center",children:[a.jsxs(z.a,{href:"tel:01205830777",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-3 space-x-reverse bg-white text-green-600 px-6 sm:px-8 py-3 sm:py-4 rounded-full font-semibold hover:bg-green-50 transition-colors shadow-lg w-full sm:w-auto justify-center",children:[a.jsx(Gn,{className:"h-5 w-5"}),a.jsx("span",{children:"01205830777"})]}),a.jsxs(z.a,{href:"https://chat.whatsapp.com/Ja86ahQfI6SF48IFIgiODm",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-3 space-x-reverse bg-green-500 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-full font-semibold hover:bg-green-400 transition-colors shadow-lg w-full sm:w-auto justify-center",children:[a.jsx(Ue,{className:"h-5 w-5"}),a.jsx("span",{children:"واتساب الأكاديمية"})]})]})]})})})]})]})},s_={articles:Ws,products:cn,users:Sn,consultations:Ue,bookings:ur,orders:md,documents:k4,categories:Eo,likes:ch,reviews:ra,search:rc,folders:P4,archive:b4,notifications:T4,settings:Ap,analytics:_4,trends:$4,achievements:Vo,gifts:R4,general:j4},qi=({type:n="general",title:t="لا توجد بيانات",description:r="لم يتم العثور على أي بيانات حالياً",actionText:s=null,onAction:i=null,className:o=""})=>{const l=s_[n]||s_.general;return a.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`text-center py-12 px-6 ${o}`,children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx(z.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,delay:.1},className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-100 to-blue-100 rounded-full blur-xl opacity-50"}),a.jsx("div",{className:"relative bg-white rounded-full p-6 shadow-lg border border-gray-100 w-24 h-24 mx-auto flex items-center justify-center",children:a.jsx(l,{className:"h-12 w-12 text-gray-400"})})]})}),a.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3 font-arabic",children:t}),a.jsx("p",{className:"text-gray-500 font-arabic leading-relaxed",children:r})]}),s&&i&&a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"mt-6",children:a.jsx("button",{onClick:i,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 font-arabic text-sm",children:s})}),a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-8",children:a.jsxs("div",{className:"flex justify-center space-x-2 space-x-reverse",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse"}),a.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]})})},cB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0);I.useState(""),I.useState("all");const i=Rt(),{user:o}=dt(),[l,c]=I.useState(()=>JSON.parse(localStorage.getItem("articleLikes")||"{}")),[u,d]=I.useState(()=>JSON.parse(localStorage.getItem("articleComments")||"{}")),f=()=>o?`${o.email||o.id}_${o.id}`:null,m=j=>{if(!o)return!1;const b=f();return(l[j]||[]).some(x=>x===b||x===o.id||x===o.email)};I.useEffect(()=>{localStorage.setItem("articleLikes",JSON.stringify(l))},[l]),I.useEffect(()=>{localStorage.setItem("articleComments",JSON.stringify(u))},[u]);const p=j=>{if(!o){i("/auth");return}const b=f();b&&c(v=>{const x=v[j]||[];return x.some(P=>P===b||P===o.id||P===o.email)?v:{...v,[j]:[...x,b]}})},y=j=>{if(!o){i("/auth");return}const b=f();b&&c(v=>{const N=(v[j]||[]).filter(P=>P!==b&&P!==o.id&&P!==o.email);return{...v,[j]:N}})},w=async()=>{try{s(!0),console.log("جلب المقالات من Firebase...");const j=rt(le,"articles"),v=(await tn(j)).docs.map(x=>({id:x.id,...x.data()}));console.log("تم جلب المقالات:",v),v.forEach((x,N)=>{if(console.log(`مقال ${N+1}:`,{id:x.id,title:x.title,imageURL:x.imageURL,hasImage:!!x.imageURL,imageType:typeof x.imageURL,fullData:x}),x.imageURL){const P=new Image;P.onload=()=>{console.log(`✅ صورة المقال "${x.title}" قابلة للتحميل`)},P.onerror=()=>{console.error(`❌ صورة المقال "${x.title}" معطوبة:`,x.imageURL)},P.src=x.imageURL}}),t(v)}catch(j){console.error("خطأ في جلب المقالات:",j),t(T)}finally{s(!1)}};I.useEffect(()=>{w()},[]);const T=[{id:1,title:"🥣 بعض الفوائد لسلطة الطحينه 🥣🥣🥣🥣 الخاص بنا 🥣🥣",excerpt:"سلطة الطحينة غنية بالفوائد الصحية: مضاد للالتهاب، تعزز المناعة، تحسن الهضم، تمد الجسم بالطاقة والفيتامينات والمعادن، وتساعد على بناء العظام وتنقية السموم من الكبد والكلى. تعرف على طريقة تحضيرها الصحية.",category:"nutrition",author:"أبو حسين محمد خليل",date:"2024-05-01",readTime:"7 دقائق",image:"/article-images/tahina.jpg",content:"<p>🥣مضاد للالتهاب <br/>🥣تعزز المناعه <br/>🥣تحسن الهضم<br/>🥣تمد الجسم بالطاقة <br/>🥣تمد الجسم بعديد من الفيتامينات والمعادن مثل بعضها<br/>🥣الحديد. الكالسيوم. المغنيسيوم.السلينوم. 🥣بوتاسيوم. فسفور.الفوليك.سلكون<br/>C.A.E.k.B1.B6.B3.D<br/>🥣ينشط الدورة الدموية <br/>🥣يساعد على تنقية السموم من الكبد والكلي<br/><br/>🥣يساعد على بناء العظام وتقويته<br/>🥣كثير من مضادات الأكسدة <br/>عاوز انصح نصيحه اغلي من الذهب<br/>كثير منا يشتكي من المفاصل والعظام ونقص فيتامين د <br/>والسلكون.وغيره من الفيتامينات والمعادن الهامه<br/><br/>🥣🥣حضرتك تحضر الاتي <br/>🥣كوب سمسم <br/>🥣ملعقتين صغيرتين من حب الرشاد <br/>🥣ملعقه صغيره من حبه البركه والخردل<br/>🧅بصله مشويه على الفحم <br/>🧄خمس فصوص ثوم مشوي علي الفحم <br/>🍾زيت زيتون <br/><br/>🥣سيتم هرس البصل والثوم جيد<br/>🥡سيتم طحن السمسم<br/>🥣ويتم طحن البذور<br/>🥣وناتي بالخلاط ونضع السمسم والبذور<br/>🥣وتشغيل الخلاط مع اضافه الزيت ثم 🥣🥣اضافة البصل والثوم <br/><br/>🥣حتي يكون متجانس يتم وضع ملح خشن <br/><br/>🥣ويتم التقليب جيد<br/>🥣ويتم التناول منه مع الوجبات <br/>🥣و بالهنا والشفا </p>"},{id:2,title:"🌺 جلنار 🌺",excerpt:"جلنار هو ورد الرمان، له فوائد عديدة مثل تقوية الأسنان، وقف النزيف، علاج القروح، وقف الإسهال، ويستخدم في الطب العربي القديم بطرق متنوعة.",category:"herbs",author:"أبو حسين محمد خليل",date:"2024-05-02",readTime:"5 دقائق",image:"/article-images/julnar.jpg",content:"<p>🌺وهو اسم معرب ومعناه <br/>ورد رمان <br/>🌺طبعه بارد في الأولي يابس في الثانية <br/>🌺يشد اللثه مع الخل<br/>🌺يقوي الاسنان مع الخل<br/>🌺ينفع من نفث الدم<br/>🌺نافع من السحج<br/>🌺يدمل الجراحات<br/>🌺نافع للقروح العتيقة <br/>🌺يقطع الاسهال <br/>🌺يوقف النزيف في مكان<br/>🌺نافع من الجرب والحكه<br/>🌺نافع من النار الفارسية شربا مجرب<br/>🌺يقطع الصنان من البدن دلك به<br/>🌺يشد الاعضاء المسترخيه<br/>🌺نافع من قروح الفم<br/>🌺نافع من بول الدم<br/><br/>🌺نافع من قروح الكلي<br/>🌺نافع من بروز المقعده جلوس في طبيخه<br/>🌺نافع من نتوء الرحم جلوس في طبيخه <br/>🌷يحبس السيلان <br/>🌷يلحم الفتق<br/>🌷نافع من الداحس مع الصبر والكندر<br/><br/>💐يصدع ويصلحه الكثيراء 💐<br/>🌻جرعته  سته جرام <br/>💐بدله قشر الرمان </p>"},{id:3,title:"🔴 الحجامة والطب القديم 🔴",excerpt:"الحجامة ممارسة طبية قديمة تعود للحضارات الفرعونية والصينية، وأقرها الإسلام. تعرف على تاريخها وأهميتها في الطب العربي القديم.",category:"treatment",author:"أبو حسين محمد خليل",date:"2024-05-03",readTime:"10 دقائق",image:"/article-images/hijama.jpg",content:"<p>🟠🟢بسم الله والصلاه والسلام على رسول الله صلى الله عليه وسلم <br/>الطب القديم تكلمنا قبل ذلك عن الطب وأنه يوجد اقوال العلماء كثيرة في هذا الامر من حيث النشأة <br/>🔵وقلنا ان الطب لزاما كان موجود مع بدايه الخلق لمصلحة هامه وهي الحفاظ على الجنس البشري من الهلاك .<br/>🟣وكانت التعاليم الطبيه تنقل من جيل لجيل<br/>ولكي نثبت ممارسة الشئ في الزمن القديم اما <br/>عن طريق برديه او نقوش علي المعابد والحوائط <br/><br/>🟤وان كانت تستخدم من قبل ذلك تلك 🟤🟤مسألة <br/>⚫والمسألة الأخري <br/>⚫ما معنى طب قديم<br/>⚫وما معني طب عربي <br/>🟤وما تلك النسب<br/>🟢أولا. ثبت أن الحضارة الفرعونية القديمة اول من تحدث عن الحجامه كما اتي في البرظياتف والنقوش الحجرية في توت عنخ امون <br/>🟢وكانت الحقبة الزمنية <br/>من سنه 1334ق.م 3200ق.م<br/><br/>🟢ثم وجد كتاب مصنوع من الحرير تم اكتشافه لسنة 1973 في مقبرة ملكية في الصين <br/>🟢للملك هان تعود الي سنه 4000ق.م<br/>تحدث عن الحجامه ثم تطورت عندهم <br/>اي ان الحجامه مثبوت علميا من تاريخ الفراعنة <br/><br/><br/>🟢ثم بعد ذلك الحضارات التاليه حتي وصل إلى العرب <br/><br/>🟡ثم في العرب اتي رسول الله صلى الله عليه وسلم <br/>🟠واقر العمل بالحجامة وفعله واوصت الملائكة رسول الله صلى الله عليه وسلم بالحجامة <br/><br/>🟠ولما كان هذا نسب كل ما جاء في الأحاديث والآثار والايات القرآنية من الطب الاسلامي <br/><br/>🔵ليس من اجل انهم اخترعوا بل جاء الامر من الشرع بفوائده وفعله فنسبت لهم <br/>وقد يكون تم تحديد بعض الفوائد او الطرق للاستخدام <br/><br/>🟢مسألة ما معني طب قديم<br/>هو كل انواع وممارسات الطب من بدايه التسجيل ولا يتم انكار  ما كان قبل هذا<br/><br/>🟢مسألة طب عربي او طب يوناني او طب صيني او هندي او غير ذلك <br/><br/><br/>🟡الطب موجود من نشأة الخلق وينسب كل ممارسة الطب للحقبة الزمنية التي كتبت فيها وتم العمل بأساليبها ومن كان قبلهم وما فعلوا<br/>كل ذلك ينسب تلك الجهود من عدمه لتلك الحقبه مع ما ادخل عليه حسب ثقافه وديانة تلك الحقبة الزمنية <br/><br/>🟠مسألة طب عربي قديم<br/>أولا نعني بكلمت قديم اي نقل من الازمان السابقه ولم يكن يعارض الفكر والنهج الذي تعامل به رسول الله صلى الله عليه وسلم <br/>ونعطي مثال <br/>🔴الحارث بن كلده طبيب العرب من اين تعلم <br/>تعلم من  الطب اليوناني ونظرية الاخلاط <br/><br/>🔴ومع ذلك ينسب لطب العرب<br/>نظرية الاخلاط التي تحدث عنه ابقراط وكان قبل زمن الرسول صلى الله عليه وسلم و<br/>اقر العمل به صل الله عليه وسلم وله اقوال في الطب <br/>ان قارنت كلام ابقراط وغيرة مما كانوا قبله <br/>لوجد ان كلامهم موافق لكلام النبي صلى الله عليه وسلم <br/><br/>🔴هذا امر ثم اتي علي هذا الطب ويوجد نهي عن بعض الامور مثل التداوي بالمحرمات<br/>وغيره <br/>ادخال تصحيح علمي لما قاله ابقراط وغيرة <br/>من علماء المسلمين مثل بن النفيس رحمه الله <br/><br/>الخلاصة <br/><br/>🔴الطب العربي هو مصطلح ينسب لتلك الحقبه الزمنية التي مارسوا فيه العرب الطب القديم <br/>التي وصل اليهم ممن كان قبلهم<br/><br/>🔴ودور الاسلام وعلماء الإسلام 🔴<br/>من تنقيه الوارد لهم من الحقب الزمانية السابقة من السحر والمحرمات ونقد ما يخالف القياس والتجربة الفعليه <br/>وأثبات ما صح لديهم من تجربه<br/><br/>🔴فنسب ذلك لهم كما نسب لمن كان قبلهم من الأمم <br/><br/>اذا الحجامه موجودة من قديم الزمان واول ما أثبته الفراعنه ثم من اتي بعدهم<br/>واشارة اليها الله وملائكته ورسوله صلى الله عليه وسلم </p>"},{id:4,title:"♦ بعض الأمور التي تضر الكبد ♦",excerpt:"تعرف على أهم العادات الغذائية الخاطئة التي تضر الكبد مثل إدخال الطعام على الطعام، شرب الماء البارد دفعة واحدة، وتناول الأطعمة اللزجة.",category:"nutrition",author:"أبو حسين محمد خليل",date:"2024-05-04",readTime:"8 دقائق",image:"/article-images/liver-harm.jpg",content:"<p>♦ادخال الطعام علي الطعام ♦<br/>( ولا شك أن إدخال طعام الي المعده وما زالت المعده تهضم الاول هذا يضر جدا <br/>وقد جاء عن رسولنا صل الله عليه وسلم  - ما ملأَ آدميٌّ وعاءً شرًّا من بطنٍ حسْبُ الآدميِّ لقيماتٌ يُقِمنَ صلبَهُ فإن غلبتِ الآدميَّ نفسُهُ فثُلُثٌ للطَّعامِ وثلثٌ للشَّرابِ وثلثٌ للنَّفَسِ.<br/>    الراوي: المقدام بن معدي كرب<br/>    المحدث: الألباني<br/>    المصدر:  صحيح ابن ماجه. صحيح <br/>)<br/>♦إساءة ترتيبه♦<br/><br/>( لايصلح أن  أدخل كثير من أنواع الطعام المختلفة) فقد قالوا إن كثرة الالوان محيرة للطببعه<br/><br/>♦شرب الماء البارد دفعه واحده ♦<br/><br/>لان كميه كبيره من البرودة والرطوبة أدخلته علي الحرارة الغريزيه بالمعده والكبد فيحدث الضرر<br/> <br/> ♦وشرب الماء البارد وراء الخروج من الاغتسال♦<br/><br/>والاغتسال من ضمن الأمور التي تؤثر على البدن. من تبريد وتسخين <br/><br/>♦وشرب الماء البارد وراء الجماع♦<br/>وأيضا الجماع من أمور الاستفراغ للبدن والتي يتأثر بها  هنا يكون في حاله حرارة للبدن<br/><br/>♦وشرب الماء البارد وراء الرياضه ♦<br/>والرياضة تؤثر على البدن إن كانت قاسيه أو معتدلة وتجعل الحرارة بالبدن<br/><br/>♦وشرب الماء البارد علي الريق♦<br/>وهذا يضعف المعده والكبد لانه يكون سريع النفوذ والكبد في حرارة فيبرد له<br/><br/>♦وعدم غب الماء بل الشرب مصا أو رشف♦<br/> أفضل <br/>( فقد جاء عن رسولنا صل الله عليه وسلم من فعله <br/> -  أنَّ النبيَّ صلَّى اللهُ عليهِ وسلَّم : كان يتنفسُ في الإناءِ ثلاثًا ويقول : هو أمرأُ وأرْوَى.<br/>    الراوي: أنس بن مالك<br/>    المحدث: الألباني<br/>    المصدر:  صحيح الترغيب<br/>    الصفحة أو الرقم:  2119<br/>    خلاصة حكم المحدث:  صحيح<br/>         التخريج :  أخرجه الترمذي (1884) واللفظ له، وأخرجه البخاري (5631) مختصراً باختلاف يسير، ومسلم (2028) باختلاف يسير<br/>أمراء اي اسلم من الأمراض <br/>واروي مفيد للعطش<br/>♦والأطعمة والاشربه اللزجة تضر بالكبد♦<br/>لان تلك الأمور تفعل السدد في الكبد <br/><br/>♦كثرة القئ♦<br/><br/>والقئ من أمور الاستفراغ للبدن والتي يتأثر بها البدن<br/><br/>كان يشربُ في ثلاثةِ أنفاسٍ ، إذا أدْنى الإناءَ إلى فيهِ سمّى اللهَ تعالى ، وإذا أخرّهُ حمدَ الله تعالى ، يفعلُ ذلكَ ثلاثَ مراتٍ<br/>الراوي : أبو هريرة | المحدث : الألباني | المصدر : السلسلة الصحيحة</p>"},{id:5,title:"♦ بعض الأمور التي تضر الكبد ♦",excerpt:"تعرف على أهم العادات الغذائية الخاطئة التي تضر الكبد مثل إدخال الطعام على الطعام، شرب الماء البارد دفعة واحدة، وتناول الأطعمة اللزجة.",category:"nutrition",author:"أبو حسين محمد خليل",date:"2024-05-05",readTime:"7 دقائق",image:"/article-images/doum.jpg",content:"<p>♦ادخال الطعام علي الطعام ♦<br/>( ولا شك أن إدخال طعام الي المعده وما زالت المعده تهضم الاول هذا يضر جدا <br/>وقد جاء عن رسولنا صل الله عليه وسلم  - ما ملأَ آدميٌّ وعاءً شرًّا من بطنٍ حسْبُ الآدميِّ لقيماتٌ يُقِمنَ صلبَهُ فإن غلبتِ الآدميَّ نفسُهُ فثُلُثٌ للطَّعامِ وثلثٌ للشَّرابِ وثلثٌ للنَّفَسِ.<br/>    الراوي: المقدام بن معدي كرب<br/>    المحدث: الألباني<br/>    المصدر:  صحيح ابن ماجه. صحيح <br/>)<br/>♦إساءة ترتيبه♦<br/><br/>( لايصلح أن  أدخل كثير من أنواع الطعام المختلفة) فقد قالوا إن كثرة الالوان محيرة للطببعه<br/><br/>♦شرب الماء البارد دفعه واحده ♦<br/><br/>لان كميه كبيره من البرودة والرطوبة أدخلته علي الحرارة الغريزيه بالمعده والكبد فيحدث الضرر<br/> <br/> ♦وشرب الماء البارد وراء الخروج من الاغتسال♦<br/><br/>والاغتسال من ضمن الأمور التي تؤثر على البدن. من تبريد وتسخين <br/><br/>♦وشرب الماء البارد وراء الجماع♦<br/>وأيضا الجماع من أمور الاستفراغ للبدن والتي يتأثر بها  هنا يكون في حاله حرارة للبدن<br/><br/>♦وشرب الماء البارد وراء الرياضه ♦<br/>والرياضة تؤثر على البدن إن كانت قاسيه أو معتدلة وتجعل الحرارة بالبدن<br/><br/>♦وشرب الماء البارد علي الريق♦<br/>وهذا يضعف المعده والكبد لانه يكون سريع النفوذ والكبد في حرارة فيبرد له<br/><br/>♦وعدم غب الماء بل الشرب مصا أو رشف♦<br/> أفضل <br/>( فقد جاء عن رسولنا صل الله عليه وسلم من فعله <br/> -  أنَّ النبيَّ صلَّى اللهُ عليهِ وسلَّم : كان يتنفسُ في الإناءِ ثلاثًا ويقول : هو أمرأُ وأرْوَى.<br/>    الراوي: أنس بن مالك<br/>    المحدث: الألباني<br/>    المصدر:  صحيح الترغيب<br/>    الصفحة أو الرقم:  2119<br/>    خلاصة حكم المحدث:  صحيح<br/>         التخريج :  أخرجه الترمذي (1884) واللفظ له، وأخرجه البخاري (5631) مختصراً باختلاف يسير، ومسلم (2028) باختلاف يسير<br/>أمراء اي اسلم من الأمراض <br/>واروي مفيد للعطش<br/>♦والأطعمة والاشربه اللزجة تضر بالكبد♦<br/>لان تلك الأمور تفعل السدد في الكبد <br/><br/>♦كثرة القئ♦<br/><br/>والقئ من أمور الاستفراغ للبدن والتي يتأثر بها البدن<br/><br/>كان يشربُ في ثلاثةِ أنفاسٍ ، إذا أدْنى الإناءَ إلى فيهِ سمّى اللهَ تعالى ، وإذا أخرّهُ حمدَ الله تعالى ، يفعلُ ذلكَ ثلاثَ مراتٍ<br/>الراوي : أبو هريرة | المحدث : الألباني | المصدر : السلسلة الصحيحة</p>"},{id:6,title:"♦ الدوم ♦",excerpt:"الدوم نبات مصري فرعوني غني بالفيتامينات والمعادن، له فوائد في تقوية المعدة وتنظيم ضغط الدم وخفض الكوليسترول.",category:"herbs",author:"أبو حسين محمد خليل",date:"2024-05-06",readTime:"9 دقائق",image:"/article-images/liquorice.jpg",content:"<p>♦  الدوم♦<br/>♦الدوم واللغة العربية <br/>اسمه وقل والشجرة تسمي الدوم <br/>مقل]<br/>♦وقال أهل الصناعه الطبيه  مقل مكي <br/><br/> ♦المقل: ثمر الدوم.  والمقلة: شحمة العين التي تجمع البياض والسواد. أبو عبيد: المقل بالفتح: النظر. يقال: ما مقلته عينى منذ اليوم. أبو عمرو: مقتله: <br/>قاله في الصحاح تاج اللغة وصحاح العربية <br/>وأيضاً <br/><br/>♦ والوقل: شجر المقل) ، عن أبي عمر و، واحدته {وقلة، (أو) الدوم:  شجره،} والوقل: (ثمره) ، والجمع {أوقال، قال الأزهري: وسمعت غير واحد من بني كلاب يقول:} الوقل: ثمرة المقل ودل على صحته قول الجعدي: <br/>(وكأن عيرهم تحث غدية ... دوم ينوء بيانع {الأوقال) <br/>فالدوم  شجره،} وأوقاله ثماره، (أو يابسه. وأما رطبه) ما لم يدرك (فبهش) ، نقله أبو حنيفة عن أبي عبد الله الزبير بن بكار الزبيري، (ج: {أوقال) ، قال أبو قيس بن الأسلت: <br/>(لم يمنع الشرب منها غير أن نطقت ... حمامة في غصون ذات أوقال) <br/>قال أبو حنيفة: والصحيح هو الأول، على أن الشجرة قد تسمى باسم الثمرة. <br/><br/>♦♦الدوم♦♦<br/>القيمة الغذائية للدوم<br/>يحتوي نبات الدوم على العديد من الفيتامينات منها<br/> مجموعة من فيتامين ب كالثيامين، والريبوفلافين، <br/>والنياسين، <br/>والبريدوكسين، <br/>وفيتامين ب12،<br/> وحمض الفوليك. <br/>علاوة على ذلك تحتوي فاكهة الدوم على معادن هامة لصحة الجسم مثل البوتاسيوم، والصوديوم، <br/>والكالسيوم،<br/> وكذلك المغنيسيوم، <br/>والفوسفور، <br/>والحديد.<br/><br/>تتميز ثمرة الدوم أيضاً باحتوائها على الدهون، ونسبة عالية من البروتين، بالإضافة إلى ذلك تحتوي فاكهة الدوم على العديد من المركبات الدوائية مثل الصابونين، <br/>والكومارين، <br/>والزيوت الأساسية، والفلافونويد، كما أنها غنية بالألياف الغذائية.<br/><br/><br/>♦♦في الطب العربي <br/><br/>♦قال ابن البيطار في الجامع<br/>ابن واقد  هو ثمر الدوم وهو ينضج بمكه ويؤكل خارجه لذيذ واما بالاندلس فهو غير مدرك بل هو كثير العفوصه قليل المائيه خشن جدا <br/>بارد قابض يعقل البطن ويقوي المعده<br/><br/>♦قال ابن النفيس <br/>مقل مكي<br/>هذا هو ثمرة الدوم وهو يكثر بالحجاز وينضج <br/>هناك وخارجه لذيذ<br/>يعقل البطن <br/>يقوي المعدة <br/>ينفع من انفجار العروق شربا <br/>نافع من تقطير البول شرابا<br/><br/>♦قال في الحاوي في الطب <br/>عيسى ابن ماسويه: هو بارد قابض يعقل البطن ويقوى المعدة.<br/><br/>♦ حسب الأبحاث العلمية ♦<br/><br/>♦♦ الدوم ”  الإسم العلمي♦♦<br/> له   Hyphaene thebaica ، <br/>والإسم الفرعونى ماما إن خنت <br/>،وفى جازان بالسعودية يعرف بالبهش ،<br/>♦ وهو في الأصل نبات مصري فرعوني معمر ، كما أنه  نوع من النخيل ينمو في صعيد مصر ، ثمارة صلبة جدا في حجم التفاحة تقريباً . تنمو غاليا على ضفاف الأودية وفي المناطق الجبلية وعلى المنحدرات الصخرية .<br/>♦ والجزء الذي يؤكل من الثمرة هو الجزء الخارجي الاسفنجي، أما النواة فهي شديدة الصلابة، وهي بحجم بيضة الدجاجة.<br/>الخواص الطبية لنبات الدوم<br/>♦1- منظم لضغط الدم ، ملطف للأوعية الدموية . مسكن للآلام .<br/><br/>♦2- يقلل نسبه الكوليسترول في الدم . رافع لمستوى الهورمون الذكري (التستوستيرون) .<br/><br/>♦3- مقوي للذاكرة . منعش . منقي للدم . منظف للجهاز الهضمي . منظف للصفراء والكبد والكلى والطحال .<br/>باحث ومعالج بالطب العربي القديم <br/>♦أبو حسين محمد خليل ♦</p>"},{id:7,title:"العرق سوس",excerpt:"العرق سوس نبات علاجي قوي، له خصائص مضادة للميكروبات والفيروسات، مفيد للكبد والمعدة والجهاز التنفسي، ويستخدم داخلياً وخارجياً.",category:"herbs",author:"أبو حسين محمد خليل",date:"2024-05-07",readTime:"8 دقائق",image:"/article-images/iver-harm2.jpg",content:`
<p><b>العرق سوس</b></p>
<p>هذا نبات عظيم جدا جدا جدا.<br/>مناسب لكثير من المشاكل الصحية مع احتراز أنه يرفع الضغط.<br/>هو مناسب لمريض الضغط المنخفض ومناسب لمن ضغطه معتدل.</p>

<h3 className="font-bold text-green-700 mt-4 mb-2">الخصائص العلاجية</h3>
<ul className="list-disc pr-6">
  <li>جلاء</li>
  <li>يلين</li>
  <li>يلطف</li>
  <li>يحلل</li>
  <li>يفتح</li>
  <li>ينقي</li>
  <li>قابض</li>
  <li>مقوي</li>
  <li>شديد التسكين للعطش</li>
  <li>يكثر حدة المواد الحادة</li>
  <li>نافع من الظفرة</li>
  <li>نافع من الآثار في العين</li>
  <li>نافع من الطرفة تقطير بالعين</li>
  <li>يصفي الصوت</li>
  <li>يلين الحلق والصدر وقصبة الرئة</li>
  <li>نافع من الرئة جدا</li>
  <li>نافع المعدة من اللذع السوداوي</li>
  <li>نافع من الالتهاب بالمعدة</li>
  <li>يسكن حركة البول ولذع المثانة</li>
  <li>ينقي المثانة وقروحها</li>
  <li>نافع من الأورام</li>
  <li>نافع من الداحس بوضع العصارة عليه</li>
  <li>نافع من الحميات العفنية والالتهابية ومسبباتها</li>
</ul>

<h3 className="font-bold text-green-700 mt-4 mb-2">الأبحاث العلمية وما ثبت بها</h3>
<ul className="list-disc pr-6">
  <li>له خصائص مضادة للميكروبات، البكتيريا، الفيروسات، الفطريات، والسموم الكبدية</li>
  <li>يدخل في علاج إدمان الكوكايين</li>
  <li>غني بمضادات الأكسدة الكثيرة</li>
  <li>نافع للقروح والبواسير وارتفاع السكر في الدم</li>
  <li>من مضادات مدرات البول</li>
  <li>مضادات التهاب الكلى</li>
  <li>مضادات السرطان</li>
  <li>مضادات السموم الخلوية</li>
  <li>مضادات الالتهاب</li>
  <li>مضادات انسداد الدم</li>
  <li>مفيد لأمراض العيون، التهاب الحلق، والقرحة الهضمية</li>
  <li>مفيد لحالات التهاب المفاصل، أمراض الكبد، ضعف المثانة، التصبغات الجلدية، السل، أمراض الغدد الصماء، أمراض الجهاز التنفسي، الربو، الأمراض الجلدية (الصدفية والإكزيما)</li>
  <li>يثبط عملية تراكم الدهون على البطن</li>
  <li>نافع من مرض الصرع وأمراض القلب</li>
  <li>ينظم هرمون الاستروجين وينقله إلى هرمون البروجسترون</li>
  <li>مضاد للحساسية</li>
  <li>مفيد في نمو العظام والعضلات</li>
  <li>نافع في ضعف التعلم والخرف ومرض الزهايمر</li>
  <li>يدخل في علاج الفيروسات (مثبط لتكاثر الفيروسات مثل كورونا، سارس، نقص المناعة، التهاب الكبدي الفيروسي، الأمراض الهيربسية، وفيروس مضخم الخلايا)</li>
  <li>مفيد لأمراض الأعصاب التنكسية مثل الزهايمر والباركنسون</li>
</ul>

<h3 className="font-bold text-green-700 mt-4 mb-2">الاستخدام الصحي له</h3>
<ul className="list-disc pr-6">
  <li>أخذ ملعقة من الجذور بعد طحنها ووضع عليها الماء المغلي أو غليها</li>
</ul>

<h4 className="font-bold text-green-700 mt-2 mb-1">طريقة الغلي</h4>
<p>يوضع ملعقة صغيرة في إناء عليه كوب ماء ويغطي بإحكام ويرفع على النار، عند بدأ الغلي ينزل من على النار ويترك مغطى ثم ينزل قطرات الماء التي على الإناء داخل المشروب ويصفى ويشرب. يمكن تحليته بالعسل.</p>

<ul className="list-disc pr-6">
  <li>قد يستخدم من الداخل ومن الخارج</li>
  <li>قد يستخدم اكتحال بالعصارة بودر (يُطحن وينخل وينزل منه بودرة ويكتحل بها أو يضاف لها زيت الزيتون وعسل ويعمل قطرة منها) مفيدة لأمراض العين</li>
  <li>قد يصنع منه اللبخات ووضعها على الأعضاء</li>
  <li>مفيد جدا في علاج جرثومة المعدة</li>
</ul>
`}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 py-8 sm:py-10 px-4 sm:px-6 lg:px-8",children:[a.jsxs(wt,{children:[a.jsx("title",{children:"المقالات | الأكاديمية"}),a.jsx("meta",{name:"description",content:"مقالات في التغذية والعلاج الطبيعي والأعشاب والطب العربي"})]}),a.jsxs("div",{className:"container-responsive",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-green-800 mb-6 sm:mb-8 text-center font-heading",children:"المقالات"}),r?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-semibold text-gray-700 font-arabic",children:"جاري تحميل المقالات..."}),a.jsx("p",{className:"text-sm text-gray-500 font-arabic",children:"يرجى الانتظار قليلاً"})]})}):n.length===0?a.jsx(qi,{type:"articles",title:"لا توجد مقالات حالياً",description:"لم يتم نشر أي مقالات بعد. تحقق من هذه الصفحة لاحقاً للحصول على أحدث المقالات في مجال الطب الأخضر والعلاج الطبيعي.",actionText:"العودة للصفحة الرئيسية",onAction:()=>i("/")}):a.jsx("div",{className:"responsive-grid",children:n.map((j,b)=>{var v,x;return a.jsxs(z.article,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.5,delay:b*.1},className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col group cursor-pointer min-h-[380px] sm:min-h-[420px]",onClick:()=>i(`/articles/${j.id}`),children:[a.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden",children:[a.jsx("img",{className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",alt:j.title,src:j.imageURL||j.image||"/article-images/default.jpg",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{console.log("✅ تم تحميل الصورة بنجاح:",j.imageURL||j.image)},onError:N=>{console.error("❌ خطأ في تحميل الصورة:",j.imageURL||j.image),console.log("استخدام الصورة الافتراضية"),N.target.src="/article-images/default.jpg"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"bg-green-600 text-white text-sm px-3 py-1 rounded-full font-bold shadow-lg",children:j.category==="nutrition"?"تغذية":j.category==="herbs"?"أعشاب":j.category==="natural"?"طبيعي":"مقال"})})]}),a.jsxs("div",{className:"p-4 sm:p-5 flex flex-col flex-grow",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3 font-heading line-clamp-2 group-hover:text-green-700 transition-colors",children:j.title}),a.jsx("p",{className:"text-gray-600 mb-4 font-body line-clamp-3 text-sm sm:text-base leading-relaxed",children:j.excerpt||(j.content?j.content.substring(0,150)+"...":"لا يوجد محتوى متاح")}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Se,{className:"w-4 h-4"}),j.author]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ur,{className:"w-4 h-4"}),j.date]}),j.readTime&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ws,{className:"w-4 h-4"}),j.readTime]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{className:`flex items-center gap-2 px-3 py-2 rounded-full border transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-300 text-sm hover:bg-green-50 ${m(j.id)?"bg-green-100 text-green-700 border-green-400":"bg-white text-gray-500 border-gray-300"}`,onClick:N=>{N.stopPropagation(),m(j.id)?y(j.id):p(j.id)},title:o?m(j.id)?"إلغاء الإعجاب":"إعجبني":"سجل الدخول للتفاعل",children:[a.jsx(gN,{className:`w-5 h-5 ${m(j.id)?"fill-green-600":""}`}),a.jsx("span",{className:"font-bold",children:((v=l[j.id])==null?void 0:v.length)||0})]}),a.jsxs("span",{className:"flex items-center gap-2 text-green-700 bg-green-50 rounded-full px-3 py-2 text-sm font-bold",children:[a.jsx(Ue,{className:"w-5 h-5"}),a.jsx("span",{children:((x=u[j.id])==null?void 0:x.length)||0})]})]}),a.jsx(G,{variant:"outline",size:"default",className:"border-green-600 text-green-700 hover:bg-green-600 hover:text-white transition-all duration-200",onClick:N=>{N.stopPropagation(),i(`/articles/${j.id}`)},children:"قراءة المزيد"})]})]})]},j.id)})})]})]})},i_=({isOpen:n,onClose:t,consultationType:r})=>{dt();const[s,i]=I.useState({gender:"",country:"",job:"",age:"",weight:"",height:"",bloodPressure:"",stomachFat:"",symptoms:"",doctorDiagnosis:"",otherDiseases:"",currentMedications:"",medicalTests:"",supplements:"",herbs:"",commonFoods:"",spiritualIssues:"",psychologicalIssues:""}),o=c=>{const{name:u,value:d}=c.target;i(f=>({...f,[u]:d}))},l=c=>{c.preventDefault();const u=`🌹 *نموذج إلكتروني للتشخيص المبدئي* 🌹
    
🏥 *أكاديمية الطب الأخضر الإلكترونية*
📅 *تاريخ الإرسال:* ${new Date().toLocaleDateString("ar-EG")}
⏰ *وقت الإرسال:* ${new Date().toLocaleTimeString("ar-EG")}

👤 *المعلومات الشخصية:*
• النوع: ${s.gender}
• البلد: ${s.country}
• طبيعة العمل: ${s.job}
• السن: ${s.age} سنة
• الوزن: ${s.weight} كجم
• الطول: ${s.height} سم
• ضغط الدم: ${s.bloodPressure}

🔍 *التشخيص والأعراض:*
• هل يوجد بطن أو أرداف أو جناب: ${s.stomachFat}
• الأعراض: ${s.symptoms}
• تشخيص الطبيب: ${s.doctorDiagnosis}
• أمراض أخرى: ${s.otherDiseases}

💊 *الأدوية والعلاجات:*
• أدوية مستمرة: ${s.currentMedications}
• تحاليل أو أشعة: ${s.medicalTests}
• مكملات غذائية: ${s.supplements}
• أعشاب ولأي غرض: ${s.herbs}

🍽️ *النظام الغذائي:*
• الأغذية المعتاد عليها: ${s.commonFoods}

🔮 *الحالة الروحية والنفسية:*
• إصابات الجن (حسد-سحر-مس): ${s.spiritualIssues}
• أعراض نفسية: ${s.psychologicalIssues}

📞 *رقم الهاتف للتواصل:* 01205830777
👤 *اسم المدير:* أكاديمية الطب الأخضر

🕋 *باحث ومعالج بالطب العربي القديم* 🕋
🎓 *أبو حسين محمد خليل* 🎓

💬 *يرجى الرد على هذه الرسالة لتأكيد الحجز أو التواصل مع المريض*`,d=encodeURIComponent(u);(()=>{const m="201205830777",p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);let y;p?y=`https://wa.me/${m}?text=${d}`:y=`https://web.whatsapp.com/send?phone=${m}&text=${d}`,window.location.href=y})(),alert("تم إرسال نموذج الاستشارة بنجاح! سيتم التواصل معك قريباً عبر الواتساب."),t()};return n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white",children:[a.jsx("h3",{className:"text-xl font-bold text-green-700",children:"نموذج حجز استشارة"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(yn,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"النوع"}),a.jsxs("select",{name:"gender",value:s.gender,onChange:o,className:"w-full p-2 border rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"اختر النوع"}),a.jsx("option",{value:"ذكر",children:"ذكر"}),a.jsx("option",{value:"أنثى",children:"أنثى"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"البلد"}),a.jsx("input",{type:"text",name:"country",value:s.country,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"طبيعة العمل"}),a.jsx("input",{type:"text",name:"job",value:s.job,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السن"}),a.jsx("input",{type:"number",name:"age",value:s.age,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوزن (كجم)"}),a.jsx("input",{type:"number",name:"weight",value:s.weight,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الطول (سم)"}),a.jsx("input",{type:"number",name:"height",value:s.height,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ضغط الدم"}),a.jsx("input",{type:"text",name:"bloodPressure",value:s.bloodPressure,onChange:o,className:"w-full p-2 border rounded-md",placeholder:"مثال: 120/80"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يوجد بطن أو أرداف أو جناب؟"}),a.jsx("input",{type:"text",name:"stomachFat",value:s.stomachFat,onChange:o,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ما هي الأعراض؟"}),a.jsx("textarea",{name:"symptoms",value:s.symptoms,onChange:o,rows:"3",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تشخيص الطبيب (إن وجد)"}),a.jsx("textarea",{name:"doctorDiagnosis",value:s.doctorDiagnosis,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يعاني من أمراض أخرى؟"}),a.jsx("textarea",{name:"otherDiseases",value:s.otherDiseases,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يتناول أي أدوية بصفة مستمرة؟"}),a.jsx("textarea",{name:"currentMedications",value:s.currentMedications,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يوجد تحاليل أو أشعة للمريض؟"}),a.jsx("textarea",{name:"medicalTests",value:s.medicalTests,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يأخذ مكملات غذائية بصفة مستمرة؟"}),a.jsx("input",{type:"text",name:"supplements",value:s.supplements,onChange:o,className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"أعشاب وماهي ولأي غرض؟"}),a.jsx("textarea",{name:"herbs",value:s.herbs,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ما هي أكثر الأغذية المعتاد عليها؟"}),a.jsx("textarea",{name:"commonFoods",value:s.commonFoods,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل يعاني من الإصابة من الجن (حسد-سحر- مس-)"}),a.jsx("textarea",{name:"spiritualIssues",value:s.spiritualIssues,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل تعاني من أعراض نفسية؟"}),a.jsx("textarea",{name:"psychologicalIssues",value:s.psychologicalIssues,onChange:o,rows:"2",className:"w-full p-2 border rounded-md"})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),a.jsxs("button",{type:"submit",className:"px-6 py-3 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"إرسال الاستشارة عبر واتساب"]})]})]})]})}):null},o_=({isOpen:n,onClose:t})=>{const[r,s]=I.useState({gender:"",country:"",job:"",age:"",weight:"",height:"",bloodPressure:"",bodyShape:"",symptoms:"",doctorDiagnosis:"",otherDiseases:"",medications:"",tests:"",supplements:"",herbs:"",commonFoods:"",spiritualIssues:"",psychologicalSymptoms:""}),i=l=>{const{name:c,value:u}=l.target;s(d=>({...d,[c]:u}))},o=l=>{l.preventDefault();const c=`🌹 نموذج الكتروني التشخيص المبدئى🌹

🌹اكاديميه الطب الاخضر الإلكترونية 🌹🌹يتم الاجابه على الاسئله تحت كل سؤال 🌹

♦- النوع : ${r.gender}

♦- البلد : ${r.country}

♦طبيعة عمله: ${r.job}

♦- السن : ${r.age}

♦- الوزن : ${r.weight}

♦- الطول : ${r.height}

♦- ضغط الدم : ${r.bloodPressure}

♦هل يوجد بطن أو ارداف أو جناب: ${r.bodyShape}

♦- ما هي الأعراض : ${r.symptoms}

♦- ماهو تشخيص الطبيب : ${r.doctorDiagnosis}

♦- هل يعاني من أمراض أخرى : ${r.otherDiseases}

♦- هل يتناول أي أدوية بصفة مستمرة : ${r.medications}

♦- هل يوجد تحاليل أو أشعة للمريض : ${r.tests}

♦- هل يأخذ مكملات غذائية بصفة مستمرة : ${r.supplements}

♦- أو أعشاب وماهي ولأي غرض : ${r.herbs}

♦ما هي اكثر الاغذيه المعتاد عليه : ${r.commonFoods}

♦هل يعاني من الإصابة من الجن (حسد-سحر- مس-) : ${r.spiritualIssues}

هل تعاني من أعراض نفسية : ${r.psychologicalSymptoms}

🕋باحث ومعالج بالطب العربي القديم 🕋

🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓

🕋🕋🕋أبو حسين محمد خليل 🕋🕋`,u=encodeURIComponent(c),d=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let f;d?f=`https://wa.me/201205830777?text=${u}`:f=`https://web.whatsapp.com/send?phone=201205830777&text=${u}`,window.location.href=f,alert("تم إرسال نموذج التشخيص بنجاح! سيتم التواصل معك قريباً عبر الواتساب."),t()};return n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10",children:[a.jsx("h3",{className:"text-xl font-bold text-green-700",children:"🌹 نموذج الكتروني التشخيص المبدئى🌹"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(yn,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-green-600 mb-2",children:"🌹اكاديميه الطب الاخضر الإلكترونية 🌹"}),a.jsx("p",{className:"text-sm text-gray-600",children:"🌹يتم الاجابه على الاسئله تحت كل سؤال 🌹"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- النوع"}),a.jsxs("select",{name:"gender",value:r.gender,onChange:i,className:"w-full p-2 border rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"اختر النوع"}),a.jsx("option",{value:"ذكر",children:"ذكر"}),a.jsx("option",{value:"أنثى",children:"أنثى"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- البلد"}),a.jsx("input",{type:"text",name:"country",value:r.country,onChange:i,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦طبيعة عمله"}),a.jsx("input",{type:"text",name:"job",value:r.job,onChange:i,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- السن"}),a.jsx("input",{type:"number",name:"age",value:r.age,onChange:i,className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- الوزن"}),a.jsx("input",{type:"text",name:"weight",value:r.weight,onChange:i,placeholder:"مثال: 70 كجم",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- الطول"}),a.jsx("input",{type:"text",name:"height",value:r.height,onChange:i,placeholder:"مثال: 170 سم",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- ضغط الدم"}),a.jsx("input",{type:"text",name:"bloodPressure",value:r.bloodPressure,onChange:i,placeholder:"مثال: 120/80",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦هل يوجد بطن أو ارداف أو جناب"}),a.jsx("input",{type:"text",name:"bodyShape",value:r.bodyShape,onChange:i,className:"w-full p-2 border rounded-md",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- ما هي الأعراض"}),a.jsx("textarea",{name:"symptoms",value:r.symptoms,onChange:i,rows:"3",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- ماهو تشخيص الطبيب"}),a.jsx("textarea",{name:"doctorDiagnosis",value:r.doctorDiagnosis,onChange:i,rows:"3",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- هل يعاني من أمراض أخرى"}),a.jsx("textarea",{name:"otherDiseases",value:r.otherDiseases,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- هل يتناول أي أدوية بصفة مستمرة"}),a.jsx("textarea",{name:"medications",value:r.medications,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- هل يوجد تحاليل أو أشعة للمريض"}),a.jsx("textarea",{name:"tests",value:r.tests,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- هل يأخذ مكملات غذائية بصفة مستمرة"}),a.jsx("textarea",{name:"supplements",value:r.supplements,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦- أو أعشاب وماهي ولأي غرض"}),a.jsx("textarea",{name:"herbs",value:r.herbs,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦ما هي اكثر الاغذيه المعتاد عليه"}),a.jsx("textarea",{name:"commonFoods",value:r.commonFoods,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"♦هل يعاني من الإصابة من الجن (حسد-سحر- مس-)"}),a.jsx("textarea",{name:"spiritualIssues",value:r.spiritualIssues,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"هل تعاني من أعراض نفسية"}),a.jsx("textarea",{name:"psychologicalSymptoms",value:r.psychologicalSymptoms,onChange:i,rows:"2",className:"w-full p-2 border rounded-md",required:!0})]}),a.jsxs("div",{className:"text-center mt-6 p-4 bg-green-50 rounded-lg",children:[a.jsx("p",{className:"text-lg font-semibold text-green-700 mb-2",children:"🕋باحث ومعالج بالطب العربي القديم 🕋"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓🎓"}),a.jsx("p",{className:"text-lg font-bold text-green-800",children:"🕋🕋🕋أبو حسين محمد خليل 🕋🕋"})]}),a.jsxs("div",{className:"flex gap-4 justify-center mt-6",children:[a.jsx("button",{type:"submit",className:"bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"إرسال النموذج عبر واتساب"}),a.jsx("button",{type:"button",onClick:t,className:"bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"إلغاء"})]})]})]})}):null},Wh=({title:n,description:t,onBackClick:r})=>{const s=Rt(),i=()=>{r?r():s("/")};return a.jsx(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(kr,{className:"h-8 w-8 text-red-600"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:n||"غير مسموح"}),a.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:t||"عذراً، لا يمكن للمشرفين والملاك عمل حجوزات أو شراء منتجات"}),a.jsx("div",{className:"space-y-3",children:a.jsxs(G,{onClick:i,className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(mN,{className:"h-4 w-4"}),"العودة للصفحة الرئيسية"]})}),a.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 text-gray-500 hover:text-gray-700 text-sm font-medium transition-colors",children:"العودة للصفحة السابقة"})]})})})},uB=()=>{const{user:n,isAuthenticated:t}=dt(),r=Rt(),[s,i]=I.useState([]),[o,l]=I.useState(!0),[c,u]=I.useState(null),[d,f]=I.useState(!1),[m,p]=I.useState(!1),[y,w]=I.useState(null),[T,j]=I.useState(!1),b=[{bg:"bg-green-50",border:"border-green-100",text:"text-green-800",icon:a.jsx(Ue,{className:"h-6 w-6"}),button:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700"},{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-800",icon:a.jsx(F4,{className:"h-6 w-6"}),button:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700"},{bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-800",icon:a.jsx(vN,{className:"h-6 w-6"}),button:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700"},{bg:"bg-amber-50",border:"border-amber-100",text:"text-amber-800",icon:a.jsx(D4,{className:"h-6 w-6"}),button:"from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700"},{bg:"bg-teal-50",border:"border-teal-100",text:"text-teal-800",icon:a.jsx(M4,{className:"h-6 w-6"}),button:"from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700"},{bg:"bg-rose-50",border:"border-rose-100",text:"text-rose-800",icon:a.jsx(z4,{className:"h-6 w-6"}),button:"from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700"}],v=O=>b[O%b.length],x=()=>n&&(n.role==="admin"||n.role==="owner")?(j(!0),!1):!0;I.useEffect(()=>{(async()=>{try{const S=await tn(rt(le,"consultations")),_=[];S.forEach(C=>{_.push({id:C.id,...C.data()})}),i(_),l(!1)}catch(S){console.error("Error fetching consultations:",S),u("حدث خطأ في تحميل الاستشارات. يرجى المحاولة مرة أخرى."),l(!1)}})()},[]),I.useEffect(()=>{if(t()){const O=sessionStorage.getItem("selectedConsultationId");if(O){const S=s.find(_=>_.id===O);S&&(w(S),f(!0),U({title:"مرحباً بك!",description:"يمكنك الآن إكمال حجز استشارتك"})),sessionStorage.removeItem("selectedConsultationId")}}},[t(),s]);const N=()=>{if(!t()){U({title:"تسجيل الدخول مطلوب",description:"يجب تسجيل الدخول أولاً لحجز الاستشارة",variant:"destructive"}),r("/auth",{state:{from:{pathname:"/consultations"},showLoginForm:!0,message:"يجب تسجيل الدخول لحجز الاستشارة"}});return}x()&&p(!0)},P=O=>{if(O==="whatsapp"){const S=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let _;S?_="https://wa.me/201205830777":_="https://web.whatsapp.com/send?phone=201205830777",window.location.href=_}else O==="phone"&&(window.location.href="tel:01205830777")};return o?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Ar,{className:"h-12 w-12 animate-spin text-green-600"})}):c?a.jsx("div",{className:"text-center py-12 text-red-600",children:a.jsx("p",{children:c})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs(wt,{children:[a.jsx("title",{children:"الاستشارات - أكاديمية الطب الأخضر"}),a.jsx("meta",{name:"description",content:"احجز استشارتك الطبية مع خبراء الطب البديل في أكاديمية الطب الأخضر"})]}),a.jsx(i_,{isOpen:d,onClose:()=>f(!1),consultationType:(y==null?void 0:y.title)||"استشارة طبية"}),a.jsx(o_,{isOpen:m,onClose:()=>p(!1)}),a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-800 text-white py-16",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx(z.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl md:text-5xl font-bold mb-4",children:"الاستشارات الطبية"}),a.jsx(z.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-xl md:text-2xl mb-8 max-w-3xl mx-auto",children:"احصل على استشارة طبية متخصصة من نخبة من الأطباء"}),a.jsxs(z.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},onClick:N,className:"bg-white text-green-600 px-8 py-3 rounded-lg hover:bg-gray-100 transition-colors font-semibold flex items-center gap-2 mx-auto",children:[a.jsx(yw,{className:"h-5 w-5"}),"احجز استشارة الآن"]})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx(z.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-center mb-12",children:a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"اختر الاستشارة المناسبة لك"})}),s.length===0?a.jsx(qi,{type:"consultations",title:"لا توجد استشارات متاحة",description:"لم يتم إضافة أي استشارات طبية بعد. تحقق من هذه الصفحة لاحقاً للحصول على أحدث الاستشارات المتخصصة.",actionText:"العودة للصفحة الرئيسية",onAction:()=>r("/")}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((O,S)=>a.jsxs(z.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:`rounded-xl shadow-lg overflow-hidden border ${v(S).border} hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`,children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${v(S).button.replace("hover:","")}`}),a.jsxs("div",{className:`p-6 ${v(S).bg} h-full flex flex-col`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("h3",{className:`text-2xl font-bold ${v(S).text} flex items-center`,children:[je.cloneElement(v(S).icon,{className:`h-8 w-8 ml-3 ${v(S).text}`}),O.title]}),a.jsx("div",{className:`text-2xl font-bold ${v(S).text} bg-white/20 px-4 py-1 rounded-full`,children:O.price?`${O.price} ج.م`:"--"})]}),a.jsxs("div",{className:"mb-6 flex-grow",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("p",{className:`text-lg font-semibold ${v(S).text}`,children:"ما تشمله الاستشارة:"}),a.jsxs("div",{className:`flex items-center ${v(S).text} opacity-90 text-sm`,children:[a.jsx("span",{children:O.duration||"غير محدد"}),a.jsx(jn,{className:"h-4 w-4 mr-1"})]})]}),O.details?a.jsx("ul",{className:"space-y-3 text-right",children:O.details.split(`
`).filter(_=>_.trim()).map((_,C)=>a.jsxs("li",{className:`flex items-start ${v(S).text} opacity-90`,children:[a.jsx(Ds,{className:"h-5 w-5 ml-2 mt-0.5 flex-shrink-0 text-green-500"}),a.jsx("span",{className:"text-right",children:_.replace("(✓)","").trim()})]},C))}):a.jsx("p",{className:`text-right ${v(S).text} opacity-70`,children:"لا توجد تفاصيل إضافية"})]}),a.jsx("div",{className:"mt-6 space-y-3",children:a.jsxs("button",{onClick:N,className:`w-full bg-gradient-to-r ${v(S).button} text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2`,children:[a.jsx(yw,{className:"h-5 w-5"}),"احجز استشارة"]})})]})]},O.id))})]})}),a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs(z.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"تواصل معنا"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"للاستفسارات أو الحجز المباشر"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[a.jsxs(z.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg text-center hover:shadow-xl transition-shadow",onClick:()=>P("phone"),children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Gn,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"اتصل بنا"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"للحجز المباشر والاستفسارات"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"01205830777"}),a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"01093280132"})]})]}),a.jsxs(z.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg text-center hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"واتساب"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"للتواصل السريع والمتابعة"}),a.jsx("button",{onClick:()=>P("whatsapp"),className:"inline-flex items-center justify-center rounded-md border border-green-600 bg-transparent px-4 py-2 text-sm font-medium text-green-600 shadow-sm hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"تواصل معنا عبر واتساب"})]})]})]})}),T&&a.jsx(Wh,{title:"غير مسموح للمشرفين",description:"عذراً، لا يمكن للمشرفين والملاك عمل حجوزات استشارات. هذه الميزة متاحة للمستخدمين العاديين فقط.",onBackClick:()=>j(!1)}),d&&y&&a.jsx(i_,{consultation:y,onClose:()=>{f(!1),w(null)}}),m&&a.jsx(o_,{onClose:()=>p(!1)})]})},Qo=(n,t="product")=>{var f,m,p,y,w,T,j,b,v,x,N,P,O,S,_,C,R,A,L,D,$,Z,oe,ve,q,K;const s="201205830777".replace(/[^0-9]/g,""),i=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let o="";t==="product"?(o=`🌟 *مرحباً بكم في أكاديمية الطب الأخضر* 🌿

`,o+=`🛒 *طلب منتج جديد*

`,o+=`👤 *معلومات العميل:*
`,o+=`• الاسم: ${((f=n.customerInfo)==null?void 0:f.name)||"غير محدد"}
`,o+=`• رقم الهاتف: ${((m=n.customerInfo)==null?void 0:m.phone)||"غير محدد"}
`,o+=`• البريد الإلكتروني: ${((p=n.customerInfo)==null?void 0:p.email)||"غير محدد"}
`,o+=`• العنوان: ${((y=n.customerInfo)==null?void 0:y.address)||"لم يتم تحديد عنوان"}

`,o+=`📦 *تفاصيل المنتج:*
`,o+=`• اسم المنتج: ${((w=n.product)==null?void 0:w.name)||((T=n.product)==null?void 0:T.title)||"غير محدد"}
`,o+=`• الكمية: ${((j=n.orderDetails)==null?void 0:j.quantity)||1}
`,o+=`• السعر: ${(b=n.product)!=null&&b.price?`${n.product.price} جنيه`:"غير محدد"}
`,o+=`• الإجمالي: ${(v=n.product)!=null&&v.price&&((x=n.orderDetails)!=null&&x.quantity)?n.product.price*n.orderDetails.quantity+" جنيه":"غير محدد"}

`,o+=`📝 *ملاحظات إضافية:*
`,o+=`${((N=n.orderDetails)==null?void 0:N.notes)||"لا توجد ملاحظات"}

`,o+=`🆔 *رقم الطلب:* ${n.id||"غير محدد"}
`,o+=`🔄 *حالة الطلب:* قيد المراجعة

`,o+=`⏰ *تاريخ الطلب:*
`,o+=`${new Date(n.createdAt||new Date).toLocaleString("ar-EG")}

`,o+=`شكراً لثقتكم بنا 🌿
`,o+="سيتم التواصل معكم قريباً لتأكيد الطلب."):t==="service"?(o=`🌟 *مرحباً بكم في أكاديمية الطب الأخضر* 🌿

`,o+=`📅 *حجز استشارة جديدة*

`,o+=`👤 *البيانات الشخصية:*
`,o+=`• الاسم: ${((P=n.customerInfo)==null?void 0:P.name)||"غير محدد"}
`,o+=`• رقم الهاتف: ${((O=n.customerInfo)==null?void 0:O.phone)||"غير محدد"}
`,o+=`• البريد الإلكتروني: ${((S=n.customerInfo)==null?void 0:S.email)||"غير محدد"}
`,o+=`• العنوان: ${((_=n.customerInfo)==null?void 0:_.address)||"غير محدد"}
`,o+=`• العمر: ${((C=n.customerInfo)==null?void 0:C.age)||"غير محدد"}

`,o+=`📅 *تفاصيل الموعد:*
`,o+=`• نوع الخدمة: ${((R=n.service)==null?void 0:R.title)||"غير محدد"}
`,o+=`• التاريخ المفضل: ${((A=n.appointmentDetails)==null?void 0:A.preferredDate)||"غير محدد"}
`,o+=`• الوقت المفضل: ${((L=n.appointmentDetails)==null?void 0:L.preferredTime)||"غير محدد"}

`,o+=`📝 *ملاحظات إضافية:*
`,o+=`${((D=n.appointmentDetails)==null?void 0:D.notes)||"لا توجد ملاحظات إضافية"}

`,o+=`🆔 *رقم الحجز:* ${n.id||"غير محدد"}

`,o+=`⏰ *تاريخ ووقت الحجز:*
`,o+=`${new Date(n.createdAt||new Date).toLocaleString("ar-EG")}

`,o+=`شكراً لثقتكم بنا 🌿
`,o+="سيتم التواصل معكم قريباً لتأكيد الموعد."):t==="course"?(o=`🌟 *مرحباً بكم في أكاديمية الطب الأخضر* 🌿

`,o+=`🎓 *تسجيل في دورة تدريبية جديدة*

`,o+=`👤 *البيانات الشخصية:*
`,o+=`• الاسم: ${(($=n.customerInfo)==null?void 0:$.name)||"غير محدد"}
`,o+=`• رقم الهاتف: ${((Z=n.customerInfo)==null?void 0:Z.phone)||"غير محدد"}
`,o+=`• البريد الإلكتروني: ${((oe=n.customerInfo)==null?void 0:oe.email)||"غير محدد"}

`,o+=`📚 *تفاصيل الدورة:*
`,o+=`• اسم الدورة: ${n.title||"غير محدد"}
`,o+=`• السعر: ${n.price?`${n.price} ج.م`:"مجاناً"}
`,o+=`• المدة: ${n.duration||"غير محدد"}
`,o+=`• المدرب: ${n.instructor||"غير محدد"}
`,o+=`• تاريخ البدء: ${n.startDate||"غير محدد"}

`,o+=`🆔 *رقم الدورة:* ${n.id||"غير محدد"}

`,o+=`⏰ *تاريخ ووقت التسجيل:*
`,o+=`${new Date().toLocaleString("ar-EG")}

`,o+=`شكراً لثقتكم بنا 🌿
`,o+="سيتم التواصل معكم قريباً لتأكيد التسجيل في الدورة."):t==="course_cancellation"?(o=`🌟 *مرحباً بكم في أكاديمية الطب الأخضر* 🌿

`,o+=`📌 *طلب إلغاء تسجيل الدورة* 📌

`,o+=`👤 *البيانات الشخصية:*
`,o+=`• الاسم: ${((ve=n.customerInfo)==null?void 0:ve.name)||"غير محدد"}
`,o+=`• رقم الهاتف: ${((q=n.customerInfo)==null?void 0:q.phone)||"غير محدد"}
`,o+=`• البريد الإلكتروني: ${((K=n.customerInfo)==null?void 0:K.email)||"غير محدد"}

`,o+=`📚 *تفاصيل الدورة المراد إلغاؤها:*
`,o+=`• اسم الدورة: ${n.courseTitle||"غير محدد"}
`,o+=`• السعر: ${n.coursePrice?`${n.coursePrice} ج.م`:"مجاناً"}
`,o+=`• المدة: ${n.courseDuration||"غير محدد"}
`,o+=`• المدرب: ${n.courseInstructor||"غير محدد"}
`,o+=`• تاريخ البدء: ${n.courseStartDate||"غير محدد"}

`,o+=`🆔 *رقم التسجيل:* ${n.id||"غير محدد"}
`,o+=`⏰ *تاريخ التسجيل الأصلي:* ${new Date(n.registeredAt||n.createdAt).toLocaleString("ar-EG")}

`,o+=`⏰ *تاريخ ووقت طلب الإلغاء:*
`,o+=`${new Date().toLocaleString("ar-EG")}

`,o+=`🌟 *رسالتنا لكم:*
`,o+=`نأسف لرغبتكم في إلغاء التسجيل في الدورة. نأمل أن نكون عند حسن ظنكم في المرات القادمة.
`,o+=`لأي استفسارات أو مساعدة، نحن هنا لمساعدتكم على مدار الساعة.

`,o+=`🔹 *معلومات التواصل:*
`,o+=`   • 📞 الهاتف: 201205830777
`,o+=`   • 🌐 الموقع: www.greenacademy.com

`,o+="شكراً لثقتكم بنا، نتمنى لكم دوام الصحة والعافية 🌿💚"):o=n.message||"";const l=o.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,""),c=encodeURIComponent(l).replace(/\n/g,"%0A").replace(/\*/g,"%2A").replace(/_/g,"%5F");let u;if(i){u=`https://wa.me/${s}?text=${c}`;try{window.location.href=`whatsapp://send?phone=${s}&text=${c}`,setTimeout(()=>{window.location.href=u},500)}catch{u=`https://wa.me/${s}?text=${c}`}}else u=`https://web.whatsapp.com/send?phone=${s}&text=${c}`;return setTimeout(()=>{try{window.location.href=u}catch(ee){console.error("❌ خطأ في فتح الواتساب:",ee),window.location.href=u}},300),u},dB=async n=>{var d,f,m,p,y,w,T,j,b,v,x,N,P,O;if(console.log("بدء إرسال رسالة إلغاء الطلب:",n),!n)throw console.error("❌ خطأ: لم يتم توفير بيانات الطلب"),new Error("بيانات الطلب غير صالحة");const t="201205830777",r=t.replace(/[^0-9]/g,""),s=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);console.log("بيانات الاتصال:",{phoneNumber:t,cleanPhoneNumber:r,isMobile:s});let i=`🌿 *مرحباً بكم في أكاديمية الطب الأخضر* 🌿

`;if(i+=`📌 *طلب إلغاء الطلب* 📌

`,i+=`🔹 *معلومات العميل الكريم:*
`,i+=`   • 🏷️ الاسم: ${((d=n.customerInfo)==null?void 0:d.name)||"زائرنا العزيز"}
`,i+=`   • 📱 رقم الجوال: ${((f=n.customerInfo)==null?void 0:f.phone)||"غير محدد"}
`,i+=`   • ✉️ البريد الإلكتروني: ${((m=n.customerInfo)==null?void 0:m.email)||"غير محدد"}

`,i+=`📋 *تفاصيل الطلب المراد إلغاؤه:*
`,i+=`   • 🆔 رقم الطلب: ${n.id||"غير محدد"}
`,i+=`   • 📦 نوع الطلب: ${n.type==="product"?"طلب منتج":"حجز استشارة"}

`,n.type==="product"){if(i+=`🛍️ *تفاصيل المنتج:*
`,i+=`   • 🏷️ اسم المنتج: ${((p=n.product)==null?void 0:p.name)||((y=n.product)==null?void 0:y.title)||"غير محدد"}
`,i+=`   • 🔢 الكمية: ${((w=n.orderDetails)==null?void 0:w.quantity)||1} قطعة
`,i+=`   • 💰 السعر: ${((T=n.product)==null?void 0:T.price)||"غير محدد"} جنيه

`,(j=n.product)!=null&&j.price&&((b=n.orderDetails)!=null&&b.quantity)){const S=n.product.price*n.orderDetails.quantity;i+=`   • 💵 الإجمالي: ${S} جنيه

`}i+=`   ✅ *ملاحظة:* تم إرجاع ${((v=n.orderDetails)==null?void 0:v.quantity)||1} قطعة إلى المخزون.

`}else i+=`📅 *تفاصيل الحجز:*
`,i+=`   • 🏷️ نوع الاستشارة: ${((x=n.service)==null?void 0:x.title)||"غير محدد"}
`,i+=`   • 📅 التاريخ المحدد: ${((N=n.appointmentDetails)==null?void 0:N.preferredDate)||"غير محدد"}
`,i+=`   • ⏰ الوقت المحدد: ${((P=n.appointmentDetails)==null?void 0:P.preferredTime)||"غير محدد"}

`;i+=`📝 *الملاحظات الإضافية:*
`,i+=`   ${((O=n.orderDetails)==null?void 0:O.notes)||"لا توجد ملاحظات إضافية"}

`,i+=`⏰ *تاريخ ووقت طلب الإلغاء:*
`,i+=`   ${new Date().toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}

`,i+=`🌟 *رسالتنا لكم:*
`,i+=`نأسف لرغبتكم في إلغاء الطلب. نأمل أن نكون عند حسن ظنكم في المرات القادمة.
`,i+=`لأي استفسارات أو مساعدة، نحن هنا لمساعدتكم على مدار الساعة.

`,i+=`🔹 *معلومات التواصل:*
`,i+=`   • 📞 الهاتف: 201205830777
`,i+=`   • 🌐 الموقع: www.greenacademy.com

`,i+="شكراً لثقتكم بنا، نتمنى لكم دوام الصحة والعافية 🌿💚";const o=i.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,""),l=encodeURIComponent(o).replace(/\n/g,"%0A").replace(/\*/g,"%2A").replace(/_/g,"%5F");let c;if(s){c=`https://wa.me/${r}?text=${l}`;try{window.location.href=`whatsapp://send?phone=${r}&text=${l}`,setTimeout(()=>{window.location.href=c},500)}catch{c=`https://wa.me/${r}?text=${l}`}}else c=`https://web.whatsapp.com/send?phone=${r}&text=${l}`;return setTimeout(()=>{try{window.location.href=c}catch(S){console.error("❌ خطأ في فتح الواتساب:",S),window.location.href=c}},300),c},hB=async(n,t)=>{try{const r={userId:t.uid,courseId:n.id,courseTitle:n.title||"",coursePrice:n.price||0,courseDuration:n.duration||"",courseInstructor:n.instructor||"",courseStartDate:n.startDate||"",customerInfo:{name:t.displayName||t.name||"",email:t.email||"",phone:t.phone||""},status:"registered",registeredAt:new Date().toISOString(),createdAt:new Date().toISOString()},s=await ua(rt(le,"courseRegistrations"),r),i=JSON.parse(localStorage.getItem("courseRegistrations")||"[]"),o={...r,id:s.id};return i.push(o),localStorage.setItem("courseRegistrations",JSON.stringify(i)),Qo(r,"course"),{success:!0,registrationId:s.id,message:"تم التسجيل في الدورة بنجاح"}}catch(r){return console.error("❌ خطأ في تسجيل الدورة:",r),{success:!1,message:"حدث خطأ أثناء التسجيل في الدورة"}}},a_=async n=>{try{const r=JSON.parse(localStorage.getItem("courseRegistrations")||"[]").filter(s=>s.userId===n);if(r.length===0){const s=F5(rt(le,"courseRegistrations"),U5("userId","==",n)),i=await tn(s),o=[];return i.forEach(l=>{o.push({id:l.id,...l.data()})}),localStorage.setItem("courseRegistrations",JSON.stringify(o)),o}return r}catch(t){return console.error("❌ خطأ في جلب تسجيلات الدورات:",t),[]}},fB=async(n,t)=>{try{const r=Ie(le,"courseRegistrations",n);await mr(r,{status:"cancelled",cancelledAt:new Date().toISOString()});const s=JSON.parse(localStorage.getItem("courseRegistrations")||"[]"),i=s.map(l=>l.id===n?{...l,status:"cancelled",cancelledAt:new Date().toISOString()}:l);localStorage.setItem("courseRegistrations",JSON.stringify(i));const o=s.find(l=>l.id===n);if(o){const l={...o,customerInfo:{name:t.displayName||t.name||"",email:t.email||"",phone:t.phone||""}};Qo(l,"course_cancellation")}return{success:!0,message:"تم إلغاء التسجيل في الدورة بنجاح"}}catch(r){return console.error("❌ خطأ في إلغاء تسجيل الدورة:",r),{success:!1,message:"حدث خطأ أثناء إلغاء التسجيل في الدورة"}}},l_=(n,t)=>{try{return!!JSON.parse(localStorage.getItem("courseRegistrations")||"[]").find(i=>i.userId===n&&i.courseId===t&&i.status==="registered")}catch(r){return console.error("❌ خطأ في التحقق من تسجيل الدورة:",r),!1}},mB=()=>{const{user:n,isAuthenticated:t}=dt(),r=Rt(),[s,i]=I.useState([]),[o,l]=I.useState(!0),[c,u]=I.useState(null),[d,f]=I.useState(!1),m=[{bg:"bg-green-50",border:"border-green-100",text:"text-green-800",icon:a.jsx(Cr,{className:"h-6 w-6"}),button:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",accent:"bg-green-100"},{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-800",icon:a.jsx(Ws,{className:"h-6 w-6"}),button:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",accent:"bg-blue-100"},{bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-800",icon:a.jsx(Vo,{className:"h-6 w-6"}),button:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",accent:"bg-purple-100"},{bg:"bg-amber-50",border:"border-amber-100",text:"text-amber-800",icon:a.jsx(ra,{className:"h-6 w-6"}),button:"from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700",accent:"bg-amber-100"},{bg:"bg-teal-50",border:"border-teal-100",text:"text-teal-800",icon:a.jsx(Sn,{className:"h-6 w-6"}),button:"from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700",accent:"bg-teal-100"},{bg:"bg-rose-50",border:"border-rose-100",text:"text-rose-800",icon:a.jsx(vN,{className:"h-6 w-6"}),button:"from-rose-500 to-rose-600 hover:from-rose-600 hover:to-rose-700",accent:"bg-rose-100"}],p=j=>m[j%m.length],y=()=>n&&(n.role==="admin"||n.role==="owner")?(f(!0),!1):!0;I.useEffect(()=>{(async()=>{try{const b=await tn(rt(le,"courses")),v=[];b.forEach(x=>{v.push({id:x.id,...x.data()})}),i(v),l(!1)}catch(b){console.error("Error fetching courses:",b),u("حدث خطأ في تحميل الدورات. يرجى المحاولة مرة أخرى."),l(!1)}})()},[]),I.useEffect(()=>{n&&(async()=>{try{const b=await tn(rt(le,"courses")),v=[];b.forEach(x=>{v.push({id:x.id,...x.data()})}),i(v)}catch(b){console.error("Error fetching courses:",b)}})()},[n]),I.useEffect(()=>{if(n&&n.uid){const j=sessionStorage.getItem("selectedCourseId");if(j){const b=s.find(v=>v.id===j);b&&U({title:"دورة محفوظة",description:`يمكنك الآن التسجيل في دورة "${b.title}"`}),sessionStorage.removeItem("selectedCourseId")}}},[n,s]);const w=async j=>{if(!j||!j.id||!j.title){U({title:"خطأ في بيانات الدورة",description:"بيانات الدورة غير صحيحة",variant:"destructive"});return}if(!t()){U({title:"تسجيل الدخول مطلوب",description:"يجب تسجيل الدخول أولاً للتسجيل في الدورة",variant:"destructive"}),sessionStorage.setItem("selectedCourseId",j.id),r("/auth",{state:{from:{pathname:"/courses",search:`?courseId=${j.id}`},showLoginForm:!0,message:"يجب تسجيل الدخول للتسجيل في الدورة"}});return}if(y()){if(l_(n.uid,j.id)){U({title:"مسجل بالفعل",description:"أنت مسجل بالفعل في هذه الدورة",variant:"destructive"});return}try{const b=await hB(j,n);if(b.success){U({title:"تم التسجيل بنجاح",description:"تم تسجيلك في الدورة وإرسال رسالة تأكيد عبر الواتساب"});const v=encodeURIComponent(`مرحباً، تم تسجيلي في دورة "${j.title}" في أكاديمية الطب الأخضر. هل يمكنني الحصول على مزيد من المعلومات؟`),x=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let N;x?N=`https://wa.me/201205830777?text=${v}`:N=`https://web.whatsapp.com/send?phone=201205830777&text=${v}`,window.location.href=N}else U({title:"خطأ في التسجيل",description:b.message,variant:"destructive"})}catch(b){console.error("❌ خطأ في تسجيل الدورة:",b),U({title:"خطأ",description:"حدث خطأ أثناء التسجيل في الدورة",variant:"destructive"})}}},T=j=>{if(j==="whatsapp"){const b=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),v=encodeURIComponent("مرحباً، أريد التسجيل في الدورات التدريبية في أكاديمية الطب الأخضر. هل يمكنني الحصول على مزيد من المعلومات؟");let x;b?x=`https://wa.me/201205830777?text=${v}`:x=`https://web.whatsapp.com/send?phone=201205830777&text=${v}`,window.location.href=x}else j==="phone"&&(window.location.href="tel:01205830777")};return o?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Ar,{className:"h-12 w-12 animate-spin text-green-600"})}):c?a.jsx("div",{className:"text-center py-12 text-red-600",children:a.jsx("p",{children:c})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs(wt,{children:[a.jsx("title",{children:"الدورات التدريبية - أكاديمية الطب الأخضر"}),a.jsx("meta",{name:"description",content:"انضم إلى دوراتنا التدريبية المتخصصة في الطب البديل والعلاج الطبيعي"})]}),a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-50 via-white to-green-50 hero-pattern",children:[a.jsx("div",{className:"absolute inset-0 leaf-pattern opacity-30"}),a.jsx("div",{className:"relative container-responsive py-12 sm:py-16 lg:py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx(z.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6 font-arabic",children:a.jsx("span",{className:"gradient-text",children:"الدورات التدريبية"})}),a.jsx(z.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-lg sm:text-xl text-gray-700 mb-6 sm:mb-8 leading-relaxed font-arabic max-w-3xl mx-auto",children:"اكتشف عالم الطب البديل من خلال دوراتنا المتخصصة في الطب العربي القديم والعلاج بالأعشاب"}),a.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 shadow-lg border border-green-100 max-w-4xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[a.jsx(Cr,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold",children:"دورات معتمدة"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[a.jsx(Sn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold",children:"مدربون خبراء"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700",children:[a.jsx(Vo,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold",children:"شهادات معتمدة"})]})]})})]})})]}),a.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-white",children:a.jsxs("div",{className:"container-responsive",children:[a.jsxs(z.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-4 font-arabic",children:"اختر الدورة المناسبة لك"}),a.jsx("p",{className:"text-base sm:text-lg text-gray-600 max-w-2xl mx-auto font-arabic",children:"دورات متخصصة في الطب البديل والعلاج الطبيعي مع نخبة من المدربين الخبراء"})]}),s.length===0?a.jsx(qi,{type:"courses",title:"لا توجد دورات متاحة",description:"لم يتم إضافة أي دورات تدريبية بعد. تحقق من هذه الصفحة لاحقاً للحصول على أحدث الدورات المتخصصة.",actionText:"العودة للصفحة الرئيسية",onAction:()=>r("/")}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:s.map((j,b)=>a.jsx(z.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:`bg-white rounded-xl shadow-lg overflow-hidden border ${p(b).border} hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`,children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:`p-6 ${p(b).bg} text-center border-b ${p(b).border}`,children:[a.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 ${p(b).accent} rounded-full mb-4`,children:je.cloneElement(p(b).icon,{className:`h-8 w-8 ${p(b).text}`})}),a.jsx("h3",{className:`text-xl sm:text-2xl font-bold ${p(b).text} mb-2 font-arabic`,children:j.title||"دورة بدون عنوان"}),a.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${p(b).text} mb-2`,children:j.price&&typeof j.price=="number"?`${j.price} ج.م`:"مجاناً"})]}),a.jsxs("div",{className:"p-6 flex-grow",children:[j.instructor&&typeof j.instructor=="string"&&a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Sn,{className:`h-4 w-4 ${p(b).text} ml-2`}),a.jsxs("span",{className:`${p(b).text} font-semibold text-sm`,children:["المدرب: ",j.instructor]})]}),j.duration&&typeof j.duration=="string"&&a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(jn,{className:`h-4 w-4 ${p(b).text} ml-2`}),a.jsxs("span",{className:`${p(b).text} text-sm`,children:["المدة: ",j.duration]})]}),j.startDate&&typeof j.startDate=="string"&&a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ur,{className:`h-4 w-4 ${p(b).text} ml-2`}),a.jsxs("span",{className:`${p(b).text} text-sm`,children:["تاريخ البدء: ",j.startDate]})]}),j.description&&typeof j.description=="string"&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:`${p(b).text} opacity-80 text-sm leading-relaxed font-arabic`,children:j.description})}),j.features&&Array.isArray(j.features)&&j.features.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:`font-semibold ${p(b).text} mb-2 text-sm`,children:"مميزات الدورة:"}),a.jsx("ul",{className:"space-y-1",children:j.features.map((v,x)=>a.jsxs("li",{className:`flex items-start ${p(b).text} opacity-80 text-xs`,children:[a.jsx(Ds,{className:"h-3 w-3 ml-2 mt-0.5 flex-shrink-0 text-green-500"}),a.jsx("span",{className:"font-arabic",children:v})]},x))})]})]}),a.jsx("div",{className:"p-6 pt-0",children:n!=null&&n.uid&&j.id&&l_(n.uid,j.id)?a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"bg-green-100 text-green-800 px-4 py-3 rounded-lg font-semibold flex items-center justify-center gap-2",children:[a.jsx(Ds,{className:"h-5 w-5"}),"مسجل بالفعل"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 font-arabic",children:"يمكنك مراجعة تفاصيل التسجيل في ملفك الشخصي"})]}):a.jsxs("button",{onClick:()=>w(j),className:`w-full bg-gradient-to-r ${p(b).button} text-white font-semibold py-3 px-4 rounded-lg hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2 transform hover:scale-105`,children:[a.jsx(Cr,{className:"h-5 w-5"}),"سجل الآن"]})})]})},j.id))})]})}),a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs(z.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"تواصل معنا"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"للاستفسارات أو التسجيل المباشر في الدورات"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[a.jsxs(z.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg text-center hover:shadow-xl transition-shadow",onClick:()=>T("phone"),children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Gn,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"اتصل بنا"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"للحجز المباشر والاستفسارات"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"01205830777"}),a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"01093280132"})]})]}),a.jsxs(z.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"bg-white p-8 rounded-xl shadow-lg text-center hover:shadow-xl transition-shadow",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"واتساب"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"للتواصل السريع والمتابعة"}),a.jsx("button",{onClick:()=>T("whatsapp"),className:"inline-flex items-center justify-center rounded-md border border-blue-600 bg-transparent px-4 py-2 text-sm font-medium text-blue-600 shadow-sm hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"تواصل معنا عبر واتساب"})]})]})]})}),d&&a.jsx(Wh,{title:"غير مسموح للمشرفين",description:"عذراً، لا يمكن للمشرفين والملاك التسجيل في الدورات. هذه الميزة متاحة للمستخدمين العاديين فقط.",onBackClick:()=>f(!1)})]})},Nm=()=>{var O,S;const[n,t]=I.useState(!0),[r,s]=I.useState(!1),[i,o]=I.useState(!1),l=()=>{s(!r)},[c,u]=I.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[d,f]=I.useState(!1),{login:m,register:p,isAdmin:y,loading:w,user:T}=dt(),j=Rt();(S=(O=Pn().state)==null?void 0:O.from)!=null&&S.pathname;const[v,x]=I.useState("");I.useEffect(()=>{T&&(i||!n)&&(console.log("👤 تم تحديث حالة المستخدم:",T),T.role==="admin"||T.role==="owner"?(console.log("🔐 توجيه المدير للوحة التحكم"),U({title:"تم تسجيل الدخول بنجاح",description:"مرحباً بك في لوحة تحكم الأدمن"}),j("/admin",{replace:!0})):sessionStorage.getItem("selectedCourseId")?(console.log("📚 توجيه المستخدم للدورات بعد تسجيل الدخول"),sessionStorage.removeItem("selectedCourseId"),U(i?{title:"تم تسجيل الدخول بنجاح",description:"يمكنك الآن التسجيل في الدورات"}:{title:"مرحباً بك في أكاديمية الطب الأخضر! 🎉",description:`أهلاً وسهلاً بك ${T.name||T.displayName}! تم إنشاء حسابك بنجاح. يمكنك الآن التسجيل في الدورات.`}),j("/courses",{replace:!0})):(console.log("🏠 توجيه المستخدم للصفحة الرئيسية"),U(i?{title:"تم تسجيل الدخول بنجاح",description:"مرحباً بك في أكاديمية الطب الأخضر"}:{title:"مرحباً بك في أكاديمية الطب الأخضر! 🎉",description:`أهلاً وسهلاً بك ${T.name||T.displayName}! تم إنشاء حسابك بنجاح.`}),j("/",{replace:!0})),o(!1))},[T,i,n,j]),I.useEffect(()=>{u({name:"",email:"",phone:"",password:"",confirmPassword:""}),x("")},[n]);const N=_=>{u({...c,[_.target.name]:_.target.value})},P=async _=>{if(_.preventDefault(),x(""),n){if(!c.email||!c.password){x("الرجاء إدخال البريد الإلكتروني وكلمة المرور");return}}else{if(!c.name||!c.email||!c.phone||!c.password||!c.confirmPassword){x("الرجاء ملء جميع الحقول المطلوبة");return}if(c.password!==c.confirmPassword){x("كلمتا المرور غير متطابقتين");return}if(c.password.length<6){x("يجب أن تكون كلمة المرور 6 أحرف على الأقل");return}if(!/^[0-9]{10,11}$/.test(c.phone.replace(/\s/g,""))){x("يرجى إدخال رقم هاتف صحيح (10-11 رقم)");return}}try{if(f(!0),n){const C=await m(c.email,c.password);C.success?o(!0):x(C.error||"حدث خطأ في تسجيل الدخول. يرجى المحاولة مرة أخرى.")}else{console.log("🔄 بدء عملية التسجيل...");const C=await p(c.name,c.email,c.phone,c.password);C.success?console.log("✅ تم إنشاء الحساب بنجاح"):(console.error("❌ خطأ في إنشاء الحساب:",C.error),x(C.error||"حدث خطأ في إنشاء الحساب"))}}catch(C){console.error("Authentication error:",C),x("حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.")}finally{f(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsxs("title",{children:[n?"تسجيل الدخول":"إنشاء حساب جديد"," - أكاديمية الطب الأخضر الإلكترونية"]}),a.jsx("meta",{name:"description",content:n?"سجل دخولك إلى أكاديمية الطب الأخضر الإلكترونية":"أنشئ حساباً جديداً في أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})]}),w?a.jsx("div",{className:"bg-gradient-to-br from-green-50 via-white to-green-50 flex flex-col justify-center items-center py-4 sm:py-8 px-4 sm:px-6 lg:px-8 min-h-[calc(100vh-8rem)] auth-page-container",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-arabic",children:"جاري التحميل..."})]})}):a.jsx("div",{className:"bg-gradient-to-br from-green-50 via-white to-green-50 flex flex-col justify-center py-4 sm:py-8 px-4 sm:px-6 lg:px-8 min-h-[calc(100vh-8rem)] auth-page-container",children:a.jsxs("div",{className:"max-w-md w-full space-y-6 sm:space-y-8 mx-auto",children:[a.jsxs(z.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-4 sm:mb-6",children:[a.jsx("div",{className:"flex justify-center items-center mb-4 sm:mb-6",children:a.jsx(z.div,{whileHover:{rotate:360},transition:{duration:.5},className:"bg-gradient-to-r from-green-500 to-green-600 p-2 sm:p-3 rounded-full",children:a.jsx(uh,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})})}),a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600 font-arabic",children:n?"تسجيل الدخول":"إنشاء حساب جديد"}),a.jsx("div",{className:"w-12 sm:w-16 h-1 bg-green-100 rounded-full mx-auto"}),a.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-600 font-arabic",children:n?"مرحباً بعودتك إلى أكاديمية الطب الأخضر":"انضم إلى أكاديمية الطب الأخضر"})]}),v&&a.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 text-red-600 rounded-lg text-right font-arabic text-xs sm:text-sm",children:v}),a.jsxs(z.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 auth-form-container",children:[a.jsxs("form",{onSubmit:P,className:"space-y-3 sm:space-y-4 lg:space-y-6",dir:"rtl",children:[!n&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 font-arabic",children:"الاسم الكامل"}),a.jsxs("div",{className:"relative",children:[a.jsx(Se,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("input",{id:"name",name:"name",type:"text",required:!n,value:c.name,onChange:N,className:"appearance-none relative block w-full pl-3 pr-12 py-2 sm:py-2.5 lg:py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 text-right text-sm sm:text-base auth-input",placeholder:"أدخل اسمك الكامل"})]})]}),!n&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 font-arabic",children:"رقم الهاتف"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("input",{id:"phone",name:"phone",type:"tel",required:!n,value:c.phone,onChange:N,className:"appearance-none relative block w-full pl-3 pr-12 py-2 sm:py-2.5 lg:py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 text-right text-sm sm:text-base auth-input",placeholder:"أدخل رقم الهاتف (مثال: 0123456789)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 font-arabic",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ll,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:N,className:"appearance-none relative block w-full pl-3 pr-12 py-2 sm:py-2.5 lg:py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 text-right text-sm sm:text-base auth-input",placeholder:"أدخل بريدك الإلكتروني"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 font-arabic",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(gw,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("input",{id:"password",name:"password",type:r?"text":"password",required:!0,value:c.password,onChange:N,className:"appearance-none relative block w-full pl-12 pr-12 py-2 sm:py-2.5 lg:py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 text-right text-sm sm:text-base auth-input",placeholder:"أدخل كلمة المرور"}),a.jsx("button",{type:"button",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:l,children:r?a.jsx(I4,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(C4,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),!n&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 font-arabic",children:"تأكيد كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(gw,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:r?"text":"password",required:!n,value:c.confirmPassword,onChange:N,className:"appearance-none relative block w-full pl-3 pr-12 py-2 sm:py-2.5 lg:py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 text-right text-sm sm:text-base auth-input",placeholder:"أعد إدخال كلمة المرور"})]})]}),a.jsx(G,{type:"submit",disabled:w||d,className:"w-full py-3 sm:py-4 lg:py-6 text-sm sm:text-base lg:text-lg font-arabic auth-button",children:w||d?a.jsxs("span",{className:"flex items-center justify-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 sm:h-5 sm:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"جاري تسجيل الدخول...":"جاري إنشاء الحساب..."]}):n?"تسجيل الدخول":"إنشاء حساب"}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>t(!n),className:"text-green-600 hover:text-green-500 font-medium font-arabic text-xs sm:text-sm",children:n?"ليس لديك حساب؟ أنشئ حساباً جديداً":"لديك حساب بالفعل؟ سجل دخولك"})})]}),a.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-xs sm:text-sm text-blue-800 font-arabic mb-1 sm:mb-2",children:"مرحباً بك في أكاديمية الطب الأخضر"}),a.jsx("p",{className:"text-xs text-blue-700 font-arabic",children:n?"سجل دخولك للوصول إلى جميع الخدمات":"أنشئ حسابك للاستفادة من خدماتنا"})]})]})]})})]})},KI=async(n,t)=>{try{const r=Ie(le,"products",n),s=await mi(r);if(!s.exists())throw new Error("المنتج غير موجود");const o=s.data().stockQuantity||0;if(t>o)throw new Error(`الكمية المطلوبة (${t}) أكبر من الكمية المتاحة (${o})`);const l=o-t;return await mr(r,{stockQuantity:l,updatedAt:new Date().toISOString()}),console.log(`✅ تم تحديث مخزون المنتج: ${n}, الكمية الجديدة: ${l}`),l}catch(r){throw console.error("❌ خطأ في تحديث المخزون:",r),r}},pB=(n,t)=>{const r=n.stockQuantity||0;return{isAvailable:t<=r,availableStock:r,requestedQuantity:t}},gB=async(n,t)=>{try{const r=Ie(le,"products",n),s=await mi(r);if(!s.exists())throw new Error("المنتج غير موجود");const l=(s.data().stockQuantity||0)+t;return await mr(r,{stockQuantity:l,updatedAt:new Date().toISOString()}),console.log(`✅ تم إرجاع ${t} وحدة للمخزون. المجموع الجديد: ${l}`),l}catch(r){throw console.error("❌ خطأ في إرجاع المخزون:",r),r}},yB=Object.freeze(Object.defineProperty({__proto__:null,checkStockAvailability:pB,returnProductStock:gB,updateProductStock:KI},Symbol.toStringTag,{value:"Module"})),vB=()=>{var N,P,O;const{user:n}=dt(),t=Pn(),r=Rt(),[s,i]=I.useState(!1),[o,l]=I.useState({}),[c,u]=I.useState(!1),[d,f]=I.useState({phone:"",address:"",notes:"",preferredDate:"",preferredTime:"",quantity:"1"}),m=(N=t.state)==null?void 0:N.service,p=(P=t.state)==null?void 0:P.product,y=((O=t.state)==null?void 0:O.type)||"service";I.useEffect(()=>{if(!m&&!p){r("/");return}},[m,p,r]);const w=()=>n&&(n.role==="admin"||n.role==="owner")?(u(!0),!1):!0,T=S=>{f({...d,[S.target.name]:S.target.value})},j=()=>{const S={};return d.phone.trim()?/^[0-9+\s-]+$/.test(d.phone)?d.phone.replace(/[^0-9]/g,"").length<10&&(S.phone="يجب أن يكون رقم الهاتف صالحاً (10 أرقام على الأقل)"):S.phone="يجب أن يحتوي رقم الهاتف على أرقام فقط":S.phone="رقم الهاتف مطلوب",d.address.trim()||(S.address="العنوان مطلوب"),l(S),Object.keys(S).length===0},b=async S=>{if(S.preventDefault(),!w())return;if(!j()){const C=document.querySelector('[data-error="true"]');C&&C.scrollIntoView({behavior:"smooth",block:"center"});return}i(!0);try{if(await new Promise(C=>setTimeout(C,2e3)),y==="product"){const C=parseInt(d.quantity)||1;if(C>p.stockQuantity)throw new Error(`الكمية المطلوبة (${C}) أكبر من الكمية المتاحة (${p.stockQuantity})`);const R={id:Date.now().toString(),userId:n.uid,type:"product",product:p,customerInfo:{name:n.name||n.displayName,email:n.email,phone:d.phone,address:d.address},orderDetails:{quantity:C,notes:d.notes},status:"pending",createdAt:new Date().toISOString()};await KI(p.id,C);const A=JSON.parse(localStorage.getItem("orders")||"[]");A.push(R),localStorage.setItem("orders",JSON.stringify(A)),Qo(R,"product"),U({title:"تم طلب المنتج بنجاح!",description:"سيتم التواصل معك قريباً لتأكيد الطلب"}),r("/booking-confirmation",{state:{order:R,type:"product"}})}else{const C={id:Date.now().toString(),userId:n.uid,type:"service",service:m,customerInfo:{name:n.name||n.displayName,email:n.email,phone:d.phone,address:d.address},appointmentDetails:{preferredDate:d.preferredDate,preferredTime:d.preferredTime,notes:d.notes},status:"pending",createdAt:new Date().toISOString()},R=JSON.parse(localStorage.getItem("bookings")||"[]");R.push(C),localStorage.setItem("bookings",JSON.stringify(R)),Qo(C,"service"),U({title:"تم حجز الاستشارة بنجاح!",description:"سيتم التواصل معك قريباً لتأكيد الموعد"}),r("/booking-confirmation",{state:{booking:C,type:"service"}})}}catch(C){U({title:C.message.includes("أكبر من الكمية المتاحة")?"خطأ في الكمية المطلوبة":"خطأ في عملية الدفع",description:C.message.includes("أكبر من الكمية المتاحة")?C.message:"حدث خطأ أثناء معالجة طلبك. يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{i(!1)}};if(!m&&!p)return null;const v=m||p,x=y==="product";return a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsxs("title",{children:[x?"شراء المنتج":"إتمام الحجز"," - أكاديمية الطب الأخضر الإلكترونية"]}),a.jsx("meta",{name:"description",content:x?"أكمل شراء منتجك من أكاديمية الطب الأخضر الإلكترونية":"أكمل حجز استشارتك الطبية في أكاديمية الطب الأخضر الإلكترونية"})]}),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 py-12",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 font-arabic",children:x?"شراء المنتج":"إتمام حجز الاستشارة"}),a.jsx("p",{className:"text-lg text-gray-600 font-arabic",children:x?"أكمل بياناتك لتأكيد شراء المنتج":"أكمل بياناتك لتأكيد الحجز"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(z.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 font-arabic",children:x?"ملخص المنتج":"ملخص الطلب"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse p-4 bg-green-50 rounded-lg",children:[x?a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:v.imageURL||v.image||"/article-images/product1.jpg",alt:v.title||v.name,className:"w-full h-full object-cover",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:S=>{console.error("❌ خطأ في تحميل صورة المنتج:",S.target.src),S.target.src="/article-images/product1.jpg"}})}):a.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${v.color} rounded-lg flex items-center justify-center`,children:a.jsx(v.icon,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 font-arabic",children:v.title||v.name}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:v.description})]})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[!x&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-arabic",children:"المدة:"}),a.jsx("span",{className:"font-semibold font-arabic",children:v.duration})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 font-arabic",children:"السعر:"}),a.jsx("span",{className:"font-semibold font-arabic",children:typeof v.price=="number"?`${v.price} جنيه`:v.price})]})]}),!x&&v.features&&a.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3 font-arabic",children:"المميزات المشمولة:"}),a.jsx("div",{className:"space-y-2",children:v.features.map((S,_)=>a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(Ds,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700 font-arabic",children:S})]},_))})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[a.jsx("span",{className:"font-arabic",children:"المجموع:"}),a.jsx("span",{className:"text-green-600 font-arabic",children:typeof v.price=="number"?`${v.price} جنيه`:v.price})]})})]})]}),a.jsxs(z.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 font-arabic",children:x?"بيانات الطلب":"بيانات الحجز"}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-arabic",children:"البيانات الشخصية"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"الاسم"}),a.jsxs("div",{className:"relative",children:[a.jsx(Se,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"text",value:(n==null?void 0:n.name)||"",disabled:!0,className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg bg-gray-50 text-right"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ll,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"email",value:(n==null?void 0:n.email)||"",disabled:!0,className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg bg-gray-50 text-right"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"رقم الهاتف"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"tel",name:"phone",value:d.phone,onChange:T,className:`w-full pl-3 pr-12 py-3 border ${o.phone?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right`,placeholder:"أدخل رقم هاتفك","data-error":!!o.phone}),o.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 text-right",children:o.phone})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"العنوان"}),a.jsxs("div",{children:[a.jsx("textarea",{name:"address",value:d.address,onChange:T,rows:3,className:`w-full px-3 py-3 border ${o.address?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right`,placeholder:"أدخل عنوانك الكامل","data-error":!!o.address}),o.address&&a.jsx("p",{className:"mt-1 text-sm text-red-600 text-right",children:o.address})]})]})]}),x&&a.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-arabic",children:"تفاصيل المنتج"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:["الكمية المطلوبة (المتاح: ",p.stockQuantity||0," قطعة)"]}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"number",name:"quantity",min:"1",required:!0,value:d.quantity,onChange:T,className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"1"})]})]})]}),!x&&a.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-arabic",children:"تفاصيل الموعد"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"التاريخ المفضل"}),a.jsxs("div",{className:"relative",children:[a.jsx(ur,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"date",name:"preferredDate",required:!0,value:d.preferredDate,onChange:T,min:new Date().toISOString().split("T")[0],className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"الوقت المفضل"}),a.jsxs("div",{className:"relative",children:[a.jsx(jn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsxs("select",{name:"preferredTime",required:!0,value:d.preferredTime,onChange:T,className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",children:[a.jsx("option",{value:"",children:"اختر الوقت المفضل"}),a.jsx("option",{value:"09:00",children:"9:00 صباحاً"}),a.jsx("option",{value:"10:00",children:"10:00 صباحاً"}),a.jsx("option",{value:"11:00",children:"11:00 صباحاً"}),a.jsx("option",{value:"12:00",children:"12:00 ظهراً"}),a.jsx("option",{value:"14:00",children:"2:00 مساءً"}),a.jsx("option",{value:"15:00",children:"3:00 مساءً"}),a.jsx("option",{value:"16:00",children:"4:00 مساءً"}),a.jsx("option",{value:"17:00",children:"5:00 مساءً"}),a.jsx("option",{value:"19:00",children:"7:00 مساءً"}),a.jsx("option",{value:"20:00",children:"8:00 مساءً"})]})]})]})]}),a.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-arabic",children:x?"تفاصيل الطلب":"ملاحظات إضافية"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:x?"ملاحظات حول الطلب":"ملاحظات إضافية"}),a.jsx("textarea",{name:"notes",value:d.notes,onChange:T,rows:3,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:x?"أي ملاحظات حول المنتج أو الطلب...":"أي ملاحظات أو تفاصيل إضافية عن حالتك..."})]})]}),a.jsx("div",{className:"mt-8 space-y-4",children:a.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[a.jsx(G,{type:"button",variant:"outline",className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 py-4 text-lg font-semibold",onClick:()=>r("/ads"),children:"العودة للإعلانات"}),a.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-4 text-lg font-semibold",disabled:s,children:s?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"جاري المعالجة..."]}):a.jsxs(a.Fragment,{children:[a.jsx(S4,{className:"h-5 w-5 ml-2"}),x?"تأكيد الشراء":"تأكيد الحجز والدفع"]})})]})})]})]})]})]})}),c&&a.jsx(Wh,{title:"غير مسموح للمشرفين",description:"عذراً، لا يمكن للمشرفين والملاك إكمال عمليات الدفع أو الحجوزات. هذه الميزة متاحة للمستخدمين العاديين فقط.",onBackClick:()=>u(!1)})]})},Gh=({userName:n})=>a.jsx("section",{className:"bg-gradient-to-r from-green-600 to-green-800 py-6 sm:py-8",children:a.jsx("div",{className:"container-responsive",children:a.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 font-arabic",children:"لوحة الإدارة"}),a.jsxs("p",{className:"text-green-100 font-arabic text-sm sm:text-base",children:["مرحباً، ",n]})]})})}),Xe=je.forwardRef(({className:n,type:t,...r},s)=>a.jsx("input",{type:t,className:Hs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...r}));Xe.displayName="Input";const xB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0),[i,o]=I.useState(!1),[l,c]=I.useState(null),[u,d]=I.useState({title:"",summary:"",duration:"",details:"",price:""}),f=async()=>{try{s(!0);const b=await tn(rt(le,"consultations"));let v=[];return b.forEach(x=>{const N=x.data();v.push({id:x.id,title:N.title||"بدون عنوان",summary:N.summary||"",duration:N.duration||"غير محدد",details:N.details||"",price:N.price||0,status:N.status||"active",createdAt:N.createdAt||new Date().toISOString(),updatedAt:N.updatedAt||null})}),v.sort((x,N)=>new Date(N.createdAt)-new Date(x.createdAt)),t(v),v}catch(b){return console.error("خطأ في جلب الاستشارات:",b),U({title:"خطأ",description:"حدث خطأ أثناء جلب قائمة الاستشارات: "+(b.message||"خطأ غير معروف"),variant:"destructive"}),[]}finally{s(!1)}};I.useEffect(()=>{f()},[]);const m=b=>{const{name:v,value:x}=b.target;d(N=>({...N,[v]:x}))},p=b=>{const v=b.target.value;if(!v.trim())return;const x=v.split(`
`).map(N=>N.trim()).filter(N=>N).map(N=>N.startsWith("(✓)")?N:`(✓) ${N}`).join(`
`);d(N=>({...N,details:x}))},y=()=>{d({title:"",summary:"",duration:"30 دقيقة",details:"",price:""}),c(null),o(!1),document.querySelectorAll(".text-red-500").forEach(x=>x.remove());const v=document.getElementById("consultation-title");v&&v.focus()},w=async b=>{b.preventDefault();const v=b.target.querySelector('button[type="submit"]'),x=v.innerHTML;v.disabled=!0,v.innerHTML='<span class="animate-pulse">جاري الحفظ...</span>';try{if(!u.title||!u.duration||!u.price)throw new Error("الرجاء ملء جميع الحقول المطلوبة");const N={title:u.title.trim(),summary:u.summary.trim(),duration:u.duration.toString().trim(),details:u.details.trim(),price:parseFloat(u.price)||0,updatedAt:new Date().toISOString()};l?(await mr(Ie(le,"consultations",l),{...N,updatedAt:new Date().toISOString()}),U({title:"تم التحديث",description:"تم تحديث الاستشارة بنجاح"})):(await ua(rt(le,"consultations"),{...N,createdAt:new Date().toISOString(),status:"active"}),U({title:"تمت الإضافة",description:"تمت إضافة الاستشارة بنجاح"})),y(),await f()}catch(N){console.error("خطأ في حفظ الاستشارة:",N),U({title:"خطأ",description:N.message||"حدث خطأ أثناء حفظ الاستشارة",variant:"destructive"})}finally{v&&(v.disabled=!1,v.innerHTML=x)}},T=b=>{d({title:b.title,summary:b.summary||"",duration:b.duration,details:b.details||"",price:b.price}),c(b.id),o(!0)},j=async b=>{if(window.confirm("هل أنت متأكد من حذف هذه الاستشارة؟"))try{await ca(Ie(le,"consultations",b)),U({title:"تم الحذف",description:"تم حذف الاستشارة بنجاح"}),f()}catch(v){console.error("خطأ في حذف الاستشارة:",v),U({title:"خطأ",description:"حدث خطأ أثناء حذف الاستشارة",variant:"destructive"})}};return a.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-arabic",children:"إدارة الاستشارات"}),a.jsxs(G,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"ml-2 h-4 w-4"}),"إضافة استشارة جديدة"]})]}),i&&a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold font-arabic",children:l?"تعديل الاستشارة":"إضافة استشارة جديدة"}),a.jsx(G,{variant:"ghost",size:"icon",onClick:y,children:a.jsx(yn,{className:"h-4 w-4"})})]}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:["عنوان الاستشارة ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Xe,{name:"title",value:u.title,onChange:m,placeholder:"مثال: استشارة في الطب البديل",className:"font-arabic",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"نبذة عن الاستشارة"}),a.jsx(Xe,{as:"textarea",id:"summary",value:u.summary,onChange:b=>d({...u,summary:b.target.value}),placeholder:"أدخل نبذة مختصرة عن الاستشارة",className:"w-full mt-1 min-h-[80px]",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic flex items-center",children:[a.jsx(jn,{className:"ml-1 h-4 w-4"}),"مدة الاستشارة ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Xe,{name:"duration",value:u.duration,onChange:m,placeholder:"مثال: 30 دقيقة",className:"font-arabic",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic flex items-center",children:[a.jsx(pN,{className:"ml-1 h-4 w-4"}),"سعر الاستشارة ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Xe,{type:"number",name:"price",value:u.price,onChange:m,placeholder:"مثال: 200",className:"font-arabic",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 font-arabic flex items-center",children:[a.jsx(Ws,{className:"ml-1 h-4 w-4"}),"تفاصيل ما سيتم في الاستشارة"]}),a.jsx("span",{className:"text-xs text-gray-500",children:"اكتب كل نقطة في سطر جديد"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{id:"details",name:"details",value:u.details,onChange:m,onBlur:p,placeholder:"اكتب كل نقطة في سطر جديد، سيتم إضافة ✓ تلقائياً",className:"w-full p-3 border rounded-md min-h-[120px] font-arabic text-right leading-relaxed focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:5}),a.jsxs("div",{className:"absolute left-2 top-2 text-xs text-gray-400",children:[u.details?u.details.split(`
`).length:0," نقطة"]})]}),a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded border border-gray-200",children:[a.jsx("p",{className:"text-center text-sm font-medium text-gray-700 mb-2",children:"معاينة"}),a.jsx("div",{className:"bg-white p-3 rounded border border-dashed border-gray-300 min-h-[60px]",children:u.details?a.jsx("div",{className:"flex flex-col items-end space-y-2 w-full",children:u.details.split(`
`).filter(b=>b.trim()).map((b,v)=>a.jsxs("div",{className:"flex items-center w-full justify-end",children:[a.jsx("span",{className:"text-right w-full",children:b.replace("(✓)","").trim()}),a.jsx("span",{className:"text-green-600 mr-2",children:"•"})]},v))}):a.jsx("div",{className:"text-gray-400 text-sm",children:"ستظهر معاينة النص هنا..."})})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse pt-4",children:[a.jsx(G,{type:"button",variant:"outline",onClick:y,children:"إلغاء"}),a.jsxs(G,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[a.jsx(Os,{className:"ml-2 h-4 w-4"}),l?"حفظ التعديلات":"حفظ الاستشارة"]})]})]})]}),r?a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[a.jsx(Ue,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2 font-arabic",children:"لا توجد استشارات"}),a.jsx("p",{className:"text-gray-500 font-arabic",children:"لم يتم إضافة أي استشارات بعد"}),a.jsxs(G,{onClick:()=>o(!0),className:"mt-4 bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"ml-2 h-4 w-4"}),"إضافة استشارة جديدة"]})]}):a.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"عنوان الاستشارة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"المدة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"السعر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(b=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 font-arabic",children:b.title}),b.summary&&a.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:b.summary})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-arabic",children:b.duration}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-arabic",children:[b.price," ج.م"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>T(b),className:"text-blue-600 hover:text-blue-800",children:[a.jsx(na,{className:"h-4 w-4 ml-1"}),"تعديل"]}),a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>j(b.id),className:"text-red-600 hover:text-red-800",children:[a.jsx(Pr,{className:"h-4 w-4 ml-1"}),"حذف"]})]})})]},b.id))})]})})]})},QI=({currentImage:n,onImageChange:t,placeholder:r="صورة المحتوى",className:s="",showPreview:i=!0,required:o=!1})=>{const[l,c]=I.useState(""),[u,d]=I.useState(!1),[f,m]=I.useState(!1),[p,y]=I.useState(!1),w=I.useRef(null),{toast:T}=dh(),j=async N=>{const P=N.target.files[0];if(P){if(!P.type.startsWith("image/")){T({title:"خطأ في نوع الملف",description:"يرجى اختيار ملف صورة صالح",variant:"destructive"});return}if(P.size>2*1024*1024){T({title:"الملف كبير جداً",description:"يرجى اختيار صورة بحجم أقل من 2 ميجابايت",variant:"destructive"});return}d(!0);try{const O=new FileReader;O.onload=S=>{const _=S.target.result,C=new window.Image;C.onload=()=>{const R=document.createElement("canvas"),A=R.getContext("2d");let{width:L,height:D}=C;const $=800;L>D?L>$&&(D=D*$/L,L=$):D>$&&(L=L*$/D,D=$),R.width=L,R.height=D,A.drawImage(C,0,0,L,D);const Z=R.toDataURL("image/jpeg",.8);t(Z),d(!1),y(!1),T({title:"تم رفع الصورة بنجاح",description:"تم حفظ الصورة في قاعدة البيانات"})},C.src=_},O.readAsDataURL(P)}catch(O){console.error("Error uploading image:",O),d(!1),T({title:"خطأ في رفع الصورة",description:"حدث خطأ أثناء رفع الصورة. يرجى المحاولة مرة أخرى",variant:"destructive"})}}},b=()=>{if(!l.trim()){o&&T({title:"خطأ",description:"رابط الصورة مطلوب",variant:"destructive"});return}if(!l.match(/\.(jpg|jpeg|png|gif|webp)$/i)){T({title:"رابط غير صالح",description:"يرجى إدخال رابط صورة صالح (JPG, PNG, GIF, WebP)",variant:"destructive"});return}d(!0);const N=new window.Image;N.onload=()=>{t(l),d(!1),m(!1),c(""),T({title:"تم تحديث الصورة بنجاح",description:"تم حفظ الصورة من الرابط"})},N.onerror=()=>{d(!1),T({title:"رابط غير صالح",description:"لا يمكن الوصول إلى الصورة من هذا الرابط",variant:"destructive"})},N.src=l},v=()=>{t(""),T({title:"تم حذف الصورة",description:"تم إزالة الصورة"})},x=n||"/placeholder-image.png";return a.jsxs("div",{className:`space-y-4 ${s}`,children:[i&&a.jsx("div",{className:"flex flex-col items-center space-y-4",children:a.jsxs(z.div,{className:"relative group",whileHover:{scale:1.02},transition:{duration:.2},children:[a.jsx("div",{className:"w-48 h-32 rounded-lg overflow-hidden border-2 border-gray-200 shadow-md bg-gray-50",children:a.jsx("img",{src:x,alt:"صورة",className:"w-full h-full object-cover",onError:N=>{N.target.src="/placeholder-image.png"}})}),u&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:a.jsx(Ar,{className:"w-6 h-6 text-white animate-spin"})})]})}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[a.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:()=>y(!p),disabled:u,className:"flex items-center gap-2",children:[a.jsx(yN,{className:"w-4 h-4"}),"رفع من الجهاز"]}),a.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:()=>m(!f),disabled:u,className:"flex items-center gap-2",children:[a.jsx(Cp,{className:"w-4 h-4"}),"رابط صورة"]}),n&&a.jsxs(G,{type:"button",variant:"destructive",size:"sm",onClick:v,disabled:u,className:"flex items-center gap-2",children:[a.jsx(yn,{className:"w-4 h-4"}),"حذف"]})]}),p&&a.jsxs(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(A4,{className:"w-4 h-4"}),"رفع صورة من الجهاز",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:j,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:u}),a.jsx(G,{type:"button",onClick:()=>{var N;return(N=w.current)==null?void 0:N.click()},disabled:u,size:"sm",className:"flex items-center gap-2",children:u?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"اختيار"]})})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsx("p",{children:"• يدعم الصور: JPG, PNG, GIF, WebP"}),a.jsx("p",{children:"• الحد الأقصى: 2 ميجابايت"}),a.jsx("p",{children:"• سيتم ضغط الصورة تلقائياً لتحسين الأداء"}),a.jsx("p",{children:"• الصورة تُحفظ في قاعدة البيانات كـ Base64"})]})]}),f&&a.jsxs(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(Cp,{className:"w-4 h-4"}),r,o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",value:l,onChange:N=>c(N.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:u,required:o}),a.jsx(G,{type:"button",onClick:b,disabled:u||!l.trim(),size:"sm",className:"flex items-center gap-2",children:u?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Ur,{className:"w-4 h-4"}),"إضافة"]})})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsx("p",{children:"• يدعم الروابط المباشرة للصور (JPG, PNG, GIF, WebP)"}),a.jsx("p",{children:"• تأكد من أن الرابط يبدأ بـ https://"}),a.jsx("p",{children:"• يمكنك استخدام خدمات مثل: Imgur, ImgBB, أو أي موقع صور آخر"}),a.jsx("p",{children:"• مثال: https://i.imgur.com/example.jpg"})]})]}),o&&!n&&a.jsx("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg border border-amber-200",children:a.jsx("p",{children:"⚠️ الصورة مطلوبة لهذا المحتوى"})})]})},wB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0),[i,o]=I.useState(!1),[l,c]=I.useState(null),[u,d]=I.useState({title:"",content:"",date:new Date().toISOString().split("T")[0],author:"أبو حسين محمد خليل"}),[f,m]=I.useState(""),[p,y]=I.useState(!1),w=async()=>{try{console.log("بدء جلب المقالات من Firebase..."),console.log("حالة المصادقة:",be.currentUser?"مسجل دخول":"غير مسجل");const P=rt(le,"articles");console.log("تم إنشاء مرجع المجموعة");const O=await tn(P);console.log("تم جلب البيانات، عدد المستندات:",O.size);const S=O.docs.map(_=>({id:_.id,..._.data()}));console.log("البيانات المجلبة:",S),t(S),U({title:"تم جلب المقالات بنجاح",description:`تم جلب ${S.length} مقال من قاعدة البيانات`})}catch(P){console.error("خطأ مفصل في جلب المقالات:",{message:P.message,code:P.code,stack:P.stack});let O="حدث خطأ أثناء جلب المقالات";P.code==="permission-denied"?O="ليس لديك صلاحية للوصول إلى قاعدة البيانات. تحقق من إعدادات Firebase Security Rules":P.code==="unavailable"?O="قاعدة البيانات غير متاحة حالياً. تحقق من اتصال الإنترنت":P.message.includes("network")&&(O="مشكلة في الشبكة. تحقق من اتصال الإنترنت"),U({title:"خطأ في جلب المقالات",description:O,variant:"destructive"})}finally{s(!1)}};I.useEffect(()=>{(async()=>{try{lc(be,async O=>{O?(console.log("المستخدم مصادق عليه:",O.uid),w()):(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول مجهول..."),await Fo(be),console.log("تم تسجيل الدخول بشكل مجهول"),w())})}catch(O){console.error("خطأ في المصادقة:",O),U({title:"خطأ في المصادقة",description:"حدث خطأ في تسجيل الدخول",variant:"destructive"})}})()},[]);const T=P=>{m(P)},j=async P=>{var O;P.preventDefault(),y(!0);try{console.log("بدء عملية حفظ المقال..."),be.currentUser||(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول..."),await Fo(be),console.log("تم تسجيل الدخول بنجاح")),console.log("المستخدم الحالي:",(O=be.currentUser)==null?void 0:O.uid),console.log("بيانات النموذج:",u),console.log("رابط الصورة:",f);let S=(l==null?void 0:l.imageURL)||"";if(f&&(S=f),!u.title||!u.content||!u.author)throw new Error("يجب ملء جميع الحقول المطلوبة");const _={title:u.title.trim(),content:u.content.trim(),author:u.author.trim(),date:u.date||new Date().toISOString().split("T")[0],imageURL:S||"",likesCount:(l==null?void 0:l.likesCount)||0,commentsCount:(l==null?void 0:l.commentsCount)||0,createdAt:(l==null?void 0:l.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("بيانات المقال النهائية:",_),l){console.log("تحديث مقال موجود:",l.id);const C=Ie(le,"articles",l.id);await mr(C,_),console.log("تم تحديث المقال بنجاح"),U({title:"تم تحديث المقال بنجاح",description:"تم حفظ التعديلات على المقال"})}else{console.log("إضافة مقال جديد...");const C=await ua(rt(le,"articles"),_);console.log("تم إضافة المقال بنجاح، ID:",C.id),U({title:"تم إضافة المقال بنجاح",description:"تم حفظ المقال الجديد في قاعدة البيانات"})}console.log("إعادة تحميل المقالات..."),await w(),x()}catch(S){console.error("خطأ مفصل في حفظ المقال:",{message:S.message,code:S.code,stack:S.stack});let _="حدث خطأ أثناء حفظ المقال";S.code==="permission-denied"?_="ليس لديك صلاحية لحفظ المقالات. تحقق من إعدادات Firebase Security Rules":S.code==="unavailable"?_="قاعدة البيانات غير متاحة حالياً. تحقق من اتصال الإنترنت":S.message.includes("storage")?_="خطأ في رفع الصورة. تحقق من إعدادات Firebase Storage":S.message.includes("network")&&(_="مشكلة في الشبكة. تحقق من اتصال الإنترنت"),U({title:"خطأ في حفظ المقال",description:_,variant:"destructive"})}finally{y(!1)}},b=async P=>{if(window.confirm("هل أنت متأكد من حذف هذا المقال؟"))try{await ca(Ie(le,"articles",P)),U({title:"تم حذف المقال",description:"تم حذف المقال بنجاح من قاعدة البيانات"}),await w()}catch(O){console.error("خطأ في حذف المقال:",O),U({title:"خطأ في حذف المقال",description:"حدث خطأ أثناء حذف المقال",variant:"destructive"})}},v=P=>{c(P),d({title:P.title,content:P.content,date:P.date,author:P.author}),m(P.imageURL||""),o(!0)},x=()=>{o(!1),c(null),d({title:"",content:"",date:new Date().toISOString().split("T")[0],author:"أبو حسين محمد خليل"}),m("")},N=P=>{const{name:O,value:S}=P.target;d(_=>({..._,[O]:S}))};return r?a.jsxs("div",{className:"flex justify-center items-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),a.jsx("span",{className:"mr-2 font-arabic",children:"جاري تحميل المقالات..."})]}):a.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-arabic",children:"إدارة المقالات"}),a.jsxs(G,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"h-4 w-4 ml-2"}),"إضافة مقال جديد"]})]}),i&&a.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-lg border shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold font-arabic",children:l?"تعديل المقال":"إضافة مقال جديد"}),a.jsx(G,{variant:"ghost",size:"sm",onClick:x,children:a.jsx(yn,{className:"h-4 w-4"})})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"عنوان المقال"}),a.jsx("input",{type:"text",name:"title",value:u.title,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 font-arabic",placeholder:"أدخل عنوان المقال"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"تاريخ النشر"}),a.jsx("input",{type:"date",name:"date",value:u.date,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"اسم الكاتب"}),a.jsx("input",{type:"text",name:"author",value:u.author,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 font-arabic",placeholder:"أدخل اسم الكاتب"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"محتوى المقال"}),a.jsx("textarea",{name:"content",value:u.content,onChange:N,required:!0,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 font-arabic",placeholder:"أدخل محتوى المقال"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 font-arabic",children:"صورة المقال"}),a.jsx(QI,{currentImage:f,onImageChange:T,placeholder:"رابط صورة المقال",required:!1,showPreview:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[a.jsx(G,{type:"button",variant:"outline",onClick:x,disabled:p,children:"إلغاء"}),a.jsx(G,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",disabled:p,children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري الحفظ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Os,{className:"h-4 w-4 ml-2"}),l?"تحديث المقال":"حفظ المقال"]})})]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"الصورة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"العنوان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"الكاتب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"التاريخ"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"الإعجابات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"التعليقات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-arabic",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[a.jsx(Ws,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-arabic",children:"لا توجد مقالات حالياً"}),a.jsx("p",{className:"text-sm text-gray-400 font-arabic",children:"ابدأ بإضافة مقال جديد"})]})}):n.map(P=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P.imageURL?a.jsx("img",{src:P.imageURL,alt:P.title,className:"h-12 w-12 object-cover rounded-lg",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{console.log("✅ تم تحميل صورة Dashboard بنجاح:",P.imageURL)},onError:O=>{console.error("❌ خطأ في تحميل صورة Dashboard:",P.imageURL),O.target.style.display="none",O.target.parentElement.innerHTML='<div class="h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center"><svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'}}):a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx(ImageIcon,{className:"h-6 w-6 text-gray-400"})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 font-arabic",children:P.title}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic truncate max-w-xs",children:[P.content.substring(0,50),"..."]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Se,{className:"h-4 w-4 text-gray-400 ml-2"}),a.jsx("span",{className:"text-sm text-gray-900 font-arabic",children:P.author})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"h-4 w-4 text-gray-400 ml-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:P.date})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ch,{className:"h-4 w-4 text-red-400 ml-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:P.likesCount||0})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ue,{className:"h-4 w-4 text-blue-400 ml-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:P.commentsCount||0})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[a.jsx(G,{size:"sm",variant:"outline",onClick:()=>v(P),className:"text-blue-600 hover:text-blue-900",children:a.jsx(na,{className:"h-4 w-4"})}),a.jsx(G,{size:"sm",variant:"outline",onClick:()=>b(P.id),className:"text-red-600 hover:text-red-900",children:a.jsx(Pr,{className:"h-4 w-4"})})]})})]},P.id))})]})})})]})},bB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState([]),[i,o]=I.useState(!0),[l,c]=I.useState(!1),[u,d]=I.useState(!1),[f,m]=I.useState(null),[p,y]=I.useState(""),[w,T]=I.useState({name:"",price:"",categoryId:"",description:"",stockQuantity:""}),j=async()=>{try{o(!0);const _=rt(le,"products"),R=(await tn(_)).docs.map(A=>({id:A.id,...A.data()}));console.log("تم جلب المنتجات:",R),t(R)}catch(_){console.error("خطأ في جلب المنتجات:",_),U({title:"خطأ في جلب المنتجات",description:"حدث خطأ أثناء جلب المنتجات من قاعدة البيانات",variant:"destructive"})}finally{o(!1)}},b=async()=>{try{const _=rt(le,"categories"),R=(await tn(_)).docs.map(A=>({id:A.id,...A.data()}));console.log("تم جلب التصنيفات:",R),s(R)}catch(_){console.error("خطأ في جلب التصنيفات:",_)}};I.useEffect(()=>{(async()=>{try{lc(be,async C=>{C?(console.log("المستخدم مصادق عليه:",C.uid),await Promise.all([j(),b()])):(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول مجهول..."),await Fo(be),console.log("تم تسجيل الدخول بشكل مجهول"),await Promise.all([j(),b()]))})}catch(C){console.error("خطأ في المصادقة:",C),U({title:"خطأ في المصادقة",description:"حدث خطأ في تسجيل الدخول",variant:"destructive"})}})()},[]);const v=_=>{y(_)},x=async _=>{var C,R;_.preventDefault(),c(!0);try{console.log("بدء عملية حفظ المنتج..."),be.currentUser||(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول..."),await Fo(be),console.log("تم تسجيل الدخول بنجاح")),console.log("المستخدم الحالي:",(C=be.currentUser)==null?void 0:C.uid),console.log("بيانات النموذج:",w),console.log("رابط الصورة:",p);let A=(f==null?void 0:f.imageURL)||"";if(p&&(A=p),!w.name||!w.price)throw new Error("يجب ملء اسم المنتج والسعر");console.log("🔍 البحث عن التصنيف:",{categoryId:w.categoryId,availableCategories:r.map(Z=>({id:Z.id,name:Z.name}))});const L=r.find(Z=>Z.id===w.categoryId),D=L?L.name:"";if(console.log("✅ التصنيف المختار:",{selectedCategory:L,categoryName:D}),w.categoryId&&!D)throw console.error("❌ خطأ: لم يتم العثور على التصنيف!"),new Error("لم يتم العثور على التصنيف المحدد. تأكد من اختيار تصنيف صحيح.");const $={name:w.name.trim(),price:parseFloat(w.price),stockQuantity:parseInt(w.stockQuantity)||0,categoryId:w.categoryId||"",categories:D?[D]:[],categoryName:D,description:((R=w.description)==null?void 0:R.trim())||"",imageURL:A||"",createdAt:(f==null?void 0:f.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("بيانات المنتج النهائية:",$),f){console.log("تحديث منتج موجود:",f.id);const Z=Ie(le,"products",f.id);await mr(Z,$),console.log("تم تحديث المنتج بنجاح"),U({title:"تم تحديث المنتج بنجاح",description:"تم حفظ التعديلات على المنتج"})}else{console.log("إضافة منتج جديد...");const Z=await ua(rt(le,"products"),$);console.log("تم إضافة المنتج بنجاح، ID:",Z.id),U({title:"تم إضافة المنتج بنجاح",description:"تم حفظ المنتج الجديد في قاعدة البيانات"})}console.log("إعادة تحميل المنتجات..."),await j(),O()}catch(A){console.error("خطأ مفصل في حفظ المنتج:",{message:A.message,code:A.code,stack:A.stack});let L="حدث خطأ أثناء حفظ المنتج";A.code==="permission-denied"?L="ليس لديك صلاحية لحفظ المنتجات. تحقق من إعدادات Firebase Security Rules":A.code==="unavailable"?L="قاعدة البيانات غير متاحة حالياً. تحقق من اتصال الإنترنت":A.message.includes("storage")?L="خطأ في رفع الصورة. تحقق من إعدادات Firebase Storage":A.message.includes("network")&&(L="مشكلة في الشبكة. تحقق من اتصال الإنترنت"),U({title:"خطأ في حفظ المنتج",description:L,variant:"destructive"})}finally{c(!1)}},N=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{await ca(Ie(le,"products",_)),U({title:"تم حذف المنتج بنجاح",description:"تم حذف المنتج من قاعدة البيانات"}),await j()}catch(C){console.error("خطأ في حذف المنتج:",C),U({title:"خطأ في حذف المنتج",description:"حدث خطأ أثناء حذف المنتج",variant:"destructive"})}},P=_=>{var C,R;m(_),T({name:_.name||"",price:((C=_.price)==null?void 0:C.toString())||"",stockQuantity:((R=_.stockQuantity)==null?void 0:R.toString())||"",categoryId:_.categoryId||"",description:_.description||""}),y(_.imageURL||""),d(!0)},O=()=>{d(!1),m(null),T({name:"",price:"",stockQuantity:"",categoryId:"",description:""}),y("")},S=_=>{const C=r.find(R=>R.id===_);return C?C.name:"غير محدد"};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"جاري تحميل المنتجات..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إدارة المنتجات"}),a.jsxs(G,{onClick:()=>d(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"h-4 w-4 ml-2"}),"إضافة منتج جديد"]})]}),u&&a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:f?"تعديل المنتج":"إضافة منتج جديد"}),a.jsx(G,{variant:"ghost",size:"sm",onClick:O,className:"text-gray-500 hover:text-gray-700",children:a.jsx(yn,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المنتج *"}),a.jsx(Xe,{type:"text",value:w.name,onChange:_=>T({...w,name:_.target.value}),placeholder:"أدخل اسم المنتج",required:!0,className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر (جنيه) *"}),a.jsxs("div",{className:"relative",children:[a.jsx(pN,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(Xe,{type:"number",step:"0.01",min:"0",value:w.price,onChange:_=>T({...w,price:_.target.value}),placeholder:"0.00",required:!0,className:"w-full pr-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الكمية المتاحة *"}),a.jsxs("div",{className:"relative",children:[a.jsx(cn,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(Xe,{type:"number",min:"0",value:w.stockQuantity,onChange:_=>T({...w,stockQuantity:_.target.value}),placeholder:"0",required:!0,className:"w-full pr-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التصنيف"}),a.jsxs("select",{value:w.categoryId,onChange:_=>T({...w,categoryId:_.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"اختر التصنيف"}),r.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:w.description,onChange:_=>T({...w,description:_.target.value}),placeholder:"أدخل وصف المنتج (اختياري)",rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة المنتج"}),a.jsx(QI,{currentImage:p,onImageChange:v,placeholder:"رابط صورة المنتج",required:!1,showPreview:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(G,{type:"submit",disabled:l,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري الحفظ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Os,{className:"h-4 w-4 ml-2"}),"حفظ المنتج"]})}),a.jsx(G,{type:"button",variant:"outline",onClick:O,className:"flex-1",children:"إلغاء"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الصورة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"اسم المنتج"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"السعر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الكمية المتاحة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التصنيف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[a.jsx(cn,{className:"h-12 w-12 mb-2"}),a.jsx("p",{className:"text-lg font-medium",children:"لا توجد منتجات حالياً"}),a.jsx("p",{className:"text-sm",children:"ابدأ بإضافة منتج جديد"})]})})}):n.map(_=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.imageURL?a.jsx("img",{src:_.imageURL,alt:_.name,className:"h-12 w-12 object-cover rounded-lg",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{console.log("✅ تم تحميل صورة المنتج بنجاح:",_.imageURL)},onError:C=>{console.error("❌ خطأ في تحميل صورة المنتج:",_.imageURL),C.target.style.display="none",C.target.parentElement.innerHTML='<div class="h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center"><svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>'}}):a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx(Cp,{className:"h-6 w-6 text-gray-400"})})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name}),_.description&&a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:_.description})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-medium text-green-600",children:[_.price," جنيه"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(_.stockQuantity||0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[a.jsx(cn,{className:"h-3 w-3 ml-1"}),_.stockQuantity||0," قطعة"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Eo,{className:"h-3 w-3 ml-1"}),S(_.categoryId)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:()=>P(_),className:"text-blue-600 hover:text-blue-700",children:a.jsx(na,{className:"h-4 w-4"})}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>N(_.id),className:"text-red-600 hover:text-red-700",children:a.jsx(Pr,{className:"h-4 w-4"})})]})})]},_.id))})]})})})]})},_B=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0),[i,o]=I.useState(!1),[l,c]=I.useState(!1),[u,d]=I.useState(null),[f,m]=I.useState(""),p=async()=>{try{s(!0);const b=rt(le,"categories"),x=(await tn(b)).docs.map(N=>({id:N.id,...N.data()}));console.log("تم جلب التصنيفات:",x),t(x)}catch(b){console.error("خطأ في جلب التصنيفات:",b),U({title:"خطأ في جلب التصنيفات",description:"حدث خطأ أثناء جلب التصنيفات من قاعدة البيانات",variant:"destructive"})}finally{s(!1)}};I.useEffect(()=>{(async()=>{try{lc(be,async v=>{v?(console.log("المستخدم مصادق عليه:",v.uid),p()):(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول مجهول..."),await Fo(be),console.log("تم تسجيل الدخول بشكل مجهول"),p())})}catch(v){console.error("خطأ في المصادقة:",v),U({title:"خطأ في المصادقة",description:"حدث خطأ في تسجيل الدخول",variant:"destructive"})}})()},[]);const y=async b=>{if(b.preventDefault(),!f.trim()){U({title:"خطأ في البيانات",description:"يجب إدخال اسم التصنيف",variant:"destructive"});return}o(!0);try{console.log("بدء عملية حفظ التصنيف..."),be.currentUser||(console.log("لا يوجد مستخدم مصادق، محاولة تسجيل دخول..."),await Fo(be),console.log("تم تسجيل الدخول بنجاح"));const v={name:f.trim(),createdAt:(u==null?void 0:u.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};if(console.log("بيانات التصنيف:",v),u){console.log("تحديث تصنيف موجود:",u.id);const x=Ie(le,"categories",u.id);await mr(x,v),console.log("تم تحديث التصنيف بنجاح"),U({title:"تم تحديث التصنيف بنجاح",description:"تم حفظ التعديلات على التصنيف"})}else{console.log("إضافة تصنيف جديد...");const x=await ua(rt(le,"categories"),v);console.log("تم إضافة التصنيف بنجاح، ID:",x.id),U({title:"تم إضافة التصنيف بنجاح",description:"تم حفظ التصنيف الجديد في قاعدة البيانات"})}console.log("إعادة تحميل التصنيفات..."),await p(),j()}catch(v){console.error("خطأ مفصل في حفظ التصنيف:",{message:v.message,code:v.code,stack:v.stack});let x="حدث خطأ أثناء حفظ التصنيف";v.code==="permission-denied"?x="ليس لديك صلاحية لحفظ التصنيفات. تحقق من إعدادات Firebase Security Rules":v.code==="unavailable"&&(x="قاعدة البيانات غير متاحة حالياً. تحقق من اتصال الإنترنت"),U({title:"خطأ في حفظ التصنيف",description:x,variant:"destructive"})}finally{o(!1)}},w=async(b,v)=>{if(window.confirm(`هل أنت متأكد من حذف تصنيف "${v}"؟`))try{await ca(Ie(le,"categories",b)),U({title:"تم حذف التصنيف بنجاح",description:"تم حذف التصنيف من قاعدة البيانات"}),await p()}catch(x){console.error("خطأ في حذف التصنيف:",x),U({title:"خطأ في حذف التصنيف",description:"حدث خطأ أثناء حذف التصنيف",variant:"destructive"})}},T=b=>{d(b),m(b.name||""),c(!0)},j=()=>{c(!1),d(null),m("")};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"جاري تحميل التصنيفات..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إدارة التصنيفات"}),a.jsxs(G,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"h-4 w-4 ml-2"}),"إضافة تصنيف جديد"]})]}),l&&a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u?"تعديل التصنيف":"إضافة تصنيف جديد"}),a.jsx(G,{variant:"ghost",size:"sm",onClick:j,className:"text-gray-500 hover:text-gray-700",children:a.jsx(yn,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم التصنيف *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Eo,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(Xe,{type:"text",value:f,onChange:b=>m(b.target.value),placeholder:"مثال: زيوت طبيعية",required:!0,className:"w-full pr-10"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(G,{type:"submit",disabled:i,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري الحفظ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Os,{className:"h-4 w-4 ml-2"}),"حفظ التصنيف"]})}),a.jsx(G,{type:"button",variant:"outline",onClick:j,className:"flex-1",children:"إلغاء"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?a.jsx("div",{className:"p-8 text-center",children:a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[a.jsx(pw,{className:"h-16 w-16 mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"لا توجد تصنيفات حالياً"}),a.jsx("p",{className:"text-sm mb-4",children:"ابدأ بإضافة تصنيف جديد لتنظيم المنتجات"}),a.jsxs(G,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"h-4 w-4 ml-2"}),"إضافة تصنيف جديد"]})]})}):a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(b=>a.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-green-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(Eo,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:b.name}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(b.createdAt).toLocaleDateString("ar-EG")})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>T(b),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:a.jsx(na,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>w(b.id,b.name),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:a.jsx(Pr,{className:"h-4 w-4"})})]})]})},b.id))})})}),n.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"إحصائيات التصنيفات"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg ml-3",children:a.jsx(Eo,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"إجمالي التصنيفات"}),a.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.length})]})]})}),a.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-3",children:a.jsx(pw,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"آخر تصنيف مضاف"}),a.jsx("p",{className:"text-sm font-bold text-blue-900",children:n.length>0?n.sort((b,v)=>new Date(v.createdAt)-new Date(b.createdAt))[0].name:"لا يوجد"})]})]})}),a.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-purple-100 p-2 rounded-lg ml-3",children:a.jsx(Os,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-purple-600",children:"حالة النظام"}),a.jsx("p",{className:"text-sm font-bold text-purple-900",children:"جاهز للاستخدام"})]})]})})]})]})]})},TB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0),[i,o]=I.useState(""),[l,c]=I.useState(!1),[u,d]=I.useState(null),f=async()=>{try{console.log("🔄 جاري جلب المستخدمين من Firebase...");const v=rt(le,"users"),N=(await tn(v)).docs.map(P=>({id:P.id,...P.data()}));console.log("✅ تم جلب المستخدمين:",N),t(N)}catch(v){console.error("❌ خطأ في جلب المستخدمين:",v),U({title:"خطأ في جلب المستخدمين",description:"حدث خطأ أثناء جلب المستخدمين من قاعدة البيانات",variant:"destructive"})}finally{s(!1)}};I.useEffect(()=>{(async()=>{try{lc(be,async x=>{x?(console.log("المستخدم مصادق عليه:",x.uid),await f()):(console.log("لا يوجد مستخدم مصادق"),s(!1))})}catch(x){console.error("خطأ في المصادقة:",x),s(!1),U({title:"خطأ في المصادقة",description:"حدث خطأ في تسجيل الدخول",variant:"destructive"})}})()},[]);const m=async(v,x,N)=>{const P=be.currentUser;if(!P){U({title:"خطأ في الصلاحيات",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}const O=n.find(C=>C.email===P.email);if(!O){U({title:"خطأ في الصلاحيات",description:"لم يتم العثور على بيانات المستخدم الحالي",variant:"destructive"});return}if(O.role!=="owner"){U({title:"خطأ في الصلاحيات",description:"فقط المالك يمكنه تغيير الأدوار",variant:"destructive"});return}if(x==="owner"){U({title:"خطأ في الصلاحيات",description:"لا يمكن تغيير دور المالك",variant:"destructive"});return}if(x==="owner"&&n.filter(C=>C.role==="owner").length===1){U({title:"خطأ في الصلاحيات",description:"لا يمكن حذف المالك الوحيد",variant:"destructive"});return}let S,_;x==="user"?(S="admin",_="مدير"):x==="admin"&&(S="user",_="مستخدم");try{const C=Ie(le,"users",v);await mr(C,{role:S,updatedAt:rs()}),t(R=>R.map(A=>A.id===v?{...A,role:S}:A)),U({title:"تم تغيير الصلاحية بنجاح",description:`تم تغيير دور المستخدم إلى ${_}`}),console.log(`✅ تم تغيير دور المستخدم ${v} إلى ${S}`)}catch(C){console.error("❌ خطأ في تغيير دور المستخدم:",C),U({title:"خطأ في تغيير الصلاحية",description:"حدث خطأ أثناء تغيير دور المستخدم",variant:"destructive"})}},p=v=>{d(v),c(!0)},y=async()=>{if(!u)return;const{id:v,name:x,email:N,role:P}=u,O=be.currentUser;if(!O){U({title:"خطأ في الصلاحيات",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}const S=n.find(_=>_.email===O.email);if(!S){U({title:"خطأ في الصلاحيات",description:"لم يتم العثور على بيانات المستخدم الحالي",variant:"destructive"});return}if(S.role!=="owner"){U({title:"خطأ في الصلاحيات",description:"فقط المالك يمكنه حذف المستخدمين",variant:"destructive"});return}if(P==="owner"){U({title:"خطأ في الصلاحيات",description:"لا يمكن حذف المالك",variant:"destructive"});return}if(P==="owner"&&n.filter(_=>_.role==="owner").length===1){U({title:"خطأ في الصلاحيات",description:"لا يمكن حذف المالك الوحيد",variant:"destructive"});return}try{console.log(`🔄 بدء حذف المستخدم: ${x} (${N})`),console.log("📝 حذف من Firestore...");const _=Ie(le,"users",v);await ca(_),console.log("✅ تم حذف المستخدم من Firestore"),console.log("🔐 حذف من Firebase Authentication..."),O&&O.email===N?(await y(O),console.log("✅ تم حذف المستخدم من Auth (المستخدم الحالي)")):(console.log("⚠️ المستخدم ليس المستخدم الحالي، سيتم حذفه من Firestore فقط"),U({title:"تم الحذف الجزئي",description:"تم حذف المستخدم من قاعدة البيانات. للحذف الكامل من Auth، يرجى تسجيل الدخول كأدمن في Firebase Console."})),t(C=>C.filter(R=>R.id!==v)),U({title:"تم حذف المستخدم بنجاح",description:`تم حذف المستخدم "${x}" من النظام`}),c(!1),d(null),console.log(`✅ تم حذف المستخدم ${v} بنجاح`)}catch(_){console.error("❌ خطأ في حذف المستخدم:",_);let C="حدث خطأ أثناء حذف المستخدم";_.code==="auth/requires-recent-login"?C="يجب إعادة تسجيل الدخول مؤخراً لحذف الحساب. يرجى تسجيل الخروج وإعادة تسجيل الدخول.":_.code==="auth/user-not-found"?C="المستخدم غير موجود في نظام المصادقة":_.code==="permission-denied"&&(C="ليس لديك صلاحية لحذف هذا المستخدم"),U({title:"خطأ في حذف المستخدم",description:C,variant:"destructive"})}},w=n.filter(v=>{const x=i.toLowerCase();return v.name&&v.name.toLowerCase().includes(x)||v.email&&v.email.toLowerCase().includes(x)||v.username&&v.username.toLowerCase().includes(x)||v.phone&&v.phone.toLowerCase().includes(x)||v.role&&v.role.toLowerCase().includes(x)}),T=v=>v?(v.toDate?v.toDate():new Date(v)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"غير محدد",b=(v=>{const x={owner:1,admin:2,user:3};return v.sort((N,P)=>{var R,A;const O=x[N.role]||4,S=x[P.role]||4;if(O!==S)return O-S;const _=(R=N.createdAt)!=null&&R.toDate?N.createdAt.toDate():new Date(N.createdAt),C=(A=P.createdAt)!=null&&A.toDate?P.createdAt.toDate():new Date(P.createdAt);return _-C})})(w);return a.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(kr,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-blue-800",children:"تنبيه أمني"})]}),a.jsx("p",{className:"text-sm text-blue-700",children:"يمكن للمدير والمالك إدارة المستخدمين. المالك يمكنه إدارة جميع المستخدمين، بينما المدير يمكنه إدارة المستخدمين العاديين فقط."})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-arabic",children:"إدارة المستخدمين"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 font-arabic",children:"المالك: يمكنه إدارة جميع المستخدمين | المدير: يمكنه إدارة المستخدمين العاديين فقط"})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(G,{onClick:f,variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-50",children:[a.jsx(U4,{className:"h-4 w-4 ml-2"}),"تحديث"]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rc,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"}),a.jsx(Xe,{type:"text",placeholder:"ابحث عن مستخدم بالاسم، البريد الإلكتروني، أو رقم الهاتف...",value:i,onChange:v=>o(v.target.value),className:"w-full pl-4 pr-12 py-3 text-right"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 font-arabic",children:"جاري تحميل المستخدمين..."})]})}):w.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Sn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2 font-arabic",children:i?"لا توجد نتائج":"لا توجد مستخدمين"}),a.jsx("p",{className:"text-gray-500 font-arabic",children:i?"جرب تغيير كلمات البحث":"لم يتم تسجيل أي مستخدمين بعد"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستخدم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"البريد الإلكتروني"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"رقم الهاتف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الدور"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ التسجيل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(v=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:v.role==="owner"?a.jsx(Un,{className:"h-5 w-5 text-yellow-600"}):v.role==="admin"?a.jsx(Un,{className:"h-5 w-5 text-green-600"}):a.jsx(Se,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name||v.username||"بدون اسم"}),a.jsx("div",{className:"text-sm text-gray-500",children:v.username||"بدون اسم مستخدم"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:v.email})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:v.phone?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Gn,{className:"h-3 w-3 text-gray-400"}),v.phone]}):a.jsx("span",{className:"text-gray-400 text-xs",children:"غير محدد"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.role==="owner"?"bg-yellow-100 text-yellow-800":v.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:v.role==="owner"?a.jsxs(a.Fragment,{children:[a.jsx(Un,{className:"h-3 w-3 ml-1"}),"مالك"]}):v.role==="admin"?a.jsxs(a.Fragment,{children:[a.jsx(Un,{className:"h-3 w-3 ml-1"}),"مدير"]}):a.jsxs(a.Fragment,{children:[a.jsx(Se,{className:"h-3 w-3 ml-1"}),"مستخدم"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T(v.createdAt)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex gap-2",children:[(()=>{const x=be.currentUser,N=n.find(O=>O.email===(x==null?void 0:x.email));return(N==null?void 0:N.role)==="owner"&&v.role!=="owner"?a.jsx(G,{variant:"outline",size:"sm",onClick:()=>m(v.id,v.role,v.email),className:`${v.role==="admin"?"text-orange-600 hover:text-orange-700":"text-purple-600 hover:text-purple-700"}`,title:v.role==="admin"?"إلغاء صلاحية المدير":"منح صلاحية المدير",children:a.jsx(kr,{className:"h-4 w-4"})}):null})(),(()=>{const x=be.currentUser,N=n.find(O=>O.email===(x==null?void 0:x.email));return(N==null?void 0:N.role)==="owner"&&v.role!=="owner"?a.jsx(G,{variant:"outline",size:"sm",onClick:()=>p(v),className:"text-red-600 hover:text-red-700",title:"حذف المستخدم",children:a.jsx(Pr,{className:"h-4 w-4"})}):null})()]})})]},v.id))})]})})}),l&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:a.jsx(Pr,{className:"h-5 w-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 font-arabic",children:"تأكيد حذف المستخدم"}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:"هذا الإجراء لا يمكن التراجع عنه"})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center",children:u.role==="owner"?a.jsx(Un,{className:"h-5 w-5 text-yellow-600"}):u.role==="admin"?a.jsx(Un,{className:"h-5 w-5 text-green-600"}):a.jsx(Se,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 font-arabic",children:u.name||u.email}),a.jsx("p",{className:"text-sm text-gray-600",children:u.email}),u.phone&&a.jsx("p",{className:"text-sm text-gray-600",children:u.phone})]})]})}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"p-1 bg-red-100 rounded-full mt-0.5",children:a.jsx(kr,{className:"h-4 w-4 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-800 font-arabic mb-1",children:"تحذير: سيتم حذف الحساب من:"}),a.jsxs("ul",{className:"text-sm text-red-700 space-y-1 font-arabic",children:[a.jsx("li",{children:"• قاعدة البيانات (Firestore)"}),a.jsx("li",{children:"• نظام المصادقة (Authentication)"}),a.jsx("li",{children:"• جميع البيانات المرتبطة بالحساب"})]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(G,{onClick:()=>{c(!1),d(null)},variant:"outline",className:"flex-1",children:"إلغاء"}),a.jsxs(G,{onClick:y,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[a.jsx(Pr,{className:"h-4 w-4 ml-2"}),"حذف المستخدم"]})]})]})})]})},EB=()=>{const[n,t]=I.useState([]),[r,s]=I.useState(!0),[i,o]=I.useState(!1),[l,c]=I.useState(null),[u,d]=I.useState({title:"",description:"",price:"",duration:"",instructor:"",startDate:"",features:[]}),[f,m]=I.useState(""),p=async()=>{try{const x=await tn(rt(le,"courses")),N=[];x.forEach(P=>{N.push({id:P.id,...P.data()})}),t(N),s(!1)}catch(x){console.error("Error fetching courses:",x),U({title:"خطأ في تحميل الدورات",description:"حدث خطأ أثناء تحميل الدورات",variant:"destructive"}),s(!1)}};I.useEffect(()=>{p()},[]);const y=async x=>{x.preventDefault();try{const N={...u,price:u.price?Number(u.price):0,createdAt:new Date,updatedAt:new Date};l?(await mr(Ie(le,"courses",l),N),U({title:"تم تحديث الدورة",description:"تم تحديث الدورة بنجاح"})):(await ua(rt(le,"courses"),N),U({title:"تم إضافة الدورة",description:"تم إضافة الدورة بنجاح"})),o(!1),c(null),d({title:"",description:"",price:"",duration:"",instructor:"",startDate:"",features:[]}),p()}catch(N){console.error("Error saving course:",N),U({title:"خطأ في حفظ الدورة",description:"حدث خطأ أثناء حفظ الدورة",variant:"destructive"})}},w=x=>{var N;c(x.id),d({title:x.title||"",description:x.description||"",price:((N=x.price)==null?void 0:N.toString())||"",duration:x.duration||"",instructor:x.instructor||"",startDate:x.startDate||"",features:Array.isArray(x.features)?x.features:[]}),o(!0)},T=async x=>{if(window.confirm("هل أنت متأكد من حذف هذه الدورة؟"))try{await ca(Ie(le,"courses",x)),U({title:"تم حذف الدورة",description:"تم حذف الدورة بنجاح"}),p()}catch(N){console.error("Error deleting course:",N),U({title:"خطأ في حذف الدورة",description:"حدث خطأ أثناء حذف الدورة",variant:"destructive"})}},j=()=>{f.trim()&&(d(x=>({...x,features:[...x.features,f.trim()]})),m(""))},b=x=>{d(N=>({...N,features:N.features.filter((P,O)=>O!==x)}))},v=()=>{o(!1),c(null),d({title:"",description:"",price:"",duration:"",instructor:"",startDate:"",features:[]}),m("")};return r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-arabic",children:"إدارة الدورات"}),a.jsx("p",{className:"text-gray-600 font-arabic",children:"إضافة وتعديل وحذف الدورات التدريبية"})]}),a.jsxs(G,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ur,{className:"h-4 w-4 ml-2"}),"إضافة دورة جديدة"]})]}),i&&a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(z.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold font-arabic",children:l?"تعديل الدورة":"إضافة دورة جديدة"}),a.jsx(G,{variant:"ghost",size:"sm",onClick:v,className:"text-gray-500 hover:text-gray-700",children:a.jsx(yn,{className:"h-4 w-4"})})]}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"عنوان الدورة *"}),a.jsx(Xe,{type:"text",value:u.title,onChange:x=>d({...u,title:x.target.value}),required:!0,className:"w-full",placeholder:"أدخل عنوان الدورة"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"المدرب"}),a.jsx(Xe,{type:"text",value:u.instructor,onChange:x=>d({...u,instructor:x.target.value}),className:"w-full",placeholder:"اسم المدرب"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"السعر (ج.م)"}),a.jsx(Xe,{type:"number",value:u.price,onChange:x=>d({...u,price:x.target.value}),className:"w-full",placeholder:"0",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"المدة"}),a.jsx(Xe,{type:"text",value:u.duration,onChange:x=>d({...u,duration:x.target.value}),className:"w-full",placeholder:"مثال: 4 أسابيع"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"تاريخ البدء"}),a.jsx(Xe,{type:"text",value:u.startDate,onChange:x=>d({...u,startDate:x.target.value}),className:"w-full",placeholder:"مثال: 15 يناير 2024"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"وصف الدورة"}),a.jsx("textarea",{value:u.description,onChange:x=>d({...u,description:x.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:"4",placeholder:"وصف مفصل للدورة"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-arabic",children:"مميزات الدورة"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(Xe,{type:"text",value:f,onChange:x=>m(x.target.value),className:"flex-1",placeholder:"أدخل ميزة جديدة",onKeyPress:x=>x.key==="Enter"&&(x.preventDefault(),j())}),a.jsx(G,{type:"button",onClick:j,className:"bg-blue-600 hover:bg-blue-700",children:"إضافة"})]}),u.features.length>0&&a.jsx("div",{className:"space-y-2",children:u.features.map((x,N)=>a.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"flex-1 text-sm font-arabic",children:x}),a.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(N),className:"text-red-600 hover:text-red-700",children:a.jsx(Pr,{className:"h-3 w-3"})})]},N))})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(G,{type:"button",variant:"outline",onClick:v,children:"إلغاء"}),a.jsxs(G,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:[a.jsx(Os,{className:"h-4 w-4 ml-2"}),l?"تحديث":"إضافة"]})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 font-arabic",children:"الدورات المتاحة"}),n.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 font-arabic",children:"لا توجد دورات متاحة حالياً"}):a.jsx("div",{className:"space-y-4",children:n.map(x=>a.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Cr,{className:"h-5 w-5 text-green-600"}),a.jsx("h4",{className:"text-lg font-semibold font-arabic",children:x.title}),a.jsx("span",{className:"text-sm text-gray-500 font-arabic",children:x.price?`${x.price} ج.م`:"مجاناً"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 mb-3",children:[x.instructor&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sn,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-arabic",children:["المدرب: ",x.instructor]})]}),x.duration&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-arabic",children:["المدة: ",x.duration]})]}),x.startDate&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ur,{className:"h-4 w-4"}),a.jsxs("span",{className:"font-arabic",children:["البدء: ",x.startDate]})]})]}),x.description&&a.jsx("p",{className:"text-gray-700 mb-3 font-arabic line-clamp-2",children:x.description}),x.features&&Array.isArray(x.features)&&x.features.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-1 font-arabic",children:"المميزات:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Array.isArray(x.features)&&x.features.slice(0,3).map((N,P)=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800 font-arabic",children:[a.jsx(ra,{className:"h-3 w-3 ml-1"}),N]},P)),Array.isArray(x.features)&&x.features.length>3&&a.jsxs("span",{className:"text-xs text-gray-500 font-arabic",children:["+",x.features.length-3," أكثر"]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{variant:"outline",size:"sm",onClick:()=>w(x),className:"text-blue-600 hover:text-blue-700",children:a.jsx(na,{className:"h-4 w-4"})}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>T(x.id),className:"text-red-600 hover:text-red-700",children:a.jsx(Pr,{className:"h-4 w-4"})})]})]})},x.id))})]})})]})},NB=()=>{const{user:n}=dt(),t=Rt(),r=Pn(),[s,i]=I.useState("consultations"),[o,l]=I.useState([]);I.useEffect(()=>{const w=new URLSearchParams(r.search).get("tab");w&&["consultations","courses","articles","products","categories","users"].includes(w)&&i(w)},[r.search]),I.useEffect(()=>{const y=JSON.parse(localStorage.getItem("bookings")||"[]");l(y)},[]);const c=(y,w)=>{const T=o.map(b=>b.id===y?{...b,status:w}:b);l(T),localStorage.setItem("bookings",JSON.stringify(T)),U({title:"تم تحديث الحالة",description:`تم تغيير حالة الحجز إلى ${{completed:"مكتمل",confirmed:"مؤكد",cancelled:"ملغي"}[w]||w}`})},u=y=>{const w=o.filter(T=>T.id!==y);l(w),localStorage.setItem("bookings",JSON.stringify(w)),U({title:"تم حذف الحجز",description:"تم حذف الحجز بنجاح"})},d=y=>{U({title:"🚧 هذه الميزة غير متاحة حالياً",description:"لكن لا تقلق! يمكنك طلبها في رسالتك التالية! 🚀"})},f=()=>{const y=JSON.stringify(o,null,2),w="data:text/json;charset=utf-8,"+encodeURIComponent(y),T=document.createElement("a");T.setAttribute("href",w),T.setAttribute("download","bookings_data.json"),document.body.appendChild(T),T.click(),T.remove(),U({title:"تم تصدير البيانات بنجاح!",description:"تم تنزيل ملف JSON يحتوي على بيانات الحجوزات."})},m=y=>{i(y),t(`/admin?tab=${y}`,{replace:!0})},p=[{id:"consultations",name:"الاستشارات",icon:Ue},{id:"courses",name:"الدورات",icon:Cr},{id:"articles",name:"المقالات",icon:Ws},{id:"products",name:"الإعلانات",icon:cn},{id:"categories",name:"التصنيفات",icon:Eo},{id:"users",name:"المستخدمين",icon:Sn}];return a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"لوحة الإدارة - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"لوحة إدارة أكاديمية الطب الأخضر الإلكترونية"})]}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx(Gh,{userName:n.name}),a.jsx("section",{className:"py-6 sm:py-8",children:a.jsx("div",{className:"container-responsive",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex flex-wrap space-x-4 sm:space-x-8 space-x-reverse px-4 sm:px-6",children:p.map(y=>a.jsxs("button",{onClick:()=>m(y.id),className:`flex items-center space-x-2 space-x-reverse py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm ${s===y.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(y.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"font-arabic",children:y.name})]},y.id))})}),a.jsxs("div",{className:"p-4 sm:p-6",children:[s==="consultations"&&a.jsx(xB,{bookings:o,onStatusChange:c,onDelete:u,onFeatureClick:d,onExport:f}),s==="courses"&&a.jsx(EB,{}),s==="articles"&&a.jsx(wB,{}),s==="products"&&a.jsx(bB,{}),s==="categories"&&a.jsx(_B,{}),s==="users"&&a.jsx(TB,{})]})]})})})]})]})},jB=()=>a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"عن الأكاديمية - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"تعرف على أكاديمية الطب الأخضر الإلكترونية ورسالتها في نشر علوم الطب العربي القديم بإشراف الباحث والمعالج أبو حسين محمد خليل."})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx("section",{className:"bg-gradient-to-r from-green-700 to-green-900 py-20 text-white text-center",children:a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx("h1",{className:"text-5xl font-bold mb-4",children:"عن أكاديمية الطب الأخضر"}),a.jsx("p",{className:"text-xl max-w-3xl mx-auto text-green-100",children:"رحلة لإحياء كنوز الطب العربي القديم ونشرها للعالم"})]})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-16 items-center",children:[a.jsxs(z.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"رسالتنا ورؤيتنا"}),a.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-4",children:"أكاديمية الطب الأخضر هي منصة إلكترونية رائدة متخصصة في تقديم برامج علاجية، استشارات، ووصفات علمية مستوحاة من التراث العربي والإسلامي العريق. نسعى لتقديم حلول صحية طبيعية وآمنة، معتمدين على كنوز الطب القديم التي أثبتت فعاليتها عبر العصور."}),a.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"رؤيتنا هي أن نكون المرجع الأول عالمياً في الطب العربي الأصيل، مساهمين في بناء مجتمع أكثر صحة وعافية من خلال قوة الطبيعة."})]}),a.jsx(z.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8},children:a.jsx("img",{className:"rounded-2xl shadow-2xl w-full h-auto object-cover",alt:" مخطوطة طبية عربية قديمة",src:"https://images.unsplash.com/photo-1577540705145-c72e17932f83"})})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-12",children:"قيمنا الأساسية"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[{icon:ch,title:"الأصالة",desc:"نلتزم بتقديم علوم الطب العربي الأصيلة كما وردت في أمهات الكتب والمخطوطات."},{icon:kr,title:"الموثوقية",desc:"جميع برامجنا واستشاراتنا قائمة على أسس علمية وخبرة عملية طويلة."},{icon:ra,title:"التميز",desc:"نسعى لتقديم أعلى مستويات الجودة في الخدمات التعليمية والعلاجية."}].map((n,t)=>a.jsxs(z.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:t*.1},children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(n.icon,{className:"h-10 w-10 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:n.title}),a.jsx("p",{className:"text-gray-600",children:n.desc})]},t))})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-green-50 to-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid md:grid-cols-2 gap-16 items-center",children:[a.jsx(z.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8},children:a.jsx("img",{className:"rounded-full shadow-2xl w-72 h-72 object-cover mx-auto",alt:"الباحث والمعالج أبو حسين محمد خليل",src:"/article-images/Abu Hussein Muhammad Khalil.jpg"})}),a.jsxs(z.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"المشرف العام"}),a.jsx("p",{className:"text-2xl font-bold text-green-700 mb-2",children:"أبو حسين محمد خليل"}),a.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"باحث ومعالج بالطب العربي القديم"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[a.jsx(Vo,{className:"h-6 w-6 text-green-600 mt-1 flex-shrink-0"}),a.jsx("p",{className:"text-gray-700",children:"معالج بالحجامة والرُقية الشرعية ومعالج بالأعشاب والزيوت الطبيعية."})]}),a.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[a.jsx(Vo,{className:"h-6 w-6 text-green-600 mt-1 flex-shrink-0"}),a.jsx("p",{className:"text-gray-700",children:"عضو ذهبي بجامعة باشن الأمريكية."})]}),a.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[a.jsx(Ws,{className:"h-6 w-6 text-green-600 mt-1 flex-shrink-0"}),a.jsx("p",{className:"text-gray-700",children:"مدرس ومحاضر لتعليم الطب القديم والأعشاب."})]})]})]})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"انضم إلى مجتمعنا"}),a.jsx("p",{className:"text-xl text-gray-600 mb-10 max-w-2xl mx-auto",children:"تابعنا على منصات التواصل الاجتماعي وكن جزءاً من رحلتنا"}),a.jsx("div",{className:"flex justify-center space-x-6 space-x-reverse",children:[{icon:Ip,href:"https://www.facebook.com/mohamedkhlil186com"},{icon:xN,href:"https://www.youtube.com/@Mohamedk223"},{icon:O4,href:"https://www.tiktok.com/@mohamed.khlil6"}].map((n,t)=>a.jsx(z.a,{href:n.href,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-5},className:"text-gray-500 hover:text-green-600",children:a.jsx(n.icon,{className:"h-10 w-10"})},t))})]})})]})]}),YI=({currentImage:n,onImageChange:t,className:r=""})=>{const[s,i]=I.useState(!1),[o,l]=I.useState(""),[c,u]=I.useState(!1),d=I.useRef(null),{toast:f}=dh(),m=async T=>{const j=T.target.files[0];if(j){if(!j.type.startsWith("image/")){f({title:"خطأ في نوع الملف",description:"يرجى اختيار ملف صورة صالح",variant:"destructive"});return}if(j.size>2*1024*1024){f({title:"الملف كبير جداً",description:"يرجى اختيار صورة بحجم أقل من 2 ميجابايت",variant:"destructive"});return}i(!0);try{const b=new FileReader;b.onload=v=>{const x=v.target.result,N=new window.Image;N.onload=()=>{const P=document.createElement("canvas"),O=P.getContext("2d");let{width:S,height:_}=N;const C=800;S>_?S>C&&(_=_*C/S,S=C):_>C&&(S=S*C/_,_=C),P.width=S,P.height=_,O.drawImage(N,0,0,S,_);const R=P.toDataURL("image/jpeg",.6);if(R.length>1e5){f({title:"الصورة كبيرة جداً",description:"يرجى اختيار صورة أصغر أو استخدام رابط صورة",variant:"destructive"}),i(!1);return}t(R),i(!1),f({title:"تم تحديث الصورة بنجاح",description:"تم حفظ الصورة الجديدة"})},N.src=x},b.readAsDataURL(j)}catch(b){console.error("Error uploading image:",b),i(!1),f({title:"خطأ في رفع الصورة",description:"حدث خطأ أثناء رفع الصورة. يرجى المحاولة مرة أخرى",variant:"destructive"})}}},p=()=>{if(!o.trim()){f({title:"خطأ",description:"يرجى إدخال رابط صورة صالح",variant:"destructive"});return}if(!o.match(/\.(jpg|jpeg|png|gif|webp)$/i)){f({title:"رابط غير صالح",description:"يرجى إدخال رابط صورة صالح (JPG, PNG, GIF, WebP)",variant:"destructive"});return}i(!0);const T=new window.Image;T.onload=()=>{if(o.length>1e3){f({title:"الرابط طويل جداً",description:"يرجى استخدام رابط أقصر أو رفع صورة من الجهاز",variant:"destructive"}),i(!1);return}t(o),i(!1),u(!1),l(""),f({title:"تم تحديث الصورة بنجاح",description:"تم حفظ الصورة من الرابط"})},T.onerror=()=>{i(!1),f({title:"رابط غير صالح",description:"لا يمكن الوصول إلى الصورة من هذا الرابط",variant:"destructive"})},T.src=o},y=()=>{t(""),f({title:"تم حذف الصورة",description:"تم إزالة الصورة الشخصية"})},w=n||"/default-avatar.png";return a.jsxs("div",{className:`space-y-4 ${r}`,children:[a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsxs(z.div,{className:"relative group cursor-pointer",whileHover:{scale:1.05},transition:{duration:.2},children:[a.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 shadow-lg",children:a.jsx("img",{src:w,alt:"الصورة الشخصية",className:"w-full h-full object-cover",onError:T=>{T.target.src="/default-avatar.png"}})}),s&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:a.jsx(Ar,{className:"w-8 h-8 text-white animate-spin"})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-full flex items-center justify-center transition-all duration-200",children:a.jsx(mw,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[a.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:()=>{var T;return(T=d.current)==null?void 0:T.click()},disabled:s,className:"flex items-center gap-2",children:[a.jsx(yN,{className:"w-4 h-4"}),"رفع من الجهاز"]}),a.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:()=>u(!c),disabled:s,className:"flex items-center gap-2",children:[a.jsx(mw,{className:"w-4 h-4"}),"رابط صورة"]}),n&&a.jsxs(G,{type:"button",variant:"destructive",size:"sm",onClick:y,disabled:s,className:"flex items-center gap-2",children:[a.jsx(yn,{className:"w-4 h-4"}),"حذف"]})]})]}),c&&a.jsxs(z.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"رابط الصورة"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",value:o,onChange:T=>l(T.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s}),a.jsx(G,{type:"button",onClick:p,disabled:s||!o.trim(),size:"sm",children:s?a.jsx(Ar,{className:"w-4 h-4 animate-spin"}):"تطبيق"})]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("p",{children:"• يدعم الروابط المباشرة للصور (JPG, PNG, GIF, WebP)"}),a.jsx("p",{children:"• تأكد من أن الرابط يبدأ بـ https://"}),a.jsx("p",{children:"• مثال: https://example.com/photo.jpg"})]})]}),a.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:m,className:"hidden"}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"يمكنك رفع صورة من جهازك (تُحفظ كـ Base64) أو استخدام رابط صورة من الإنترنت"})})]})},SB="modulepreload",IB=function(n){return"/"+n},c_={},CB=function(t,r,s){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=IB(o),o in c_)return;c_[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!s)for(let f=i.length-1;f>=0;f--){const m=i[f];if(m.href===o&&(!l||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":SB,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},AB=async(n,t=null)=>{var r,s,i,o;if(console.log("بدء عملية إلغاء الطلب:",n),!n)throw console.error("❌ خطأ: لم يتم توفير بيانات الطلب"),new Error("بيانات الطلب غير صالحة");if(!n.id)throw console.error("❌ خطأ: لا يوجد معرف للطلب"),new Error("معرّف الطلب غير موجود");try{try{console.log("محاولة تحديث حالة الطلب في قاعدة البيانات...");const l=Ie(le,"orders",n.id);await mr(l,{status:"cancelled",updatedAt:new Date().toISOString(),cancelledAt:new Date().toISOString(),cancelled:!0}),console.log("✅ تم تحديث حالة الطلب إلى ملغي في قاعدة البيانات")}catch(l){console.error("❌ خطأ في تحديث حالة الطلب في قاعدة البيانات:",l)}if(n.type==="product"){const l=((r=n.product)==null?void 0:r.id)||n.productId,c=((s=n.orderDetails)==null?void 0:s.quantity)||n.quantity;if(l&&c)try{console.log("محاولة إرجاع الكمية للمخزون...",{productId:l,quantity:c});const{returnProductStock:u}=await CB(()=>Promise.resolve().then(()=>yB),void 0);await u(l,c),console.log("✅ تم إرجاع الكمية للمخزون بنجاح")}catch(u){console.error("❌ خطأ في إرجاع الكمية للمخزون:",u)}else console.warn("⚠️ لا يمكن إرجاع الكمية للمخزون: بيانات المنتج غير كاملة",{hasProductId:!!l,hasQuantity:!!c})}try{console.log("محاولة إرسال إشعار الإلغاء عبر الواتساب..."),await dB(n),console.log("✅ تم إرسال إشعار الإلغاء عبر الواتساب")}catch(l){console.error("❌ خطأ في إرسال إشعار الإلغاء عبر الواتساب:",l)}if(typeof window<"u")try{const c=JSON.parse(localStorage.getItem("orders")||"[]").filter(u=>u.id!==n.id);localStorage.setItem("orders",JSON.stringify(c)),console.log("✅ تم حذف الطلب من التخزين المحلي")}catch(l){throw console.error("❌ خطأ في حذف الطلب من التخزين المحلي:",l),new Error("حدث خطأ أثناء تحديث التخزين المحلي")}if(typeof window<"u"&&window.updateProductStockInMemory)try{n.type==="product"&&((i=n.product)!=null&&i.id)&&((o=n.orderDetails)!=null&&o.quantity)&&window.updateProductStockInMemory(n.product.id,n.orderDetails.quantity,"add")}catch(l){console.error("❌ خطأ في تحديث حالة المخزون في الذاكرة:",l)}return t&&typeof t=="function"?t(n):U({title:"تم إلغاء الطلب بنجاح",description:"تم إلغاء الطلب وإرجاع الكمية للمخزون"}),!0}catch(l){return console.error("❌ خطأ في إلغاء الطلب:",l),U({title:"خطأ في إلغاء الطلب",description:"حدث خطأ أثناء محاولة إلغاء الطلب. يرجى المحاولة مرة أخرى",variant:"destructive"}),!1}},kB=n=>{if(navigator.clipboard)return navigator.clipboard.writeText(n);{const t=document.createElement("textarea");return t.value=n,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),Promise.resolve()}},PB=n=>{const t="201205830777",s=`${`📞 *رقم الهاتف للتواصل:* ${t}
👤 *اسم المدير:* أكاديمية الطب الأخضر`}

❌ *طلب إلغاء الحجز*
  
👤 *معلومات العميل:*
• الاسم: ${n.customerInfo.name}
• البريد الإلكتروني: ${n.customerInfo.email}
• رقم الهاتف: ${n.customerInfo.phone}
• العنوان: ${n.customerInfo.address}

🏥 *تفاصيل الحجز المراد إلغاؤه:*
• نوع الاستشارة: ${n.service.title}
• الوصف: ${n.service.description}
• المدة: ${n.service.duration}
• السعر: ${typeof n.service.price=="number"?`${n.service.price} جنيه`:n.service.price}

📅 *تفاصيل الموعد:*
• التاريخ المفضل: ${n.appointmentDetails.preferredDate}
• الوقت المفضل: ${n.appointmentDetails.preferredTime}

📝 *ملاحظات الحجز:*
${n.appointmentDetails.notes||"لا توجد ملاحظات"}

🆔 *رقم الحجز:* ${n.id}
📅 *تاريخ الحجز:* ${new Date(n.createdAt).toLocaleDateString("ar-EG")}
⏰ *وقت الحجز:* ${new Date(n.createdAt).toLocaleTimeString("ar-EG")}
📅 *تاريخ طلب الإلغاء:* ${new Date().toLocaleDateString("ar-EG")}
⏰ *وقت طلب الإلغاء:* ${new Date().toLocaleTimeString("ar-EG")}

⚠️ *يرجى تأكيد إلغاء هذا الحجز*

💬 *يمكنك الرد على هذه الرسالة لتأكيد الإلغاء أو التواصل مع العميل*`,i=encodeURIComponent(s),o=`https://wa.me/${t}?text=${i}`;return console.log("📱 جاري فتح الواتساب لإلغاء الحجز..."),setTimeout(()=>{try{const l=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let c;l?c=`https://wa.me/${t}?text=${i}`:c=`https://web.whatsapp.com/send?phone=${t}&text=${i}`,window.location.href=c}catch(l){console.error("❌ خطأ في فتح الواتساب:",l),kB(o).then(()=>{console.log("✅ تم نسخ رابط الواتساب للحافظة"),alert("تم نسخ رابط الواتساب للحافظة. يمكنك فتحه يدوياً لإلغاء الحجز.")}).catch(()=>{window.location.href=o})}},500),o},RB=n=>{try{const r=JSON.parse(localStorage.getItem("bookings")||"[]").filter(s=>s.id!==n);return localStorage.setItem("bookings",JSON.stringify(r)),console.log(`✅ تم حذف الحجز: ${n}`),!0}catch(t){return console.error("❌ خطأ في حذف الحجز:",t),!1}},DB=n=>{try{PB(n);const t=RB(n.id);return U(t?{title:"تم إرسال طلب الإلغاء",description:"تم إرسال طلب إلغاء الحجز عبر الواتساب وحذفه من قائمة حجوزاتك"}:{title:"خطأ في حذف الحجز",description:"تم إرسال طلب الإلغاء ولكن حدث خطأ في حذف الحجز من القائمة",variant:"destructive"}),t}catch(t){return console.error("❌ خطأ في إلغاء الحجز:",t),U({title:"خطأ في إلغاء الحجز",description:"حدث خطأ أثناء محاولة إلغاء الحجز",variant:"destructive"}),!1}},OB=()=>{const{user:n,updateUser:t}=dt(),[r,s]=I.useState(!1),[i,o]=I.useState({name:"",email:"",phone:"",username:""}),[l,c]=I.useState(null),[u,d]=I.useState([]),[f,m]=I.useState([]),[p,y]=I.useState([]),[w,T]=I.useState(null),[j,b]=I.useState([]),[v,x]=I.useState(null);I.useEffect(()=>{(async()=>{var L;if(n){o({name:n.displayName||n.name||"",email:n.email||"",phone:n.phone||"",username:n.username||((L=n.email)==null?void 0:L.split("@")[0])||""}),c(n.photoURL||null);const D=Gb().filter(oe=>oe.userId===n.uid),$=Dd().filter(oe=>oe.userId===n.uid),Z=await a_(n.uid);d(D),m($),y(Z)}})()},[n]),I.useEffect(()=>{const A=setInterval(async()=>{if(n){const L=Gb().filter(Z=>Z.userId===n.uid),D=Dd().filter(Z=>Z.userId===n.uid),$=await a_(n.uid);d(L),m(D),y($)}},6e4);return()=>clearInterval(A)},[n]);const N=A=>{o({...i,[A.target.name]:A.target.value})},P=()=>s(!r),O=async()=>{try{const A={...i,photoURL:l,updatedAt:new Date};await t(A)?(U({title:"تم تحديث الملف الشخصي بنجاح!",description:"تم حفظ جميع التغييرات"}),s(!1)):U({title:"حدث خطأ",description:"لم نتمكن من تحديث ملفك الشخصي.",variant:"destructive"})}catch(A){console.error("Error updating profile:",A),U({title:"حدث خطأ",description:"حدث خطأ أثناء تحديث الملف الشخصي",variant:"destructive"})}},S=A=>{c(A)},_=async A=>{var L,D,$,Z,oe,ve;if(window.confirm("هل أنت متأكد من رغبتك في إلغاء هذا الطلب؟ سيتم إرجاع الكمية للمخزون وإرسال إشعار الإلغاء.")){T(A.id);try{const q={...A,id:A.id,type:"product",customerInfo:{name:(n==null?void 0:n.displayName)||(n==null?void 0:n.name)||((L=A.customerInfo)==null?void 0:L.name)||"عميل",email:(n==null?void 0:n.email)||((D=A.customerInfo)==null?void 0:D.email)||"",phone:(n==null?void 0:n.phone)||(($=A.customerInfo)==null?void 0:$.phone)||"",address:((Z=A.customerInfo)==null?void 0:Z.address)||""},orderDetails:{quantity:((oe=A.orderDetails)==null?void 0:oe.quantity)||A.quantity||1,notes:((ve=A.orderDetails)==null?void 0:ve.notes)||A.notes||""},product:A.product||{id:A.productId},status:A.status||"pending",createdAt:A.createdAt||new Date().toISOString()};await AB(q,K=>{const ee=u.map(ne=>ne.id===K.id?{...ne,status:"cancelled",cancelledAt:new Date().toISOString()}:ne);ee.some(ne=>ne.id===K.id)||ee.push({...K,status:"cancelled",cancelledAt:new Date().toISOString()}),d(ee),b(ne=>[...ne,K.id]),U({title:"تم إلغاء الطلب بنجاح",description:"تم إلغاء الطلب وإرجاع الكمية للمخزون"});const ce=JSON.parse(localStorage.getItem("orders")||"[]").map(ne=>ne.id===K.id?{...ne,status:"cancelled",cancelledAt:new Date().toISOString()}:ne);localStorage.setItem("orders",JSON.stringify(ce))})}catch(q){console.error("❌ خطأ في إلغاء الطلب:",q),U({title:"خطأ",description:"حدث خطأ أثناء محاولة إلغاء الطلب",variant:"destructive"})}finally{T(null)}}},C=A=>{if(window.confirm("هل أنت متأكد من إلغاء هذا الحجز؟ سيتم إرسال طلب الإلغاء عبر الواتساب وحذف الحجز من قائمة حجوزاتك.")&&DB(A)){const D=f.filter($=>$.id!==A.id);m(D)}},R=async A=>{if(window.confirm("هل أنت متأكد من إلغاء التسجيل في هذه الدورة؟ سيتم إرسال طلب الإلغاء عبر الواتساب وحذف الدورة من قائمة دوراتك.")){x(A.id);try{const L=await fB(A.id,n);if(L.success){const D=p.filter($=>$.id!==A.id);y(D),U({title:"تم إلغاء التسجيل بنجاح",description:"تم إلغاء التسجيل في الدورة وإرسال طلب الإلغاء عبر الواتساب"})}else U({title:"خطأ",description:L.message,variant:"destructive"})}catch(L){console.error("❌ خطأ في إلغاء الدورة:",L),U({title:"خطأ",description:"حدث خطأ أثناء محاولة إلغاء التسجيل في الدورة",variant:"destructive"})}finally{x(null)}}};return n?a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsxs("title",{children:["الملف الشخصي - ",n.name]}),a.jsx("meta",{name:"description",content:"إدارة ملفك الشخصي وحجوزاتك في أكاديمية الطب الأخضر."})]}),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 py-8 sm:py-12",children:a.jsx("div",{className:"container-responsive max-w-4xl",children:a.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 sm:gap-0 mb-6 sm:mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"الملف الشخصي"}),a.jsxs("p",{className:"text-base sm:text-lg text-gray-600",children:["أهلاً بك مجدداً، ",i.name||n.displayName]})]}),a.jsx("div",{className:"flex gap-3",children:a.jsxs(G,{variant:"outline",onClick:P,className:"flex items-center gap-2",children:[r?a.jsx(yn,{className:"h-4 w-4"}):a.jsx(na,{className:"h-4 w-4"}),a.jsx("span",{children:r?"إلغاء":"تعديل"})]})})]}),a.jsx("div",{className:"mb-8",children:a.jsx(YI,{currentImage:l,onImageChange:S,className:"mb-4"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(gu,{icon:Se,label:"الاسم الكامل",value:i.name,name:"name",isEditing:r,onChange:N}),a.jsx(gu,{icon:Se,label:"اسم المستخدم",value:i.username,name:"username",isEditing:r,onChange:N,placeholder:"أدخل اسم المستخدم"}),a.jsx(gu,{icon:Ll,label:"البريد الإلكتروني",value:i.email,name:"email",isEditing:r,onChange:N,type:"email",disabled:!0}),a.jsx(gu,{icon:Gn,label:"رقم الهاتف",value:i.phone,name:"phone",isEditing:r,onChange:N,placeholder:"أدخل رقم الهاتف"})]}),r&&a.jsx("div",{className:"flex justify-end",children:a.jsxs(G,{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white flex items-center space-x-2 space-x-reverse",children:[a.jsx(Os,{className:"h-4 w-4"}),a.jsx("span",{children:"حفظ التغييرات"})]})}),a.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"طلباتي وحجوزاتي"}),u.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[a.jsx(md,{className:"h-5 w-5 ml-2 text-green-600"}),"طلبات المنتجات"]}),a.jsx("div",{className:"space-y-3",children:u.map(A=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:A.product.imageURL||A.product.image||"/article-images/product1.jpg",alt:A.product.title||A.product.name,className:"w-full h-full object-cover",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:L=>{console.error("❌ خطأ في تحميل صورة المنتج:",L.target.src),L.target.src="/article-images/product1.jpg"}})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-gray-900 font-arabic",children:A.product.title||A.product.name}),a.jsx("div",{className:"text-sm text-gray-600 font-arabic",children:A.product.description}),a.jsx("div",{className:"text-green-700 font-bold font-arabic",children:typeof A.product.price=="number"?`${A.product.price} جنيه`:A.product.price})]}),a.jsxs("div",{className:"text-left flex flex-col gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="pending"?"bg-yellow-100 text-yellow-800":A.status==="delivered"?"bg-green-100 text-green-800":A.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:w===A.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600"}),a.jsx("span",{children:"جاري الإلغاء..."})]}):A.status==="pending"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(jn,{className:"h-3 w-3"}),a.jsxs("span",{children:["في الانتظار (",cm(A.createdAt)," يوم)"]})]}):A.status==="delivered"?"تم التوصيل":A.status==="cancelled"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:"ملغي"})]}):A.status}),a.jsx("div",{className:"flex gap-1",children:A.status==="cancelled"||j.includes(A.id)?a.jsx("span",{className:"px-2 py-1 text-xs text-green-700 bg-green-100 rounded-full",children:"تم الإلغاء"}):a.jsx(G,{onClick:L=>{L.stopPropagation(),_(A)},size:"sm",variant:"outline",className:"text-xs border-red-600 text-red-600 hover:bg-red-50",disabled:w===A.id,children:w===A.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}),a.jsx("span",{children:"جاري الإلغاء..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(er,{className:"h-3 w-3 ml-1"}),"إلغاء الطلب"]})})})]})]})},A.id))})]}),f.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[a.jsx(ur,{className:"h-5 w-5 ml-2 text-green-600"}),"حجوزات الاستشارات"]}),a.jsx("div",{className:"space-y-3",children:f.map(A=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${A.service.color} rounded-lg flex items-center justify-center flex-shrink-0`,children:a.jsx(A.service.icon,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-gray-900 font-arabic",children:A.service.title}),a.jsx("div",{className:"text-sm text-gray-600 font-arabic",children:A.service.description}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic",children:[A.appointmentDetails.preferredDate," - ",A.appointmentDetails.preferredTime]})]}),a.jsxs("div",{className:"text-left flex flex-col gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="pending"?"bg-yellow-100 text-yellow-800":A.status==="completed"?"bg-green-100 text-green-800":A.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:A.status==="pending"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(jn,{className:"h-3 w-3"}),a.jsxs("span",{children:["في الانتظار (",cm(A.createdAt)," يوم)"]})]}):A.status==="completed"?"مكتمل":A.status==="cancelled"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:"ملغي"})]}):A.status}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs(G,{onClick:()=>Qo(A,"service"),size:"sm",variant:"outline",className:"text-xs border-green-600 text-green-600 hover:bg-green-50",children:[a.jsx(Ue,{className:"h-3 w-3 ml-1"}),"إرسال الواتساب"]}),A.status!=="cancelled"&&a.jsxs(G,{onClick:()=>C(A),size:"sm",variant:"outline",className:"text-xs border-red-600 text-red-600 hover:bg-red-50",children:[a.jsx(er,{className:"h-3 w-3 ml-1"}),"إلغاء الحجز"]})]})]})]})},A.id))})]}),p.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[a.jsx(Cr,{className:"h-5 w-5 ml-2 text-blue-600"}),"الدورات المسجلة"]}),a.jsx("div",{className:"space-y-3",children:p.map(A=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(Cr,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-gray-900 font-arabic",children:A.courseTitle}),a.jsxs("div",{className:"text-sm text-gray-600 font-arabic",children:["المدرب: ",A.courseInstructor," | المدة: ",A.courseDuration]}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic",children:["تاريخ البدء: ",A.courseStartDate," | السعر: ",A.coursePrice?`${A.coursePrice} ج.م`:"مجاناً"]})]}),a.jsxs("div",{className:"text-left flex flex-col gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="registered"?"bg-blue-100 text-blue-800":A.status==="completed"?"bg-green-100 text-green-800":A.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:A.status==="registered"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(jn,{className:"h-3 w-3"}),a.jsxs("span",{children:["مسجل (",cm(A.registeredAt)," يوم)"]})]}):A.status==="completed"?"مكتمل":A.status==="cancelled"?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:"ملغي"})]}):A.status}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs(G,{onClick:()=>Qo(A,"course"),size:"sm",variant:"outline",className:"text-xs border-blue-600 text-blue-600 hover:bg-blue-50",children:[a.jsx(Ue,{className:"h-3 w-3 ml-1"}),"استفسار"]}),A.status==="registered"&&a.jsx(G,{onClick:()=>R(A),size:"sm",variant:"outline",className:"text-xs border-red-600 text-red-600 hover:bg-red-50",disabled:v===A.id,children:v===A.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}),a.jsx("span",{children:"جاري الإلغاء..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(er,{className:"h-3 w-3 ml-1"}),"إلغاء التسجيل"]})})]})]})]})},A.id))})]}),u.length===0&&f.length===0&&p.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(cn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد طلبات أو حجوزات أو دورات"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"لم تقم بأي طلبات أو حجوزات أو تسجيل في دورات بعد"}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx($t,{to:"/ads",children:a.jsxs(G,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(md,{className:"h-4 w-4"}),"تصفح المنتجات"]})}),a.jsx($t,{to:"/consultations",children:a.jsxs(G,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(ur,{className:"h-4 w-4"}),"حجز استشارة"]})}),a.jsx($t,{to:"/courses",children:a.jsxs(G,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(Cr,{className:"h-4 w-4"}),"تصفح الدورات"]})})]})]})]})]})})})]}):null},gu=({icon:n,label:t,value:r,name:s,isEditing:i,onChange:o,placeholder:l="",type:c="text",disabled:u=!1})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx(n,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),i&&!u?a.jsx("input",{type:c,name:s,value:r,onChange:o,className:"w-full pl-3 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:l}):a.jsx("p",{className:`w-full pl-3 pr-12 py-3 rounded-lg text-right ${u?"bg-gray-100 text-gray-500":"bg-gray-50"}`,children:r||a.jsx("span",{className:"text-gray-400",children:l})})]})]}),LB=()=>{const n=Rt(),{user:t,updateUser:r,loading:s}=dt(),{toast:i}=dh(),[o,l]=I.useState({name:"",username:"",phone:"",email:""}),[c,u]=I.useState(""),[d,f]=I.useState(!1);I.useEffect(()=>{t&&(l({name:t.displayName||"",username:t.username||"",phone:t.phone||"",email:t.email||""}),u(t.photoURL||""))},[t]);const m=T=>{const{name:j,value:b}=T.target;l(v=>({...v,[j]:b}))},p=T=>{u(T)},y=async()=>{if(console.log("=== HANDLE SAVE CHANGES START ==="),console.log("Current user:",t),console.log("Form data:",o),console.log("Profile image:",c),!t){console.error("❌ No user found"),i({title:"خطأ",description:"لم يتم العثور على بيانات المستخدم",variant:"destructive"});return}f(!0);try{console.log("🔄 Starting profile update...");const T={displayName:o.name,username:o.username,phone:o.phone,photoURL:c};if(console.log("📝 Updated data to save:",T),await r(T))console.log("✅ Profile update successful"),i({title:"تم حفظ التغييرات بنجاح",description:"تم تحديث بيانات الملف الشخصي"});else throw console.error("❌ Profile update failed - updateUser returned false"),new Error("فشل في حفظ التغييرات - لم يتم حفظ البيانات")}catch(T){console.error("❌ Error updating profile:",T),console.error("🔍 Error details:",{code:T.code,message:T.message,stack:T.stack});let j="حدث خطأ أثناء حفظ البيانات. يرجى المحاولة مرة أخرى";T.code==="auth/requires-recent-login"?j="يجب إعادة تسجيل الدخول لتحديث البيانات الشخصية":T.code==="permission-denied"?j="ليس لديك صلاحية لتحديث هذه البيانات":T.code==="auth/network-request-failed"?j="مشكلة في الاتصال بالإنترنت. تحقق من اتصالك وحاول مرة أخرى":T.code==="auth/too-many-requests"?j="تم تجاوز الحد المسموح من الطلبات. انتظر قليلاً وحاول مرة أخرى":T.message&&(j=T.message),i({title:"خطأ في حفظ التغييرات",description:j,variant:"destructive"})}finally{f(!1),console.log("🏁 Save changes process completed")}};if(s)return a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ar,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-green-600"}),a.jsx("p",{className:"text-gray-600",children:"جاري التحميل..."})]})});if(!t||t.role!=="admin"&&t.role!=="owner")return n("/unauthorized"),null;const w=(t==null?void 0:t.role)==="owner";return a.jsx("div",{className:`min-h-screen py-8 ${w?"bg-gradient-to-br from-yellow-50 via-orange-50 to-amber-50":"bg-gray-50"}`,children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>n("/admin"),className:`flex items-center gap-2 ${w?"hover:bg-yellow-100":""}`,children:[a.jsx(mN,{className:"h-4 w-4"}),"العودة للداشبورد"]}),a.jsxs("div",{children:[a.jsx("h1",{className:`text-2xl font-bold ${w?"text-yellow-800":"text-gray-900"}`,children:w?"👑 الملف الشخصي للمالك":"الملف الشخصي للأدمن"}),a.jsx("p",{className:`${w?"text-yellow-700":"text-gray-600"}`,children:w?"إدارة بيانات المالك - الصلاحيات الكاملة":"إدارة بيانات الحساب الشخصي"})]})]}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full ${w?"bg-gradient-to-r from-yellow-400 to-orange-400 text-yellow-900 shadow-lg":"bg-green-100 text-green-800"}`,children:[w?a.jsx(Un,{className:"h-4 w-4"}):a.jsx(kr,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:w?"👑 مالك النظام":"مدير النظام"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx(z.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:a.jsx("div",{className:`rounded-lg shadow-sm p-6 ${w?"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-yellow-300":"bg-white"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center justify-center gap-2 ${w?"text-yellow-800":"text-gray-900"}`,children:[w?a.jsx(Un,{className:"h-5 w-5"}):a.jsx(Se,{className:"h-5 w-5"}),w?"👑 الصورة الشخصية للمالك":"الصورة الشخصية"]}),a.jsx(YI,{currentImage:c,onImageChange:p,className:"mb-6"}),a.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[a.jsx("p",{children:"• يمكنك رفع صورة من جهازك"}),a.jsx("p",{children:"• أو استخدام رابط صورة من الإنترنت"}),a.jsx("p",{children:"• الحد الأقصى: 2 ميجابايت"})]})]})})}),a.jsxs(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-2",children:[a.jsxs("div",{className:`rounded-lg shadow-sm p-6 ${w?"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200":"bg-white"}`,children:[a.jsxs("h3",{className:`text-lg font-semibold mb-6 flex items-center gap-2 ${w?"text-yellow-800":"text-gray-900"}`,children:[w?a.jsx(Un,{className:"h-5 w-5"}):a.jsx(Se,{className:"h-5 w-5"}),w?"👑 بيانات المالك":"بيانات الحساب"]}),a.jsxs("form",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل *"}),a.jsx(Xe,{type:"text",name:"name",value:o.name,onChange:m,placeholder:"أدخل اسمك الكامل",required:!0,className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المستخدم"}),a.jsx(Xe,{type:"text",name:"username",value:o.username,onChange:m,placeholder:"أدخل اسم المستخدم",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),a.jsx(Xe,{type:"tel",name:"phone",value:o.phone,onChange:m,placeholder:"أدخل رقم الهاتف",className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx(Xe,{type:"email",name:"email",value:o.email,disabled:!0,className:"w-full bg-gray-50"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"لا يمكن تغيير البريد الإلكتروني"})]}),a.jsx("div",{className:"pt-6 border-t border-gray-200",children:a.jsx(G,{type:"button",onClick:y,disabled:d,className:`w-full text-white ${w?"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 shadow-lg":"bg-green-600 hover:bg-green-700"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"h-4 w-4 animate-spin ml-2"}),"جاري الحفظ..."]}):a.jsxs(a.Fragment,{children:[w?a.jsx(ra,{className:"h-4 w-4 ml-2"}):a.jsx(Os,{className:"h-4 w-4 ml-2"}),w?"💎 حفظ بيانات المالك":"حفظ التغييرات"]})})})]})]}),a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`mt-6 rounded-lg p-6 border ${w?"bg-gradient-to-r from-yellow-100 to-orange-100 border-yellow-300 shadow-lg":"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200"}`,children:[a.jsxs("h4",{className:`text-lg font-semibold mb-3 flex items-center gap-2 ${w?"text-yellow-800":"text-green-800"}`,children:[w?a.jsx(Un,{className:"h-5 w-5"}):a.jsx(kr,{className:"h-5 w-5"}),w?"👑 معلومات المالك":"معلومات المدير"]}),a.jsxs("div",{className:`space-y-2 text-sm ${w?"text-yellow-700":"text-green-700"}`,children:[a.jsxs("p",{children:[a.jsx("strong",{children:"الدور:"})," ",w?"مالك النظام":"مدير النظام"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"الصلاحيات:"})," ",w?"صلاحيات كاملة ومطلقة":"إدارة كاملة للموقع"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"تاريخ الإنشاء:"})," ",t.createdAt?new Date(t.createdAt.toDate()).toLocaleDateString("ar-EG"):"غير محدد"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"آخر تسجيل دخول:"})," ",t.lastLogin?new Date(t.lastLogin.toDate()).toLocaleDateString("ar-EG"):"غير محدد"]}),w&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mt-4 p-3 bg-yellow-200 rounded-lg border border-yellow-400",children:[a.jsxs("p",{className:"text-yellow-800 font-medium flex items-center gap-2",children:[a.jsx(q4,{className:"h-4 w-4"}),"صلاحيات خاصة للمالك:"]}),a.jsxs("ul",{className:"mt-2 text-sm space-y-1",children:[a.jsx("li",{children:"• إدارة جميع المستخدمين والمديرين"}),a.jsx("li",{children:"• عرض كلمات مرور المستخدمين"}),a.jsx("li",{children:"• إدارة كاملة للنظام"}),a.jsx("li",{children:"• صلاحيات مطلقة"})]})]})})]})]})]})]})]})})},VB=()=>{const n=Pn(),t=Rt(),{booking:r,order:s,type:i}=n.state||{};if(!r&&!s)return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"خطأ في عرض التأكيد"}),a.jsx("p",{className:"mb-4",children:"لا توجد معلومات لعرضها."}),a.jsx(G,{onClick:()=>t("/"),children:"العودة للرئيسية"})]});const o=i==="product",{service:l,customerInfo:c,appointmentDetails:u}=r||{},{product:d,customerInfo:f,orderDetails:m}=s||{};return je.useState(!1),a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsxs("title",{children:[o?"تم تأكيد الطلب":"تم تأكيد الحجز"," - أكاديمية الطب الأخضر"]}),a.jsx("meta",{name:"description",content:o?"صفحة تأكيد طلب المنتج الناجح في أكاديمية الطب الأخضر الإلكترونية.":"صفحة تأكيد الحجز الناجح في أكاديمية الطب الأخضر الإلكترونية."})]}),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center py-12 px-4",children:a.jsxs(z.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 md:p-12 text-center",children:[a.jsx(z.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},children:a.jsx(Ds,{className:"h-24 w-24 text-green-500 mx-auto mb-6"})}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:o?"تم الطلب بنجاح!":"تم الحجز بنجاح!"}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["شكراً لك، ",o?f==null?void 0:f.name:c==null?void 0:c.name,". لقد تم استلام ",o?"طلبك":"طلب حجزك"," وسنتواصل معك قريباً لتأكيده."]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-6 text-right space-y-4 mb-8 border border-green-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:o?"تفاصيل الطلب":"تفاصيل الحجز"}),o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse p-4 bg-white rounded-lg mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:d.imageURL||d.image||"/article-images/product1.jpg",alt:d.title||d.name,className:"w-full h-full object-cover",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:p=>{console.error("❌ خطأ في تحميل صورة المنتج:",p.target.src),p.target.src="/article-images/product1.jpg"}})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-gray-900 font-arabic",children:d.title||d.name}),a.jsx("div",{className:"text-sm text-gray-600 font-arabic",children:d.description}),a.jsx("div",{className:"text-green-700 font-bold font-arabic",children:typeof d.price=="number"?`${d.price} جنيه`:d.price})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gn,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"رقم الهاتف:"})," ",a.jsx("span",{className:"mr-2",children:f.phone})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ll,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"البريد الإلكتروني:"})," ",a.jsx("span",{className:"mr-2",children:f.email})]}),(m==null?void 0:m.notes)&&a.jsxs("div",{className:"flex items-start",children:[a.jsx(Se,{className:"ml-3 text-green-600 mt-1"})," ",a.jsx("strong",{children:"ملاحظات:"})," ",a.jsx("span",{className:"mr-2",children:m.notes})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Se,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"الخدمة:"})," ",a.jsx("span",{className:"mr-2",children:l.title})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"التاريخ المفضل:"})," ",a.jsx("span",{className:"mr-2",children:u.preferredDate})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(jn,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"الوقت المفضل:"})," ",a.jsx("span",{className:"mr-2",children:u.preferredTime})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gn,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"رقم الهاتف:"})," ",a.jsx("span",{className:"mr-2",children:c.phone})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ll,{className:"ml-3 text-green-600"})," ",a.jsx("strong",{children:"البريد الإلكتروني:"})," ",a.jsx("span",{className:"mr-2",children:c.email})]})]})]}),a.jsxs("p",{className:"text-gray-500 mb-8",children:["يمكنك متابعة حالة ",o?"طلبك":"حجزك"," من خلال ",a.jsx($t,{to:"/profile",className:"text-green-600 font-semibold hover:underline",children:"صفحتك الشخصية"}),"."]}),a.jsx("div",{className:"flex gap-3",children:a.jsx(G,{onClick:()=>t("/"),size:"lg",className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"العودة للصفحة الرئيسية"})})]})})]})},ns=({children:n,adminOnly:t=!1})=>{const{user:r,loading:s,isAdmin:i}=dt(),[o,l]=I.useState(!1),[c,u]=I.useState(!0);return I.useEffect(()=>{(async()=>{if(r&&t)try{const f=await i();console.log("🔒 Admin check result:",{userEmail:r.email,userRole:r.role,adminStatus:f,adminOnly:t}),l(f)}catch(f){console.error("Error checking admin status:",f),l(!1)}else l(!1);u(!1)})()},[r,t,i]),I.useEffect(()=>{r&&r.role&&(r.role==="admin"||r.role==="owner")&&l(!0)},[r]),console.log("🔒 ProtectedRoute Debug:",{loading:s,isChecking:c,user:r?{uid:r.uid,email:r.email,role:r.role,name:r.name}:null,adminOnly:t,isAdminState:o}),s||c?a.jsx("div",{children:"جاري التحميل..."}):r?t&&!o?(console.log("❌ Access denied:",{userRole:r.role,isAdminState:o,userEmail:r.email}),U({title:"الوصول مرفوض",description:"هذه الصفحة متاحة للمديرين والمالك فقط.",variant:"destructive"}),a.jsx(tw,{to:"/"})):(console.log("✅ Access granted for user:",r.email,"with role:",r.role,"isAdminState:",o),n):(console.log("❌ No user found, redirecting to auth"),U({title:"الوصول غير مسموح",description:"الرجاء تسجيل الدخول للمتابعة.",variant:"destructive"}),a.jsx(tw,{to:"/auth"}))},MB=()=>{var v,x;const{id:n}=jP(),t=Rt(),{user:r}=dt(),[s,i]=I.useState(null),[o,l]=I.useState(!0),[c,u]=I.useState(()=>JSON.parse(localStorage.getItem("articleLikes")||"{}")),[d,f]=I.useState(()=>JSON.parse(localStorage.getItem("articleComments")||"{}")),m=()=>r?`${r.email||r.id}_${r.id}`:null,p=N=>{if(!r)return!1;const P=m();return(c[N]||[]).some(S=>S===P||S===r.id||S===r.email)};I.useEffect(()=>{localStorage.setItem("articleLikes",JSON.stringify(c))},[c]),I.useEffect(()=>{localStorage.setItem("articleComments",JSON.stringify(d))},[d]);const y=N=>{if(!r){t("/auth");return}const P=m();P&&u(O=>{const S=O[N]||[];return S.some(C=>C===P||C===r.id||C===r.email)?O:{...O,[N]:[...S,P]}})},w=N=>{if(!r){t("/auth");return}const P=m();P&&u(O=>{const _=(O[N]||[]).filter(C=>C!==P&&C!==r.id&&C!==r.email);return{...O,[N]:_}})},T=(N,P)=>{if(!r){t("/auth");return}P.trim()&&f(O=>{const S=O[N]||[],_={id:Date.now(),user:r.name,text:P,date:new Date().toISOString(),replies:[]};return{...O,[N]:[...S,_]}})},j=(N,P,O)=>{!r||r.role!=="owner"||O.trim()&&f(S=>{const C=(S[N]||[]).map(R=>{if(R.id===P){const A={id:Date.now(),user:r.name,text:O,date:new Date().toISOString(),isOwnerReply:!0};return{...R,replies:[...R.replies||[],A]}}return R});return{...S,[N]:C}})},b=(N,P)=>{r&&f(O=>{const S=O[N]||[];return{...O,[N]:S.filter(_=>_.id!==P)}})};return I.useEffect(()=>{n&&(async()=>{try{console.log("جلب تفاصيل المقال من Firebase:",n);const P=Ie(le,"articles",n),O=await mi(P);if(O.exists()){const S={id:O.id,...O.data()};console.log("تم جلب المقال:",S),i(S)}else console.log("لم يتم العثور على المقال"),i(null)}catch(P){console.error("خطأ في جلب المقال:",P),i(null)}finally{l(!1)}})()},[n]),o?a.jsx("div",{className:"flex justify-center items-center h-screen",children:"جاري تحميل المقال..."}):s?a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsxs("title",{children:[s.title," - أكاديمية الطب الأخضر"]}),a.jsx("meta",{name:"description",content:s.excerpt})]}),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx("div",{className:"mb-8",children:a.jsxs($t,{to:"/articles",className:"inline-flex items-center text-green-600 hover:text-green-800 transition-colors",children:[a.jsx(N4,{className:"h-5 w-5"}),a.jsx("span",{className:"mr-2",children:"العودة للمقالات"})]})}),a.jsxs("article",{className:"bg-white rounded-2xl shadow-lg overflow-hidden p-8",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 font-heading",children:s.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-500 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(Se,{className:"h-4 w-4"}),a.jsx("span",{children:s.author})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(ur,{className:"h-4 w-4"}),a.jsx("span",{children:new Date(s.date).toLocaleDateString("ar-EG")})]}),s.readTime&&a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:[s.readTime," قراءة"]})]})]}),(s.imageURL||s.image)&&a.jsx("div",{className:"relative h-64 md:h-80 w-full mb-8 rounded-lg overflow-hidden",children:a.jsx("img",{src:s.imageURL||s.image,alt:s.title,className:"w-full h-full object-cover",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{console.log("✅ تم تحميل صورة تفاصيل المقال بنجاح:",s.imageURL||s.image)},onError:N=>{console.error("❌ خطأ في تحميل صورة تفاصيل المقال:",s.imageURL||s.image),N.target.style.display="none"}})}),a.jsx("div",{className:"prose prose-lg max-w-none text-right",dangerouslySetInnerHTML:{__html:s.content}})]}),a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"bg-white rounded-2xl shadow-lg p-8 mt-8",children:[a.jsxs("div",{className:"flex items-center gap-6 mb-6 pb-4 border-b border-green-100",children:[a.jsxs("button",{className:`flex items-center gap-2 px-4 py-2 rounded-full border-2 shadow-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-300 text-lg hover:bg-green-50 ${p(s.id)?"bg-green-100 text-green-700 border-green-400":"bg-white text-gray-500 border-gray-300"}`,onClick:()=>p(s.id)?w(s.id):y(s.id),title:r?p(s.id)?"إلغاء الإعجاب":"إعجبني":"سجل الدخول للتفاعل",children:[a.jsx(gN,{className:`w-6 h-6 ${p(s.id)?"fill-green-600":""}`}),a.jsx("span",{className:"font-bold",children:((v=c[s.id])==null?void 0:v.length)||0})]}),a.jsxs("span",{className:"flex items-center gap-2 text-green-700 bg-green-50 rounded-full px-4 py-2 text-lg font-bold shadow-sm",children:[a.jsx(Ue,{className:"w-6 h-6"}),((x=d[s.id])==null?void 0:x.length)||0]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 font-heading",children:"التعليقات"}),r?a.jsxs("form",{className:"flex gap-3 items-center bg-green-50 border border-green-100 rounded-xl px-4 py-3 shadow-sm mb-6",onSubmit:N=>{N.preventDefault();const P=N.target.elements["new-comment"].value;T(s.id,P),N.target.reset()},children:[a.jsx("input",{name:"new-comment",type:"text",placeholder:"اكتب تعليقك...",className:"flex-1 border-none bg-transparent focus:ring-0 text-lg"}),a.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold transition-all",children:"تعليق"})]}):a.jsxs("div",{className:"text-center text-gray-500 mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-lg",children:"سجل الدخول للتعليق أو الإعجاب"}),a.jsx("button",{onClick:()=>t("/auth"),className:"mt-2 bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold transition-all",children:"تسجيل الدخول"})]}),a.jsx("div",{className:"space-y-4",children:(d[s.id]||[]).length===0?a.jsxs("div",{className:"text-center text-gray-400 py-8",children:[a.jsx(Ue,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"لا توجد تعليقات بعد. كن أول من يعلق!"})]}):(d[s.id]||[]).map(N=>a.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-xl p-4 text-right",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-bold text-green-800",children:N.user}),a.jsx("span",{className:"text-sm text-gray-400",children:new Date(N.date).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"text-gray-700 text-lg",children:N.text}),a.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[(r==null?void 0:r.name)===N.user&&a.jsxs("button",{className:"text-red-400 hover:text-red-600 transition-colors text-sm flex items-center gap-1",onClick:()=>b(s.id,N.id),children:[a.jsx(yn,{className:"w-4 h-4"}),"حذف التعليق"]}),(r==null?void 0:r.role)==="owner"&&a.jsxs("button",{className:"text-blue-600 hover:text-blue-800 transition-colors text-sm flex items-center gap-1",onClick:()=>{const P=document.getElementById(`reply-input-${N.id}`);P&&(P.style.display=P.style.display==="none"?"flex":"none",P.style.display==="flex"&&P.focus())},children:[a.jsx(Ue,{className:"w-4 h-4"}),"رد"]})]}),(r==null?void 0:r.role)==="owner"&&a.jsxs("form",{id:`reply-input-${N.id}`,className:"hidden flex gap-2 mt-3 items-center bg-blue-50 border border-blue-100 rounded-xl px-3 py-2 shadow-sm",onSubmit:P=>{P.preventDefault();const O=P.target.elements[`reply-${N.id}`].value;j(s.id,N.id,O),P.target.reset(),P.target.style.display="none"},children:[a.jsx("input",{name:`reply-${N.id}`,type:"text",placeholder:"اكتب ردك...",className:"flex-1 border-none bg-transparent focus:ring-0 text-sm"}),a.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded-lg font-bold transition-all text-sm",children:"رد"}),a.jsx("button",{type:"button",onClick:()=>{e.target.style.display="none"},className:"text-gray-500 hover:text-gray-700 px-2 py-1 rounded-lg transition-all text-sm",children:"إلغاء"})]}),(N.replies||[]).length>0&&a.jsx("div",{className:"mt-3 space-y-2",children:N.replies.map(P=>a.jsxs("div",{className:`bg-white border rounded-lg p-3 mr-4 ${P.isOwnerReply?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("span",{className:`font-bold text-sm ${P.isOwnerReply?"text-blue-800":"text-gray-800"}`,children:[P.user,P.isOwnerReply&&a.jsx("span",{className:"ml-2 text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded-full",children:"مالك"})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(P.date).toLocaleDateString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:`text-sm ${P.isOwnerReply?"text-blue-700":"text-gray-700"}`,children:P.text})]},P.id))})]},N.id))})]})]})]})})})]}):a.jsx("div",{className:"flex justify-center items-center h-screen",children:"لم يتم العثور على المقال."})},FB=()=>{const{user:n,isAuthenticated:t}=dt(),r=Rt(),[s,i]=I.useState([]),[o,l]=I.useState(["الكل"]),[c,u]=I.useState(""),[d,f]=I.useState("الكل"),[m,p]=I.useState(!0),[y,w]=I.useState(!1),T=async()=>{try{console.log("🔄 جاري جلب المنتجات من Firebase...");const N=rt(le,"products"),O=(await tn(N)).docs.map(_=>({id:_.id,..._.data()}));console.log("✅ تم جلب المنتجات:",O);const S=O.map(_=>!_.categories||!Array.isArray(_.categories)?{..._,categories:_.categoryName?[_.categoryName]:_.category?[_.category]:["منتجات عامة"]}:_);console.log("✅ تم معالجة المنتجات:",S),i(S)}catch(N){console.error("❌ خطأ في جلب المنتجات:",N);const P=[{id:"mock1",name:"منتج عشبي طبيعي",price:150,imageURL:"/article-images/product1.jpg",categories:["منتجات عشبية"],description:"منتج طبيعي عالي الجودة"},{id:"mock2",name:"زيت طبيعي أصلي",price:200,imageURL:"/article-images/product1.jpg",categories:["زيوت طبيعية"],description:"زيت طبيعي 100% أصلي"},{id:"mock3",name:"مكمل غذائي عضوي",price:120,imageURL:"/article-images/product1.jpg",categories:["مكملات غذائية"],description:"مكمل غذائي طبيعي وآمن"}];console.log("📝 استخدام بيانات وهمية:",P),i(P)}},j=()=>n&&(n.role==="admin"||n.role==="owner")?(w(!0),!1):!0,b=async()=>{try{console.log("🔄 جاري جلب التصنيفات من Firebase...");const N=rt(le,"categories"),O=(await tn(N)).docs.map(S=>S.data().name);console.log("✅ تم جلب التصنيفات:",O),l(["الكل",...O])}catch(N){console.error("❌ خطأ في جلب التصنيفات:",N);const P=["الكل","منتجات عشبية","زيوت طبيعية","مكملات غذائية","منتجات عامة"];console.log("📝 استخدام تصنيفات افتراضية:",P),l(P)}};I.useEffect(()=>{(async()=>{console.log("🚀 بدء تحميل بيانات صفحة الإعلانات..."),p(!0);try{await Promise.all([T(),b()]),console.log("✅ تم تحميل جميع البيانات بنجاح")}catch(P){console.error("❌ خطأ في تحميل البيانات:",P)}finally{p(!1),console.log("🏁 انتهى تحميل البيانات")}})()},[]);const v=s.filter(N=>{let P=d==="الكل";if(!P)if(N.categories&&Array.isArray(N.categories))P=N.categories.includes(d);else if(N.categoryName)P=N.categoryName===d;else if(N.categoryId){const S=o.find(_=>_.id===N.categoryId);P=S&&S.name===d}else N.category&&(P=N.category===d);const O=(N.name||N.title||"").toLowerCase().includes(c.toLowerCase());return d!=="الكل"&&!P?console.log(`❌ ${N.name} لا يطابق تصنيف "${d}"`,{categories:N.categories,categoryName:N.categoryName,categoryId:N.categoryId,category:N.category}):d!=="الكل"&&P&&console.log(`✅ ${N.name} يطابق تصنيف "${d}"`),P&&O}),x=N=>{if(!t()){U({title:"تسجيل الدخول مطلوب",description:"يجب عليك تسجيل الدخول لشراء المنتجات.",variant:"destructive"}),r("/auth",{state:{from:"/ads"}});return}if(j()){if((N.stockQuantity||0)<=0){U({title:"المنتج غير متاح",description:"عذراً، هذا المنتج نفذ من المخزون.",variant:"destructive"});return}r("/checkout",{state:{product:N,type:"product"}})}};return a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"الإعلانات - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"منتجات طبيعية وعروض خاصة من أكاديمية الطب الأخضر"})]}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx("section",{className:"bg-gradient-to-r from-green-600 to-green-800 py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(z.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center text-white",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 font-arabic",children:"إعلانات ومنتجات مميزة"}),a.jsx("p",{className:"text-xl text-green-100 max-w-3xl mx-auto font-arabic",children:"مجموعة مختارة من المنتجات الطبيعية والعروض الخاصة"})]})})}),a.jsx("section",{className:"py-8 bg-white shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(rc,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"}),a.jsx(Xe,{type:"text",placeholder:"ابحث عن منتج...",value:c,onChange:N=>u(N.target.value),className:"w-full pl-4 pr-12 py-3 text-right"})]})}),a.jsx("div",{className:"flex flex-wrap gap-3 justify-center mt-6",children:o.map(N=>a.jsx(G,{variant:d===N?"default":"outline",className:`font-arabic px-6 py-2 rounded-full border-2 ${d===N?"bg-green-600 text-white border-green-600":"bg-white text-green-700 border-green-600 hover:bg-green-50"}`,onClick:()=>f(N),children:N},N))})]})}),a.jsx("section",{className:"py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m?a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 font-arabic",children:"جاري تحميل المنتجات..."})]})}):v.length===0?a.jsx(qi,{type:"products",title:"لا توجد منتجات",description:c||d!=="الكل"?"لم يتم العثور على منتجات تطابق البحث الحالي. جرب تغيير كلمات البحث أو التصنيف.":"لم يتم إضافة أي منتجات بعد. تحقق من هذه الصفحة لاحقاً للحصول على أحدث المنتجات الطبيعية.",actionText:c||d!=="الكل"?"إعادة تعيين البحث":"العودة للصفحة الرئيسية",onAction:()=>{u(""),f("الكل")}}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:v.map((N,P)=>a.jsxs(z.article,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:P*.1},className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"relative h-48 overflow-hidden",children:[a.jsx("img",{className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",alt:N.name||N.title,src:N.imageURL||N.image||"/article-images/product1.jpg",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{console.log("✅ تم تحميل صورة المنتج:",N.name||N.title)},onError:O=>{console.error("❌ خطأ في تحميل الصورة:",O.target.src),console.log("🔄 استخدام الصورة الافتراضية"),O.target.src="/article-images/product1.jpg"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]}),a.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3 font-arabic line-clamp-2",children:N.name||N.title}),N.description&&a.jsx("p",{className:"text-gray-600 mb-3 font-arabic text-sm line-clamp-2",children:N.description}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("p",{className:"text-green-700 font-bold font-arabic text-lg",children:typeof N.price=="number"?`${N.price} جنيه`:N.price}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(N.stockQuantity||0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[N.stockQuantity||0," قطعة متاحة"]})]}),N.categories&&N.categories.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:N.categories.slice(0,2).map((O,S)=>a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-arabic",children:O},S))}),a.jsx(G,{variant:"default",size:"lg",className:"bg-green-600 hover:bg-green-700 text-white mt-auto",onClick:()=>x(N),children:t()?a.jsxs(a.Fragment,{children:[a.jsx(md,{className:"h-5 w-5 ml-2"}),"شراء المنتج"]}):a.jsxs(a.Fragment,{children:[a.jsx(Se,{className:"h-5 w-5 ml-2"}),"تسجيل الدخول للشراء"]})})]})]},N.id))})})}),y&&a.jsx(Wh,{title:"غير مسموح للمشرفين",description:"عذراً، لا يمكن للمشرفين والملاك شراء المنتجات. هذه الميزة متاحة للمستخدمين العاديين فقط.",onBackClick:()=>w(!1)})]})]})},UB=()=>{const{user:n}=dt(),[t,r]=I.useState([]),[s,i]=I.useState(!0),[o,l]=I.useState("");I.useEffect(()=>{(()=>{try{const w=JSON.parse(localStorage.getItem("orders")||"[]");r(w)}catch(w){console.error("Error loading orders:",w),r([])}finally{i(!1)}})()},[]);const c=(y,w)=>{const T=t.map(j=>j.id===y?{...j,status:w}:j);r(T),localStorage.setItem("orders",JSON.stringify(T)),U({title:"تم تحديث حالة الطلب",description:`تم تغيير حالة الطلب إلى ${f(w)}`})},u=y=>{if(window.confirm("هل أنت متأكد من حذف هذا الطلب؟")){const w=t.filter(T=>T.id!==y);r(w),localStorage.setItem("orders",JSON.stringify(w)),U({title:"تم حذف الطلب",description:"تم حذف الطلب بنجاح"})}},d=y=>{switch(y){case"pending":return a.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs",children:"معلق"});case"confirmed":return a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:"مؤكد"});case"delivered":return a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:"تم التوصيل"});case"cancelled":return a.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs",children:"ملغي"});default:return a.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs",children:"غير محدد"})}},f=y=>{switch(y){case"pending":return"معلق";case"confirmed":return"مؤكد";case"delivered":return"تم التوصيل";case"cancelled":return"ملغي";default:return"غير محدد"}},m=y=>{switch(y){case"pending":return a.jsx(jn,{className:"h-4 w-4 text-yellow-600"});case"confirmed":return a.jsx(Ds,{className:"h-4 w-4 text-blue-600"});case"delivered":return a.jsx(Ds,{className:"h-4 w-4 text-green-600"});case"cancelled":return a.jsx(er,{className:"h-4 w-4 text-red-600"});default:return a.jsx(cn,{className:"h-4 w-4 text-gray-600"})}},p=t.filter(y=>{const w=o.toLowerCase();return(y.userName||"").toLowerCase().includes(w)||(y.userEmail||"").toLowerCase().includes(w)||y.id.toLowerCase().includes(w)});return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"إدارة الطلبات - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"إدارة الطلبات في أكاديمية الطب الأخضر الإلكترونية"})]}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx(Gh,{userName:n==null?void 0:n.name}),a.jsx("section",{className:"py-6 sm:py-8",children:a.jsx("div",{className:"container-responsive",children:a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(cn,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 font-arabic",children:"إدارة الطلبات"}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:"إدارة طلبات المنتجات والشحنات"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic",children:["إجمالي الطلبات: ",t.length]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(rc,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"البحث في الطلبات...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),p.length===0?a.jsx(qi,{icon:cn,title:"لا يوجد طلبات",description:"لم يتم العثور على أي طلبات في النظام"}):a.jsx("div",{className:"space-y-4",children:p.map(y=>a.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(cn,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900 font-arabic",children:["طلب #",y.id]}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:y.userName||"مستخدم غير محدد"}),a.jsx("p",{className:"text-sm text-gray-500 font-arabic",children:y.userEmail||"بريد إلكتروني غير محدد"}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[m(y.status),d(y.status)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsxs("select",{value:y.status,onChange:w=>c(y.id,w.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"confirmed",children:"مؤكد"}),a.jsx("option",{value:"delivered",children:"تم التوصيل"}),a.jsx("option",{value:"cancelled",children:"ملغي"})]}),a.jsx(G,{variant:"destructive",size:"sm",onClick:()=>u(y.id),className:"text-red-600 hover:text-red-700",children:a.jsx(er,{className:"h-4 w-4"})})]})]})},y.id))})]})]})})})]})]})},$B=()=>{const{user:n}=dt(),[t,r]=I.useState([]),[s,i]=I.useState(!0),[o,l]=I.useState("");I.useEffect(()=>{(()=>{try{const w=JSON.parse(localStorage.getItem("consultations")||"[]");r(w)}catch(w){console.error("Error loading consultations:",w),r([])}finally{i(!1)}})()},[]);const c=(y,w)=>{const T=t.map(j=>j.id===y?{...j,status:w}:j);r(T),localStorage.setItem("consultations",JSON.stringify(T)),U({title:"تم تحديث حالة الاستشارة",description:`تم تغيير حالة الاستشارة إلى ${f(w)}`})},u=y=>{if(window.confirm("هل أنت متأكد من حذف هذه الاستشارة؟")){const w=t.filter(T=>T.id!==y);r(w),localStorage.setItem("consultations",JSON.stringify(w)),U({title:"تم حذف الاستشارة",description:"تم حذف الاستشارة بنجاح"})}},d=y=>{switch(y){case"pending":return a.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs",children:"معلق"});case"in_progress":return a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:"قيد المعالجة"});case"completed":return a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:"مكتمل"});case"cancelled":return a.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs",children:"ملغي"});default:return a.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs",children:"غير محدد"})}},f=y=>{switch(y){case"pending":return"معلق";case"in_progress":return"قيد المعالجة";case"completed":return"مكتمل";case"cancelled":return"ملغي";default:return"غير محدد"}},m=y=>{switch(y){case"pending":return a.jsx(jn,{className:"h-4 w-4 text-yellow-600"});case"in_progress":return a.jsx(Ue,{className:"h-4 w-4 text-blue-600"});case"completed":return a.jsx(Ds,{className:"h-4 w-4 text-green-600"});case"cancelled":return a.jsx(er,{className:"h-4 w-4 text-red-600"});default:return a.jsx(Ue,{className:"h-4 w-4 text-gray-600"})}},p=t.filter(y=>{const w=o.toLowerCase();return(y.userName||"").toLowerCase().includes(w)||(y.userEmail||"").toLowerCase().includes(w)||(y.symptoms||"").toLowerCase().includes(w)||y.id.toLowerCase().includes(w)});return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"إدارة الاستشارات - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"إدارة الاستشارات في أكاديمية الطب الأخضر الإلكترونية"})]}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx(Gh,{userName:n==null?void 0:n.name}),a.jsx("section",{className:"py-6 sm:py-8",children:a.jsx("div",{className:"container-responsive",children:a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Ue,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 font-arabic",children:"إدارة الاستشارات"}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:"إدارة استشارات المرضى والرد عليها"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic",children:["إجمالي الاستشارات: ",t.length]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(rc,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"البحث في الاستشارات...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),p.length===0?a.jsx(qi,{icon:Ue,title:"لا يوجد استشارات",description:"لم يتم العثور على أي استشارات في النظام"}):a.jsx("div",{className:"space-y-4",children:p.map(y=>a.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Ue,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900 font-arabic",children:["استشارة #",y.id]}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:y.userName||"مستخدم غير محدد"}),a.jsx("p",{className:"text-sm text-gray-500 font-arabic",children:y.userEmail||"بريد إلكتروني غير محدد"}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[m(y.status),d(y.status)]}),y.symptoms&&a.jsxs("p",{className:"text-xs text-gray-500 font-arabic mt-1",children:[y.symptoms.substring(0,100),"..."]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsxs("select",{value:y.status,onChange:w=>c(y.id,w.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"in_progress",children:"قيد المعالجة"}),a.jsx("option",{value:"completed",children:"مكتمل"}),a.jsx("option",{value:"cancelled",children:"ملغي"})]}),a.jsx(G,{variant:"destructive",size:"sm",onClick:()=>u(y.id),className:"text-red-600 hover:text-red-700",children:a.jsx(er,{className:"h-4 w-4"})})]})]})},y.id))})]})]})})})]})]})},BB=()=>{const{user:n}=dt(),[t,r]=I.useState([]),[s,i]=I.useState(!0);I.useEffect(()=>{(()=>{try{const m=JSON.parse(localStorage.getItem("users")||"[]");r(m)}catch(m){console.error("Error loading users:",m),r([])}finally{i(!1)}})()},[]);const o=(f,m)=>{const p=t.map(y=>y.id===f?{...y,role:m}:y);r(p),localStorage.setItem("users",JSON.stringify(p)),U({title:"تم تحديث دور المستخدم",description:`تم تغيير دور المستخدم إلى ${m==="admin"?"مدير":m==="owner"?"مالك":"مستخدم"}`})},l=f=>{if(window.confirm("هل أنت متأكد من حذف هذا المستخدم؟")){const m=t.filter(p=>p.id!==f);r(m),localStorage.setItem("users",JSON.stringify(m)),U({title:"تم حذف المستخدم",description:"تم حذف المستخدم بنجاح"})}},c=f=>{switch(f){case"owner":return a.jsx(Un,{className:"h-4 w-4 text-yellow-600"});case"admin":return a.jsx(kr,{className:"h-4 w-4 text-blue-600"});default:return a.jsx(Se,{className:"h-4 w-4 text-gray-600"})}},u=f=>{switch(f){case"owner":return"مالك الموقع";case"admin":return"مدير";default:return"مستخدم"}},d=f=>{switch(f){case"owner":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):a.jsxs(a.Fragment,{children:[a.jsxs(wt,{children:[a.jsx("title",{children:"إدارة المستخدمين - أكاديمية الطب الأخضر الإلكترونية"}),a.jsx("meta",{name:"description",content:"إدارة المستخدمين في أكاديمية الطب الأخضر الإلكترونية"})]}),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50",children:[a.jsx(Gh,{userName:n==null?void 0:n.name}),a.jsx("section",{className:"py-6 sm:py-8",children:a.jsx("div",{className:"container-responsive",children:a.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Sn,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 font-arabic",children:"إدارة المستخدمين"}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:"إدارة حسابات المستخدمين وصلاحياتهم"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500 font-arabic",children:["إجمالي المستخدمين: ",t.length]})]})}),a.jsx("div",{className:"p-6",children:t.length===0?a.jsx(qi,{icon:Sn,title:"لا يوجد مستخدمين",description:"لم يتم العثور على أي مستخدمين في النظام"}):a.jsx("div",{className:"space-y-4",children:t.map(f=>{var m;return a.jsx(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Se,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 font-arabic",children:f.name||f.displayName||((m=f.email)==null?void 0:m.split("@")[0])}),a.jsx("p",{className:"text-sm text-gray-600 font-arabic",children:f.email}),a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[c(f.role),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${d(f.role)}`,children:u(f.role)})]})]})]}),a.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:f.role!=="owner"&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{value:f.role,onChange:p=>o(f.id,p.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"user",children:"مستخدم"}),a.jsx("option",{value:"admin",children:"مدير"}),(n==null?void 0:n.role)==="owner"&&a.jsx("option",{value:"owner",children:"مالك"})]}),a.jsx(G,{variant:"destructive",size:"sm",onClick:()=>l(f.id),className:"text-red-600 hover:text-red-700",children:a.jsx(B4,{className:"h-4 w-4"})})]})})]})},f.id)})})})]})})})]})]})};function zB(){return I.useEffect(()=>{zF()},[]),a.jsx(BF,{children:a.jsx(QP,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs("div",{className:"min-h-screen flex flex-col font-arabic",dir:"rtl",children:[a.jsx(c$,{}),a.jsx(u$,{}),a.jsx(f$,{}),a.jsx(a$,{}),a.jsx("main",{className:"flex-1",children:a.jsxs(BP,{children:[a.jsx(st,{path:"/",element:a.jsx(lB,{})}),a.jsx(st,{path:"/articles",element:a.jsx(cB,{})}),a.jsx(st,{path:"/articles/:id",element:a.jsx(MB,{})}),a.jsx(st,{path:"/consultations",element:a.jsx(uB,{})}),a.jsx(st,{path:"/courses",element:a.jsx(mB,{})}),a.jsx(st,{path:"/auth",element:a.jsx(Nm,{})}),a.jsx(st,{path:"/login",element:a.jsx(Nm,{})}),a.jsx(st,{path:"/signup",element:a.jsx(Nm,{})}),a.jsx(st,{path:"/about",element:a.jsx(jB,{})}),a.jsx(st,{path:"/ads",element:a.jsx(FB,{})}),a.jsx(st,{path:"/checkout",element:a.jsx(ns,{children:a.jsx(vB,{})})}),a.jsx(st,{path:"/booking-confirmation",element:a.jsx(ns,{children:a.jsx(VB,{})})}),a.jsx(st,{path:"/profile",element:a.jsx(ns,{children:a.jsx(OB,{})})}),a.jsx(st,{path:"/admin",element:a.jsx(ns,{adminOnly:!0,children:a.jsx(NB,{})})}),a.jsx(st,{path:"/admin/profile",element:a.jsx(ns,{adminOnly:!0,children:a.jsx(LB,{})})}),a.jsx(st,{path:"/admin/users",element:a.jsx(ns,{adminOnly:!0,children:a.jsx(BB,{})})}),a.jsx(st,{path:"/admin/orders",element:a.jsx(ns,{adminOnly:!0,children:a.jsx(UB,{})})}),a.jsx(st,{path:"/admin/consultations",element:a.jsx(ns,{adminOnly:!0,children:a.jsx($B,{})})})]})}),a.jsx(l$,{}),a.jsx(Y4,{})]})})})}const qB=()=>{const n=window.fetch;window.fetch=function(...s){const i=s[0];return typeof i=="string"&&(i.includes("google-analytics.com")||i.includes("googletagmanager.com")||i.includes("google-analytics"))?Promise.resolve(new Response("",{status:200})):n.apply(this,s)};const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(s,i,...o){if(!(typeof i=="string"&&(i.includes("google-analytics.com")||i.includes("googletagmanager.com"))))return t.apply(this,[s,i,...o])};const r=console.error;console.error=function(...s){const i=s[0];if(!(typeof i=="string"&&(i.includes("google-analytics")||i.includes("Failed to fetch")||i.includes("ERR_NAME_NOT_RESOLVED"))))return r.apply(this,s)}},HB=()=>{window.addEventListener("unhandledrejection",n=>{const t=n.reason;t&&t.message&&(t.message.includes("Failed to fetch")||t.message.includes("ERR_NAME_NOT_RESOLVED")||t.message.includes("NetworkError"))&&(n.preventDefault(),console.log("تم تجاهل خطأ شبكة غير مهم"))}),window.addEventListener("error",n=>{const t=n.target;t&&t.tagName==="IMG"&&(t.src="/placeholder-image.png",t.alt="صورة غير متاحة")},!0)};qB();HB();jm.createRoot(document.getElementById("root")).render(a.jsx(je.StrictMode,{children:a.jsx(zB,{})}));
